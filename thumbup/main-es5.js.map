{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/components/canvas/canvas.component.service.ts","webpack:///src/app/components/canvas/canvas.component.ts","webpack:///src/app/components/canvas/canvas.component.html","webpack:///src/app/components/control/control-pannel.component.ts","webpack:///src/app/components/control/control-pannel.component.html","webpack:///src/app/components/control/drawing/drawing-control-factory.ts","webpack:///src/app/components/control/drawing/drawing-control.component.ts","webpack:///src/app/components/control/drawing/drawing-control.component.html","webpack:///src/app/components/control/filter/color-filter-control.ts","webpack:///src/app/components/control/filter/color-filter-control.html","webpack:///src/app/components/control/filter/filter-control-factory.ts","webpack:///src/app/components/control/image-drawing/image-drawing-control.component.ts","webpack:///src/app/components/control/image-drawing/image-drawing-control.component.html","webpack:///src/app/components/control/layer/layer-control-item.component.ts","webpack:///src/app/components/control/layer/layer-control-item.component.html","webpack:///src/app/components/control/layer/layer-control.component.ts","webpack:///src/app/components/control/layer/layer-control.component.html","webpack:///src/app/components/control/movable/movable-control.component.ts","webpack:///src/app/components/control/movable/movable-control.component.html","webpack:///src/app/components/control/text-drawing/text-drawing-control.component.ts","webpack:///src/app/components/control/text-drawing/text-drawing-control.component.html","webpack:///src/app/components/image-drawing/image-drawing.component.ts","webpack:///src/app/components/image-drawing/image-drawing.component.html","webpack:///src/app/components/movable/movable.component.ts","webpack:///src/app/components/movable/movable.component.html","webpack:///src/app/components/text-drawing/text-drawing.component.ts","webpack:///src/app/model/canvas.ts","webpack:///src/app/model/drawing-filter.ts","webpack:///src/app/model/drawing.ts","webpack:///src/app/model/edit-stack.ts","webpack:///src/app/model/image-drawing.ts","webpack:///src/app/model/movable.ts","webpack:///src/app/model/text-drawing.ts","webpack:///src/app/service/canvas.service.ts","webpack:///src/app/service/command.service.ts","webpack:///src/app/util/constants.ts","webpack:///src/app/util/image-filter.ts","webpack:///src/app/util/mat2.ts","webpack:///src/app/util/mat3.ts","webpack:///src/app/util/mat4.ts","webpack:///src/app/util/quat.ts","webpack:///src/app/util/vec2.ts","webpack:///src/app/util/vec3.ts","webpack:///src/app/util/vec4.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","AppComponent","canvasService_","title","movable","canvas","provide","useClass","selector","templateUrl","styleUrls","providers","AppModule","declarations","imports","bootstrap","CanvasComponentService","CanvasComponent","injector_","canvasComponentService_","commandService_","componentFactoryResolver_","subs_","onDidChangeFocusedDrawing","onDidChangeCamera","drawingComponents_","drawingComponentRefs_","focusedDrawing_","cameraX_","cameraY_","cameraZoom_","canvasComponent","moveCamera","bind","focusedDrawing","dispatch","drawing","forEach","sub","unsubscribe","i","drawings","length","createDrawingComponent","push","onDidAddDrawing","subscribe","index","onDidReorderDrawing","j","tmp1","tmp2","drawingComponents","onWillRemoveDrawing","blurAll","splice","destroy","containerRef_","nativeElement","addEventListener","onMouseWheel","factory","type","resolveComponentFactory","componentRef","drawingContainerRef_","createComponent","instance","drawingComponent","movableComponent","focus","emit","guiPortal","guiContent","viewContainerRef","blur","button","element","target","movableId","HTMLElement","tagName","toLowerCase","getAttribute","parentElement","getDrawingComponentByMovableId","focusDrawingComponent","preventDefault","lastMousePosition_","screenX","screenY","window","mouseup","removeEventListener","pos","pageX","pageY","dvec2","fromPageToCanvas","delta","deltaY","detail","lastZoom","cameraZoom","dz","dx","scale","cameraX","x","cameraY","y","position","subtract","vec","center","offsetWidth","offsetHeight","cs","copy","Math","round","width","height","transform","cvs","document","createElement","tmpCvs","ctx","getContext","tmpCtx","fillStyle","fillRect","w","h","render","save","translate","rotate","rad","drawImage","restore","toDataURL","v","min","max","onMousedown","read","ControlPannelComponent","canvasWidth","canvasHeight","onDidChangeSize","canvasZoom","updateFocusedDrawing","ww","undefined","hh","value","file","files","reader","FileReader","image","Image","src","result","onload","imageDrawing","readAsDataURL","addTextDrawing","addImageDrawing","onChangeCanvasSize","onChangeCanvasZoom","DrawingControlFactory","resolver","container","injector","component","DrawingControlComponent","filter","changes","createDrawingControl","createFilterControl","onDidChangeFilter","drawingControl_","comp","create","drawingControlContainer_","filterControl_","filterControlContainer_","ColorFilterControlComponent","r","g","b","o","console","log","sub_","onUpdate","onInput","onChange","$event","FilterControlFactory","ImageDrawingControlComponent","invertX","invertY","onDidDirty","onChangeInvert","checked","LayerControlItemComponent","active","LayerControlComponent","getDrawingIndex","replace","link","getElementById","setAttribute","click","onMoveUpClick","onMoveDownClick","onRemoveClick","onSaveClick","MovableControlComponent","onDidChange","onChangePosition","onChangeSize","TextDrawingControlComponent","text","size","font","color_","color","onDidChangeText","onChangeText","onBlur","onChangeFont","onColorChange","ImageDrawingComponent","cvs_","canvasRef_","ctx_","onDidUpdate","localRender","pipe","trailing","abs","img","apply","changeDetection","OnPush","MovableComponent","changeRef","focused","centerVec","sizeVec","thumbTL","thumbTR","thumbBL","thumbBR","thumbBC","thumbCR","updateResizeUL","updateResize","updateResizeUR","updateResizeBL","updateResizeBR","updateTranslate","updateRotate","update","srcRotationMat_","rotation","srcRrotationMat_","markForCheck","zoom","zoomVec","multiply","xy","add","thumb","ct","stopProp","stopPropagation","srcMousePosition_","srcMovableState_","currentMosuePosition","dp","nx","ny","command","resizeFunc","srcMovableRotate_","saveSrcRotation","multiplier","local_dp","multiplyMat2","aspect","projection","z","normalize","dot","newLocalUL","newLocalBR","newLocalCenter","newCenter","newUL","newBR","newSize","nw","nh","nr","fromPageToCanvasScreen","atan2","deg","PI","from","to","angle","startTranslate","TextDrawingComponent","textBaseline","fillText","template","CanvasCommand","CanvasAddStackElementCommand","editStack","pushStackElement","CanvasAddDrawingCommand","addDrawing","CanvasRemoveDrawingCommand","CanvasResizeCommand","inverse","hasDrawing","removeDrawing","CanvasReorderCommand","ii","jj","swapDrawing","Canvas","editStack_","drawings_","width_","height_","indexOf","tmp","reorder","pushEditCommand","isNaN","AbstractDrawingFilter","BlurDrawingFilter","boxFilter","ColorDrawingFilter","r_","g_","b_","o_","mixWithColor","ColorDawingFilterChangeCommand","GrayscaleDrawingFilter","grayScale","_FilterFactory","FilterFactory","__next_id","DrawingChangeFilterCommand","prev","Drawing","name","filterSub_","filter_","StackElement","commands","EditStack","past_","future_","currentStackElement_","execute","pastStackElement","pop","futureStackElemnet","futureStackElement","pastStackElemnet","ImageDrawingChangeInvertCommand","ImageDrawing","invertX_","invertY_","MovableResizeCommand","MovableTranslateCommand","MovableRotateCommand","__next_movable_id","Movable","onDidChangePosition","onDidChangeRotation","x_","y_","z_","w_","h_","rad_","aspect_","aspectRatio_","TextDrawingChangeTextCommand","TextDrawingChangeSizeCommand","TextDrawingChangeColorCommand","TextDrawingChangeFontCommand","TextMeasure","measureText","Measure","TextDrawing","disableDetectMovableChange_","font_","scaleX_","scaleY_","size_","fitFontSizeToMovable","metrics","measure","scaleX","scaleY","text_","CanvasService","CanvasCommandService","undo","redo","pushCommand","ICommandService","epsilon","ImageFilter","enabled","alert","pixels","getImageData","data","memory","_malloc","HEAPU8","set","_grayScale","subarray","putImageData","ImageData","Uint8ClampedArray","_free","_boxFilter","opacity","_mixWithColor","mat2","values","Float32Array","init","dest","matrix","threshold","at","temp","det","determinant","a11","a12","a21","a22","vector","cos","sin","m1","m2","identity","setIdentity","mat3","a00","a01","a02","a10","a20","det01","det11","det21","temp01","temp02","temp12","b00","b01","b02","b10","b11","b12","b20","b21","b22","xyz","m00","m01","m02","m10","m11","m12","m20","m21","m22","fourXSquaredMinus1","fourYSquaredMinus1","fourZSquaredMinus1","fourWSquaredMinus1","biggestIndex","fourBiggestSquaredMinus1","biggestVal","sqrt","mult","axis","s","c","t","mat4","a03","a13","a23","a30","a31","a32","a33","det00","det02","det03","det04","det05","det06","det07","det08","det09","det10","temp03","temp13","temp23","b0","b1","b2","b3","left","right","bottom","top","near","far","rl","tb","fn","fov","tan","frustum","up","equals","difference","cross","b03","b13","b23","b30","b31","b32","b33","quat","xyzw","asin","invDot","other","q1x","q1y","q1z","q1w","q2x","q2y","q2z","q2w","qx","qy","qz","qw","ix","iy","iz","iw","x2","y2","z2","xx","xz","yy","yz","zz","wx","wy","wz","q1","q2","time","q2a","k0","k1","oneOverSin","cosHalfTheta","halfTheta","acos","sinHalfTheta","ratioA","ratioB","vec2","squaredLength","multiplyVec2","vector2","squaredDistance","zero","one","vec3","multiplyVec3","quaternion","forward","vec4","multiplyVec4","environment","production","bootstrapModule","err","error"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component } from '@angular/core';\nimport { Movable } from 'src/app/model/movable';\nimport { CanvasService } from 'src/app/service/canvas.service';\nimport { ICommandService, CanvasCommandService } from 'src/app/service/command.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n  providers: [{\n      provide: ICommandService,\n      useClass: CanvasCommandService\n    }\n  ]\n})\nexport class AppComponent {\n  title = 'thumb-up';\n\n  public movable = new Movable();\n\n  public get canvas() {\n    return this.canvasService_.canvas; }\n\n  constructor(\n    private readonly canvasService_: CanvasService) {\n\n  }\n}\n","<div class=\"container\">\n  <canvas-component [canvas]=\"canvas\"></canvas-component>\n  <control-pannel></control-pannel>\n  <layer-control></layer-control>\n</div>","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { PortalModule } from '@angular/cdk/portal';\n\nimport { AppComponent } from './app.component';\nimport { MovableComponent } from 'src/app/components/movable/movable.component';\nimport { CanvasService } from 'src/app/service/canvas.service';\nimport { ImageDrawingComponent } from 'src/app/components/image-drawing/image-drawing.component';\nimport { CanvasComponent } from 'src/app/components/canvas/canvas.component';\nimport { TextDrawingComponent } from 'src/app/components/text-drawing/text-drawing.component';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { ControlPannelComponent } from 'src/app/components/control/control-pannel.component';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatSliderModule } from '@angular/material/slider';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { FormsModule } from '@angular/forms';\nimport { CanvasComponentService } from 'src/app/components/canvas/canvas.component.service';\nimport { MovableControlComponent } from 'src/app/components/control/movable/movable-control.component';\nimport { LayerControlComponent } from 'src/app/components/control/layer/layer-control.component';\nimport { LayerControlItemComponent } from 'src/app/components/control/layer/layer-control-item.component';\nimport { TextDrawingControlComponent } from 'src/app/components/control/text-drawing/text-drawing-control.component';\nimport { DrawingControlComponent } from 'src/app/components/control/drawing/drawing-control.component';\nimport { ColorFilterControlComponent } from 'src/app/components/control/filter/color-filter-control';\nimport { ColorPickerModule } from 'ngx-color-picker';\nimport { ImageDrawingControlComponent } from 'src/app/components/control/image-drawing/image-drawing-control.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    ControlPannelComponent,\n    MovableControlComponent,\n    LayerControlComponent,\n    LayerControlItemComponent,\n    DrawingControlComponent,\n    ColorFilterControlComponent,\n    TextDrawingControlComponent,\n    ImageDrawingControlComponent,\n    MovableComponent,\n    CanvasComponent,\n    ImageDrawingComponent,\n    TextDrawingComponent,\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    BrowserAnimationsModule,\n    PortalModule,\n\n    MatFormFieldModule,\n    MatButtonModule,\n    MatDividerModule,\n    MatCardModule,\n    MatInputModule,\n    MatSliderModule,\n    MatSelectModule,\n    MatCheckboxModule,\n\n    ColorPickerModule\n  ],\n  providers: [\n    CanvasService,\n    CanvasComponentService\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\r\nimport { CanvasComponent } from 'src/app/components/canvas/canvas.component';\r\n\r\n@Injectable()\r\nexport class CanvasComponentService {\r\n\r\n  public canvasComponent: CanvasComponent;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n}","import { Component, ComponentFactoryResolver, Input, OnInit, Inject, Type, ViewChild, ViewContainerRef, AfterViewInit, ComponentFactory, Injector, OnDestroy, ComponentRef, EventEmitter, ElementRef } from '@angular/core';\r\nimport { ComponentPortal, Portal, TemplatePortal } from '@angular/cdk/portal';\r\nimport { Canvas, CanvasDrawingAddRemoveEvent, CanvasRemoveDrawingCommand, CanvasAddStackElementCommand } from 'src/app/model/canvas';\r\nimport { ICommandService, CanvasCommandService } from 'src/app/service/command.service';\r\nimport { Drawing } from 'src/app/model/drawing';\r\nimport { ImageDrawing } from 'src/app/model/image-drawing';\r\nimport { TextDrawing } from 'src/app/model/text-drawing';\r\nimport { TextDrawingComponent } from 'src/app/components/text-drawing/text-drawing.component';\r\nimport { ImageDrawingComponent } from 'src/app/components/image-drawing/image-drawing.component';\r\nimport { Subscription } from 'rxjs';\r\nimport { IDrawingComponent } from 'src/app/components/drawing/drawing.component';\r\nimport { MovableComponent } from 'src/app/components/movable/movable.component';\r\nimport { CanvasComponentService } from 'src/app/components/canvas/canvas.component.service';\r\nimport vec2 from 'src/app/util/vec2';\r\nimport hotkeys from 'hotkeys-js';\r\n\r\n@Component({\r\n  selector: 'canvas-component',\r\n  templateUrl: './canvas.component.html',\r\n  styleUrls: ['./canvas.component.scss']\r\n})\r\nexport class CanvasComponent implements OnInit, OnDestroy, AfterViewInit {\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  public readonly onDidChangeFocusedDrawing = new EventEmitter<IDrawingComponent>();\r\n  public readonly onDidChangeCamera = new EventEmitter<void>();\r\n\r\n  @Input()\r\n  canvas: Canvas;\r\n\r\n  @ViewChild('drawingContainer', {read: ViewContainerRef}) \r\n      drawingContainerRef_: ViewContainerRef;\r\n  @ViewChild('container', {static:true})\r\n      containerRef_: ElementRef<HTMLDivElement>;\r\n  @ViewChild('canvas', {static:true})\r\n      canvasRef_: ElementRef<HTMLDivElement>;\r\n\r\n  public guiPortal: Portal<any>;\r\n\r\n  private drawingComponents_: Array<IDrawingComponent> = [];\r\n  public get drawingComponents(): ReadonlyArray<IDrawingComponent> {\r\n    return this.drawingComponents_; }\r\n  private drawingComponentRefs_: Array<ComponentRef<IDrawingComponent>> = [];\r\n\r\n  private focusedDrawing_: IDrawingComponent = null;\r\n  public get focusedDrawing() { return this.focusedDrawing_; }\r\n\r\n  private lastMousePosition_: vec2;\r\n  private cameraX_: number = 0;\r\n  public get cameraX() { return this.cameraX_; }\r\n  public set cameraX(v: number) {\r\n    this.cameraX_ = v;\r\n    this.onDidChangeCamera.emit();\r\n  }\r\n  private cameraY_: number = 0;\r\n  public get cameraY() { return this.cameraY_; }\r\n  public set cameraY(v: number) {\r\n    this.cameraY_ = v;\r\n    this.onDidChangeCamera.emit();\r\n  }\r\n  private cameraZoom_: number = 1;\r\n  public get cameraZoom() { return this.cameraZoom_; }\r\n  public set cameraZoom(v: number) {\r\n    v = Math.min(3, Math.max(0.2, v));\r\n    v *= 10;\r\n    v = Math.round(v);\r\n    v /= 10;\r\n    this.cameraZoom_ = v;\r\n    this.onDidChangeCamera.emit();\r\n  }\r\n\r\n  constructor(\r\n    private readonly injector_: Injector,\r\n    private readonly canvasComponentService_: CanvasComponentService,\r\n    @Inject(ICommandService) private readonly commandService_: CanvasCommandService,\r\n    private readonly componentFactoryResolver_: ComponentFactoryResolver) {\r\n    this.canvasComponentService_.canvasComponent = this;\r\n    this.moveCamera = this.moveCamera.bind(this);\r\n\r\n    hotkeys('delete', () => {\r\n      if (!this.focusedDrawing) return;\r\n      this.commandService_.dispatch(\r\n        new CanvasRemoveDrawingCommand(this.canvas, this.focusedDrawing.drawing));\r\n      this.commandService_.dispatch(\r\n        new CanvasAddStackElementCommand());\r\n    })\r\n  }\r\n  \r\n  ngOnDestroy() {\r\n    this.subs_.forEach(sub => sub.unsubscribe());\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.commandService_.canvas = this.canvas;\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    for (let i = 0; i < this.canvas.drawings.length; i ++) {\r\n      const drawing = this.canvas.drawings[i];\r\n      this.createDrawingComponent(drawing, i);\r\n    }\r\n    this.subs_.push(this.canvas.onDidAddDrawing.subscribe((e: CanvasDrawingAddRemoveEvent) => {\r\n      this.createDrawingComponent(e.drawing, e.index);\r\n    }));\r\n    this.subs_.push(this.canvas.onDidReorderDrawing.subscribe(([i, j]) => {\r\n      let tmp1 = this.drawingComponentRefs_[i];\r\n      this.drawingComponentRefs_[i] = this.drawingComponentRefs_[j];\r\n      this.drawingComponentRefs_[j] = tmp1;\r\n      let tmp2 = this.drawingComponents[i];\r\n      this.drawingComponents_[i] = this.drawingComponents_[j];\r\n      this.drawingComponents_[j] = tmp2;\r\n    }));\r\n    this.subs_.push(this.canvas.onWillRemoveDrawing.subscribe((e: CanvasDrawingAddRemoveEvent) => {\r\n      if (this.focusedDrawing_?.drawing == e.drawing) this.blurAll();\r\n      this.drawingComponentRefs_.splice(e.index, 1)[0]!.destroy();\r\n      this.drawingComponents_.splice(e.index, 1);\r\n    }));\r\n\r\n    this.containerRef_.nativeElement.addEventListener('mousewheel', (e: any) => {\r\n      this.onMouseWheel(e);\r\n    })\r\n    this.containerRef_.nativeElement.addEventListener('DOMMouseScroll', (e: any) => {\r\n      this.onMouseWheel(e);\r\n    })\r\n  }\r\n  \r\n  private createDrawingComponent(drawing: Drawing, index: number) {\r\n    let factory: ComponentFactory<any>;\r\n    switch (drawing.type) {\r\n      case ImageDrawing.type:\r\n        factory = this.componentFactoryResolver_.resolveComponentFactory(ImageDrawingComponent);\r\n        break;\r\n      case TextDrawing.type:\r\n        factory = this.componentFactoryResolver_.resolveComponentFactory(TextDrawingComponent);\r\n        break;\r\n    }\r\n    const componentRef = this.drawingContainerRef_.createComponent(\r\n        factory, index, this.injector_);\r\n    (componentRef.instance as any).drawing = drawing;\r\n    this.drawingComponentRefs_.splice(index, 0, componentRef);\r\n    this.drawingComponents_.splice(index, 0, componentRef.instance);\r\n  }\r\n\r\n  public focusDrawingComponent(drawingComponent: IDrawingComponent) {\r\n    this.blurAll();\r\n    const movableComponent = drawingComponent.movableComponent;\r\n    movableComponent!.focus();\r\n    this.focusedDrawing_ = drawingComponent;\r\n    this.onDidChangeFocusedDrawing.emit(drawingComponent);\r\n    this.guiPortal = new TemplatePortal(movableComponent.guiContent, movableComponent.viewContainerRef);\r\n  }\r\n\r\n  public blurAll() {\r\n    for (let i = 0; i < this.drawingComponents_.length; i ++) {\r\n      const drawing = this.drawingComponents_[i];\r\n      drawing.movableComponent.blur();\r\n    }\r\n    this.guiPortal = null;\r\n    this.focusedDrawing_ = null;\r\n    this.onDidChangeFocusedDrawing.emit(null);\r\n  }\r\n\r\n  onMousedown(e: MouseEvent) {\r\n    if (e.button == 0) {\r\n      let element: HTMLElement | null = e.target as (HTMLElement | null);\r\n      let movableId = 0;\r\n      while (element instanceof HTMLElement) {\r\n        if (element.tagName.toLowerCase() == 'movable') {\r\n          movableId = +element.getAttribute('movable-id');\r\n          break;\r\n        }\r\n        element = element.parentElement;\r\n      }\r\n      if (!movableId) {\r\n        this.blurAll();\r\n        return;\r\n      }\r\n      const drawingComponent = this.getDrawingComponentByMovableId(movableId);\r\n      this.focusDrawingComponent(drawingComponent);\r\n    }\r\n    else if (e.button == 2) {\r\n      e.preventDefault();\r\n      this.lastMousePosition_ = new vec2([e.screenX, e.screenY]);\r\n      window.addEventListener('mousemove', this.moveCamera);\r\n      const mouseup = () => {\r\n        window.removeEventListener('mousemove', this.moveCamera);\r\n        window.removeEventListener('mouseup', mouseup);\r\n      }\r\n      window.addEventListener('mouseup', mouseup);\r\n    }\r\n  }\r\n\r\n  onMouseWheel(e: WheelEvent) {\r\n    const pos = new vec2([e.pageX, e.pageY]);\r\n    const dvec2 = this.fromPageToCanvas(pos);\r\n    const delta = e.deltaY | e.detail;\r\n    const lastZoom = this.cameraZoom;\r\n    if (delta < 0) {\r\n      this.cameraZoom = this.cameraZoom + 0.1;\r\n    }\r\n    else {\r\n      this.cameraZoom = this.cameraZoom - 0.1;\r\n    }\r\n    const dz = this.cameraZoom - lastZoom;\r\n    const dx = dvec2.scale(dz);\r\n    this.cameraX = this.cameraX - dx.x;\r\n    this.cameraY = this.cameraY - dx.y;\r\n  }\r\n\r\n  private moveCamera(e: MouseEvent) {\r\n    const position = new vec2([e.screenX, e.screenY]);\r\n    position.subtract(this.lastMousePosition_);\r\n    this.cameraX = this.cameraX + position.x;\r\n    this.cameraY = this.cameraY + position.y;\r\n    this.lastMousePosition_ = new vec2([e.screenX, e.screenY]);;\r\n  }\r\n\r\n  public fromPageToCanvas(vec: vec2) {\r\n    const center = new vec2([\r\n      this.containerRef_.nativeElement.offsetWidth / 2,\r\n      this.containerRef_.nativeElement.offsetHeight / 2]);\r\n    const cs = vec.copy();\r\n    cs.subtract(center);\r\n    cs.subtract(new vec2([this.cameraX, this.cameraY]));\r\n    cs.scale(1 / this.cameraZoom);\r\n    cs.x = Math.round(cs.x);\r\n    cs.y = Math.round(cs.y);\r\n    return cs;\r\n  }\r\n\r\n  public fromPageToCanvasScreen(vec: vec2) {\r\n    const center = new vec2([\r\n      this.containerRef_.nativeElement.offsetWidth / 2,\r\n      this.containerRef_.nativeElement.offsetHeight / 2]);\r\n    const cs = new vec2([vec.x, vec.y]);\r\n    cs.subtract(center);\r\n    return cs;\r\n  }\r\n\r\n  private getMovableComponentById(id: number): MovableComponent | null {\r\n    for (let i = 0; i < this.drawingComponents_.length; i ++) {\r\n      const drawing = this.drawingComponents_[i];\r\n      const movable = drawing.drawing.movable;\r\n      if (movable.id == id) return drawing.movableComponent;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  private getDrawingComponentByMovableId(id: number): IDrawingComponent | null {\r\n    for (let i = 0; i < this.drawingComponents_.length; i ++) {\r\n      const drawing = this.drawingComponents_[i];\r\n      const movable = drawing.drawing.movable;\r\n      if (movable.id == id) return drawing;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  private getDrawingComponentByDrawing(drawing: Drawing): IDrawingComponent | null {\r\n    for (let i = 0; i < this.drawingComponents_.length; i ++) {\r\n      const drawingComponent = this.drawingComponents_[i];\r\n      if (drawingComponent.drawing === drawing) return drawingComponent;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public getContentStyle() {\r\n    return {\r\n      width: `${this.canvas.width}px`,\r\n      height: `${this.canvas.height}px`\r\n    }\r\n  }\r\n\r\n  public getCanvasStyle() {\r\n    return {\r\n      transform: `\r\n        translateX(${this.cameraX_}px)\r\n        translateY(${this.cameraY_}px)\r\n        scale(${this.cameraZoom_})`\r\n    }\r\n  }\r\n\r\n  public render(): string {\r\n    const canvas = this.canvas;\r\n    const cvs = document.createElement('canvas');\r\n    const tmpCvs = document.createElement('canvas');\r\n    const ctx = cvs.getContext('2d');\r\n    const tmpCtx = tmpCvs.getContext('2d');\r\n    cvs.width = this.canvas.width;\r\n    cvs.height = this.canvas.height;\r\n    ctx.fillStyle = 'white';\r\n    ctx.fillRect(0, 0, cvs.width, cvs.height);\r\n    for (let i = 0; i < this.drawingComponents.length; i ++) {\r\n      const drawingComponent = this.drawingComponents[i];\r\n      const movable = drawingComponent.movableComponent.movable;\r\n      tmpCvs.width = movable.w;\r\n      tmpCvs.height = movable.h;\r\n      drawingComponent.render(tmpCtx);\r\n\r\n      // Blit\r\n      ctx.save();\r\n      ctx.translate(movable.x + canvas.width / 2, movable.y + canvas.height / 2);\r\n      ctx.rotate(movable.rad);\r\n      ctx.drawImage(tmpCvs, -movable.w / 2, -movable.h / 2);\r\n      ctx.restore();\r\n    }\r\n    return cvs.toDataURL('image/png', 1.0);\r\n  }\r\n\r\n}","<div class=\"container\" #container\r\n  (mousedown)=\"onMousedown($event)\">\r\n  <div class=\"canvas\" #canvas>\r\n    <div class=\"canvas-camera\" [ngStyle]=\"getCanvasStyle()\">\r\n      <div class=\"canvas-cover\">\r\n      </div>\r\n      <div class=\"canvas-background\" [ngStyle]=\"getContentStyle()\"></div>\r\n      <div class=\"canvas-border\" [ngStyle]=\"getContentStyle()\">\r\n        <div class=\"cover t\"></div>\r\n        <div class=\"cover b\"></div>\r\n        <div class=\"cover l\"></div>\r\n        <div class=\"cover r\"></div>\r\n      </div>\r\n      <div class=\"drawings\">\r\n        <ng-container #drawingContainer>\r\n        </ng-container>\r\n      </div>\r\n    </div>\r\n    <ng-template [cdkPortalOutlet]=\"guiPortal\"></ng-template>\r\n  </div>\r\n</div>","import { Component, Inject, Injector, ComponentFactoryResolver, ComponentRef, ComponentFactory, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { ICommandService } from 'src/app/service/command.service';\r\nimport { TextDrawing } from 'src/app/model/text-drawing';\r\nimport { CanvasService } from 'src/app/service/canvas.service';\r\nimport { CanvasAddDrawingCommand, CanvasResizeCommand, CanvasAddStackElementCommand } from 'src/app/model/canvas';\r\nimport { ImageDrawing } from 'src/app/model/image-drawing';\r\nimport { Subscription } from 'rxjs';\r\nimport { Movable } from 'src/app/model/movable';\r\nimport { CanvasComponentService } from 'src/app/components/canvas/canvas.component.service';\r\nimport { MovableComponent } from 'src/app/components/movable/movable.component';\r\nimport { IDrawingComponent } from 'src/app/components/drawing/drawing.component';\r\nimport { TextDrawingControlComponent } from 'src/app/components/control/text-drawing/text-drawing-control.component';\r\nimport { MatSliderChange } from '@angular/material/slider';\r\n\r\n@Component({\r\n  selector: 'control-pannel',\r\n  templateUrl: './control-pannel.component.html',\r\n  styleUrls: ['./control-pannel.component.scss']\r\n})\r\nexport class ControlPannelComponent {\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  @ViewChild('drawingControlContainer', {read: ViewContainerRef}) \r\n      drawingControlContainer_: ViewContainerRef;\r\n\r\n  public canvasWidth: number;\r\n  public canvasHeight: number;\r\n  onChangeCanvasSize(w: number, h: number) {\r\n    const canvas = this.canvasService_.canvas;\r\n    const ww = (w === undefined ? canvas.width : w); \r\n    const hh = (h === undefined ? canvas.height : h); \r\n    this.commandService_.dispatch(\r\n      new CanvasResizeCommand(canvas, ww, hh));\r\n  }\r\n  public canvasZoom: number;\r\n  onChangeCanvasZoom(e: MatSliderChange) {\r\n    this.canvasComponentService_.canvasComponent.cameraZoom = e.value;\r\n  }\r\n\r\n  public get canvas() {\r\n    return this.canvasService_.canvas; }\r\n\r\n  private focusedDrawing_: IDrawingComponent;\r\n  public get focusedDrawing() { return this.focusedDrawing_; }\r\n  private drawingControlComponent_: ComponentRef<any>;\r\n\r\n  constructor(\r\n    private readonly injector_: Injector,\r\n    private readonly componentFactoryResolver_: ComponentFactoryResolver,\r\n    private readonly canvasService_: CanvasService,\r\n    private readonly canvasComponentService_: CanvasComponentService,\r\n    @Inject(ICommandService) private readonly commandService_: ICommandService) {\r\n\r\n    const canvas = canvasService_.canvas;\r\n    const canvasComponent = canvasComponentService_.canvasComponent;\r\n    this.canvasWidth = canvas.width;\r\n    this.canvasHeight = canvas.height;\r\n    this.subs_.push(canvas.onDidChangeSize.subscribe(() => {\r\n      this.canvasWidth = canvas.width;\r\n      this.canvasHeight = canvas.height;\r\n    }));\r\n    this.canvasZoom = canvasComponent.cameraZoom;\r\n    this.subs_.push(canvasComponent.onDidChangeCamera.subscribe(() => {\r\n      this.canvasZoom = canvasComponent.cameraZoom;\r\n    }));\r\n    this.focusedDrawing_ = canvasComponent.focusedDrawing;\r\n    this.subs_.push(canvasComponent.onDidChangeFocusedDrawing.subscribe(drawingComponent => {\r\n      this.updateFocusedDrawing(drawingComponent);\r\n    }))\r\n\r\n  }\r\n\r\n  private updateFocusedDrawing(drawingComponent: IDrawingComponent) {\r\n    this.focusedDrawing_ = drawingComponent;\r\n    // if (this.drawingControlComponent_) {\r\n    //   this.drawingControlComponent_.destroy();\r\n    //   this.drawingControlComponent_ = null;\r\n    // }\r\n    // if (!drawingComponent) return;\r\n    // let factory: ComponentFactory<any>;\r\n    // switch (drawingComponent.drawing.type) {\r\n    //   case ImageDrawing.type:\r\n    //     break;\r\n    //   case TextDrawing.type:\r\n    //     factory = this.componentFactoryResolver_.resolveComponentFactory(TextDrawingControlComponent);\r\n    //     break;\r\n    // }\r\n    // if (!factory) return;\r\n    // const componentRef = this.drawingControlContainer_.createComponent(\r\n    //   factory, undefined, this.injector_);\r\n    // componentRef.instance.drawing = drawingComponent.drawing;\r\n    // this.drawingControlComponent_ = componentRef;\r\n  }\r\n\r\n  addTextDrawing() {\r\n    const drawing = new TextDrawing('Nanum Myeongjo', 30, 'Text');\r\n    const canvas = this.canvasService_.canvas;\r\n    this.commandService_.dispatch(\r\n      new CanvasAddDrawingCommand(canvas, drawing));\r\n    this.commandService_.dispatch(new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  addImageDrawing(e: any) {\r\n    const file: File = e.target.files[0];\r\n    if (!file) return;\r\n    const reader = new FileReader();\r\n    reader.addEventListener('load', () => {\r\n      const image = new Image();\r\n      image.src = reader.result as string;\r\n      image.onload = () => {\r\n        const imageDrawing = new ImageDrawing(image);\r\n        this.commandService_.dispatch(\r\n          new CanvasAddDrawingCommand(this.canvasService_.canvas, imageDrawing));\r\n        this.commandService_.dispatch(new CanvasAddStackElementCommand());\r\n      }\r\n    })\r\n    reader.readAsDataURL(file);\r\n  }\r\n\r\n}","<mat-card class=\"control-pannel\">\r\n  <div class=\"tools\">\r\n    <div class=\"item\">\r\n      <button mat-icon-button (click)=\"addTextDrawing()\">\r\n        <span class=\"material-icons\">title</span>\r\n      </button>\r\n    </div>\r\n    <div class=\"item file-input\">\r\n      <button accept=\"image/*\" mat-icon-button>\r\n        <input type=\"file\" id=\"file\" (change)=\"addImageDrawing($event)\">\r\n        <label for=\"file\">\r\n          <span class=\"material-icons\">insert_photo</span>\r\n        </label>\r\n      </button>\r\n    </div>\r\n  </div>\r\n  <mat-divider></mat-divider>\r\n  <div class=\"canvas\">\r\n    <div class=\"size eq\">\r\n      <mat-form-field>\r\n        <input matInput placeholder=\"Canvas width\" [(ngModel)]=\"canvasWidth\"\r\n          (keyup)=\"onChangeCanvasSize(+$event.target.value, undefined)\">\r\n        <span matSuffix>px</span>\r\n      </mat-form-field>\r\n      <mat-form-field>\r\n        <input matInput placeholder=\"Canvas height\" [(ngModel)]=\"canvasHeight\"\r\n          (keyup)=\"onChangeCanvasSize(undefined, +$event.target.value)\">\r\n        <span matSuffix>px</span>\r\n      </mat-form-field>\r\n    </div>\r\n    <div class=\"zoom\">\r\n      <div>Zoom <span>{{canvasZoom}}x</span></div>\r\n      <mat-slider min=\"0.2\" max=\"3\" step=\"0.1\" [(value)]=\"canvasZoom\"\r\n        (input)=\"onChangeCanvasZoom($event)\">\r\n      </mat-slider>\r\n    </div>\r\n  </div>\r\n  <mat-divider></mat-divider>\r\n  <movable-control *ngIf=\"focusedDrawing\"\r\n      [movable]=\"focusedDrawing.drawing.movable\">\r\n  </movable-control>\r\n  <drawing-control [drawing]=\"focusedDrawing?.drawing\"></drawing-control>\r\n</mat-card>","import { Injector, ComponentFactoryResolver, ViewContainerRef, ComponentRef } from '@angular/core';\r\nimport { Drawing } from 'src/app/model/drawing';\r\nimport { TextDrawing } from 'src/app/model/text-drawing';\r\nimport { TextDrawingControlComponent } from 'src/app/components/control/text-drawing/text-drawing-control.component';\r\nimport { ImageDrawing } from 'src/app/model/image-drawing';\r\nimport { ImageDrawingControlComponent } from 'src/app/components/control/image-drawing/image-drawing-control.component';\r\n\r\nexport class DrawingControlFactory {\r\n\r\n  constructor(private readonly resolver: ComponentFactoryResolver) {}\r\n\r\n  public create(\r\n    container: ViewContainerRef,\r\n    drawing: Drawing, injector: Injector): ComponentRef<any> {\r\n    if (!drawing) return null;\r\n    let component: any;\r\n    switch (drawing.type) {\r\n      case TextDrawing.type:\r\n        component = TextDrawingControlComponent;\r\n        break;\r\n      case ImageDrawing.type:\r\n        component = ImageDrawingControlComponent;\r\n        break;\r\n    }\r\n    if (!component) return null;\r\n    const factory = this.resolver.resolveComponentFactory(component);\r\n    const componentRef = container.createComponent(factory, undefined, injector);\r\n    (componentRef.instance as any).drawing = drawing;\r\n    return componentRef;\r\n  }\r\n\r\n}","import { Component, Input, OnInit, OnDestroy, OnChanges, SimpleChange, SimpleChanges, ComponentRef, ComponentFactoryResolver, Injector, ViewChild, ViewContainerRef, Inject } from '@angular/core';\r\nimport { Drawing, DrawingChangeFilterCommand } from 'src/app/model/drawing';\r\nimport { Subscription } from 'rxjs';\r\nimport { FilterControlFactory } from 'src/app/components/control/filter/filter-control-factory';\r\nimport { DrawingControlFactory } from 'src/app/components/control/drawing/drawing-control-factory';\r\nimport { MatSelectChange } from '@angular/material/select';\r\nimport { GrayscaleDrawingFilter, IDrawingFilter, BlurDrawingFilter, ColorDrawingFilter } from 'src/app/model/drawing-filter';\r\nimport { ICommandService } from 'src/app/service/command.service';\r\nimport { CanvasAddStackElementCommand } from 'src/app/model/canvas';\r\n\r\n@Component({\r\n  selector: 'drawing-control',\r\n  templateUrl: './drawing-control.component.html',\r\n  styleUrls: ['./drawing-control.component.scss']\r\n})\r\nexport class DrawingControlComponent implements OnDestroy, OnChanges {\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  @Input() drawing: Drawing;\r\n  @ViewChild('drawingControlContainer', {read: ViewContainerRef})\r\n    drawingControlContainer_: ViewContainerRef;\r\n  @ViewChild('filterControlContainer', {read: ViewContainerRef})\r\n    filterControlContainer_: ViewContainerRef;\r\n\r\n  private drawingControl_: ComponentRef<any>;\r\n  private filterControl_: ComponentRef<any>;\r\n\r\n  private filterType_: string;\r\n  public get filterType() {\r\n    return this.drawing?.filter?.type.toLowerCase();\r\n  }\r\n  onFilterChange(e: MatSelectChange) {\r\n    const value = e.value;\r\n    let filter: IDrawingFilter;\r\n    switch (value) {\r\n      case 'grayscale':\r\n        filter = new GrayscaleDrawingFilter();\r\n        break;\r\n      case 'blur':\r\n        filter = new BlurDrawingFilter();\r\n        break;\r\n      case 'color':\r\n        filter = new ColorDrawingFilter();\r\n        break;\r\n    }\r\n    this.commandService_.dispatch(\r\n      new DrawingChangeFilterCommand(this.drawing, filter));\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  constructor(\r\n    private readonly injector_: Injector,\r\n    private readonly componentFactoryResolver_: ComponentFactoryResolver,\r\n    @Inject(ICommandService) private readonly commandService_: ICommandService) {\r\n\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subs_.forEach(sub => sub.unsubscribe());\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (changes.drawing) {\r\n      this.subs_.forEach(sub => sub.unsubscribe());\r\n      this.subs_.length = 0;\r\n\r\n      this.createDrawingControl();\r\n      this.createFilterControl();\r\n      if (!this.drawing) return;\r\n      this.subs_.push(this.drawing.onDidChangeFilter.subscribe(() => {\r\n        this.createFilterControl();\r\n      }));\r\n    }\r\n  }\r\n\r\n  private createDrawingControl() {\r\n    if (this.drawingControl_) this.drawingControl_.destroy();\r\n    const factory = new DrawingControlFactory(this.componentFactoryResolver_);\r\n    const comp = factory.create(this.drawingControlContainer_, this.drawing, this.injector_);\r\n    this.drawingControl_ = comp;\r\n  }\r\n\r\n  private createFilterControl() {\r\n    if (this.filterControl_) this.filterControl_.destroy();\r\n    if (!this.drawing) return;\r\n    const factory = new FilterControlFactory(this.componentFactoryResolver_);\r\n    const comp = factory.create(this.filterControlContainer_, this.drawing.filter, this.injector_);\r\n    this.filterControl_ = comp;\r\n  }\r\n\r\n}","<ng-container #drawingControlContainer></ng-container>\r\n<ng-container *ngIf=\"drawing\">\r\n  <div class=\"filter\">\r\n    <mat-form-field>\r\n      <mat-label>Filter</mat-label>\r\n      <mat-select [value]=\"filterType\"\r\n          (selectionChange)=\"onFilterChange($event)\">\r\n        <mat-option>None</mat-option>\r\n        <mat-option value=\"grayscale\">Grayscale</mat-option>\r\n        <mat-option value=\"blur\">Blur</mat-option>\r\n        <mat-option value=\"color\">Color</mat-option>\r\n      </mat-select>\r\n    </mat-form-field>\r\n  </div>\r\n</ng-container>\r\n<ng-container #filterControlContainer></ng-container>","import { Component, Input, OnInit, OnDestroy, Inject } from '@angular/core';\r\nimport { IDrawingFilter, ColorDrawingFilter, ColorDawingFilterChangeCommand } from 'src/app/model/drawing-filter';\r\nimport { Subscription } from 'rxjs';\r\nimport { ICommandService } from 'src/app/service/command.service';\r\nimport { CanvasAddStackElementCommand } from 'src/app/model/canvas';\r\n\r\n@Component({\r\n  selector: 'color-filter-control',\r\n  templateUrl: './color-filter-control.html',\r\n  styleUrls: ['./color-filter-control.scss']\r\n})\r\nexport class ColorFilterControlComponent implements OnInit, OnDestroy {\r\n\r\n  private sub_: Subscription;\r\n\r\n  @Input() filter: ColorDrawingFilter;\r\n\r\n  public r: number;\r\n  public g: number;\r\n  public b: number;\r\n  public o: number;\r\n\r\n  constructor(\r\n    @Inject(ICommandService) private readonly commandService_: ICommandService) {\r\n\r\n  }\r\n\r\n  onInput(r: number, g: number, b: number, o: number) {\r\n    r = (r === undefined ? this.filter.r : r);\r\n    g = (g === undefined ? this.filter.g : g);\r\n    b = (b === undefined ? this.filter.b : b);\r\n    o = (o === undefined ? this.filter.o : o);\r\n    this.commandService_.dispatch(\r\n      new ColorDawingFilterChangeCommand(this.filter,\r\n        r, g, b, o));\r\n  }\r\n\r\n  onChange() {\r\n    console.log('change');\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.r = this.filter.r;\r\n    this.g = this.filter.g;\r\n    this.b = this.filter.b;\r\n    this.o = this.filter.o;\r\n    this.sub_ = this.filter.onUpdate.subscribe(() => {\r\n      this.r = this.filter.r;\r\n      this.g = this.filter.g;\r\n      this.b = this.filter.b;\r\n      this.o = this.filter.o;\r\n    })\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.sub_.unsubscribe();\r\n  }\r\n\r\n}","\r\n<div class=\"col\">\r\n  <div>R<span></span></div>\r\n  <mat-slider min=\"0\" max=\"255\" step=\"1\" [(value)]=\"r\"\r\n    (input)=\"onInput($event.value, undefined, undefined, undefined)\"\r\n    (change)=\"onChange()\">\r\n  </mat-slider>\r\n</div>\r\n<div class=\"col\">\r\n  <div>G<span></span></div>\r\n  <mat-slider min=\"0\" max=\"255\" step=\"1\" [(value)]=\"g\"\r\n    (input)=\"onInput(undefined, $event.value, undefined, undefined)\"\r\n    (change)=\"onChange()\">\r\n  </mat-slider>\r\n</div>\r\n<div class=\"col\">\r\n  <div>B<span></span></div>\r\n  <mat-slider min=\"0\" max=\"255\" step=\"1\" [(value)]=\"b\"\r\n    (input)=\"onInput(undefined, undefined, $event.value, undefined)\"\r\n    (change)=\"onChange()\">\r\n  </mat-slider>\r\n</div>\r\n<div class=\"col\">\r\n  <div>O<span></span></div>\r\n  <mat-slider min=\"0\" max=\"1\" step=\"0.05\" [(value)]=\"o\"\r\n    (input)=\"onInput(undefined, undefined, undefined, $event.value)\"\r\n    (change)=\"onChange()\">\r\n  </mat-slider>\r\n</div>","import { IDrawingFilter, ColorDrawingFilter } from 'src/app/model/drawing-filter';\r\nimport { Injector, ComponentFactoryResolver, ViewContainerRef, ComponentRef } from '@angular/core';\r\nimport { ColorFilterControlComponent } from 'src/app/components/control/filter/color-filter-control';\r\n\r\nexport class FilterControlFactory {\r\n\r\n  constructor(private readonly resolver: ComponentFactoryResolver) {}\r\n\r\n  public create(\r\n    container: ViewContainerRef,\r\n    filter: IDrawingFilter, injector: Injector): ComponentRef<any> {\r\n    if (!filter) return null;\r\n    let component: any;\r\n    switch (filter.type) {\r\n      case ColorDrawingFilter.type:\r\n        component = ColorFilterControlComponent;\r\n        break;\r\n    }\r\n    if (!component) return null;\r\n    const factory = this.resolver.resolveComponentFactory(component);\r\n    const componentRef = container.createComponent(factory, undefined, injector);\r\n    (componentRef.instance as any).filter = filter;\r\n    return componentRef;\r\n  }\r\n\r\n}","import { Component, Input, OnInit, OnDestroy, Inject } from '@angular/core';\r\nimport { ImageDrawing, ImageDrawingChangeInvertCommand } from 'src/app/model/image-drawing';\r\nimport { Subscription } from 'rxjs';\r\nimport { ICommandService } from 'src/app/service/command.service';\r\nimport { CanvasAddStackElementCommand } from 'src/app/model/canvas';\r\n\r\n@Component({\r\n  selector: 'image-drawing-control',\r\n  templateUrl: './image-drawing-control.component.html',\r\n  // styleUrls: ['./image-drawing-control.component.scss']\r\n})\r\nexport class ImageDrawingControlComponent implements OnInit, OnDestroy {\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  @Input() drawing: ImageDrawing;\r\n\r\n  public invertX;\r\n  public invertY;\r\n  onChangeInvert(x: boolean, y: boolean) {\r\n    x = (x === undefined ? this.drawing.invertX : x);\r\n    y = (y === undefined ? this.drawing.invertY : y);\r\n    this.commandService_.dispatch(\r\n      new ImageDrawingChangeInvertCommand(this.drawing, x, y));\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  constructor(\r\n    @Inject(ICommandService) private readonly commandService_: ICommandService) {\r\n    \r\n  }\r\n\r\n  ngOnInit() {\r\n    this.invertX = this.drawing.invertX;\r\n    this.invertY = this.drawing.invertY;\r\n    this.subs_.push(this.drawing.onDidDirty.subscribe(() => {\r\n      this.invertX = this.drawing.invertX;\r\n      this.invertY = this.drawing.invertY;\r\n    }));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subs_.forEach(sub => sub.unsubscribe())\r\n  }\r\n\r\n}","<div class=\"control\">\r\n  <div class=\"row\">\r\n    <mat-checkbox [ngModel]=\"invertX\" style=\"margin-right: 10px\"\r\n      (change)=\"onChangeInvert($event.checked, undefined)\">Invert X\r\n    </mat-checkbox>\r\n    <mat-checkbox [ngModel]=\"invertY\"\r\n      (change)=\"onChangeInvert(undefined, $event.checked)\">Invert Y\r\n    </mat-checkbox>\r\n  </div>\r\n</div>","import { Component, Input, HostBinding } from '@angular/core';\r\nimport { Drawing } from 'src/app/model/drawing';\r\n\r\n@Component({\r\n  selector: 'layer-control-item',\r\n  templateUrl: './layer-control-item.component.html',\r\n  styleUrls: ['./layer-control-item.component.scss']\r\n})\r\nexport class LayerControlItemComponent {\r\n\r\n  @Input() drawing: Drawing;\r\n  \r\n  @HostBinding('class.active')\r\n  @Input() active: boolean = false;\r\n\r\n}","<div class=\"item\">\r\n  <div class=\"name\">{{drawing.name}}</div>\r\n</div>","import { Component, Input, Inject } from '@angular/core';\r\nimport { Canvas, CanvasReorderCommand, CanvasRemoveDrawingCommand, CanvasAddStackElementCommand } from 'src/app/model/canvas';\r\nimport { Drawing } from 'src/app/model/drawing';\r\nimport { CanvasComponentService } from 'src/app/components/canvas/canvas.component.service';\r\nimport { IDrawingComponent } from 'src/app/components/drawing/drawing.component';\r\nimport { ICommandService } from 'src/app/service/command.service';\r\n\r\n@Component({\r\n  selector: 'layer-control',\r\n  templateUrl: './layer-control.component.html',\r\n  styleUrls: ['./layer-control.component.scss']\r\n})\r\nexport class LayerControlComponent {\r\n\r\n  public get canvas() {\r\n    return this.canvasComponentService_.canvasComponent;\r\n  }\r\n\r\n  public get focusedDrawing() {\r\n    return this.canvas.focusedDrawing?.drawing;\r\n  }\r\n\r\n  public get drawingComponents(): ReadonlyArray<IDrawingComponent> {\r\n    return this.canvas.drawingComponents;\r\n  }\r\n\r\n  constructor(\r\n    private readonly canvasComponentService_: CanvasComponentService,\r\n    @Inject(ICommandService) private readonly commandService_: ICommandService) {\r\n    \r\n  }\r\n\r\n  onItemClick(drawingComponent: IDrawingComponent) {\r\n    this.canvas.focusDrawingComponent(drawingComponent);\r\n  }\r\n\r\n  trackFunc(index: number, comp: IDrawingComponent) {\r\n    return comp.drawing.id;\r\n  }\r\n\r\n  onMoveUpClick() {\r\n    if (!this.focusedDrawing) return;\r\n    const index = this.canvas.canvas.getDrawingIndex(this.focusedDrawing);\r\n    this.commandService_.dispatch(\r\n      new CanvasReorderCommand(this.canvas.canvas, index, index - 1));\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  onMoveDownClick() {\r\n    if (!this.focusedDrawing) return;\r\n    const index = this.canvas.canvas.getDrawingIndex(this.focusedDrawing);\r\n    this.commandService_.dispatch(\r\n      new CanvasReorderCommand(this.canvas.canvas, index, index + 1));\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  onRemoveClick() {\r\n    if (!this.focusedDrawing) return;\r\n    this.commandService_.dispatch(\r\n      new CanvasRemoveDrawingCommand(this.canvas.canvas, this.focusedDrawing));\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  onSaveClick() {\r\n      let image = this.canvasComponentService_.canvasComponent.render();\r\n      image = image.replace('image/png', 'image/octet-stream');\r\n      var link = document.getElementById('link');\r\n      link.setAttribute('download', 'thumbnail.png');\r\n      link.setAttribute('href', image);\r\n      link.click();\r\n  }\r\n\r\n}","<mat-card class=\"layer-control\">\r\n  <div class=\"list\">\r\n    <ng-container *ngFor=\"let drawingComponent of drawingComponents;\r\n      index as i; trackBy: trackFunc\">\r\n      <layer-control-item (click)=\"onItemClick(drawingComponent)\"\r\n        [drawing]=\"drawingComponent.drawing\"\r\n        [active]=\"drawingComponent.drawing === focusedDrawing\">\r\n      </layer-control-item>\r\n      <mat-divider></mat-divider>\r\n    </ng-container>\r\n  </div>\r\n  <div class=\"buttons\">\r\n    <button mat-icon-button (click)=\"onMoveUpClick()\">\r\n      <span class=\"material-icons\">keyboard_arrow_up</span>\r\n    </button>\r\n    <button mat-icon-button (click)=\"onMoveDownClick()\">\r\n      <span class=\"material-icons\">keyboard_arrow_down</span>\r\n    </button>\r\n    <button mat-icon-button (click)=\"onRemoveClick()\">\r\n      <span class=\"material-icons\">delete</span>\r\n    </button>\r\n    <button mat-icon-button (click)=\"onSaveClick()\" style=\"float: right\">\r\n      <span class=\"material-icons\">save_alt</span>\r\n    </button>\r\n  </div>\r\n</mat-card>","import { Component, Inject, Input, OnInit, OnDestroy, OnChanges, SimpleChange, SimpleChanges } from '@angular/core';\r\nimport { ICommandService } from 'src/app/service/command.service';\r\nimport { Subscription } from 'rxjs';\r\nimport { Movable, MovableTranslateCommand, MovableResizeCommand } from 'src/app/model/movable';\r\nimport { CanvasAddStackElementCommand } from 'src/app/model/canvas';\r\n\r\n@Component({\r\n  selector: 'movable-control',\r\n  templateUrl: './movable-control.component.html',\r\n  styleUrls: ['./movable-control.component.scss']\r\n})\r\nexport class MovableControlComponent implements OnInit, OnDestroy, OnChanges {\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  @Input() movable: Movable;\r\n\r\n  public x: number;\r\n  public y: number;\r\n  public onChangePosition(x: number, y: number) {\r\n    const movable = this.movable;\r\n    const ww = (x === undefined ? movable.x : x); \r\n    const hh = (y === undefined ? movable.y : y); \r\n    this.commandService_.dispatch(\r\n      new MovableTranslateCommand(movable, ww, hh));\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  public w: number;\r\n  public h: number;\r\n  public onChangeSize(w: number, h: number) {\r\n    const movable = this.movable;\r\n    const ww = (w === undefined ? movable.w : w); \r\n    const hh = (h === undefined ? movable.h : h); \r\n    this.commandService_.dispatch(\r\n      new MovableResizeCommand(movable, ww, hh));\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  public r: number;\r\n  public onDidChangeRotation(r: number) {\r\n    // const movable = this.movable;\r\n    // const rr = (r === undefined ? movable.r : r); \r\n    // this.commandService_.dispatch(\r\n    //   new MovableResizeCommand(movable, ww, hh));\r\n  }\r\n\r\n\r\n  constructor(\r\n    @Inject(ICommandService) private readonly commandService_: ICommandService) {\r\n\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (changes.movable) {\r\n      this.subs_.forEach(sub => sub.unsubscribe());\r\n      this.subs_ = [];\r\n\r\n      const movable = this.movable;\r\n      this.x = movable.x;\r\n      this.y = movable.y;\r\n      this.w = movable.w;\r\n      this.h = movable.h;\r\n      this.r = movable.r;\r\n      this.subs_.push(movable.onDidChange.subscribe(() => {\r\n        this.x = movable.x;\r\n        this.y = movable.y;\r\n        this.w = movable.w;\r\n        this.h = movable.h;\r\n        this.r = movable.r;\r\n      }));\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subs_.forEach(sub => sub.unsubscribe());\r\n  }\r\n\r\n}","<div class=\"control\">\r\n  <div class=\"row\">\r\n    <mat-form-field>\r\n      <input matInput placeholder=\"Position X\" [(ngModel)]=\"x\"\r\n        (keyup)=\"onChangePosition(+$event.target.value, undefined)\">\r\n      <span matSuffix>px</span>\r\n    </mat-form-field>\r\n    <mat-form-field>\r\n      <input matInput placeholder=\"Position Y\" [(ngModel)]=\"y\"\r\n        (keyup)=\"onChangePosition(undefined, +$event.target.value)\">\r\n      <span matSuffix>px</span>\r\n    </mat-form-field>\r\n  </div>\r\n  <div class=\"row\">\r\n    <mat-form-field>\r\n      <input matInput placeholder=\"Width\" [(ngModel)]=\"w\"\r\n        (keyup)=\"onChangeSize(+$event.target.value, undefined)\">\r\n      <span matSuffix>px</span>\r\n    </mat-form-field>\r\n    <mat-form-field>\r\n      <input matInput placeholder=\"Height\" [(ngModel)]=\"h\"\r\n        (keyup)=\"onChangeSize(undefined, +$event.target.value)\">\r\n      <span matSuffix>px</span>\r\n    </mat-form-field>\r\n  </div>\r\n</div>","import { Component, Input, Inject, OnInit, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { TextDrawing, TextDrawingChangeTextCommand, TextDrawingChangeSizeCommand, TextDrawingChangeColorCommand, TextDrawingChangeFontCommand } from 'src/app/model/text-drawing';\r\nimport { ICommandService } from 'src/app/service/command.service';\r\nimport { CanvasAddStackElementCommand } from 'src/app/model/canvas';\r\n\r\n@Component({\r\n  selector: 'text-drawing-control',\r\n  templateUrl: './text-drawing-control.component.html',\r\n  styleUrls: ['./text-drawing-control.component.scss']\r\n})\r\nexport class TextDrawingControlComponent implements OnInit, OnDestroy {\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  @Input() drawing: TextDrawing;\r\n\r\n  public text: string;\r\n  public onChangeText(text: string) {\r\n    const drawing = this.drawing;\r\n    this.commandService_.dispatch(\r\n      new TextDrawingChangeTextCommand(drawing, text));\r\n  }\r\n\r\n  public size: number;\r\n  public onChangeSize(size: number) {\r\n    const drawing = this.drawing;\r\n    this.commandService_.dispatch(\r\n      new TextDrawingChangeSizeCommand(drawing, size));\r\n  }\r\n\r\n  private color_: string;\r\n  public get color() { return this.color_; }\r\n  public set color(v: string) {\r\n    this.commandService_.dispatch(\r\n      new TextDrawingChangeColorCommand(this.drawing, v));\r\n  }\r\n  onColorChange() {\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  public font: string;\r\n  public onChangeFont(font: string) {\r\n    const drawing = this.drawing;\r\n    this.commandService_.dispatch(\r\n      new TextDrawingChangeFontCommand(drawing, font));\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  constructor(\r\n    @Inject(ICommandService) private readonly commandService_: ICommandService) {\r\n    \r\n  }\r\n\r\n  ngOnInit() {\r\n    this.text = this.drawing.text;\r\n    this.size = this.drawing.size;\r\n    this.font = this.drawing.font;\r\n    this.color_ = this.drawing.color;\r\n    this.subs_.push(this.drawing.onDidChangeText.subscribe(() => {\r\n      this.text = this.drawing.text;\r\n      this.size = this.drawing.size;\r\n      this.color_ = this.drawing.color;\r\n      this.font = this.drawing.font;\r\n    }));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subs_.forEach(sub => sub.unsubscribe());\r\n  }\r\n\r\n  onBlur() {\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n}","<div class=\"control\">\r\n  <div class=\"row\">\r\n    <mat-form-field style=\"width: 100%\">\r\n      <input matInput placeholder=\"Text\" [(ngModel)]=\"text\"\r\n        (keyup)=\"onChangeText($event.target.value)\"\r\n        (blur)=\"onBlur()\">\r\n    </mat-form-field>\r\n  </div>\r\n  <div class=\"row\">\r\n    <mat-form-field>\r\n      <mat-label>Font</mat-label>\r\n      <mat-select [value]=\"font\"\r\n          (selectionChange)=\"onChangeFont($event.value)\">\r\n        <mat-option value=\"Nanum Gothic\">Nanum Gothic</mat-option>\r\n        <mat-option value=\"Nanum Myeongjo\">Nanum Myeongjo</mat-option>\r\n        <mat-option value=\"Nanum Brush Script\">Nanum Brush Script</mat-option>\r\n        <mat-option value=\"Nanum Pen Script\">Nanum Pen Script</mat-option>\r\n      </mat-select>\r\n    </mat-form-field>\r\n  </div>\r\n  <div class=\"row\">\r\n    <mat-form-field>\r\n      <input matInput placeholder=\"Size\" [(ngModel)]=\"size\"\r\n        (keyup)=\"onChangeSize(+$event.target.value)\"\r\n        (blur)=\"onBlur()\">\r\n    </mat-form-field>\r\n    <div class=\"color\">\r\n      <input class=\"color\" [(colorPicker)]=\"color\"\r\n          (colorPickerSelect)=\"onColorChange()\"\r\n          [cpPosition]=\"'left'\"\r\n          [style.background]=\"color\"/>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, Input, ChangeDetectionStrategy, ViewChild, ElementRef, AfterViewInit, OnInit, OnDestroy, ComponentRef } from '@angular/core';\r\nimport { ImageDrawing } from 'src/app/model/image-drawing';\r\nimport { Subscription } from 'rxjs';\r\nimport { throttleTime } from 'rxjs/operators';\r\nimport { IDrawingComponent } from 'src/app/components/drawing/drawing.component';\r\nimport { MovableComponent } from 'src/app/components/movable/movable.component';\r\nimport { ImageFilter } from 'src/app/util/image-filter';\r\n\r\n@Component({\r\n  selector: 'image-drawing',\r\n  templateUrl: './image-drawing.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ImageDrawingComponent implements IDrawingComponent, AfterViewInit, OnDestroy {\r\n\r\n  @ViewChild('canvas') canvasRef_: ElementRef<HTMLCanvasElement>;\r\n  @ViewChild('movable') movableComponent: MovableComponent;\r\n  private cvs_: HTMLCanvasElement;\r\n  private ctx_: CanvasRenderingContext2D;\r\n\r\n  @Input() drawing: ImageDrawing;\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.cvs_ = this.canvasRef_.nativeElement;\r\n    this.ctx_ = this.canvasRef_.nativeElement.getContext('2d');\r\n    this.subs_.push(this.movableComponent.onDidUpdate.subscribe(() => {\r\n      this.localRender();\r\n    }));\r\n    this.subs_.push(this.drawing.onDidDirty.pipe(\r\n      throttleTime(16, undefined, {trailing: true})\r\n    ).subscribe(() => { this.localRender() }));\r\n    this.localRender();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subs_.forEach(sub => sub.unsubscribe());\r\n  }\r\n\r\n  private localRender() {\r\n    const movable = this.drawing.movable;\r\n    this.cvs_.width = Math.abs(movable.w);\r\n    this.cvs_.height = Math.abs(movable.h);\r\n    this.render(this.ctx_);\r\n  }\r\n\r\n  public render(ctx: CanvasRenderingContext2D) {\r\n    const movable = this.drawing.movable;\r\n    let x = 0, y = 0;\r\n    ctx.save();\r\n    if (this.drawing.invertX) {\r\n      x = -movable.w;\r\n      ctx.scale(-1, 1);\r\n    }\r\n    if (this.drawing.invertY) {\r\n      y = -movable.h;\r\n      ctx.scale(1, -1);\r\n    }\r\n    ctx.drawImage(this.drawing.img,\r\n        0, 0, this.drawing.img.width, this.drawing.img.height,\r\n        x, y, movable.w, movable.h);\r\n    const filter = this.drawing.filter;\r\n    filter && filter.apply(ctx);\r\n    ctx.restore();\r\n  }\r\n\r\n}","<movable #movable [movable]=\"drawing.movable\">\r\n  <canvas #canvas></canvas>\r\n</movable>","import { Component, Input, OnInit, OnDestroy, ChangeDetectionStrategy, ChangeDetectorRef, Inject, Optional, HostBinding, ViewChild, TemplateRef, ViewContainerRef, EventEmitter } from '@angular/core';\r\nimport vec2 from 'src/app/util/vec2';\r\nimport mat2 from 'src/app/util/mat2';\r\nimport { Movable, MovableTranslateCommand, MovableResizeCommand, MovableRotateCommand } from 'src/app/model/movable';\r\nimport vec4 from 'src/app/util/vec4';\r\nimport { Subscription } from 'rxjs';\r\nimport { throttleTime } from 'rxjs/operators';\r\nimport { ICommandService } from 'src/app/service/command.service';\r\nimport { CanvasAddStackElementCommand } from 'src/app/model/canvas';\r\nimport { CanvasComponentService } from 'src/app/components/canvas/canvas.component.service';\r\n\r\n@Component({\r\n  selector: 'movable',\r\n  templateUrl: './movable.component.html',\r\n  styleUrls: ['movable.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class MovableComponent implements OnInit, OnDestroy {\r\n\r\n  public readonly onDidUpdate = new EventEmitter<void>();\r\n\r\n  @Input() movable: Movable;\r\n  @Input() focused: boolean = false;\r\n\r\n  @ViewChild('gui') guiContent: TemplateRef<any>;\r\n\r\n  @HostBinding('attr.movable-id')\r\n  public get id() { return this.movable.id; }\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  public centerVec = new vec2();\r\n  public sizeVec = new vec2();\r\n  public thumbTL = new vec2();\r\n  public thumbTR = new vec2();\r\n  public thumbBL = new vec2();\r\n  public thumbBR = new vec2();\r\n  public thumbBC = new vec2();\r\n  public thumbCR = new vec2();\r\n\r\n  private srcMousePosition_: vec2;\r\n  private srcMovableState_: vec4;\r\n  private srcMovableRotate_: number;\r\n\r\n  private srcRotationMat_: mat2;\r\n  private srcRrotationMat_: mat2;\r\n\r\n  public readonly updateResizeUL = this.updateResize.bind(this, [1, 1, 0, 0]);\r\n  public readonly updateResizeUR = this.updateResize.bind(this, [0, 1, 1, 0]);\r\n  public readonly updateResizeBL = this.updateResize.bind(this, [1, 0, 0, 1]);\r\n  public readonly updateResizeBR = this.updateResize.bind(this, [0, 0, 1, 1]);\r\n\r\n  constructor(\r\n    public readonly viewContainerRef: ViewContainerRef,\r\n    private readonly changeRef: ChangeDetectorRef,\r\n    private readonly canvasComponentService_: CanvasComponentService,\r\n    @Inject(ICommandService) private readonly commandService_: ICommandService) {\r\n    this.updateTranslate = this.updateTranslate.bind(this);\r\n    this.updateRotate = this.updateRotate.bind(this);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.update();\r\n    this.subs_.push(this.movable.onDidChange.pipe(\r\n      throttleTime(16, undefined, {trailing: true})).subscribe(() => {\r\n      this.update();\r\n    }));\r\n    this.subs_.push(this.canvasComponentService_.canvasComponent.onDidChangeCamera.pipe(\r\n      throttleTime(16, undefined, {trailing: true})).subscribe(() => {\r\n      this.update();\r\n    }));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subs_.forEach(sub => sub.unsubscribe());\r\n  }\r\n\r\n  private saveSrcRotation() {\r\n    this.srcRotationMat_ = mat2.rotation(this.movable.rad);\r\n    this.srcRrotationMat_ = mat2.rotation(-1 * this.movable.rad);\r\n  }\r\n\r\n  private update() {\r\n    if (!this.focused) {\r\n      this.onDidUpdate.emit();\r\n      this.changeRef.markForCheck();\r\n      return;\r\n    }\r\n    const canvas = this.canvasComponentService_.canvasComponent;\r\n    const zoom = canvas.cameraZoom;\r\n    const [w, h] = [this.movable.w, this.movable.h];\r\n    const center = new vec2([this.movable.x, this.movable.y]);\r\n    const zoomVec = new vec2([zoom, zoom]);\r\n    const translate = new vec2([canvas.cameraX, canvas.cameraY]);\r\n    center.multiply(zoomVec);\r\n    this.centerVec.xy = [center.x, center.y];\r\n    this.centerVec.add(translate);\r\n    this.sizeVec = new vec2([this.movable.w, this.movable.h]);\r\n    this.sizeVec.multiply(zoomVec);\r\n    // translate.multiply(new vec2([zoom, zoom]));\r\n   [[this.thumbTL,\r\n      new vec2([-w / 2, -h / 2])],\r\n    [this.thumbTR,\r\n      new vec2([w / 2, -h / 2])],\r\n    [this.thumbBL,\r\n    new vec2([-w / 2, h / 2])],\r\n    [this.thumbBR,\r\n    new vec2([w / 2, h / 2])],\r\n    [this.thumbBC,\r\n    new vec2([0, h / 2])],\r\n    [this.thumbCR,\r\n    new vec2([0, h / 2 + 30])]].forEach(thumb => {\r\n      const ct = thumb[1];\r\n      ct.multiply(new vec2([zoom, zoom]));\r\n      // ct.add(center);\r\n      // ct.add(translate);\r\n      // const rot_ct = ct.multiplyMat2(rot);\r\n      thumb[0].xy = ct.xy;\r\n    })\r\n    this.onDidUpdate.emit();\r\n    this.changeRef.markForCheck();\r\n  }\r\n\r\n  public startTranslate(e: MouseEvent, stopProp: boolean = false) {\r\n    if (e.button != 0) return;\r\n    if (stopProp) e.stopPropagation();\r\n    const movable = this.movable;\r\n    this.srcMousePosition_ = new vec2([e.screenX, e.screenY]);\r\n    this.srcMovableState_ = new vec4([\r\n      movable.x, movable.y, movable.w, movable.h])\r\n    window.addEventListener('mousemove', this.updateTranslate);\r\n    const mouseup = () => {\r\n      this.commandService_.dispatch(\r\n        new CanvasAddStackElementCommand());\r\n      window.removeEventListener('mousemove', this.updateTranslate);\r\n      window.removeEventListener('mouseup', mouseup);\r\n    }\r\n    window.addEventListener('mouseup', mouseup);\r\n  }\r\n\r\n  private updateTranslate(e: MouseEvent) {\r\n    const movable = this.movable;\r\n    const currentMosuePosition = new vec2([e.screenX, e.screenY]);\r\n    const dp = currentMosuePosition.subtract(this.srcMousePosition_);\r\n    const zoom = 1 / this.canvasComponentService_.canvasComponent.cameraZoom;\r\n    dp.multiply(new vec2([zoom, zoom]));\r\n    const nx = this.srcMovableState_.x + dp.x;\r\n    const ny = this.srcMovableState_.y + dp.y;\r\n\r\n    const command = new MovableTranslateCommand(movable, nx, ny);\r\n    this.commandService_.dispatch(command);\r\n  }\r\n\r\n  public startResize(e: MouseEvent, resizeFunc: any) {\r\n    if (e.button != 0) return;\r\n    e.stopPropagation();\r\n    const movable = this.movable;\r\n    this.srcMousePosition_ = new vec2([e.screenX, e.screenY]);\r\n    this.srcMovableState_ = new vec4([\r\n      movable.x, movable.y, movable.w, movable.h])\r\n    this.srcMovableRotate_ = movable.r;\r\n    this.saveSrcRotation();\r\n    window.addEventListener('mousemove', resizeFunc);\r\n    const mouseup = () => {\r\n      this.commandService_.dispatch(\r\n        new CanvasAddStackElementCommand());\r\n      window.removeEventListener('mousemove', resizeFunc);\r\n      window.removeEventListener('mouseup', mouseup);\r\n    }\r\n    window.addEventListener('mouseup', mouseup);\r\n  }\r\n\r\n  private updateResize(\r\n      multiplier: [number, number, number, number],\r\n      e: MouseEvent) {\r\n    e.stopPropagation();\r\n    const movable = this.movable;\r\n    const src = this.srcMovableState_;\r\n    const currentMosuePosition = new vec2([e.screenX, e.screenY]);\r\n    const dp = currentMosuePosition.subtract(this.srcMousePosition_);\r\n    const local_dp = new vec2([dp.x, dp.y]);\r\n    local_dp.multiplyMat2(this.srcRrotationMat_);\r\n    const zoom = 1 / this.canvasComponentService_.canvasComponent.cameraZoom;\r\n    local_dp.multiply(new vec2([zoom, zoom]));\r\n\r\n    if (movable.aspect) { \r\n      const projection = new vec2([\r\n        -src.z * multiplier[0] + src.z * multiplier[2],\r\n        -src.w * multiplier[1] + src.w * multiplier[3]]).normalize();\r\n      projection.scale(vec2.dot(projection, local_dp), local_dp);\r\n    }\r\n\r\n    const newLocalUL = new vec2([\r\n      - src.z / 2 + local_dp.x * multiplier[0],\r\n      - src.w / 2 + local_dp.y * multiplier[1]])\r\n    const newLocalBR = new vec2([\r\n      src.z / 2 + local_dp.x * multiplier[2],\r\n      src.w / 2 + local_dp.y * multiplier[3]]);\r\n    const newLocalCenter =  newLocalUL.copy();\r\n    newLocalCenter.add(newLocalBR).multiply(new vec2([0.5, 0.5]));\r\n    const newCenter = newLocalCenter.copy();\r\n    newCenter.multiplyMat2(this.srcRotationMat_);\r\n    newCenter.add(new vec2([src.x, src.y]));\r\n    const newUL = newLocalUL.copy();\r\n    const newBR = newLocalBR.copy();\r\n    newUL.multiplyMat2(this.srcRotationMat_).add(newCenter);\r\n    newBR.multiplyMat2(this.srcRotationMat_).add(newCenter);\r\n    const newSize = newLocalBR.subtract(newLocalUL);\r\n\r\n    const nx = newCenter.x;\r\n    const ny = newCenter.y;\r\n    const nw = Math.abs(newSize.x);\r\n    const nh = Math.abs(newSize.y);\r\n    const nr = (newSize.x >= 0 && newSize.y >= 0) ? \r\n      this.srcMovableRotate_ :\r\n      (this.srcMovableRotate_ + 180 + 360) % 360;\r\n\r\n    this.commandService_.dispatch(\r\n        new MovableTranslateCommand(movable, nx, ny));\r\n    this.commandService_.dispatch(\r\n        new MovableResizeCommand(movable, nw, nh));\r\n    this.commandService_.dispatch(\r\n        new MovableRotateCommand(movable, nr));\r\n  }\r\n\r\n  startRotate(e: MouseEvent) {\r\n    if (e.button != 0) return;\r\n    e.stopPropagation();\r\n    const movable = this.movable;\r\n    this.srcMousePosition_ = new vec2([e.pageX, e.pageY]);\r\n    this.srcMovableState_ = new vec4([\r\n      movable.x, movable.y, movable.w, movable.h])\r\n    this.srcMovableRotate_ = movable.r;\r\n    this.saveSrcRotation();\r\n    window.addEventListener('mousemove', this.updateRotate);\r\n    const mouseup = () => {\r\n      this.commandService_.dispatch(\r\n        new CanvasAddStackElementCommand());\r\n      window.removeEventListener('mousemove', this.updateRotate);\r\n      window.removeEventListener('mouseup', mouseup);\r\n    }\r\n    window.addEventListener('mouseup', mouseup);\r\n  }\r\n\r\n  private updateRotate(e: MouseEvent) {\r\n    e.stopPropagation();\r\n    const movable = this.movable;\r\n    const currentMosuePosition = new vec2([e.pageX, e.pageY]);\r\n    const dp = this.canvasComponentService_.\r\n        canvasComponent.fromPageToCanvasScreen(currentMosuePosition)\r\n    dp.subtract(this.centerVec);\r\n    const rad = Math.atan2(dp.y, dp.x);\r\n    const deg = ((rad / Math.PI * 180 - 90) + 360) % 360\r\n\r\n    this.commandService_.dispatch(\r\n        new MovableRotateCommand(movable, deg));\r\n  }\r\n\r\n  public focus() {\r\n    this.focused = true;\r\n    this.update();\r\n    this.changeRef.markForCheck();\r\n  }\r\n\r\n  public blur() {\r\n    this.focused = false;\r\n    this.update();\r\n    this.changeRef.markForCheck();\r\n  }\r\n\r\n  public getCenterStyle() {\r\n    return {\r\n      'z-index': this.movable.z,\r\n      transform: `\r\n        translateX(${this.movable.x}px)\r\n        translateY(${this.movable.y}px)`\r\n    }\r\n  }\r\n\r\n  public getThumbCenterStyle() {\r\n    return {\r\n      transform: `\r\n        translateX(${this.centerVec.x}px)\r\n        translateY(${this.centerVec.y}px)\r\n        rotate(${this.movable.r}deg)`\r\n    }\r\n  }\r\n\r\n  public getThumbContentStyle() {\r\n    return {\r\n      width: `${this.sizeVec.x}px`,\r\n      height: `${this.sizeVec.y}px`,\r\n      transform: `\r\n        translateX(${-this.sizeVec.x / 2}px)\r\n        translateY(${-this.sizeVec.y / 2}px)`\r\n    }\r\n  }\r\n\r\n  public getBoxStyle() {\r\n    return {\r\n      width: `${Math.abs(this.movable.w)}px`,\r\n      height: `${Math.abs(this.movable.h)}px`,\r\n      transform: `\r\n        translateX(${-Math.abs(this.movable.w) / 2}px)\r\n        translateY(${-Math.abs(this.movable.h) / 2}px)\r\n        rotate(${this.movable.r}deg)`\r\n    }\r\n  }\r\n\r\n  public getGUIStyle() {\r\n    return {\r\n      transform: `\r\n        translateX(${this.movable.x}px)\r\n        translateY(${this.movable.y}px)`\r\n    }\r\n  }\r\n\r\n  public getThumbStyle(thumb: vec2) {\r\n    return {\r\n      transform: `translateX(${thumb.x}px) translateY(${thumb.y}px)`\r\n    }\r\n  }\r\n\r\n  public getLineStyle(from: vec2, to: vec2) {\r\n    const sub = new vec2([to.x, to.y]);\r\n    sub.subtract(from);\r\n    const angle = Math.atan2(sub.y, sub.x) / Math.PI * 180;\r\n    return {\r\n      width: `${sub.length()}px`,\r\n      transform: `translateX(${from.x + 0.5}px) translateY(${from.y}px) rotate(${angle}deg)`\r\n    }\r\n  }\r\n\r\n}","<div class=\"movable\" [ngStyle]=\"getCenterStyle()\">\r\n  <ng-template #gui>\r\n    <div class=\"thumbs\" [ngStyle]=\"getThumbCenterStyle()\">\r\n      <div class=\"thumb tl\"\r\n        (mousedown)=\"startResize($event, updateResizeUL)\"\r\n        [ngStyle]=\"getThumbStyle(thumbTL)\"></div>\r\n      <div class=\"thumb tr\"\r\n        (mousedown)=\"startResize($event, updateResizeUR)\"\r\n        [ngStyle]=\"getThumbStyle(thumbTR)\"></div>\r\n      <div class=\"thumb bl\"\r\n        (mousedown)=\"startResize($event, updateResizeBL)\"\r\n        [ngStyle]=\"getThumbStyle(thumbBL)\"></div>\r\n      <div class=\"thumb br\"\r\n        (mousedown)=\"startResize($event, updateResizeBR)\"\r\n        [ngStyle]=\"getThumbStyle(thumbBR)\"></div>\r\n      <div class=\"line top\" [ngStyle]=\"getLineStyle(thumbTL, thumbTR)\"></div>\r\n      <div class=\"line right\" [ngStyle]=\"getLineStyle(thumbTR, thumbBR)\"></div>\r\n      <div class=\"line bottom\" [ngStyle]=\"getLineStyle(thumbBR, thumbBL)\"></div>\r\n      <div class=\"line left\" [ngStyle]=\"getLineStyle(thumbBL, thumbTL)\"></div>\r\n      <div class=\"line rotate\" [ngStyle]=\"getLineStyle(thumbBC, thumbCR)\">\r\n        <div class=\"thumb\"\r\n          (mousedown)=\"startRotate($event)\"></div>\r\n      </div>\r\n      <!-- <div class=\"content\" (mousedown)=\"startTranslate($event, true)\"\r\n        [ngStyle]=\"getThumbContentStyle()\"\r\n        [attr.movable-id]=\"movable.id\"\r\n        ></div> -->\r\n    </div>\r\n  </ng-template>\r\n  <div class=\"content\" [ngStyle]=\"getBoxStyle()\"\r\n    (mousedown)=\"startTranslate($event)\">\r\n    <ng-content></ng-content>\r\n  </div>\r\n</div>","import { Component, Input, ChangeDetectionStrategy, ViewChild, ElementRef, AfterViewInit, OnInit, OnDestroy, ComponentRef } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { throttleTime } from 'rxjs/operators';\r\nimport { TextDrawing } from 'src/app/model/text-drawing';\r\nimport { IDrawingComponent } from 'src/app/components/drawing/drawing.component';\r\nimport { MovableComponent } from 'src/app/components/movable/movable.component';\r\nimport { ImageFilter } from 'src/app/util/image-filter';\r\n\r\n@Component({\r\n  selector: 'text-drawing',\r\n  template: `\r\n    <movable #movable [movable]=\"drawing.movable\">\r\n      <canvas #canvas></canvas>\r\n    </movable>`,\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class TextDrawingComponent implements IDrawingComponent, AfterViewInit, OnDestroy {\r\n\r\n  @ViewChild('canvas') canvasRef_: ElementRef<HTMLCanvasElement>;\r\n  @ViewChild('movable') movableComponent: MovableComponent;\r\n  private cvs_: HTMLCanvasElement;\r\n  private ctx_: CanvasRenderingContext2D;\r\n\r\n  @Input() drawing: TextDrawing;\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.cvs_ = this.canvasRef_.nativeElement;\r\n    this.ctx_ = this.canvasRef_.nativeElement.getContext('2d');\r\n    this.subs_.push(this.movableComponent.onDidUpdate.subscribe(() => {\r\n      this.localRender();\r\n    }));\r\n    this.subs_.push(this.drawing.onDidDirty.pipe(\r\n      throttleTime(16, undefined, {trailing: true})\r\n    ).subscribe(() => { this.localRender() }));\r\n    this.subs_.push(this.drawing.onDidChangeText.pipe(\r\n      throttleTime(16, undefined, {trailing: true})\r\n    ).subscribe(() => { this.localRender() }));\r\n    this.localRender();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subs_.forEach(sub => sub.unsubscribe());\r\n  }\r\n\r\n  private localRender() {\r\n    const movable = this.drawing.movable;\r\n    this.cvs_.width = Math.abs(movable.w);\r\n    this.cvs_.height = Math.abs(movable.h);\r\n    this.render(this.ctx_);\r\n  }\r\n\r\n  public render(ctx: CanvasRenderingContext2D) {\r\n    const drawing = this.drawing;\r\n    const movable = this.drawing.movable;\r\n    ctx.font = `${Math.abs(drawing.size)}px ${drawing.font}`;\r\n    ctx.fillStyle = this.drawing.color;\r\n    ctx.textBaseline = 'middle';\r\n    ctx.fillText(drawing.text, 0, movable.h / 2);\r\n    const filter = this.drawing.filter;\r\n    filter && filter.apply(ctx);\r\n  }\r\n\r\n}","import { Drawing } from 'src/app/model/drawing';\r\nimport { ICommand } from 'src/app/model/command';\r\nimport { EditStack } from 'src/app/model/edit-stack';\r\nimport { EventEmitter } from '@angular/core';\r\n\r\nexport abstract class CanvasCommand implements ICommand {\r\n  canvas: Canvas;\r\n  public abstract execute(): ICommand;\r\n}\r\n\r\nexport class CanvasAddStackElementCommand extends CanvasCommand {\r\n  public execute(): ICommand {\r\n    this.canvas.editStack.pushStackElement();\r\n    return null;\r\n  }\r\n}\r\n\r\nexport class CanvasAddDrawingCommand implements ICommand {\r\n  constructor(public readonly canvas: Canvas,\r\n    public readonly drawing: Drawing, public readonly index?: number) {}\r\n\r\n  public execute(): ICommand {\r\n    this.canvas.addDrawing(this.drawing);\r\n    return new CanvasRemoveDrawingCommand(this.canvas, this.drawing);\r\n  }\r\n\r\n}\r\n\r\nexport class CanvasResizeCommand implements ICommand {\r\n  constructor(public readonly canvas: Canvas,\r\n    public readonly w: number, public readonly h: number) {}\r\n\r\n  public execute(): ICommand {\r\n    const canvas = this.canvas;\r\n    const inverse = new CanvasResizeCommand(\r\n      canvas, canvas.width, canvas.height);\r\n    canvas.width = this.w;\r\n    canvas.height = this.h;\r\n    return inverse;\r\n  }\r\n\r\n}\r\n\r\nexport class CanvasRemoveDrawingCommand implements ICommand {\r\n  constructor(public readonly canvas: Canvas,\r\n    public readonly drawing: Drawing) {}\r\n\r\n  public execute(): ICommand {\r\n    if (!this.canvas.hasDrawing(this.drawing)) return;\r\n    const index = this.canvas.getDrawingIndex(this.drawing);\r\n    const inverse = new CanvasAddDrawingCommand(\r\n      this.canvas, this.drawing, index);\r\n    this.canvas.removeDrawing(this.drawing);\r\n    return inverse;\r\n  }\r\n}\r\n\r\nexport class CanvasReorderCommand implements ICommand {\r\n  constructor(public readonly canvas: Canvas,\r\n    public readonly i: number, public readonly j: number) {}\r\n\r\n  public execute(): ICommand {\r\n    const canvas = this.canvas;\r\n    const ii = canvas.drawings[this.i];\r\n    const jj = canvas.drawings[this.j];\r\n    if (!ii || !jj) return;\r\n    const inverse = new CanvasReorderCommand(\r\n      canvas, this.i, this.j);\r\n    canvas.swapDrawing(this.i, this.j);\r\n    return inverse;\r\n  }\r\n\r\n}\r\n\r\nexport interface CanvasDrawingAddRemoveEvent {\r\n  readonly drawing: Drawing;\r\n  readonly index: number;\r\n}\r\n\r\nexport class Canvas {\r\n\r\n  public readonly onDidAddDrawing = new EventEmitter<CanvasDrawingAddRemoveEvent>();\r\n  public readonly onWillRemoveDrawing = new EventEmitter<CanvasDrawingAddRemoveEvent>();\r\n  public readonly onDidChangeSize = new EventEmitter<void>();\r\n  public readonly onDidReorderDrawing = new EventEmitter<[number, number]>();\r\n\r\n  private editStack_: EditStack = new EditStack();\r\n  public get editStack() { return this.editStack_; }\r\n\r\n  private drawings_: Array<Drawing> = [];\r\n  public get drawings(): ReadonlyArray<Drawing> {\r\n    return this.drawings_; }\r\n\r\n  private width_: number = 500;\r\n  public get width() { return this.width_;}\r\n  public set width(v: number) {\r\n    if (isNaN(v)) {\r\n      this.onDidChangeSize.emit();\r\n      return;\r\n    }\r\n    this.width_ = v;\r\n    this.onDidChangeSize.emit();\r\n  }\r\n  private height_: number = 500;\r\n  public get height() { return this.height_; }\r\n  public set height(v: number) {\r\n    if (isNaN(v)) {\r\n      this.onDidChangeSize.emit();\r\n      return;\r\n    }\r\n    this.height_ = v;\r\n    this.onDidChangeSize.emit();\r\n  }\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public getDrawingIndex(drawing: Drawing) {\r\n    return this.drawings_.indexOf(drawing);\r\n  }\r\n\r\n  public swapDrawing(i: number, j: number) {\r\n    const tmp = this.drawings_[i];\r\n    this.drawings_[i] = this.drawings_[j];\r\n    this.drawings_[j] = tmp;\r\n    this.reorder();\r\n    this.onDidReorderDrawing.emit([i, j]);\r\n  }\r\n\r\n  public hasDrawing(drawing: Drawing) {\r\n    return this.drawings.indexOf(drawing) != -1;\r\n  }\r\n\r\n  public addDrawing(drawing: Drawing, index?: number) {\r\n    index = index || 0;\r\n    this.drawings_.splice(index || 0, 0, drawing);\r\n    this.reorder();\r\n    this.onDidAddDrawing.emit({\r\n      drawing: drawing,\r\n      index: index\r\n    });\r\n  }\r\n\r\n  public removeDrawing(drawing: Drawing) {\r\n    this.onWillRemoveDrawing.emit({\r\n      drawing: drawing,\r\n      index: this.getDrawingIndex(drawing)\r\n    });\r\n    this.reorder();\r\n    this.drawings_.splice(this.drawings_.indexOf(drawing), 1);\r\n  }\r\n\r\n  public pushCommand(command: ICommand) {\r\n    this.editStack_.pushEditCommand(command);\r\n  }\r\n\r\n  private reorder() {\r\n    let z = this.drawings_.length - 1;\r\n    for (let i = 0; i < this.drawings_.length; i ++) {\r\n      const drawing = this.drawings_[i];\r\n      drawing.movable.z = z--;\r\n    }\r\n  }\r\n\r\n}","import { ImageFilter } from 'src/app/util/image-filter';\r\nimport { EventEmitter } from '@angular/core';\r\nimport { ICommand } from 'src/app/model/command';\r\nimport { ICommandService } from 'src/app/service/command.service';\r\n\r\nexport interface IDrawingFilter {\r\n\r\n  readonly type: string;\r\n\r\n  readonly onUpdate: EventEmitter<void>;\r\n  apply(ctx: CanvasRenderingContext2D): void;\r\n\r\n}\r\n\r\nexport abstract class AbstractDrawingFilter implements IDrawingFilter {\r\n\r\n  public abstract get type(): string;\r\n  public readonly onUpdate = new EventEmitter<void>();\r\n\r\n  public abstract apply(ctx: CanvasRenderingContext2D): void;\r\n\r\n}\r\n\r\nexport class BlurDrawingFilter extends AbstractDrawingFilter {\r\n\r\n  public static readonly type = \"Blur\";\r\n  readonly type = BlurDrawingFilter.type;\r\n\r\n  public apply(ctx: CanvasRenderingContext2D) {\r\n    const g = 1 / 9;\r\n    ImageFilter.boxFilter(ctx, [g,g,g,g,g,g,g,g,g]);\r\n  }\r\n\r\n}\r\n\r\nexport class ColorDrawingFilter extends AbstractDrawingFilter {\r\n\r\n  public static readonly type = \"Color\";\r\n  readonly type = ColorDrawingFilter.type;\r\n\r\n  private r_: number = 100;\r\n  public get r() { return this.r_; }\r\n  public set r(v: number) {\r\n    this.r_ = v;\r\n    this.onUpdate.emit();\r\n  }\r\n  private g_: number = 70;\r\n  public get g() { return this.g_; }\r\n  public set g(v: number) {\r\n    this.g_ = v;\r\n    this.onUpdate.emit();\r\n  }\r\n  private b_: number = 30;\r\n  public get b() { return this.b_; }\r\n  public set b(v: number) {\r\n    this.b_ = v;\r\n    this.onUpdate.emit();\r\n  }\r\n  private o_: number = 0.3;\r\n  public get o() { return this.o_; }\r\n  public set o(v: number) {\r\n    this.o_ = v;\r\n    this.onUpdate.emit();\r\n  }\r\n\r\n  public apply(ctx: CanvasRenderingContext2D) {\r\n    ImageFilter.mixWithColor(ctx, this.r, this.g, this.b, this.o);\r\n  }\r\n\r\n}\r\n\r\nexport class ColorDawingFilterChangeCommand implements ICommand {\r\n  constructor(public readonly filter: ColorDrawingFilter,\r\n    public readonly r, public readonly g, public readonly b,\r\n    public readonly o) {}\r\n\r\n  public execute(): ICommand {\r\n    const inverse = new ColorDawingFilterChangeCommand(\r\n      this.filter, this.filter.r, this.filter.g, this.filter.b,\r\n      this.filter.o);\r\n    this.filter.r = this.r;\r\n    this.filter.g = this.g;\r\n    this.filter.b = this.b;\r\n    this.filter.o = this.o;\r\n    return inverse;\r\n  }\r\n}\r\n\r\nexport class GrayscaleDrawingFilter extends AbstractDrawingFilter {\r\n\r\n  public static readonly type = \"Grayscale\";\r\n  readonly type = GrayscaleDrawingFilter.type;\r\n\r\n  public apply(ctx: CanvasRenderingContext2D) {\r\n    ImageFilter.grayScale(ctx);\r\n  }\r\n\r\n}\r\n\r\nclass _FilterFactory {\r\n\r\n  public create(type: string) {\r\n    switch (type) {\r\n      case BlurDrawingFilter.type:\r\n        return new BlurDrawingFilter();\r\n      case ColorDrawingFilter.type:\r\n        return new ColorDrawingFilter();\r\n      case GrayscaleDrawingFilter.type:\r\n        return new GrayscaleDrawingFilter();\r\n    }\r\n    return null;\r\n  }\r\n\r\n}\r\nexport const FilterFactory = new _FilterFactory();","import { Movable } from 'src/app/model/movable';\r\nimport { IDrawingFilter } from 'src/app/model/drawing-filter';\r\nimport { EventEmitter } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { ICommand } from 'src/app/model/command';\r\n\r\nlet __next_id = 0;\r\n\r\nexport interface IDrawing {\r\n\r\n  readonly id: number;\r\n  readonly type: string;\r\n  name: string;\r\n  readonly movable: Movable;\r\n  filter: IDrawingFilter;\r\n\r\n}\r\n\r\nexport class DrawingChangeFilterCommand implements ICommand {\r\n  constructor(public readonly drawing: Drawing,\r\n      public readonly filter: IDrawingFilter) {}\r\n\r\n  public execute(): ICommand {\r\n    const prev = this.drawing.filter;\r\n    const inverse = new DrawingChangeFilterCommand(this.drawing,\r\n        prev);\r\n    this.drawing.filter = this.filter;\r\n    return inverse;\r\n  }\r\n}\r\n\r\nexport abstract class Drawing implements IDrawing {\r\n\r\n  public readonly id: number;\r\n\r\n  public readonly onDidDirty = new EventEmitter<void>();\r\n  public readonly onDidChangeFilter = new EventEmitter<void>();\r\n\r\n  private filterSub_: Subscription;\r\n\r\n  public abstract get movable(): Movable;\r\n\r\n  private filter_: IDrawingFilter;\r\n  public get filter() { return this.filter_; }\r\n  public set filter(filter: IDrawingFilter) {\r\n    this.filterSub_ && this.filterSub_.unsubscribe();\r\n    this.filter_ = filter;\r\n    if (filter) {\r\n      this.filterSub_ = this.filter_.onUpdate.subscribe(() => {\r\n        this.onDidDirty.emit(); })\r\n    }\r\n    this.onDidChangeFilter.emit();\r\n    this.onDidDirty.emit();\r\n  }\r\n\r\n  constructor(\r\n    public readonly type: string,\r\n    public name: string) {\r\n    this.id = ++__next_id;\r\n  }\r\n\r\n  public dispose() {\r\n    this.filterSub_ && this.filterSub_.unsubscribe();\r\n  }\r\n\r\n}","import { ICommand } from 'src/app/model/command';\r\n\r\ninterface IStackElement {\r\n  commands: ICommand[];\r\n}\r\n\r\nclass StackElement implements IStackElement {\r\n\r\n  public commands: ICommand[] = [];\r\n\r\n  push(command: ICommand): void {\r\n    this.commands.push(command);\r\n  }\r\n\r\n}\r\n\r\nexport class EditStack {\r\n\r\n  private past_: StackElement[] = [];\r\n  private future_: StackElement[] = [];\r\n  private currentStackElement_: StackElement | null = null;\r\n\r\n  public pushEditCommand(command: ICommand) {\r\n    const inverse = command.execute();\r\n    if (!inverse) return;\r\n    if (!this.currentStackElement_) {\r\n      this.currentStackElement_ = new StackElement();\r\n    }\r\n    this.currentStackElement_.push(inverse);\r\n    this.future_ = [];\r\n  }\r\n\r\n  public pushStackElement(): void {\r\n    if (this.currentStackElement_ !== null) {\r\n      this.past_.push(this.currentStackElement_);\r\n      this.currentStackElement_ = null;\r\n    }\r\n  }\r\n\r\n  public get canUndo() {\r\n    return this.past_.length > 0 || this.currentStackElement_ != null;\r\n  }\r\n\r\n  public get canRedo() {\r\n    return this.future_.length > 0;\r\n  }\r\n\r\n  public undo() {\r\n    this.pushStackElement();\r\n    const pastStackElement = this.past_.pop();\r\n    if (!pastStackElement) return;\r\n    const futureStackElemnet = new StackElement();\r\n    for (let i = pastStackElement.commands.length - 1; i >= 0 ; i --) {\r\n      const command = pastStackElement.commands[i];\r\n      const inverse = command.execute();\r\n      if (!inverse) continue;\r\n      futureStackElemnet.push(inverse);\r\n    }\r\n    this.future_.push(futureStackElemnet);\r\n\r\n  }\r\n\r\n  public redo() {\r\n    const futureStackElement = this.future_.pop();\r\n    if (!futureStackElement) return;\r\n    const pastStackElemnet = new StackElement();\r\n    for (let i = futureStackElement.commands.length - 1; i >= 0 ; i --) {\r\n      const command = futureStackElement.commands[i];\r\n      const inverse = command.execute();\r\n      if (!inverse) continue;\r\n      pastStackElemnet.push(inverse);\r\n    }\r\n    this.past_.push(pastStackElemnet);\r\n  }\r\n\r\n}","import { Movable } from 'src/app/model/movable';\r\nimport { Drawing } from 'src/app/model/drawing';\r\nimport { ColorDrawingFilter } from 'src/app/model/drawing-filter';\r\nimport { ICommand } from 'src/app/model/command';\r\n\r\nexport class ImageDrawingChangeInvertCommand implements ICommand {\r\n  constructor(public readonly drawing: ImageDrawing,\r\n    public readonly invertX: boolean, public readonly invertY: boolean) {}\r\n\r\n  public execute(): ICommand {\r\n    const inverse = new ImageDrawingChangeInvertCommand(\r\n      this.drawing, this.invertX, this.invertY);\r\n    const invertX = this.invertX || this.invertX;\r\n    const invertY = this.invertY || this.invertY;\r\n    this.drawing.invertX = invertX;\r\n    this.drawing.invertY = invertY;\r\n    return inverse;\r\n  }\r\n}\r\n\r\nexport class ImageDrawing extends Drawing {\r\n\r\n  static readonly type = 'ImageDrawing';\r\n\r\n  public readonly movable = new Movable();\r\n\r\n  private invertX_: boolean = false;\r\n  public get invertX() { return this.invertX_; }\r\n  public set invertX(v: boolean) {\r\n    this.invertX_ = !!v;\r\n    this.onDidDirty.emit();\r\n  }\r\n  private invertY_: boolean = false;\r\n  public get invertY() { return this.invertY_; }\r\n  public set invertY(v: boolean) {\r\n    this.invertY_ = !!v;\r\n    this.onDidDirty.emit();\r\n  }\r\n\r\n  constructor(\r\n    public readonly img: HTMLImageElement) {\r\n    super(ImageDrawing.type, `Image`);\r\n    this.name = `Image ${this.id}`;\r\n    this.movable.w = img.width;\r\n    this.movable.h = img.height;\r\n    this.movable.onDidChangeSize.subscribe(() => this.onDidDirty.emit());\r\n  }\r\n\r\n}","import { EventEmitter } from '@angular/core';\r\nimport { ICommand } from 'src/app/model/command';\r\n\r\nexport class MovableResizeCommand implements ICommand {\r\n  constructor(public readonly movable: Movable,\r\n    public readonly w: number, public readonly h: number) {}\r\n\r\n  execute(): ICommand {\r\n    const movable = this.movable;\r\n    const inverse = new MovableResizeCommand(\r\n      movable, movable.w, movable.h);\r\n    movable.w = this.w;\r\n    movable.h = this.h;\r\n    return inverse;\r\n  }\r\n\r\n}\r\n\r\nexport class MovableTranslateCommand implements ICommand {\r\nconstructor(public readonly movable: Movable,\r\n    public readonly x: number, public readonly y: number) {}\r\n\r\n  execute(): ICommand {\r\n    const movable = this.movable;\r\n    const inverse = new MovableTranslateCommand(\r\n      movable, movable.x, movable.y);\r\n    movable.x = this.x;\r\n    movable.y = this.y;\r\n    return inverse;\r\n  }\r\n\r\n}\r\n\r\nexport class MovableRotateCommand implements ICommand {\r\n  constructor(public readonly movable: Movable,\r\n    public readonly r: number) {}\r\n\r\n  execute(): ICommand {\r\n    const movable = this.movable;\r\n    const inverse = new MovableRotateCommand(\r\n      movable, movable.r);\r\n    movable.r = this.r;\r\n    return inverse;\r\n  }\r\n\r\n}\r\n\r\nlet __next_movable_id = 0;\r\n\r\nexport class Movable {\r\n\r\n  public readonly id = ++__next_movable_id;\r\n\r\n  public readonly onDidChange = new EventEmitter<void>();\r\n  public readonly onDidChangePosition = new EventEmitter<void>();\r\n  public readonly onDidChangeSize = new EventEmitter<void>();\r\n  public readonly onDidChangeRotation = new EventEmitter<void>();\r\n\r\n  private x_: number = 0;\r\n  private y_: number = 0;\r\n  private z_: number = 0;\r\n  private w_: number = 100;\r\n  private h_: number = 50;\r\n  private r_: number = 0;\r\n  private rad_: number = 0;\r\n\r\n  private aspect_: boolean = true;\r\n  public get aspect() { return this.aspect_; }\r\n  public set aspect(v: boolean) {\r\n    this.aspect_ = v;\r\n    this.onDidChange.emit();\r\n  }\r\n  private aspectRatio_: number = 1;\r\n\r\n\r\n  public get x() { return this.x_; }\r\n  public set x(v: number) {\r\n    if (isNaN(v)) {\r\n      this.onDidChangePosition.emit();\r\n      this.onDidChange.emit();\r\n      return;\r\n    }\r\n    v = Math.round(v);\r\n    this.x_ = v;\r\n    this.onDidChangePosition.emit();\r\n    this.onDidChange.emit();\r\n  }\r\n  public get z() { return this.z_; }\r\n  public set z(v: number) {\r\n    if (isNaN(v)) {\r\n      this.onDidChangePosition.emit();\r\n      this.onDidChange.emit();\r\n      return;\r\n    }\r\n    this.z_ = v;\r\n    this.onDidChangePosition.emit();\r\n    this.onDidChange.emit();\r\n  }\r\n  public get y() { return this.y_; }\r\n  public set y(v: number) {\r\n    if (isNaN(v)) {\r\n      this.onDidChangePosition.emit();\r\n      this.onDidChange.emit();\r\n      return;\r\n    }\r\n    v = Math.round(v);\r\n    this.y_ = v;\r\n    this.onDidChangePosition.emit();\r\n    this.onDidChange.emit();\r\n  }\r\n  public get w() { return this.w_; }\r\n  public set w(v: number) {\r\n    if (isNaN(v)) {\r\n      this.onDidChangeSize.emit();\r\n      this.onDidChange.emit();\r\n      return;\r\n    }\r\n    v = Math.round(v);\r\n    this.w_ = v;\r\n    this.onDidChangeSize.emit();\r\n    this.onDidChange.emit();\r\n  }\r\n  public get h() { return this.h_; }\r\n  public set h(v: number) {\r\n    if (isNaN(v)) {\r\n      this.onDidChangeSize.emit();\r\n      this.onDidChange.emit();\r\n      return;\r\n    }\r\n    v = Math.round(v);\r\n    this.h_ = v;\r\n    this.onDidChangeSize.emit();\r\n    this.onDidChange.emit();\r\n  }\r\n  public get r() { return this.r_; }\r\n  public set r(v: number) {\r\n    if (isNaN(v)) {\r\n      this.onDidChangeRotation.emit();\r\n      this.onDidChange.emit();\r\n      return;\r\n    }\r\n    v = Math.round(v);\r\n    this.r_ = v;\r\n    this.rad_ = v / 180 * Math.PI;\r\n    this.onDidChangeRotation.emit();\r\n    this.onDidChange.emit();\r\n  }\r\n  public get rad() { return this.rad_; }\r\n\r\n  constructor() {\r\n  }\r\n\r\n}","import { Drawing } from 'src/app/model/drawing';\r\nimport { Movable } from 'src/app/model/movable';\r\nimport { Subscription } from 'rxjs';\r\nimport { ICommand } from 'src/app/model/command';\r\nimport { EventEmitter } from '@angular/core';\r\n\r\nexport class TextDrawingChangeTextCommand implements ICommand {\r\n  constructor(public readonly drawing: TextDrawing,\r\n    public readonly text: string) {}\r\n\r\n  public execute(): ICommand {\r\n    if (this.text === this.drawing.text) return;\r\n    const inverse = new TextDrawingChangeTextCommand(\r\n        this.drawing, this.drawing.text);\r\n    this.drawing.text = this.text;\r\n    return inverse;\r\n  }\r\n\r\n}\r\n\r\nexport class TextDrawingChangeSizeCommand implements ICommand {\r\n  constructor(public readonly drawing: TextDrawing,\r\n    public readonly size: number) {}\r\n\r\n  public execute(): ICommand {\r\n    if (this.size === this.drawing.size) return;\r\n    const inverse = new TextDrawingChangeSizeCommand(\r\n        this.drawing, this.drawing.size);\r\n    this.drawing.size = this.size;\r\n    return inverse;\r\n  }\r\n\r\n}\r\n\r\nexport class TextDrawingChangeColorCommand implements ICommand {\r\n  constructor(public readonly drawing: TextDrawing,\r\n    public readonly color: string) {}\r\n\r\n  public execute(): ICommand {\r\n    if (this.color === this.drawing.color) return;\r\n    const inverse = new TextDrawingChangeColorCommand(\r\n        this.drawing, this.drawing.color);\r\n    this.drawing.color = this.color;\r\n    return inverse;\r\n  }\r\n\r\n}\r\n\r\nexport class TextDrawingChangeFontCommand implements ICommand {\r\n  constructor(public readonly drawing: TextDrawing,\r\n    public readonly font: string) {}\r\n\r\n  public execute(): ICommand {\r\n    if (this.font === this.drawing.font) return;\r\n    const inverse = new TextDrawingChangeFontCommand(\r\n        this.drawing, this.drawing.font);\r\n    this.drawing.font = this.font;\r\n    return inverse;\r\n  }\r\n\r\n}\r\n\r\nclass TextMeasure {\r\n  private readonly cvs_ = document.createElement('canvas');\r\n  private readonly ctx_ = this.cvs_.getContext('2d');\r\n\r\n  public measure(font: string, size: number, text: string): TextMetrics {\r\n    this.ctx_.font = `${size}px ${font}`;\r\n    return this.ctx_.measureText(text);\r\n  }\r\n}\r\nconst Measure = new TextMeasure();\r\n\r\nexport class TextDrawing extends Drawing {\r\n\r\n  static readonly type = 'TextDrawing';\r\n\r\n  public readonly onDidChangeText = new EventEmitter<void>();\r\n\r\n  public readonly movable = new Movable();\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  private disableDetectMovableChange_ = false;\r\n\r\n  private font_: string = 'Nanum Gothic';\r\n  public get font() { return this.font_; }\r\n  private size_: number;\r\n  public get size() { return this.size_; }\r\n  private text_: string;\r\n  public get text() { return this.text_; }\r\n  private color_: string = \"#000000\";\r\n  public get color() { return this.color_; }\r\n  public set color(v: string) {\r\n    this.color_ = v;\r\n    this.onDidChangeText.emit();\r\n  }\r\n  private scaleX_: number = 1;\r\n  public get scaleX() { return this.scaleX_; }\r\n  private scaleY_: number = 1;\r\n  public get scaleY() { return this.scaleY_; }\r\n\r\n  constructor(\r\n    font: string, size: number, text: string) {\r\n    super(TextDrawing.type, 'Text');\r\n    this.name = `Text ${this.id}`;\r\n    this.font_ = font;\r\n    this.size_ = size;\r\n    this.text = text;\r\n    this.subs_.push(this.movable.onDidChangeSize.subscribe(() => {\r\n      this.fitFontSizeToMovable();\r\n    }));\r\n  }\r\n\r\n  private fitFontSizeToMovable() {\r\n    if (this.disableDetectMovableChange_) return;\r\n    this.size_ = Math.round(this.movable.h / 1.5);\r\n    this.onDidChangeText.emit();\r\n  }\r\n  \r\n  public set font(v: string) {\r\n    this.font_ = v;\r\n    this.disableDetectMovableChange_ = true;\r\n    const metrics = Measure.measure(this.font, this.size, this.text);\r\n    this.movable.w = metrics.width * this.scaleX;\r\n    this.movable.h = this.size * this.scaleY * 1.5;\r\n    this.disableDetectMovableChange_ = false;\r\n    this.onDidChangeText.emit();\r\n  }\r\n\r\n  public set text(v: string) {\r\n    this.text_ = v;\r\n    const metrics = Measure.measure(this.font, this.size, this.text);\r\n    this.movable.w = metrics.width * this.scaleX;\r\n    this.movable.h = this.size * this.scaleY * 1.5;\r\n    this.onDidChangeText.emit();\r\n  }\r\n\r\n  public set size(v: number) {\r\n    if (isNaN(v)) {\r\n      this.onDidChangeText.emit();\r\n      return;\r\n    }\r\n    this.size_ = v;\r\n    this.disableDetectMovableChange_ = true;\r\n    const metrics = Measure.measure(this.font, this.size, this.text);\r\n    this.movable.w = metrics.width * this.scaleX;\r\n    this.movable.h = this.size * this.scaleY * 1.5;\r\n    this.disableDetectMovableChange_ = false;\r\n    this.onDidChangeText.emit();\r\n  }\r\n\r\n\r\n  // TODO : dispose\r\n\r\n}","import { Injectable } from '@angular/core';\r\nimport { Canvas } from 'src/app/model/canvas';\r\nimport { Subscription } from 'rxjs';\r\nimport { Drawing } from 'src/app/model/drawing';\r\n\r\n@Injectable()\r\nexport class CanvasService {\r\n\r\n  public readonly canvas: Canvas;\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  private focusedDrawing_: Drawing;\r\n  public focusedDrawing() { return this.focusedDrawing_; }\r\n\r\n  constructor() {\r\n    this.canvas = new Canvas();\r\n  }\r\n\r\n}","import { ICommand } from 'src/app/model/command';\r\nimport { Canvas } from 'src/app/model/canvas';\r\nimport { InjectionToken, Injectable } from '@angular/core';\r\n\r\nimport hotkeys from 'hotkeys-js';\r\n\r\n// const hotkeys: any = require('hotkeys-js');\r\n\r\nexport interface ICommandService {\r\n\r\n  dispatch(command: ICommand): void;\r\n\r\n}\r\n\r\n@Injectable()\r\nexport class CanvasCommandService implements ICommandService {\r\n\r\n  public canvas: Canvas;\r\n\r\n  constructor() {\r\n    hotkeys('ctrl+z', () => {\r\n      this.canvas.editStack.undo();\r\n    })\r\n    hotkeys('ctrl+y', () => {\r\n      this.canvas.editStack.redo();\r\n    })\r\n  }\r\n\r\n  public dispatch(command: ICommand) {\r\n    (command as any).canvas = this.canvas;\r\n    this.canvas.pushCommand(command);\r\n  }\r\n\r\n}\r\n\r\nexport const ICommandService =\r\n    new InjectionToken<ICommandService>('CommandService');","export const epsilon = 0.00001\n","declare const _grayScale: any;\r\ndeclare const _boxFilter: any;\r\ndeclare const _mixWithColor: any;\r\ndeclare const _malloc: any;\r\ndeclare const _free: any;\r\ndeclare const HEAPU8: any;\r\n\r\nexport class ImageFilter {\r\n\r\n  public static enabled = false;\r\n\r\n  public static init() {\r\n    if (!(\"WebAssembly\" in window)) {\r\n      ImageFilter.enabled = false;\r\n      alert('Your browser does not support Webassembly!\\nImage filter will not work.')\r\n    }\r\n    else {\r\n      ImageFilter.enabled = true;\r\n    }\r\n  }\r\n\r\n  public static grayScale(ctx: CanvasRenderingContext2D) {\r\n    if (!ImageFilter.enabled) return;\r\n    const cvs = ctx.canvas;\r\n    const pixels = ctx.getImageData(0, 0, cvs.width, cvs.height).data;\r\n    const length = pixels.length;\r\n    const memory = _malloc(length);\r\n    HEAPU8.set(pixels, memory);\r\n    _grayScale(memory, cvs.width, cvs.height);\r\n    const result = HEAPU8.subarray(memory, memory + length);\r\n    ctx.putImageData(new ImageData(new Uint8ClampedArray(result), cvs.width, cvs.height), 0, 0);\r\n    _free(memory);\r\n  }\r\n\r\n  public static boxFilter(ctx: CanvasRenderingContext2D,\r\n    filter: [number,number,number,number,number,number,number,number,number]) {\r\n    if (!ImageFilter.enabled) return;\r\n    const cvs = ctx.canvas;\r\n    const pixels = ctx.getImageData(0, 0, cvs.width, cvs.height).data;\r\n    const length = pixels.length;\r\n    const memory = _malloc(length);\r\n    HEAPU8.set(pixels, memory);\r\n    _boxFilter(memory, cvs.width, cvs.height, ...filter);\r\n    const result = HEAPU8.subarray(memory, memory + length);\r\n    ctx.putImageData(new ImageData(new Uint8ClampedArray(result), cvs.width, cvs.height), 0, 0);\r\n    _free(memory);\r\n  }\r\n\r\n  public static mixWithColor(ctx: CanvasRenderingContext2D,\r\n    r: number, g: number, b: number, opacity: number) {\r\n    if (!ImageFilter.enabled) return;\r\n    const cvs = ctx.canvas;\r\n    const pixels = ctx.getImageData(0, 0, cvs.width, cvs.height).data;\r\n    const length = pixels.length;\r\n    const memory = _malloc(length);\r\n    HEAPU8.set(pixels, memory);\r\n    _mixWithColor(memory, cvs.width, cvs.height, r, g, b, opacity);\r\n    const result = HEAPU8.subarray(memory, memory + length);\r\n    ctx.putImageData(new ImageData(new Uint8ClampedArray(result), cvs.width, cvs.height), 0, 0);\r\n    _free(memory);\r\n  }\r\n\r\n}","import vec2 from './vec2'\n\nimport { epsilon } from './constants'\nimport { single } from 'rxjs/operators'\n\nexport default class mat2 {\n\n    constructor(values?: number[]) {\n        if (values !== undefined) {\n            this.init(values)\n        }\n    }\n\n    private values = new Float32Array(4)\n\n    static readonly identity = new mat2().setIdentity()\n\n    static rotation(angle: number): mat2 {\n        const cos = Math.cos(angle);\n        const sin = Math.sin(angle);\n        return new mat2([cos, -sin, sin, cos]);\n    }\n\n    at(index: number): number {\n        return this.values[index]\n    }\n\n    init(values: number[]): mat2 {\n        for (let i = 0; i < 4; i++) {\n            this.values[i] = values[i]\n        }\n\n        return this\n    }\n\n    reset(): void {\n        for (let i = 0; i < 4; i++) {\n            this.values[i] = 0\n        }\n    }\n\n    copy(dest?: mat2): mat2 {\n        if (!dest) { dest = new mat2() }\n\n        for (let i = 0; i < 4; i++) {\n            dest.values[i] = this.values[i]\n        }\n\n        return dest\n    }\n\n    all(): number[] {\n        const data: number[] = []\n        for (let i = 0; i < 4; i++) {\n            data[i] = this.values[i]\n        }\n\n        return data\n    }\n\n    row(index: number): number[] {\n        return [\n            this.values[index * 2 + 0],\n            this.values[index * 2 + 1],\n        ]\n    }\n\n    col(index: number): number[] {\n        return [\n            this.values[index],\n            this.values[index + 2],\n        ]\n    }\n\n    equals(matrix: mat2, threshold = epsilon): boolean {\n        for (let i = 0; i < 4; i++) {\n            if (Math.abs(this.values[i] - matrix.at(i)) > threshold) {\n                return false\n            }\n        }\n\n        return true\n    }\n\n    determinant(): number {\n        return this.values[0] * this.values[3] - this.values[2] * this.values[1]\n    }\n\n    setIdentity(): mat2 {\n        this.values[0] = 1\n        this.values[1] = 0\n        this.values[2] = 0\n        this.values[3] = 1\n\n        return this\n    }\n\n    transpose(): mat2 {\n        const temp = this.values[1]\n\n        this.values[1] = this.values[2]\n        this.values[2] = temp\n\n        return this\n    }\n\n    inverse(): mat2 {\n        let det = this.determinant()\n\n        if (!det) { return null }\n\n        det = 1.0 / det\n\n        const a11 = this.values[0]\n\n        this.values[0] = det * (this.values[3])\n        this.values[1] = det * (-this.values[1])\n        this.values[2] = det * (-this.values[2])\n        this.values[3] = det * a11\n\n        return this\n    }\n\n    multiply(matrix: mat2): mat2 {\n        const a11 = this.values[0]\n        const a12 = this.values[1]\n        const a21 = this.values[2]\n        const a22 = this.values[3]\n\n        this.values[0] = a11 * matrix.at(0) + a12 * matrix.at(2)\n        this.values[1] = a11 * matrix.at(1) + a12 * matrix.at(3)\n        this.values[2] = a21 * matrix.at(0) + a22 * matrix.at(2)\n        this.values[3] = a21 * matrix.at(1) + a22 * matrix.at(3)\n\n        return this\n    }\n\n    multiplyVec2(vector: vec2, result: vec2): vec2 {\n        const x = vector.x\n        const y = vector.y\n\n        if (result) {\n            result.xy = [\n                x * this.values[0] + y * this.values[1],\n                x * this.values[2] + y * this.values[3],\n            ]\n\n            return result\n        } else {\n            return new vec2([\n                x * this.values[0] + y * this.values[1],\n                x * this.values[2] + y * this.values[3],\n            ])\n        }\n    }\n\n    scale(vector: vec2): mat2 {\n        const a11 = this.values[0]\n        const a12 = this.values[1]\n        const a21 = this.values[2]\n        const a22 = this.values[3]\n\n        const x = vector.x\n        const y = vector.y\n\n        this.values[0] = a11 * x\n        this.values[1] = a12 * y\n        this.values[2] = a21 * x\n        this.values[3] = a22 * y\n\n        return this\n    }\n\n    static product(m1: mat2, m2: mat2, result: mat2): mat2 {\n        const a11 = m1.at(0)\n        const a12 = m1.at(1)\n        const a21 = m1.at(2)\n        const a22 = m1.at(3)\n\n        if (result) {\n            result.init([\n                a11 * m2.at(0) + a12 * m2.at(2),\n                a11 * m2.at(1) + a12 * m2.at(3),\n                a21 * m2.at(0) + a22 * m2.at(2),\n                a21 * m2.at(1) + a22 * m2.at(3),\n            ])\n\n            return result\n        } else {\n            return new mat2([\n                a11 * m2.at(0) + a12 * m2.at(2),\n                a11 * m2.at(1) + a12 * m2.at(3),\n                a21 * m2.at(0) + a22 * m2.at(2),\n                a21 * m2.at(1) + a22 * m2.at(3),\n            ])\n        }\n    }\n\n}\n","import mat4 from './mat4'\nimport quat from './quat'\nimport vec2 from './vec2'\nimport vec3 from './vec3'\n\nimport { epsilon } from './constants'\n\nexport default class mat3 {\n\n    constructor(values?: number[]) {\n        if (values !== undefined) {\n            this.init(values)\n        }\n    }\n\n    private values = new Float32Array(9)\n\n    static readonly identity = new mat3().setIdentity()\n\n    at(index: number): number {\n        return this.values[index]\n    }\n\n    init(values: number[]): mat3 {\n        for (let i = 0; i < 9; i++) {\n            this.values[i] = values[i]\n        }\n\n        return this\n    }\n\n    reset(): void {\n        for (let i = 0; i < 9; i++) {\n            this.values[i] = 0\n        }\n    }\n\n    copy(dest?: mat3): mat3 {\n        if (!dest) { dest = new mat3() }\n\n        for (let i = 0; i < 9; i++) {\n            dest.values[i] = this.values[i]\n        }\n\n        return dest\n    }\n\n    all(): number[] {\n        const data: number[] = []\n        for (let i = 0; i < 9; i++) {\n            data[i] = this.values[i]\n        }\n\n        return data\n    }\n\n    row(index: number): number[] {\n        return [\n            this.values[index * 3 + 0],\n            this.values[index * 3 + 1],\n            this.values[index * 3 + 2],\n        ]\n    }\n\n    col(index: number): number[] {\n        return [\n            this.values[index],\n            this.values[index + 3],\n            this.values[index + 6],\n        ]\n    }\n\n    equals(matrix: mat3, threshold = epsilon): boolean {\n        for (let i = 0; i < 9; i++) {\n            if (Math.abs(this.values[i] - matrix.at(i)) > threshold) {\n                return false\n            }\n        }\n\n        return true\n    }\n\n    determinant(): number {\n        const a00 = this.values[0]\n        const a01 = this.values[1]\n        const a02 = this.values[2]\n        const a10 = this.values[3]\n        const a11 = this.values[4]\n        const a12 = this.values[5]\n        const a20 = this.values[6]\n        const a21 = this.values[7]\n        const a22 = this.values[8]\n\n        const det01 = a22 * a11 - a12 * a21\n        const det11 = -a22 * a10 + a12 * a20\n        const det21 = a21 * a10 - a11 * a20\n\n        return a00 * det01 + a01 * det11 + a02 * det21\n    }\n\n    setIdentity(): mat3 {\n        this.values[0] = 1\n        this.values[1] = 0\n        this.values[2] = 0\n        this.values[3] = 0\n        this.values[4] = 1\n        this.values[5] = 0\n        this.values[6] = 0\n        this.values[7] = 0\n        this.values[8] = 1\n\n        return this\n    }\n\n    transpose(): mat3 {\n        const temp01 = this.values[1]\n        const temp02 = this.values[2]\n        const temp12 = this.values[5]\n\n        this.values[1] = this.values[3]\n        this.values[2] = this.values[6]\n        this.values[3] = temp01\n        this.values[5] = this.values[7]\n        this.values[6] = temp02\n        this.values[7] = temp12\n\n        return this\n    }\n\n    inverse(): mat3 {\n        const a00 = this.values[0]\n        const a01 = this.values[1]\n        const a02 = this.values[2]\n        const a10 = this.values[3]\n        const a11 = this.values[4]\n        const a12 = this.values[5]\n        const a20 = this.values[6]\n        const a21 = this.values[7]\n        const a22 = this.values[8]\n\n        const det01 = a22 * a11 - a12 * a21\n        const det11 = -a22 * a10 + a12 * a20\n        const det21 = a21 * a10 - a11 * a20\n\n        let det = a00 * det01 + a01 * det11 + a02 * det21\n\n        if (!det) {\n            return null\n        }\n\n        det = 1.0 / det\n\n        this.values[0] = det01 * det\n        this.values[1] = (-a22 * a01 + a02 * a21) * det\n        this.values[2] = (a12 * a01 - a02 * a11) * det\n        this.values[3] = det11 * det\n        this.values[4] = (a22 * a00 - a02 * a20) * det\n        this.values[5] = (-a12 * a00 + a02 * a10) * det\n        this.values[6] = det21 * det\n        this.values[7] = (-a21 * a00 + a01 * a20) * det\n        this.values[8] = (a11 * a00 - a01 * a10) * det\n\n        return this\n    }\n\n    multiply(matrix: mat3): mat3 {\n        const a00 = this.values[0]\n        const a01 = this.values[1]\n        const a02 = this.values[2]\n        const a10 = this.values[3]\n        const a11 = this.values[4]\n        const a12 = this.values[5]\n        const a20 = this.values[6]\n        const a21 = this.values[7]\n        const a22 = this.values[8]\n\n        const b00 = matrix.at(0)\n        const b01 = matrix.at(1)\n        const b02 = matrix.at(2)\n        const b10 = matrix.at(3)\n        const b11 = matrix.at(4)\n        const b12 = matrix.at(5)\n        const b20 = matrix.at(6)\n        const b21 = matrix.at(7)\n        const b22 = matrix.at(8)\n\n        this.values[0] = b00 * a00 + b01 * a10 + b02 * a20\n        this.values[1] = b00 * a01 + b01 * a11 + b02 * a21\n        this.values[2] = b00 * a02 + b01 * a12 + b02 * a22\n\n        this.values[3] = b10 * a00 + b11 * a10 + b12 * a20\n        this.values[4] = b10 * a01 + b11 * a11 + b12 * a21\n        this.values[5] = b10 * a02 + b11 * a12 + b12 * a22\n\n        this.values[6] = b20 * a00 + b21 * a10 + b22 * a20\n        this.values[7] = b20 * a01 + b21 * a11 + b22 * a21\n        this.values[8] = b20 * a02 + b21 * a12 + b22 * a22\n\n        return this\n    }\n\n    multiplyVec2(vector: vec2, result: vec2): vec2 {\n        const x = vector.x\n        const y = vector.y\n\n        if (result) {\n            result.xy = [\n                x * this.values[0] + y * this.values[3] + this.values[6],\n                x * this.values[1] + y * this.values[4] + this.values[7],\n            ]\n\n            return result\n        } else {\n            return new vec2([\n                x * this.values[0] + y * this.values[3] + this.values[6],\n                x * this.values[1] + y * this.values[4] + this.values[7],\n            ])\n        }\n    }\n\n    multiplyVec3(vector: vec3, result: vec3): vec3 {\n        const x = vector.x\n        const y = vector.y\n        const z = vector.z\n\n        if (result) {\n            result.xyz = [\n                x * this.values[0] + y * this.values[3] + z * this.values[6],\n                x * this.values[1] + y * this.values[4] + z * this.values[7],\n                x * this.values[2] + y * this.values[5] + z * this.values[8],\n            ]\n\n            return result\n        } else {\n            return new vec3([\n                x * this.values[0] + y * this.values[3] + z * this.values[6],\n                x * this.values[1] + y * this.values[4] + z * this.values[7],\n                x * this.values[2] + y * this.values[5] + z * this.values[8],\n            ])\n        }\n    }\n\n    toMat4(result: mat4): mat4 {\n        if (result) {\n            result.init([\n                this.values[0],\n                this.values[1],\n                this.values[2],\n                0,\n\n                this.values[3],\n                this.values[4],\n                this.values[5],\n                0,\n\n                this.values[6],\n                this.values[7],\n                this.values[8],\n                0,\n\n                0,\n                0,\n                0,\n                1,\n            ])\n\n            return result\n        } else {\n            return new mat4([\n                this.values[0],\n                this.values[1],\n                this.values[2],\n                0,\n\n                this.values[3],\n                this.values[4],\n                this.values[5],\n                0,\n\n                this.values[6],\n                this.values[7],\n                this.values[8],\n                0,\n\n                0,\n                0,\n                0,\n                1,\n            ])\n        }\n    }\n\n    toQuat(): quat {\n        const m00 = this.values[0]\n        const m01 = this.values[1]\n        const m02 = this.values[2]\n        const m10 = this.values[3]\n        const m11 = this.values[4]\n        const m12 = this.values[5]\n        const m20 = this.values[6]\n        const m21 = this.values[7]\n        const m22 = this.values[8]\n\n        const fourXSquaredMinus1 = m00 - m11 - m22\n        const fourYSquaredMinus1 = m11 - m00 - m22\n        const fourZSquaredMinus1 = m22 - m00 - m11\n        const fourWSquaredMinus1 = m00 + m11 + m22\n\n        let biggestIndex = 0\n\n        let fourBiggestSquaredMinus1 = fourWSquaredMinus1\n\n        if (fourXSquaredMinus1 > fourBiggestSquaredMinus1) {\n            fourBiggestSquaredMinus1 = fourXSquaredMinus1\n            biggestIndex = 1\n        }\n\n        if (fourYSquaredMinus1 > fourBiggestSquaredMinus1) {\n            fourBiggestSquaredMinus1 = fourYSquaredMinus1\n            biggestIndex = 2\n        }\n\n        if (fourZSquaredMinus1 > fourBiggestSquaredMinus1) {\n            fourBiggestSquaredMinus1 = fourZSquaredMinus1\n            biggestIndex = 3\n        }\n\n        const biggestVal = Math.sqrt(fourBiggestSquaredMinus1 + 1) * 0.5\n        const mult = 0.25 / biggestVal\n\n        const result = new quat()\n\n        switch (biggestIndex) {\n            case 0:\n\n                result.w = biggestVal\n                result.x = (m12 - m21) * mult\n                result.y = (m20 - m02) * mult\n                result.z = (m01 - m10) * mult\n\n                break\n\n            case 1:\n\n                result.w = (m12 - m21) * mult\n                result.x = biggestVal\n                result.y = (m01 + m10) * mult\n                result.z = (m20 + m02) * mult\n\n                break\n\n            case 2:\n\n                result.w = (m20 - m02) * mult\n                result.x = (m01 + m10) * mult\n                result.y = biggestVal\n                result.z = (m12 + m21) * mult\n\n                break\n\n            case 3:\n\n                result.w = (m01 - m10) * mult\n                result.x = (m20 + m02) * mult\n                result.y = (m12 + m21) * mult\n                result.z = biggestVal\n\n                break\n        }\n\n        return result\n    }\n\n    rotate(angle: number, axis: vec3): mat3 {\n        let x = axis.x\n        let y = axis.y\n        let z = axis.z\n\n        let length = Math.sqrt(x * x + y * y + z * z)\n\n        if (!length) {\n            return null\n        }\n\n        if (length !== 1) {\n            length = 1 / length\n            x *= length\n            y *= length\n            z *= length\n        }\n\n        const s = Math.sin(angle)\n        const c = Math.cos(angle)\n\n        const t = 1.0 - c\n\n        const a00 = this.values[0]\n        const a01 = this.values[1]\n        const a02 = this.values[2]\n        const a10 = this.values[4]\n        const a11 = this.values[5]\n        const a12 = this.values[6]\n        const a20 = this.values[8]\n        const a21 = this.values[9]\n        const a22 = this.values[10]\n\n        const b00 = x * x * t + c\n        const b01 = y * x * t + z * s\n        const b02 = z * x * t - y * s\n        const b10 = x * y * t - z * s\n        const b11 = y * y * t + c\n        const b12 = z * y * t + x * s\n        const b20 = x * z * t + y * s\n        const b21 = y * z * t - x * s\n        const b22 = z * z * t + c\n\n        this.values[0] = a00 * b00 + a10 * b01 + a20 * b02\n        this.values[1] = a01 * b00 + a11 * b01 + a21 * b02\n        this.values[2] = a02 * b00 + a12 * b01 + a22 * b02\n\n        this.values[3] = a00 * b10 + a10 * b11 + a20 * b12\n        this.values[4] = a01 * b10 + a11 * b11 + a21 * b12\n        this.values[5] = a02 * b10 + a12 * b11 + a22 * b12\n\n        this.values[6] = a00 * b20 + a10 * b21 + a20 * b22\n        this.values[7] = a01 * b20 + a11 * b21 + a21 * b22\n        this.values[8] = a02 * b20 + a12 * b21 + a22 * b22\n\n        return this\n    }\n\n    static product(m1: mat3, m2: mat3, result: mat3): mat3 {\n        const a00 = m1.at(0)\n        const a01 = m1.at(1)\n        const a02 = m1.at(2)\n        const a10 = m1.at(3)\n        const a11 = m1.at(4)\n        const a12 = m1.at(5)\n        const a20 = m1.at(6)\n        const a21 = m1.at(7)\n        const a22 = m1.at(8)\n\n        const b00 = m2.at(0)\n        const b01 = m2.at(1)\n        const b02 = m2.at(2)\n        const b10 = m2.at(3)\n        const b11 = m2.at(4)\n        const b12 = m2.at(5)\n        const b20 = m2.at(6)\n        const b21 = m2.at(7)\n        const b22 = m2.at(8)\n\n        if (result) {\n            result.init([\n                b00 * a00 + b01 * a10 + b02 * a20,\n                b00 * a01 + b01 * a11 + b02 * a21,\n                b00 * a02 + b01 * a12 + b02 * a22,\n\n                b10 * a00 + b11 * a10 + b12 * a20,\n                b10 * a01 + b11 * a11 + b12 * a21,\n                b10 * a02 + b11 * a12 + b12 * a22,\n\n                b20 * a00 + b21 * a10 + b22 * a20,\n                b20 * a01 + b21 * a11 + b22 * a21,\n                b20 * a02 + b21 * a12 + b22 * a22,\n            ])\n\n            return result\n        } else {\n            return new mat3([\n                b00 * a00 + b01 * a10 + b02 * a20,\n                b00 * a01 + b01 * a11 + b02 * a21,\n                b00 * a02 + b01 * a12 + b02 * a22,\n\n                b10 * a00 + b11 * a10 + b12 * a20,\n                b10 * a01 + b11 * a11 + b12 * a21,\n                b10 * a02 + b11 * a12 + b12 * a22,\n\n                b20 * a00 + b21 * a10 + b22 * a20,\n                b20 * a01 + b21 * a11 + b22 * a21,\n                b20 * a02 + b21 * a12 + b22 * a22,\n            ])\n        }\n    }\n\n}\n","import mat3 from './mat3'\nimport vec3 from './vec3'\nimport vec4 from './vec4'\n\nimport { epsilon } from './constants'\n\nexport default class mat4 {\n\n    constructor(values?: number[]) {\n        if (values !== undefined) {\n            this.init(values)\n        }\n    }\n\n    private values = new Float32Array(16)\n\n    static readonly identity = new mat4().setIdentity()\n\n    at(index: number): number {\n        return this.values[index]\n    }\n\n    init(values: number[]): mat4 {\n        for (let i = 0; i < 16; i++) {\n            this.values[i] = values[i]\n        }\n\n        return this\n    }\n\n    reset(): void {\n        for (let i = 0; i < 16; i++) {\n            this.values[i] = 0\n        }\n    }\n\n    copy(dest?: mat4): mat4 {\n        if (!dest) { dest = new mat4() }\n\n        for (let i = 0; i < 16; i++) {\n            dest.values[i] = this.values[i]\n        }\n\n        return dest\n    }\n\n    all(): number[] {\n        const data: number[] = []\n        for (let i = 0; i < 16; i++) {\n            data[i] = this.values[i]\n        }\n\n        return data\n    }\n\n    row(index: number): number[] {\n        return [\n            this.values[index * 4 + 0],\n            this.values[index * 4 + 1],\n            this.values[index * 4 + 2],\n            this.values[index * 4 + 3],\n        ]\n    }\n\n    col(index: number): number[] {\n        return [\n            this.values[index],\n            this.values[index + 4],\n            this.values[index + 8],\n            this.values[index + 12],\n        ]\n    }\n\n    equals(matrix: mat4, threshold = epsilon): boolean {\n        for (let i = 0; i < 16; i++) {\n            if (Math.abs(this.values[i] - matrix.at(i)) > threshold) {\n                return false\n            }\n        }\n\n        return true\n    }\n\n    determinant(): number {\n        const a00 = this.values[0]\n        const a01 = this.values[1]\n        const a02 = this.values[2]\n        const a03 = this.values[3]\n        const a10 = this.values[4]\n        const a11 = this.values[5]\n        const a12 = this.values[6]\n        const a13 = this.values[7]\n        const a20 = this.values[8]\n        const a21 = this.values[9]\n        const a22 = this.values[10]\n        const a23 = this.values[11]\n        const a30 = this.values[12]\n        const a31 = this.values[13]\n        const a32 = this.values[14]\n        const a33 = this.values[15]\n\n        const det00 = a00 * a11 - a01 * a10\n        const det01 = a00 * a12 - a02 * a10\n        const det02 = a00 * a13 - a03 * a10\n        const det03 = a01 * a12 - a02 * a11\n        const det04 = a01 * a13 - a03 * a11\n        const det05 = a02 * a13 - a03 * a12\n        const det06 = a20 * a31 - a21 * a30\n        const det07 = a20 * a32 - a22 * a30\n        const det08 = a20 * a33 - a23 * a30\n        const det09 = a21 * a32 - a22 * a31\n        const det10 = a21 * a33 - a23 * a31\n        const det11 = a22 * a33 - a23 * a32\n\n        return (det00 * det11 - det01 * det10 + det02 * det09 + det03 * det08 - det04 * det07 + det05 * det06)\n    }\n\n    setIdentity(): mat4 {\n        this.values[0] = 1\n        this.values[1] = 0\n        this.values[2] = 0\n        this.values[3] = 0\n        this.values[4] = 0\n        this.values[5] = 1\n        this.values[6] = 0\n        this.values[7] = 0\n        this.values[8] = 0\n        this.values[9] = 0\n        this.values[10] = 1\n        this.values[11] = 0\n        this.values[12] = 0\n        this.values[13] = 0\n        this.values[14] = 0\n        this.values[15] = 1\n\n        return this\n    }\n\n    transpose(): mat4 {\n        const temp01 = this.values[1]\n        const temp02 = this.values[2]\n        const temp03 = this.values[3]\n        const temp12 = this.values[6]\n        const temp13 = this.values[7]\n        const temp23 = this.values[11]\n\n        this.values[1] = this.values[4]\n        this.values[2] = this.values[8]\n        this.values[3] = this.values[12]\n        this.values[4] = temp01\n        this.values[6] = this.values[9]\n        this.values[7] = this.values[13]\n        this.values[8] = temp02\n        this.values[9] = temp12\n        this.values[11] = this.values[14]\n        this.values[12] = temp03\n        this.values[13] = temp13\n        this.values[14] = temp23\n\n        return this\n    }\n\n    inverse(): mat4 {\n        const a00 = this.values[0]\n        const a01 = this.values[1]\n        const a02 = this.values[2]\n        const a03 = this.values[3]\n        const a10 = this.values[4]\n        const a11 = this.values[5]\n        const a12 = this.values[6]\n        const a13 = this.values[7]\n        const a20 = this.values[8]\n        const a21 = this.values[9]\n        const a22 = this.values[10]\n        const a23 = this.values[11]\n        const a30 = this.values[12]\n        const a31 = this.values[13]\n        const a32 = this.values[14]\n        const a33 = this.values[15]\n\n        const det00 = a00 * a11 - a01 * a10\n        const det01 = a00 * a12 - a02 * a10\n        const det02 = a00 * a13 - a03 * a10\n        const det03 = a01 * a12 - a02 * a11\n        const det04 = a01 * a13 - a03 * a11\n        const det05 = a02 * a13 - a03 * a12\n        const det06 = a20 * a31 - a21 * a30\n        const det07 = a20 * a32 - a22 * a30\n        const det08 = a20 * a33 - a23 * a30\n        const det09 = a21 * a32 - a22 * a31\n        const det10 = a21 * a33 - a23 * a31\n        const det11 = a22 * a33 - a23 * a32\n\n        let det = (det00 * det11 - det01 * det10 + det02 * det09 + det03 * det08 - det04 * det07 + det05 * det06)\n\n        if (!det) {\n            return null\n        }\n\n        det = 1.0 / det\n\n        this.values[0] = (a11 * det11 - a12 * det10 + a13 * det09) * det\n        this.values[1] = (-a01 * det11 + a02 * det10 - a03 * det09) * det\n        this.values[2] = (a31 * det05 - a32 * det04 + a33 * det03) * det\n        this.values[3] = (-a21 * det05 + a22 * det04 - a23 * det03) * det\n        this.values[4] = (-a10 * det11 + a12 * det08 - a13 * det07) * det\n        this.values[5] = (a00 * det11 - a02 * det08 + a03 * det07) * det\n        this.values[6] = (-a30 * det05 + a32 * det02 - a33 * det01) * det\n        this.values[7] = (a20 * det05 - a22 * det02 + a23 * det01) * det\n        this.values[8] = (a10 * det10 - a11 * det08 + a13 * det06) * det\n        this.values[9] = (-a00 * det10 + a01 * det08 - a03 * det06) * det\n        this.values[10] = (a30 * det04 - a31 * det02 + a33 * det00) * det\n        this.values[11] = (-a20 * det04 + a21 * det02 - a23 * det00) * det\n        this.values[12] = (-a10 * det09 + a11 * det07 - a12 * det06) * det\n        this.values[13] = (a00 * det09 - a01 * det07 + a02 * det06) * det\n        this.values[14] = (-a30 * det03 + a31 * det01 - a32 * det00) * det\n        this.values[15] = (a20 * det03 - a21 * det01 + a22 * det00) * det\n\n        return this\n    }\n\n    multiply(matrix: mat4): mat4 {\n        const a00 = this.values[0]\n        const a01 = this.values[1]\n        const a02 = this.values[2]\n        const a03 = this.values[3]\n        const a10 = this.values[4]\n        const a11 = this.values[5]\n        const a12 = this.values[6]\n        const a13 = this.values[7]\n        const a20 = this.values[8]\n        const a21 = this.values[9]\n        const a22 = this.values[10]\n        const a23 = this.values[11]\n        const a30 = this.values[12]\n        const a31 = this.values[13]\n        const a32 = this.values[14]\n        const a33 = this.values[15]\n\n        let b0 = matrix.at(0)\n        let b1 = matrix.at(1)\n        let b2 = matrix.at(2)\n        let b3 = matrix.at(3)\n\n        this.values[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30\n        this.values[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31\n        this.values[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32\n        this.values[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33\n\n        b0 = matrix.at(4)\n        b1 = matrix.at(5)\n        b2 = matrix.at(6)\n        b3 = matrix.at(7)\n\n        this.values[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30\n        this.values[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31\n        this.values[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32\n        this.values[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33\n\n        b0 = matrix.at(8)\n        b1 = matrix.at(9)\n        b2 = matrix.at(10)\n        b3 = matrix.at(11)\n\n        this.values[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30\n        this.values[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31\n        this.values[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32\n        this.values[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33\n\n        b0 = matrix.at(12)\n        b1 = matrix.at(13)\n        b2 = matrix.at(14)\n        b3 = matrix.at(15)\n\n        this.values[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30\n        this.values[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31\n        this.values[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32\n        this.values[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33\n\n        return this\n    }\n\n    multiplyVec3(vector: vec3): vec3 {\n        const x = vector.x\n        const y = vector.y\n        const z = vector.z\n\n        return new vec3([\n            this.values[0] * x + this.values[4] * y + this.values[8] * z + this.values[12],\n            this.values[1] * x + this.values[5] * y + this.values[9] * z + this.values[13],\n            this.values[2] * x + this.values[6] * y + this.values[10] * z + this.values[14],\n        ])\n    }\n\n    multiplyVec4(vector: vec4, dest?: vec4): vec4 {\n        if (!dest) { dest = new vec4() }\n\n        const x = vector.x\n        const y = vector.y\n        const z = vector.z\n        const w = vector.w\n\n        dest.x = this.values[0] * x + this.values[4] * y + this.values[8] * z + this.values[12] * w\n        dest.y = this.values[1] * x + this.values[5] * y + this.values[9] * z + this.values[13] * w\n        dest.z = this.values[2] * x + this.values[6] * y + this.values[10] * z + this.values[14] * w\n        dest.w = this.values[3] * x + this.values[7] * y + this.values[11] * z + this.values[15] * w\n\n        return dest\n    }\n\n    toMat3(): mat3 {\n        return new mat3([\n            this.values[0],\n            this.values[1],\n            this.values[2],\n            this.values[4],\n            this.values[5],\n            this.values[6],\n            this.values[8],\n            this.values[9],\n            this.values[10],\n        ])\n    }\n\n    toInverseMat3(): mat3 {\n        const a00 = this.values[0]\n        const a01 = this.values[1]\n        const a02 = this.values[2]\n        const a10 = this.values[4]\n        const a11 = this.values[5]\n        const a12 = this.values[6]\n        const a20 = this.values[8]\n        const a21 = this.values[9]\n        const a22 = this.values[10]\n\n        const det01 = a22 * a11 - a12 * a21\n        const det11 = -a22 * a10 + a12 * a20\n        const det21 = a21 * a10 - a11 * a20\n\n        let det = a00 * det01 + a01 * det11 + a02 * det21\n\n        if (!det) {\n            return null\n        }\n\n        det = 1.0 / det\n\n        return new mat3([\n            det01 * det,\n            (-a22 * a01 + a02 * a21) * det,\n            (a12 * a01 - a02 * a11) * det,\n            det11 * det,\n            (a22 * a00 - a02 * a20) * det,\n            (-a12 * a00 + a02 * a10) * det,\n            det21 * det,\n            (-a21 * a00 + a01 * a20) * det,\n            (a11 * a00 - a01 * a10) * det,\n        ])\n    }\n\n    translate(vector: vec3): mat4 {\n        const x = vector.x\n        const y = vector.y\n        const z = vector.z\n\n        this.values[12] += this.values[0] * x + this.values[4] * y + this.values[8] * z\n        this.values[13] += this.values[1] * x + this.values[5] * y + this.values[9] * z\n        this.values[14] += this.values[2] * x + this.values[6] * y + this.values[10] * z\n        this.values[15] += this.values[3] * x + this.values[7] * y + this.values[11] * z\n\n        return this\n    }\n\n    scale(vector: vec3): mat4 {\n        const x = vector.x\n        const y = vector.y\n        const z = vector.z\n\n        this.values[0] *= x\n        this.values[1] *= x\n        this.values[2] *= x\n        this.values[3] *= x\n\n        this.values[4] *= y\n        this.values[5] *= y\n        this.values[6] *= y\n        this.values[7] *= y\n\n        this.values[8] *= z\n        this.values[9] *= z\n        this.values[10] *= z\n        this.values[11] *= z\n\n        return this\n    }\n\n    rotate(angle: number, axis: vec3): mat4 {\n        let x = axis.x\n        let y = axis.y\n        let z = axis.z\n\n        let length = Math.sqrt(x * x + y * y + z * z)\n\n        if (!length) {\n            return null\n        }\n\n        if (length !== 1) {\n            length = 1 / length\n            x *= length\n            y *= length\n            z *= length\n        }\n\n        const s = Math.sin(angle)\n        const c = Math.cos(angle)\n\n        const t = 1.0 - c\n\n        const a00 = this.values[0]\n        const a01 = this.values[1]\n        const a02 = this.values[2]\n        const a03 = this.values[3]\n\n        const a10 = this.values[4]\n        const a11 = this.values[5]\n        const a12 = this.values[6]\n        const a13 = this.values[7]\n\n        const a20 = this.values[8]\n        const a21 = this.values[9]\n        const a22 = this.values[10]\n        const a23 = this.values[11]\n\n        const b00 = x * x * t + c\n        const b01 = y * x * t + z * s\n        const b02 = z * x * t - y * s\n\n        const b10 = x * y * t - z * s\n        const b11 = y * y * t + c\n        const b12 = z * y * t + x * s\n\n        const b20 = x * z * t + y * s\n        const b21 = y * z * t - x * s\n        const b22 = z * z * t + c\n\n        this.values[0] = a00 * b00 + a10 * b01 + a20 * b02\n        this.values[1] = a01 * b00 + a11 * b01 + a21 * b02\n        this.values[2] = a02 * b00 + a12 * b01 + a22 * b02\n        this.values[3] = a03 * b00 + a13 * b01 + a23 * b02\n\n        this.values[4] = a00 * b10 + a10 * b11 + a20 * b12\n        this.values[5] = a01 * b10 + a11 * b11 + a21 * b12\n        this.values[6] = a02 * b10 + a12 * b11 + a22 * b12\n        this.values[7] = a03 * b10 + a13 * b11 + a23 * b12\n\n        this.values[8] = a00 * b20 + a10 * b21 + a20 * b22\n        this.values[9] = a01 * b20 + a11 * b21 + a21 * b22\n        this.values[10] = a02 * b20 + a12 * b21 + a22 * b22\n        this.values[11] = a03 * b20 + a13 * b21 + a23 * b22\n\n        return this\n    }\n\n    static frustum(left: number, right: number, bottom: number, top: number, near: number, far: number): mat4 {\n        const rl = (right - left)\n        const tb = (top - bottom)\n        const fn = (far - near)\n\n        return new mat4([\n            (near * 2) / rl,\n            0,\n            0,\n            0,\n\n            0,\n            (near * 2) / tb,\n            0,\n            0,\n\n            (right + left) / rl,\n            (top + bottom) / tb,\n            -(far + near) / fn,\n            -1,\n\n            0,\n            0,\n            -(far * near * 2) / fn,\n            0,\n        ])\n    }\n\n    static perspective(fov: number, aspect: number, near: number, far: number): mat4 {\n        const top = near * Math.tan(fov * Math.PI / 360.0)\n        const right = top * aspect\n\n        return mat4.frustum(-right, right, -top, top, near, far)\n    }\n\n    static orthographic(left: number, right: number, bottom: number, top: number, near: number, far: number): mat4 {\n        const rl = (right - left)\n        const tb = (top - bottom)\n        const fn = (far - near)\n\n        return new mat4([\n            2 / rl,\n            0,\n            0,\n            0,\n\n            0,\n            2 / tb,\n            0,\n            0,\n\n            0,\n            0,\n            -2 / fn,\n            0,\n\n            -(left + right) / rl,\n            -(top + bottom) / tb,\n            -(far + near) / fn,\n            1,\n        ])\n    }\n\n    static lookAt(position: vec3, target: vec3, up: vec3 = vec3.up): mat4 {\n        if (position.equals(target)) {\n            return this.identity\n        }\n\n        const z = vec3.difference(position, target).normalize()\n\n        const x = vec3.cross(up, z).normalize()\n        const y = vec3.cross(z, x).normalize()\n\n        return new mat4([\n            x.x,\n            y.x,\n            z.x,\n            0,\n\n            x.y,\n            y.y,\n            z.y,\n            0,\n\n            x.z,\n            y.z,\n            z.z,\n            0,\n\n            -vec3.dot(x, position),\n            -vec3.dot(y, position),\n            -vec3.dot(z, position),\n            1,\n        ])\n    }\n\n    static product(m1: mat4, m2: mat4, result: mat4): mat4 {\n        const a00 = m1.at(0)\n        const a01 = m1.at(1)\n        const a02 = m1.at(2)\n        const a03 = m1.at(3)\n        const a10 = m1.at(4)\n        const a11 = m1.at(5)\n        const a12 = m1.at(6)\n        const a13 = m1.at(7)\n        const a20 = m1.at(8)\n        const a21 = m1.at(9)\n        const a22 = m1.at(10)\n        const a23 = m1.at(11)\n        const a30 = m1.at(12)\n        const a31 = m1.at(13)\n        const a32 = m1.at(14)\n        const a33 = m1.at(15)\n\n        const b00 = m2.at(0)\n        const b01 = m2.at(1)\n        const b02 = m2.at(2)\n        const b03 = m2.at(3)\n        const b10 = m2.at(4)\n        const b11 = m2.at(5)\n        const b12 = m2.at(6)\n        const b13 = m2.at(7)\n        const b20 = m2.at(8)\n        const b21 = m2.at(9)\n        const b22 = m2.at(10)\n        const b23 = m2.at(11)\n        const b30 = m2.at(12)\n        const b31 = m2.at(13)\n        const b32 = m2.at(14)\n        const b33 = m2.at(15)\n\n        if (result) {\n            result.init([\n                b00 * a00 + b01 * a10 + b02 * a20 + b03 * a30,\n                b00 * a01 + b01 * a11 + b02 * a21 + b03 * a31,\n                b00 * a02 + b01 * a12 + b02 * a22 + b03 * a32,\n                b00 * a03 + b01 * a13 + b02 * a23 + b03 * a33,\n\n                b10 * a00 + b11 * a10 + b12 * a20 + b13 * a30,\n                b10 * a01 + b11 * a11 + b12 * a21 + b13 * a31,\n                b10 * a02 + b11 * a12 + b12 * a22 + b13 * a32,\n                b10 * a03 + b11 * a13 + b12 * a23 + b13 * a33,\n\n                b20 * a00 + b21 * a10 + b22 * a20 + b23 * a30,\n                b20 * a01 + b21 * a11 + b22 * a21 + b23 * a31,\n                b20 * a02 + b21 * a12 + b22 * a22 + b23 * a32,\n                b20 * a03 + b21 * a13 + b22 * a23 + b23 * a33,\n\n                b30 * a00 + b31 * a10 + b32 * a20 + b33 * a30,\n                b30 * a01 + b31 * a11 + b32 * a21 + b33 * a31,\n                b30 * a02 + b31 * a12 + b32 * a22 + b33 * a32,\n                b30 * a03 + b31 * a13 + b32 * a23 + b33 * a33,\n            ])\n\n            return result\n        } else {\n            return new mat4([\n                b00 * a00 + b01 * a10 + b02 * a20 + b03 * a30,\n                b00 * a01 + b01 * a11 + b02 * a21 + b03 * a31,\n                b00 * a02 + b01 * a12 + b02 * a22 + b03 * a32,\n                b00 * a03 + b01 * a13 + b02 * a23 + b03 * a33,\n\n                b10 * a00 + b11 * a10 + b12 * a20 + b13 * a30,\n                b10 * a01 + b11 * a11 + b12 * a21 + b13 * a31,\n                b10 * a02 + b11 * a12 + b12 * a22 + b13 * a32,\n                b10 * a03 + b11 * a13 + b12 * a23 + b13 * a33,\n\n                b20 * a00 + b21 * a10 + b22 * a20 + b23 * a30,\n                b20 * a01 + b21 * a11 + b22 * a21 + b23 * a31,\n                b20 * a02 + b21 * a12 + b22 * a22 + b23 * a32,\n                b20 * a03 + b21 * a13 + b22 * a23 + b23 * a33,\n\n                b30 * a00 + b31 * a10 + b32 * a20 + b33 * a30,\n                b30 * a01 + b31 * a11 + b32 * a21 + b33 * a31,\n                b30 * a02 + b31 * a12 + b32 * a22 + b33 * a32,\n                b30 * a03 + b31 * a13 + b32 * a23 + b33 * a33,\n            ])\n        }\n    }\n\n}\n","import mat3 from './mat3'\nimport mat4 from './mat4'\nimport vec3 from './vec3'\n\nimport { epsilon } from './constants'\n\nexport default class quat {\n\n    get x(): number {\n        return this.values[0]\n    }\n\n    get y(): number {\n        return this.values[1]\n    }\n\n    get z(): number {\n        return this.values[2]\n    }\n\n    get w(): number {\n        return this.values[3]\n    }\n\n    get xy(): [number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n        ]\n    }\n\n    get xyz(): [number, number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n            this.values[2],\n        ]\n    }\n\n    get xyzw(): [number, number, number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n            this.values[2],\n            this.values[3],\n        ]\n    }\n\n    set x(value: number) {\n        this.values[0] = value\n    }\n\n    set y(value: number) {\n        this.values[1] = value\n    }\n\n    set z(value: number) {\n        this.values[2] = value\n    }\n\n    set w(value: number) {\n        this.values[3] = value\n    }\n\n    set xy(values: [number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n    }\n\n    set xyz(values: [number, number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n        this.values[2] = values[2]\n    }\n\n    set xyzw(values: [number, number, number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n        this.values[2] = values[2]\n        this.values[3] = values[3]\n    }\n\n    constructor(values?: [number, number, number, number]) {\n        if (values !== undefined) {\n            this.xyzw = values\n        }\n    }\n\n    private values = new Float32Array(4)\n\n    static readonly identity = new quat().setIdentity()\n\n    at(index: number): number {\n        return this.values[index]\n    }\n\n    reset(): void {\n        for (let i = 0; i < 4; i++) {\n            this.values[i] = 0\n        }\n    }\n\n    copy(dest?: quat): quat {\n        if (!dest) { dest = new quat() }\n\n        for (let i = 0; i < 4; i++) {\n            dest.values[i] = this.values[i]\n        }\n\n        return dest\n    }\n\n    roll(): number {\n        const x = this.x\n        const y = this.y\n        const z = this.z\n        const w = this.w\n\n        return Math.atan2(2.0 * (x * y + w * z), w * w + x * x - y * y - z * z)\n    }\n\n    pitch(): number {\n        const x = this.x\n        const y = this.y\n        const z = this.z\n        const w = this.w\n\n        return Math.atan2(2.0 * (y * z + w * x), w * w - x * x - y * y + z * z)\n    }\n\n    yaw(): number {\n        return Math.asin(2.0 * (this.x * this.z - this.w * this.y))\n    }\n\n    equals(vector: quat, threshold = epsilon): boolean {\n        for (let i = 0; i < 4; i++) {\n            if (Math.abs(this.values[i] - vector.at(i)) > threshold) {\n                return false\n            }\n        }\n\n        return true\n    }\n\n    setIdentity(): quat {\n        this.x = 0\n        this.y = 0\n        this.z = 0\n        this.w = 1\n\n        return this\n    }\n\n    calculateW(): quat {\n        const x = this.x\n        const y = this.y\n        const z = this.z\n\n        this.w = -(Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z)))\n\n        return this\n    }\n\n    inverse(): quat {\n        const dot = quat.dot(this, this)\n\n        if (!dot) {\n            this.xyzw = [0, 0, 0, 0]\n\n            return this\n        }\n\n        const invDot = dot ? 1.0 / dot : 0\n\n        this.x *= -invDot\n        this.y *= -invDot\n        this.z *= -invDot\n        this.w *= invDot\n\n        return this\n    }\n\n    conjugate(): quat {\n        this.values[0] *= -1\n        this.values[1] *= -1\n        this.values[2] *= -1\n\n        return this\n    }\n\n    length(): number {\n        const x = this.x\n        const y = this.y\n        const z = this.z\n        const w = this.w\n\n        return Math.sqrt(x * x + y * y + z * z + w * w)\n    }\n\n    normalize(dest?: quat): quat {\n        if (!dest) { dest = this }\n\n        const x = this.x\n        const y = this.y\n        const z = this.z\n        const w = this.w\n\n        let length = Math.sqrt(x * x + y * y + z * z + w * w)\n\n        if (!length) {\n            dest.x = 0\n            dest.y = 0\n            dest.z = 0\n            dest.w = 0\n\n            return dest\n        }\n\n        length = 1 / length\n\n        dest.x = x * length\n        dest.y = y * length\n        dest.z = z * length\n        dest.w = w * length\n\n        return dest\n    }\n\n    add(other: quat): quat {\n        for (let i = 0; i < 4; i++) {\n            this.values[i] += other.at(i)\n        }\n\n        return this\n    }\n\n    multiply(other: quat): quat {\n        const q1x = this.values[0]\n        const q1y = this.values[1]\n        const q1z = this.values[2]\n        const q1w = this.values[3]\n\n        const q2x = other.x\n        const q2y = other.y\n        const q2z = other.z\n        const q2w = other.w\n\n        this.x = q1x * q2w + q1w * q2x + q1y * q2z - q1z * q2y\n        this.y = q1y * q2w + q1w * q2y + q1z * q2x - q1x * q2z\n        this.z = q1z * q2w + q1w * q2z + q1x * q2y - q1y * q2x\n        this.w = q1w * q2w - q1x * q2x - q1y * q2y - q1z * q2z\n\n        return this\n    }\n\n    multiplyVec3(vector: vec3, dest?: vec3): vec3 {\n        if (!dest) { dest = new vec3() }\n\n        const x = vector.x\n        const y = vector.y\n        const z = vector.z\n\n        const qx = this.x\n        const qy = this.y\n        const qz = this.z\n        const qw = this.w\n\n        const ix = qw * x + qy * z - qz * y\n        const iy = qw * y + qz * x - qx * z\n        const iz = qw * z + qx * y - qy * x\n        const iw = -qx * x - qy * y - qz * z\n\n        dest.x = ix * qw + iw * -qx + iy * -qz - iz * -qy\n        dest.y = iy * qw + iw * -qy + iz * -qx - ix * -qz\n        dest.z = iz * qw + iw * -qz + ix * -qy - iy * -qx\n\n        return dest\n    }\n\n    toMat3(dest?: mat3): mat3 {\n        if (!dest) { dest = new mat3() }\n\n        const x = this.x\n        const y = this.y\n        const z = this.z\n        const w = this.w\n\n        const x2 = x + x\n        const y2 = y + y\n        const z2 = z + z\n\n        const xx = x * x2\n        const xy = x * y2\n        const xz = x * z2\n        const yy = y * y2\n        const yz = y * z2\n        const zz = z * z2\n        const wx = w * x2\n        const wy = w * y2\n        const wz = w * z2\n\n        dest.init([\n            1 - (yy + zz),\n            xy + wz,\n            xz - wy,\n\n            xy - wz,\n            1 - (xx + zz),\n            yz + wx,\n\n            xz + wy,\n            yz - wx,\n            1 - (xx + yy),\n        ])\n\n        return dest\n    }\n\n    toMat4(dest?: mat4): mat4 {\n        if (!dest) { dest = new mat4() }\n\n        const x = this.x\n        const y = this.y\n        const z = this.z\n        const w = this.w\n\n        const x2 = x + x\n        const y2 = y + y\n        const z2 = z + z\n\n        const xx = x * x2\n        const xy = x * y2\n        const xz = x * z2\n        const yy = y * y2\n        const yz = y * z2\n        const zz = z * z2\n        const wx = w * x2\n        const wy = w * y2\n        const wz = w * z2\n\n        dest.init([\n            1 - (yy + zz),\n            xy + wz,\n            xz - wy,\n            0,\n\n            xy - wz,\n            1 - (xx + zz),\n            yz + wx,\n            0,\n\n            xz + wy,\n            yz - wx,\n            1 - (xx + yy),\n            0,\n\n            0,\n            0,\n            0,\n            1,\n        ])\n\n        return dest\n    }\n\n    static dot(q1: quat, q2: quat): number {\n        return q1.x * q2.x + q1.y * q2.y + q1.z * q2.z + q1.w * q2.w\n    }\n\n    static sum(q1: quat, q2: quat, dest?: quat): quat {\n        if (!dest) { dest = new quat() }\n\n        dest.x = q1.x + q2.x\n        dest.y = q1.y + q2.y\n        dest.z = q1.z + q2.z\n        dest.w = q1.w + q2.w\n\n        return dest\n    }\n\n    static product(q1: quat, q2: quat, dest?: quat): quat {\n        if (!dest) { dest = new quat() }\n\n        const q1x = q1.x\n        const q1y = q1.y\n        const q1z = q1.z\n        const q1w = q1.w\n\n        const q2x = q2.x\n        const q2y = q2.y\n        const q2z = q2.z\n        const q2w = q2.w\n\n        dest.x = q1x * q2w + q1w * q2x + q1y * q2z - q1z * q2y\n        dest.y = q1y * q2w + q1w * q2y + q1z * q2x - q1x * q2z\n        dest.z = q1z * q2w + q1w * q2z + q1x * q2y - q1y * q2x\n        dest.w = q1w * q2w - q1x * q2x - q1y * q2y - q1z * q2z\n\n        return dest\n    }\n\n    static cross(q1: quat, q2: quat, dest?: quat): quat {\n        if (!dest) { dest = new quat() }\n\n        const q1x = q1.x\n        const q1y = q1.y\n        const q1z = q1.z\n        const q1w = q1.w\n\n        const q2x = q2.x\n        const q2y = q2.y\n        const q2z = q2.z\n        const q2w = q2.w\n\n        dest.x = q1w * q2z + q1z * q2w + q1x * q2y - q1y * q2x\n        dest.y = q1w * q2w - q1x * q2x - q1y * q2y - q1z * q2z\n        dest.z = q1w * q2x + q1x * q2w + q1y * q2z - q1z * q2y\n        dest.w = q1w * q2y + q1y * q2w + q1z * q2x - q1x * q2z\n\n        return dest\n    }\n\n    static shortMix(q1: quat, q2: quat, time: number, dest?: quat): quat {\n        if (!dest) { dest = new quat() }\n\n        if (time <= 0.0) {\n            dest.xyzw = q1.xyzw\n\n            return dest\n        } else if (time >= 1.0) {\n            dest.xyzw = q2.xyzw\n\n            return dest\n        }\n\n        let cos = quat.dot(q1, q2)\n        const q2a = q2.copy()\n\n        if (cos < 0.0) {\n            q2a.inverse()\n            cos = -cos\n        }\n\n        let k0: number\n        let k1: number\n\n        if (cos > 0.9999) {\n            k0 = 1 - time\n            k1 = 0 + time\n        } else {\n            const sin: number = Math.sqrt(1 - cos * cos)\n            const angle: number = Math.atan2(sin, cos)\n\n            const oneOverSin: number = 1 / sin\n\n            k0 = Math.sin((1 - time) * angle) * oneOverSin\n            k1 = Math.sin((0 + time) * angle) * oneOverSin\n        }\n\n        dest.x = k0 * q1.x + k1 * q2a.x\n        dest.y = k0 * q1.y + k1 * q2a.y\n        dest.z = k0 * q1.z + k1 * q2a.z\n        dest.w = k0 * q1.w + k1 * q2a.w\n\n        return dest\n    }\n\n    static mix(q1: quat, q2: quat, time: number, dest?: quat): quat {\n        if (!dest) { dest = new quat() }\n\n        const cosHalfTheta = q1.x * q2.x + q1.y * q2.y + q1.z * q2.z + q1.w * q2.w\n\n        if (Math.abs(cosHalfTheta) >= 1.0) {\n            dest.xyzw = q1.xyzw\n\n            return dest\n        }\n\n        const halfTheta = Math.acos(cosHalfTheta)\n        const sinHalfTheta = Math.sqrt(1.0 - cosHalfTheta * cosHalfTheta)\n\n        if (Math.abs(sinHalfTheta) < 0.001) {\n            dest.x = q1.x * 0.5 + q2.x * 0.5\n            dest.y = q1.y * 0.5 + q2.y * 0.5\n            dest.z = q1.z * 0.5 + q2.z * 0.5\n            dest.w = q1.w * 0.5 + q2.w * 0.5\n\n            return dest\n        }\n\n        const ratioA = Math.sin((1 - time) * halfTheta) / sinHalfTheta\n        const ratioB = Math.sin(time * halfTheta) / sinHalfTheta\n\n        dest.x = q1.x * ratioA + q2.x * ratioB\n        dest.y = q1.y * ratioA + q2.y * ratioB\n        dest.z = q1.z * ratioA + q2.z * ratioB\n        dest.w = q1.w * ratioA + q2.w * ratioB\n\n        return dest\n    }\n\n    static fromAxisAngle(axis: vec3, angle: number, dest?: quat): quat {\n        if (!dest) { dest = new quat() }\n\n        angle *= 0.5\n        const sin = Math.sin(angle)\n\n        dest.x = axis.x * sin\n        dest.y = axis.y * sin\n        dest.z = axis.z * sin\n        dest.w = Math.cos(angle)\n\n        return dest\n    }\n\n}\n","import mat2 from './mat2'\nimport mat3 from './mat3'\nimport vec3 from './vec3'\n\nimport { epsilon } from './constants'\n\nexport default class vec2 {\n\n    get x(): number {\n        return this.values[0]\n    }\n\n    get y(): number {\n        return this.values[1]\n    }\n\n    get xy(): [number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n        ]\n    }\n\n    set x(value: number) {\n        this.values[0] = value\n    }\n\n    set y(value: number) {\n        this.values[1] = value\n    }\n\n    set xy(values: [number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n    }\n\n    constructor(values?: [number, number]) {\n        if (values !== undefined) {\n            this.xy = values\n        }\n    }\n\n    private values = new Float32Array(2)\n\n    static readonly zero = new vec2([0, 0])\n    static readonly one = new vec2([1, 1])\n\n    at(index: number): number {\n        return this.values[index]\n    }\n\n    reset(): void {\n        this.x = 0\n        this.y = 0\n    }\n\n    copy(dest?: vec2): vec2 {\n        if (!dest) { dest = new vec2() }\n\n        dest.x = this.x\n        dest.y = this.y\n\n        return dest\n    }\n\n    negate(dest?: vec2): vec2 {\n        if (!dest) { dest = this }\n\n        dest.x = -this.x\n        dest.y = -this.y\n\n        return dest\n    }\n\n    equals(vector: vec2, threshold = epsilon): boolean {\n        if (Math.abs(this.x - vector.x) > threshold) {\n            return false\n        }\n\n        if (Math.abs(this.y - vector.y) > threshold) {\n            return false\n        }\n\n        return true\n    }\n\n    length(): number {\n        return Math.sqrt(this.squaredLength())\n    }\n\n    squaredLength(): number {\n        const x = this.x\n        const y = this.y\n\n        return (x * x + y * y)\n    }\n\n    add(vector: vec2): vec2 {\n        this.x += vector.x\n        this.y += vector.y\n\n        return this\n    }\n\n    subtract(vector: vec2): vec2 {\n        this.x -= vector.x\n        this.y -= vector.y\n\n        return this\n    }\n\n    multiply(vector: vec2): vec2 {\n        this.x *= vector.x\n        this.y *= vector.y\n\n        return this\n    }\n\n    divide(vector: vec2): vec2 {\n        this.x /= vector.x\n        this.y /= vector.y\n\n        return this\n    }\n\n    scale(value: number, dest?: vec2): vec2 {\n        if (!dest) { dest = this }\n\n        dest.x = this.x * value\n        dest.y = this.y * value\n\n        return dest\n    }\n\n    normalize(dest?: vec2): vec2 {\n        if (!dest) { dest = this }\n\n        let length = this.length()\n\n        if (length === 1) {\n            return this\n        }\n\n        if (length === 0) {\n            dest.x = 0\n            dest.y = 0\n\n            return dest\n        }\n\n        length = 1.0 / length\n\n        dest.x *= length\n        dest.y *= length\n\n        return dest\n    }\n\n    multiplyMat2(matrix: mat2, dest?: vec2): vec2 {\n        if (!dest) { dest = this }\n\n        return matrix.multiplyVec2(this, dest)\n    }\n\n    multiplyMat3(matrix: mat3, dest?: vec2): vec2 {\n        if (!dest) { dest = this }\n\n        return matrix.multiplyVec2(this, dest)\n    }\n\n    static cross(vector: vec2, vector2: vec2, dest?: vec3): vec3 {\n        if (!dest) { dest = new vec3() }\n\n        const x = vector.x\n        const y = vector.y\n\n        const x2 = vector2.x\n        const y2 = vector2.y\n\n        const z = x * y2 - y * x2\n\n        dest.x = 0\n        dest.y = 0\n        dest.z = z\n\n        return dest\n    }\n\n    static dot(vector: vec2, vector2: vec2): number {\n        return (vector.x * vector2.x + vector.y * vector2.y)\n    }\n\n    static distance(vector: vec2, vector2: vec2): number {\n        return Math.sqrt(this.squaredDistance(vector, vector2))\n    }\n\n    static squaredDistance(vector: vec2, vector2: vec2): number {\n        const x = vector2.x - vector.x\n        const y = vector2.y - vector.y\n\n        return (x * x + y * y)\n    }\n\n    static direction(vector: vec2, vector2: vec2, dest?: vec2): vec2 {\n        if (!dest) { dest = new vec2() }\n\n        const x = vector.x - vector2.x\n        const y = vector.y - vector2.y\n\n        let length = Math.sqrt(x * x + y * y)\n\n        if (length === 0) {\n            dest.x = 0\n            dest.y = 0\n\n            return dest\n        }\n\n        length = 1 / length\n\n        dest.x = x * length\n        dest.y = y * length\n\n        return dest\n    }\n\n    static mix(vector: vec2, vector2: vec2, time: number, dest?: vec2): vec2 {\n        if (!dest) { dest = new vec2() }\n\n        const x = vector.x\n        const y = vector.y\n\n        const x2 = vector2.x\n        const y2 = vector2.y\n\n        dest.x = x + time * (x2 - x)\n        dest.y = y + time * (y2 - y)\n\n        return dest\n    }\n\n    static sum(vector: vec2, vector2: vec2, dest?: vec2): vec2 {\n        if (!dest) { dest = new vec2() }\n\n        dest.x = vector.x + vector2.x\n        dest.y = vector.y + vector2.y\n\n        return dest\n    }\n\n    static difference(vector: vec2, vector2: vec2, dest?: vec2): vec2 {\n        if (!dest) { dest = new vec2() }\n\n        dest.x = vector.x - vector2.x\n        dest.y = vector.y - vector2.y\n\n        return dest\n    }\n\n    static product(vector: vec2, vector2: vec2, dest?: vec2): vec2 {\n        if (!dest) { dest = new vec2() }\n\n        dest.x = vector.x * vector2.x\n        dest.y = vector.y * vector2.y\n\n        return dest\n    }\n\n    static quotient(vector: vec2, vector2: vec2, dest?: vec2): vec2 {\n        if (!dest) { dest = new vec2() }\n\n        dest.x = vector.x / vector2.x\n        dest.y = vector.y / vector2.y\n\n        return dest\n    }\n\n}\n","import mat3 from './mat3'\nimport quat from './quat'\n\nimport { epsilon } from './constants'\n\nexport default class vec3 {\n\n    get x(): number {\n        return this.values[0]\n    }\n\n    get y(): number {\n        return this.values[1]\n    }\n\n    get z(): number {\n        return this.values[2]\n    }\n\n    get xy(): [number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n        ]\n    }\n\n    get xyz(): [number, number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n            this.values[2],\n        ]\n    }\n\n    set x(value: number) {\n        this.values[0] = value\n    }\n\n    set y(value: number) {\n        this.values[1] = value\n    }\n\n    set z(value: number) {\n        this.values[2] = value\n    }\n\n    set xy(values: [number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n    }\n\n    set xyz(values: [number, number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n        this.values[2] = values[2]\n    }\n\n    constructor(values?: [number, number, number]) {\n        if (values !== undefined) {\n            this.xyz = values\n        }\n    }\n\n    private values = new Float32Array(3)\n\n    static readonly zero = new vec3([0, 0, 0])\n    static readonly one = new vec3([1, 1, 1])\n\n    static readonly up = new vec3([0, 1, 0])\n    static readonly right = new vec3([1, 0, 0])\n    static readonly forward = new vec3([0, 0, 1])\n\n    at(index: number): number {\n        return this.values[index]\n    }\n\n    reset(): void {\n        this.x = 0\n        this.y = 0\n        this.z = 0\n    }\n\n    copy(dest?: vec3): vec3 {\n        if (!dest) { dest = new vec3() }\n\n        dest.x = this.x\n        dest.y = this.y\n        dest.z = this.z\n\n        return dest\n    }\n\n    negate(dest?: vec3): vec3 {\n        if (!dest) { dest = this }\n\n        dest.x = -this.x\n        dest.y = -this.y\n        dest.z = -this.z\n\n        return dest\n    }\n\n    equals(vector: vec3, threshold = epsilon): boolean {\n        if (Math.abs(this.x - vector.x) > threshold) {\n            return false\n        }\n\n        if (Math.abs(this.y - vector.y) > threshold) {\n            return false\n        }\n\n        if (Math.abs(this.z - vector.z) > threshold) {\n            return false\n        }\n\n        return true\n    }\n\n    length(): number {\n        return Math.sqrt(this.squaredLength())\n    }\n\n    squaredLength(): number {\n        const x = this.x\n        const y = this.y\n        const z = this.z\n\n        return (x * x + y * y + z * z)\n    }\n\n    add(vector: vec3): vec3 {\n        this.x += vector.x\n        this.y += vector.y\n        this.z += vector.z\n\n        return this\n    }\n\n    subtract(vector: vec3): vec3 {\n        this.x -= vector.x\n        this.y -= vector.y\n        this.z -= vector.z\n\n        return this\n    }\n\n    multiply(vector: vec3): vec3 {\n        this.x *= vector.x\n        this.y *= vector.y\n        this.z *= vector.z\n\n        return this\n    }\n\n    divide(vector: vec3): vec3 {\n        this.x /= vector.x\n        this.y /= vector.y\n        this.z /= vector.z\n\n        return this\n    }\n\n    scale(value: number, dest?: vec3): vec3 {\n        if (!dest) { dest = this }\n\n        dest.x *= value\n        dest.y *= value\n        dest.z *= value\n\n        return dest\n    }\n\n    normalize(dest?: vec3): vec3 {\n        if (!dest) { dest = this }\n\n        let length = this.length()\n\n        if (length === 1) {\n            return this\n        }\n\n        if (length === 0) {\n            dest.x = 0\n            dest.y = 0\n            dest.z = 0\n\n            return dest\n        }\n\n        length = 1.0 / length\n\n        dest.x *= length\n        dest.y *= length\n        dest.z *= length\n\n        return dest\n    }\n\n    multiplyByMat3(matrix: mat3, dest?: vec3): vec3 {\n        if (!dest) { dest = this }\n\n        return matrix.multiplyVec3(this, dest)\n    }\n\n    multiplyByQuat(quaternion: quat, dest?: vec3): vec3 {\n        if (!dest) { dest = this }\n\n        return quaternion.multiplyVec3(this, dest)\n    }\n\n    toQuat(dest?: quat): quat {\n        if (!dest) { dest = new quat() }\n\n        const c = new vec3()\n        const s = new vec3()\n\n        c.x = Math.cos(this.x * 0.5)\n        s.x = Math.sin(this.x * 0.5)\n\n        c.y = Math.cos(this.y * 0.5)\n        s.y = Math.sin(this.y * 0.5)\n\n        c.z = Math.cos(this.z * 0.5)\n        s.z = Math.sin(this.z * 0.5)\n\n        dest.x = s.x * c.y * c.z - c.x * s.y * s.z\n        dest.y = c.x * s.y * c.z + s.x * c.y * s.z\n        dest.z = c.x * c.y * s.z - s.x * s.y * c.z\n        dest.w = c.x * c.y * c.z + s.x * s.y * s.z\n\n        return dest\n    }\n\n    static cross(vector: vec3, vector2: vec3, dest?: vec3): vec3 {\n        if (!dest) { dest = new vec3() }\n\n        const x = vector.x\n        const y = vector.y\n        const z = vector.z\n\n        const x2 = vector2.x\n        const y2 = vector2.y\n        const z2 = vector2.z\n\n        dest.x = y * z2 - z * y2\n        dest.y = z * x2 - x * z2\n        dest.z = x * y2 - y * x2\n\n        return dest\n    }\n\n    static dot(vector: vec3, vector2: vec3): number {\n        const x = vector.x\n        const y = vector.y\n        const z = vector.z\n\n        const x2 = vector2.x\n        const y2 = vector2.y\n        const z2 = vector2.z\n\n        return (x * x2 + y * y2 + z * z2)\n    }\n\n    static distance(vector: vec3, vector2: vec3): number {\n        const x = vector2.x - vector.x\n        const y = vector2.y - vector.y\n        const z = vector2.z - vector.z\n\n        return Math.sqrt(this.squaredDistance(vector, vector2))\n    }\n\n    static squaredDistance(vector: vec3, vector2: vec3): number {\n        const x = vector2.x - vector.x\n        const y = vector2.y - vector.y\n        const z = vector2.z - vector.z\n\n        return (x * x + y * y + z * z)\n    }\n\n    static direction(vector: vec3, vector2: vec3, dest?: vec3): vec3 {\n        if (!dest) { dest = new vec3() }\n\n        const x = vector.x - vector2.x\n        const y = vector.y - vector2.y\n        const z = vector.z - vector2.z\n\n        let length = Math.sqrt(x * x + y * y + z * z)\n\n        if (length === 0) {\n            dest.x = 0\n            dest.y = 0\n            dest.z = 0\n\n            return dest\n        }\n\n        length = 1 / length\n\n        dest.x = x * length\n        dest.y = y * length\n        dest.z = z * length\n\n        return dest\n    }\n\n    static mix(vector: vec3, vector2: vec3, time: number, dest?: vec3): vec3 {\n        if (!dest) { dest = new vec3() }\n\n        dest.x = vector.x + time * (vector2.x - vector.x)\n        dest.y = vector.y + time * (vector2.y - vector.y)\n        dest.z = vector.z + time * (vector2.z - vector.z)\n\n        return dest\n    }\n\n    static sum(vector: vec3, vector2: vec3, dest?: vec3): vec3 {\n        if (!dest) { dest = new vec3() }\n\n        dest.x = vector.x + vector2.x\n        dest.y = vector.y + vector2.y\n        dest.z = vector.z + vector2.z\n\n        return dest\n    }\n\n    static difference(vector: vec3, vector2: vec3, dest?: vec3): vec3 {\n        if (!dest) { dest = new vec3() }\n\n        dest.x = vector.x - vector2.x\n        dest.y = vector.y - vector2.y\n        dest.z = vector.z - vector2.z\n\n        return dest\n    }\n\n    static product(vector: vec3, vector2: vec3, dest?: vec3): vec3 {\n        if (!dest) { dest = new vec3() }\n\n        dest.x = vector.x * vector2.x\n        dest.y = vector.y * vector2.y\n        dest.z = vector.z * vector2.z\n\n        return dest\n    }\n\n    static quotient(vector: vec3, vector2: vec3, dest?: vec3): vec3 {\n        if (!dest) { dest = new vec3() }\n\n        dest.x = vector.x / vector2.x\n        dest.y = vector.y / vector2.y\n        dest.z = vector.z / vector2.z\n\n        return dest\n    }\n}\n","import mat4 from './mat4'\n\nimport { epsilon } from './constants'\n\nexport default class vec4 {\n\n    get x(): number {\n        return this.values[0]\n    }\n\n    get y(): number {\n        return this.values[1]\n    }\n\n    get z(): number {\n        return this.values[2]\n    }\n\n    get w(): number {\n        return this.values[3]\n    }\n\n    get xy(): [number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n        ]\n    }\n\n    get xyz(): [number, number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n            this.values[2],\n        ]\n    }\n\n    get xyzw(): [number, number, number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n            this.values[2],\n            this.values[3],\n        ]\n    }\n\n    set x(value: number) {\n        this.values[0] = value\n    }\n\n    set y(value: number) {\n        this.values[1] = value\n    }\n\n    set z(value: number) {\n        this.values[2] = value\n    }\n\n    set w(value: number) {\n        this.values[3] = value\n    }\n\n    set xy(values: [number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n    }\n\n    set xyz(values: [number, number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n        this.values[2] = values[2]\n    }\n\n    set xyzw(values: [number, number, number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n        this.values[2] = values[2]\n        this.values[3] = values[3]\n    }\n\n    get r(): number {\n        return this.values[0]\n    }\n\n    get g(): number {\n        return this.values[1]\n    }\n\n    get b(): number {\n        return this.values[2]\n    }\n\n    get a(): number {\n        return this.values[3]\n    }\n\n    get rg(): [number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n        ]\n    }\n\n    get rgb(): [number, number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n            this.values[2],\n        ]\n    }\n\n    get rgba(): [number, number, number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n            this.values[2],\n            this.values[3],\n        ]\n    }\n\n    set r(value: number) {\n        this.values[0] = value\n    }\n\n    set g(value: number) {\n        this.values[1] = value\n    }\n\n    set b(value: number) {\n        this.values[2] = value\n    }\n\n    set a(value: number) {\n        this.values[3] = value\n    }\n\n    set rg(values: [number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n    }\n\n    set rgb(values: [number, number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n        this.values[2] = values[2]\n    }\n\n    set rgba(values: [number, number, number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n        this.values[2] = values[2]\n        this.values[3] = values[3]\n    }\n\n    constructor(values?: [number, number, number, number]) {\n        if (values !== undefined) {\n            this.xyzw = values\n        }\n    }\n\n    private values = new Float32Array(4)\n\n    static readonly zero = new vec4([0, 0, 0, 1])\n    static readonly one = new vec4([1, 1, 1, 1])\n\n    at(index: number): number {\n        return this.values[index]\n    }\n\n    reset(): void {\n        this.x = 0\n        this.y = 0\n        this.z = 0\n        this.w = 0\n    }\n\n    copy(dest?: vec4): vec4 {\n        if (!dest) { dest = new vec4() }\n\n        dest.x = this.x\n        dest.y = this.y\n        dest.z = this.z\n        dest.w = this.w\n\n        return dest\n    }\n\n    negate(dest?: vec4): vec4 {\n        if (!dest) { dest = this }\n\n        dest.x = -this.x\n        dest.y = -this.y\n        dest.z = -this.z\n        dest.w = -this.w\n\n        return dest\n    }\n\n    equals(vector: vec4, threshold = epsilon): boolean {\n        if (Math.abs(this.x - vector.x) > threshold) {\n            return false\n        }\n\n        if (Math.abs(this.y - vector.y) > threshold) {\n            return false\n        }\n\n        if (Math.abs(this.z - vector.z) > threshold) {\n            return false\n        }\n\n        if (Math.abs(this.w - vector.w) > threshold) {\n            return false\n        }\n\n        return true\n    }\n\n    length(): number {\n        return Math.sqrt(this.squaredLength())\n    }\n\n    squaredLength(): number {\n        const x = this.x\n        const y = this.y\n        const z = this.z\n        const w = this.w\n\n        return (x * x + y * y + z * z + w * w)\n    }\n\n    add(vector: vec4): vec4 {\n        this.x += vector.x\n        this.y += vector.y\n        this.z += vector.z\n        this.w += vector.w\n\n        return this\n    }\n\n    subtract(vector: vec4): vec4 {\n        this.x -= vector.x\n        this.y -= vector.y\n        this.z -= vector.z\n        this.w -= vector.w\n\n        return this\n    }\n\n    multiply(vector: vec4): vec4 {\n        this.x *= vector.x\n        this.y *= vector.y\n        this.z *= vector.z\n        this.w *= vector.w\n\n        return this\n    }\n\n    divide(vector: vec4): vec4 {\n        this.x /= vector.x\n        this.y /= vector.y\n        this.z /= vector.z\n        this.w /= vector.w\n\n        return this\n    }\n\n    scale(value: number, dest?: vec4): vec4 {\n        if (!dest) { dest = this }\n\n        dest.x *= value\n        dest.y *= value\n        dest.z *= value\n        dest.w *= value\n\n        return dest\n    }\n\n    normalize(dest?: vec4): vec4 {\n        if (!dest) { dest = this }\n\n        let length = this.length()\n\n        if (length === 1) {\n            return this\n        }\n\n        if (length === 0) {\n            dest.x *= 0\n            dest.y *= 0\n            dest.z *= 0\n            dest.w *= 0\n\n            return dest\n        }\n\n        length = 1.0 / length\n\n        dest.x *= length\n        dest.y *= length\n        dest.z *= length\n        dest.w *= length\n\n        return dest\n    }\n\n    multiplyMat4(matrix: mat4, dest?: vec4): vec4 {\n        if (!dest) { dest = this }\n\n        return matrix.multiplyVec4(this, dest)\n    }\n\n    static mix(vector: vec4, vector2: vec4, time: number, dest?: vec4): vec4 {\n        if (!dest) { dest = new vec4() }\n\n        dest.x = vector.x + time * (vector2.x - vector.x)\n        dest.y = vector.y + time * (vector2.y - vector.y)\n        dest.z = vector.z + time * (vector2.z - vector.z)\n        dest.w = vector.w + time * (vector2.w - vector.w)\n\n        return dest\n    }\n\n    static sum(vector: vec4, vector2: vec4, dest?: vec4): vec4 {\n        if (!dest) { dest = new vec4() }\n\n        dest.x = vector.x + vector2.x\n        dest.y = vector.y + vector2.y\n        dest.z = vector.z + vector2.z\n        dest.w = vector.w + vector2.w\n\n        return dest\n    }\n\n    static difference(vector: vec4, vector2: vec4, dest?: vec4): vec4 {\n        if (!dest) { dest = new vec4() }\n\n        dest.x = vector.x - vector2.x\n        dest.y = vector.y - vector2.y\n        dest.z = vector.z - vector2.z\n        dest.w = vector.w - vector2.w\n\n        return dest\n    }\n\n    static product(vector: vec4, vector2: vec4, dest?: vec4): vec4 {\n        if (!dest) { dest = new vec4() }\n\n        dest.x = vector.x * vector2.x\n        dest.y = vector.y * vector2.y\n        dest.z = vector.z * vector2.z\n        dest.w = vector.w * vector2.w\n\n        return dest\n    }\n\n    static quotient(vector: vec4, vector2: vec4, dest?: vec4): vec4 {\n        if (!dest) { dest = new vec4() }\n\n        dest.x = vector.x / vector2.x\n        dest.y = vector.y / vector2.y\n        dest.z = vector.z / vector2.z\n        dest.w = vector.w / vector2.w\n\n        return dest\n    }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\nimport { ImageFilter } from 'src/app/util/image-filter';\n\nImageFilter.init();\n\nwindow.addEventListener('contextmenu', e => e.preventDefault());\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));"]}