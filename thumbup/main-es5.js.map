{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/components/canvas/canvas.component.service.ts","webpack:///src/app/components/canvas/canvas.component.ts","webpack:///src/app/components/canvas/canvas.component.html","webpack:///src/app/components/control/control-pannel.component.ts","webpack:///src/app/components/control/control-pannel.component.html","webpack:///src/app/components/control/drawing/drawing-control-factory.ts","webpack:///src/app/components/control/drawing/drawing-control.component.ts","webpack:///src/app/components/control/drawing/drawing-control.component.html","webpack:///src/app/components/control/filter/color-filter-control.ts","webpack:///src/app/components/control/filter/color-filter-control.html","webpack:///src/app/components/control/filter/filter-control-factory.ts","webpack:///src/app/components/control/image-drawing/image-drawing-control.component.ts","webpack:///src/app/components/control/image-drawing/image-drawing-control.component.html","webpack:///src/app/components/control/layer/layer-control-item.component.ts","webpack:///src/app/components/control/layer/layer-control-item.component.html","webpack:///src/app/components/control/layer/layer-control.component.ts","webpack:///src/app/components/control/layer/layer-control.component.html","webpack:///src/app/components/control/movable/movable-control.component.ts","webpack:///src/app/components/control/movable/movable-control.component.html","webpack:///src/app/components/control/text-drawing/text-drawing-control.component.ts","webpack:///src/app/components/control/text-drawing/text-drawing-control.component.html","webpack:///src/app/components/image-drawing/image-drawing.component.ts","webpack:///src/app/components/image-drawing/image-drawing.component.html","webpack:///src/app/components/movable/movable.component.ts","webpack:///src/app/components/movable/movable.component.html","webpack:///src/app/components/text-drawing/text-drawing.component.ts","webpack:///src/app/model/canvas.ts","webpack:///src/app/model/drawing-filter.ts","webpack:///src/app/model/drawing.ts","webpack:///src/app/model/edit-stack.ts","webpack:///src/app/model/image-drawing.ts","webpack:///src/app/model/movable.ts","webpack:///src/app/model/text-drawing.ts","webpack:///src/app/service/canvas.service.ts","webpack:///src/app/service/command.service.ts","webpack:///src/app/service/keybinding.service.ts","webpack:///src/app/util/constants.ts","webpack:///src/app/util/image-filter.ts","webpack:///src/app/util/mat2.ts","webpack:///src/app/util/mat3.ts","webpack:///src/app/util/mat4.ts","webpack:///src/app/util/platform.ts","webpack:///src/app/util/quat.ts","webpack:///src/app/util/vec2.ts","webpack:///src/app/util/vec3.ts","webpack:///src/app/util/vec4.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","AppComponent","canvasService_","title","movable","canvas","provide","useClass","selector","templateUrl","styleUrls","providers","AppModule","declarations","imports","bootstrap","CanvasComponentService","CanvasComponent","injector_","canvasComponentService_","keybindingService_","commandService_","componentFactoryResolver_","subs_","onDidChangeFocusedDrawing","onDidChangeCamera","keybindingDisposers_","drawingComponents_","drawingComponentRefs_","focusedDrawing_","cameraX_","cameraY_","cameraZoom_","canvasComponent","moveCamera","bind","push","keychord","mac","editStack","undo","redo","focusedDrawing","dispatch","drawing","forEach","sub","unsubscribe","disposer","i","drawings","length","createDrawingComponent","onDidAddDrawing","subscribe","index","onDidReorderDrawing","j","tmp1","tmp2","drawingComponents","onWillRemoveDrawing","blurAll","splice","destroy","containerRef_","nativeElement","addEventListener","onMouseWheel","factory","type","resolveComponentFactory","componentRef","drawingContainerRef_","createComponent","instance","drawingComponent","movableComponent","focus","emit","guiPortal","guiContent","viewContainerRef","blur","button","element","target","movableId","HTMLElement","tagName","toLowerCase","getAttribute","parentElement","getDrawingComponentByMovableId","focusDrawingComponent","preventDefault","lastMousePosition_","screenX","screenY","window","mouseup","removeEventListener","pos","pageX","pageY","dvec2","fromPageToCanvas","delta","deltaY","detail","lastZoom","cameraZoom","dz","dx","scale","cameraX","x","cameraY","y","position","subtract","vec","center","offsetWidth","offsetHeight","cs","copy","Math","round","width","height","transform","cvs","document","createElement","tmpCvs","ctx","getContext","tmpCtx","fillStyle","fillRect","w","h","render","save","translate","rotate","rad","drawImage","restore","toDataURL","v","min","max","onMousedown","read","ControlPannelComponent","canvasWidth","canvasHeight","onDidChangeSize","canvasZoom","updateFocusedDrawing","ww","undefined","hh","value","file","files","reader","FileReader","image","Image","src","result","onload","imageDrawing","readAsDataURL","addTextDrawing","addImageDrawing","onChangeCanvasSize","onChangeCanvasZoom","DrawingControlFactory","resolver","container","injector","component","DrawingControlComponent","filter","changes","createDrawingControl","createFilterControl","onDidChangeFilter","drawingControl_","comp","create","drawingControlContainer_","filterControl_","filterControlContainer_","ColorFilterControlComponent","r","g","b","o","console","log","sub_","onUpdate","onInput","onChange","$event","FilterControlFactory","ImageDrawingControlComponent","invertX","invertY","onDidDirty","onChangeInvert","checked","LayerControlItemComponent","active","LayerControlComponent","getDrawingIndex","replace","link","getElementById","setAttribute","click","onMoveUpClick","onMoveDownClick","onRemoveClick","onSaveClick","MovableControlComponent","onDidChange","onChangePosition","onChangeSize","TextDrawingControlComponent","text","size","font","color_","color","onDidChangeText","onChangeText","onBlur","onChangeFont","onColorChange","ImageDrawingComponent","cvs_","canvasRef_","ctx_","onDidUpdate","localRender","pipe","trailing","abs","img","apply","changeDetection","OnPush","MovableComponent","changeRef","focused","centerVec","sizeVec","thumbTL","thumbTR","thumbBL","thumbBR","thumbBC","thumbCR","updateResizeUL","updateResize","updateResizeUR","updateResizeBL","updateResizeBR","updateTranslate","updateRotate","update","srcRotationMat_","rotation","srcRrotationMat_","markForCheck","zoom","zoomVec","multiply","xy","add","thumb","ct","stopProp","stopPropagation","srcMousePosition_","srcMovableState_","currentMosuePosition","dp","nx","ny","command","resizeFunc","srcMovableRotate_","saveSrcRotation","multiplier","local_dp","multiplyMat2","aspect","projection","z","normalize","dot","newLocalUL","newLocalBR","newLocalCenter","newCenter","newUL","newBR","newSize","nw","nh","nr","fromPageToCanvasScreen","atan2","deg","PI","from","to","angle","startTranslate","TextDrawingComponent","textBaseline","fillText","template","CanvasCommand","CanvasAddStackElementCommand","pushStackElement","CanvasAddDrawingCommand","addDrawing","CanvasRemoveDrawingCommand","CanvasResizeCommand","inverse","hasDrawing","removeDrawing","CanvasReorderCommand","ii","jj","swapDrawing","Canvas","editStack_","drawings_","width_","height_","indexOf","tmp","reorder","pushEditCommand","isNaN","AbstractDrawingFilter","BlurDrawingFilter","boxFilter","ColorDrawingFilter","r_","g_","b_","o_","mixWithColor","ColorDawingFilterChangeCommand","GrayscaleDrawingFilter","grayScale","_FilterFactory","FilterFactory","__next_id","DrawingChangeFilterCommand","prev","Drawing","name","filterSub_","filter_","StackElement","commands","EditStack","past_","future_","currentStackElement_","execute","pastStackElement","pop","futureStackElemnet","futureStackElement","pastStackElemnet","ImageDrawingChangeInvertCommand","ImageDrawing","invertX_","invertY_","MovableResizeCommand","MovableTranslateCommand","MovableRotateCommand","__next_movable_id","Movable","onDidChangePosition","onDidChangeRotation","x_","y_","z_","w_","h_","rad_","aspect_","aspectRatio_","TextDrawingChangeTextCommand","TextDrawingChangeSizeCommand","TextDrawingChangeColorCommand","TextDrawingChangeFontCommand","TextMeasure","measureText","Measure","TextDrawing","disableDetectMovableChange_","font_","scaleX_","scaleY_","size_","fitFontSizeToMovable","metrics","measure","scaleX","scaleY","text_","CanvasService","CanvasCommandService","pushCommand","ICommandService","KeybindingService","binding","func","unbind","epsilon","ImageFilter","enabled","alert","pixels","getImageData","data","memory","_malloc","HEAPU8","set","_grayScale","subarray","putImageData","ImageData","Uint8ClampedArray","_free","_boxFilter","opacity","_mixWithColor","mat2","values","Float32Array","init","dest","matrix","threshold","at","temp","det","determinant","a11","a12","a21","a22","vector","cos","sin","m1","m2","identity","setIdentity","mat3","a00","a01","a02","a10","a20","det01","det11","det21","temp01","temp02","temp12","b00","b01","b02","b10","b11","b12","b20","b21","b22","xyz","m00","m01","m02","m10","m11","m12","m20","m21","m22","fourXSquaredMinus1","fourYSquaredMinus1","fourZSquaredMinus1","fourWSquaredMinus1","biggestIndex","fourBiggestSquaredMinus1","biggestVal","sqrt","mult","axis","s","c","t","mat4","a03","a13","a23","a30","a31","a32","a33","det00","det02","det03","det04","det05","det06","det07","det08","det09","det10","temp03","temp13","temp23","b0","b1","b2","b3","left","right","bottom","top","near","far","rl","tb","fn","fov","tan","frustum","up","equals","difference","cross","b03","b13","b23","b30","b31","b32","b33","LANGUAGE_DEFAULT","_isWindows","_isMacintosh","_isLinux","_isNative","_isWeb","_isIOS","_locale","_language","_translationsConfigFile","_userAgent","isElectronRenderer","process","versions","electron","navigator","userAgent","maxTouchPoints","language","platform","rawNlsConfig","env","nlsConfig","JSON","parse","resolved","availableLanguages","locale","PlatformToString","_platform","isWindows","isMacintosh","isLinux","isNative","isWeb","isIOS","isRootUser","getuid","Language","isDefaultVariant","isDefault","translationsConfigFile","_globals","self","global","globals","setImmediate","defineSetImmediate","postMessage","importScripts","pending","vscodeSetImmediateId","len","candidate","callback","lastId","myId","nextTick","_promise","OS","quat","xyzw","asin","invDot","other","q1x","q1y","q1z","q1w","q2x","q2y","q2z","q2w","qx","qy","qz","qw","ix","iy","iz","iw","x2","y2","z2","xx","xz","yy","yz","zz","wx","wy","wz","q1","q2","time","q2a","k0","k1","oneOverSin","cosHalfTheta","halfTheta","acos","sinHalfTheta","ratioA","ratioB","vec2","squaredLength","multiplyVec2","vector2","squaredDistance","zero","one","vec3","multiplyVec3","quaternion","forward","vec4","multiplyVec4","environment","production","bootstrapModule","err","error"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,aAASA,wBAAT,CAAkCC,GAAlC,EAAuC;AACtC;AACA;AACA,aAAOC,OAAO,CAACC,OAAR,GAAkBC,IAAlB,CAAuB,YAAW;AACxC,YAAIC,CAAC,GAAG,IAAIC,KAAJ,CAAU,yBAAyBL,GAAzB,GAA+B,GAAzC,CAAR;AACAI,SAAC,CAACE,IAAF,GAAS,kBAAT;AACA,cAAMF,CAAN;AACA,OAJM,CAAP;AAKA;;AACDL,4BAAwB,CAACQ,IAAzB,GAAgC,YAAW;AAAE,aAAO,EAAP;AAAY,KAAzD;;AACAR,4BAAwB,CAACG,OAAzB,GAAmCH,wBAAnC;AACAS,UAAM,CAACC,OAAP,GAAiBV,wBAAjB;AACAA,4BAAwB,CAACW,EAAzB,GAA8B,yCAA9B;;;;;;;;;;;;;;;;ACZA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAeaC,Y;;;AAQX,4BACmBC,cADnB,EACkD;AAAA;;AAA/B,aAAAA,cAAA,GAAAA,cAAA;AARnB,aAAAC,KAAA,GAAQ,UAAR;AAEO,aAAAC,OAAA,GAAU,IAAI,6DAAJ,EAAV;AAQN;;;;4BANmB;AAClB,iBAAO,KAAKF,cAAL,CAAoBG,MAA3B;AAAoC;;;;;;;uBAN3BJ,Y,EAAY,6I;AAAA,K;;;YAAZA,Y;AAAY,+B;AAAA,kFANZ,CAAC;AACRK,eAAO,EAAE,+EADD;AAERC,gBAAQ,EAAE;AAFF,OAAD,CAMY,E;AAFtB,c;AAAA,a;AAAA,+C;AAAA;AAAA;ACbH;;AACE;;AACA;;AACA;;AACF;;;;AAHoB;;AAAA;;;;;;;;;sEDcPN,Y,EAAY;cAVxB,uDAUwB;eAVd;AACTO,kBAAQ,EAAE,UADD;AAETC,qBAAW,EAAE,sBAFJ;AAGTC,mBAAS,EAAE,CAAC,sBAAD,CAHF;AAITC,mBAAS,EAAE,CAAC;AACRL,mBAAO,EAAE,+EADD;AAERC,oBAAQ,EAAE;AAFF,WAAD;AAJF,S;AAUc,Q;;;;;;;;;;;;;;;;;;;;;;AEfzB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAwEaK,S;;;;;YAAAA,S;AAAS,kBAFR,2DAEQ;;;;yBAATA,S;AAAS,O;AAAA,iBAPT,CACT,qFADS,EAET,4EAFS,EAGT,0GAHS,C;AAIV,gBArBQ,CACP,uEADO,EAEP,2DAFO,EAGP,4FAHO,EAIP,gEAJO,EAMP,gFANO,EAOP,yEAPO,EAQP,2EARO,EASP,qEATO,EAUP,uEAVO,EAWP,yEAXO,EAYP,yEAZO,EAaP,6EAbO,EAeP,mEAfO,CAqBR;;;;0HAGUA,S,EAAS;AAAA,uBAtClB,2DAsCkB,EArClB,2GAqCkB,EApClB,qHAoCkB,EAnClB,+GAmCkB,EAlClB,wHAkCkB,EAjClB,qHAiCkB,EAhClB,mHAgCkB,EA/BlB,mIA+BkB,EA9BlB,sIA8BkB,EA7BlB,6FA6BkB,EA5BlB,0FA4BkB,EA3BlB,8GA2BkB,EA1BlB,2GA0BkB;AA1BE,kBAGpB,uEAHoB,EAIpB,2DAJoB,EAKpB,4FALoB,EAMpB,gEANoB,EAQpB,gFARoB,EASpB,yEAToB,EAUpB,2EAVoB,EAWpB,qEAXoB,EAYpB,uEAZoB,EAapB,yEAboB,EAcpB,yEAdoB,EAepB,6EAfoB,EAiBpB,mEAjBoB;AA0BF,O;AATD,K;;;;;sEASRA,S,EAAS;cAxCrB,sDAwCqB;eAxCZ;AACRC,sBAAY,EAAE,CACZ,2DADY,EAEZ,2GAFY,EAGZ,qHAHY,EAIZ,+GAJY,EAKZ,wHALY,EAMZ,qHANY,EAOZ,mHAPY,EAQZ,mIARY,EASZ,sIATY,EAUZ,6FAVY,EAWZ,0FAXY,EAYZ,8GAZY,EAaZ,2GAbY,CADN;AAgBRC,iBAAO,EAAE,CACP,uEADO,EAEP,2DAFO,EAGP,4FAHO,EAIP,gEAJO,EAMP,gFANO,EAOP,yEAPO,EAQP,2EARO,EASP,qEATO,EAUP,uEAVO,EAWP,yEAXO,EAYP,yEAZO,EAaP,6EAbO,EAeP,mEAfO,CAhBD;AAiCRH,mBAAS,EAAE,CACT,qFADS,EAET,4EAFS,EAGT,0GAHS,CAjCH;AAsCRI,mBAAS,EAAE,CAAC,2DAAD;AAtCH,S;AAwCY,Q;;;sEA3BlB,8G,EAAqB,q9JAXrB,2DAWqB,EAVrB,2GAUqB,EATrB,qHASqB,EARrB,+GAQqB,EAPrB,wHAOqB,EANrB,qHAMqB,EALrB,mHAKqB,EAJrB,mIAIqB,EAHrB,sIAGqB,EAFrB,6FAEqB,EADrB,0FACqB,EAArB,8GAAqB,EACrB,2GADqB,C,EACD,0yB;;sEAApB,2G,EAAoB,q9JAZpB,2DAYoB,EAXpB,2GAWoB,EAVpB,qHAUoB,EATpB,+GASoB,EARpB,wHAQoB,EAPpB,qHAOoB,EANpB,mHAMoB,EALpB,mIAKoB,EAJpB,sIAIoB,EAHpB,6FAGoB,EAFpB,0FAEoB,EADpB,8GACoB,EAApB,2GAAoB,C,EAAA,0yB;;;;;;;;;;;;;;;;;AC9CxB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAIaC,sB,GAIX,kCAAc;AAAA;AAEb,K;;;uBANUA,sB;AAAsB,K;;;aAAtBA,sB;AAAsB,eAAtBA,sBAAsB;;;;;sEAAtBA,sB,EAAsB;cADlC;AACkC,Q;;;;;;;;;;;;;;;;;;;;ACJnC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;QAsBaC,e;;;AAqDX,+BACmBC,SADnB,EAEmBC,uBAFnB,EAGEC,kBAHF,EAI4CC,eAJ5C,EAKmBC,yBALnB,EAKwE;AAAA;;AAAA;;AAJrD,aAAAJ,SAAA,GAAAA,SAAA;AACA,aAAAC,uBAAA,GAAAA,uBAAA;AAEyB,aAAAE,eAAA,GAAAA,eAAA;AACzB,aAAAC,yBAAA,GAAAA,yBAAA;AAxDX,aAAAC,KAAA,GAAwB,EAAxB;AAEQ,aAAAC,yBAAA,GAA4B,IAAI,0DAAJ,EAA5B;AACA,aAAAC,iBAAA,GAAoB,IAAI,0DAAJ,EAApB;AAYR,aAAAC,oBAAA,GAA8C,EAA9C;AAIA,aAAAC,kBAAA,GAA+C,EAA/C;AAGA,aAAAC,qBAAA,GAAgE,EAAhE;AAEA,aAAAC,eAAA,GAAqC,IAArC;AAIA,aAAAC,QAAA,GAAmB,CAAnB;AAMA,aAAAC,QAAA,GAAmB,CAAnB;AAMA,aAAAC,WAAA,GAAsB,CAAtB;AAiBN,aAAKb,uBAAL,CAA6Bc,eAA7B,GAA+C,IAA/C;AACA,aAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AAEA,aAAKT,oBAAL,CAA0BU,IAA1B,CAA+BhB,kBAAkB,CAACe,IAAnB,CAAwB;AACrDE,kBAAQ,EAAE,QAD2C;AAErDC,aAAG,EAAE;AAFgD,SAAxB,EAG5B,YAAM;AACP,eAAI,CAACjC,MAAL,CAAYkC,SAAZ,CAAsBC,IAAtB;AACD,SAL8B,CAA/B;AAMA,aAAKd,oBAAL,CAA0BU,IAA1B,CAA+BhB,kBAAkB,CAACe,IAAnB,CAAwB;AACrDE,kBAAQ,EAAE,QAD2C;AAErDC,aAAG,EAAE;AAFgD,SAAxB,EAG5B,YAAM;AACP,eAAI,CAACjC,MAAL,CAAYkC,SAAZ,CAAsBE,IAAtB;AACD,SAL8B,CAA/B;AAMA,aAAKf,oBAAL,CAA0BU,IAA1B,CAA+BhB,kBAAkB,CAACe,IAAnB,CAAwB;AACrDE,kBAAQ,EAAE;AAD2C,SAAxB,EAE5B,YAAM;AACP,cAAI,CAAC,KAAI,CAACK,cAAV,EAA0B;;AAC1B,eAAI,CAACrB,eAAL,CAAqBsB,QAArB,CACE,IAAI,+EAAJ,CAA+B,KAAI,CAACtC,MAApC,EAA4C,KAAI,CAACqC,cAAL,CAAoBE,OAAhE,CADF;;AAEA,eAAI,CAACvB,eAAL,CAAqBsB,QAArB,CACE,IAAI,iFAAJ,EADF;AAED,SAR8B,CAA/B;AASD;;;;sCAEa;AACZ,eAAKpB,KAAL,CAAWsB,OAAX,CAAmB,UAAAC,GAAG;AAAA,mBAAIA,GAAG,CAACC,WAAJ,EAAJ;AAAA,WAAtB;AACA,eAAKrB,oBAAL,CAA0BmB,OAA1B,CAAkC,UAAAG,QAAQ;AAAA,mBAAIA,QAAQ,EAAZ;AAAA,WAA1C;AACD;;;mCAEU;AACT,eAAK3B,eAAL,CAAqBhB,MAArB,GAA8B,KAAKA,MAAnC;AACD;;;0CAEiB;AAAA;;AAChB,eAAK,IAAI4C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK5C,MAAL,CAAY6C,QAAZ,CAAqBC,MAAzC,EAAiDF,CAAC,EAAlD,EAAuD;AACrD,gBAAML,OAAO,GAAG,KAAKvC,MAAL,CAAY6C,QAAZ,CAAqBD,CAArB,CAAhB;AACA,iBAAKG,sBAAL,CAA4BR,OAA5B,EAAqCK,CAArC;AACD;;AACD,eAAK1B,KAAL,CAAWa,IAAX,CAAgB,KAAK/B,MAAL,CAAYgD,eAAZ,CAA4BC,SAA5B,CAAsC,UAAC5D,CAAD,EAAoC;AACxF,kBAAI,CAAC0D,sBAAL,CAA4B1D,CAAC,CAACkD,OAA9B,EAAuClD,CAAC,CAAC6D,KAAzC;AACD,WAFe,CAAhB;AAGA,eAAKhC,KAAL,CAAWa,IAAX,CAAgB,KAAK/B,MAAL,CAAYmD,mBAAZ,CAAgCF,SAAhC,CAA0C,gBAAY;AAAA;AAAA,gBAAVL,CAAU;AAAA,gBAAPQ,CAAO;;AACpE,gBAAIC,IAAI,GAAG,MAAI,CAAC9B,qBAAL,CAA2BqB,CAA3B,CAAX;AACA,kBAAI,CAACrB,qBAAL,CAA2BqB,CAA3B,IAAgC,MAAI,CAACrB,qBAAL,CAA2B6B,CAA3B,CAAhC;AACA,kBAAI,CAAC7B,qBAAL,CAA2B6B,CAA3B,IAAgCC,IAAhC;AACA,gBAAIC,IAAI,GAAG,MAAI,CAACC,iBAAL,CAAuBX,CAAvB,CAAX;AACA,kBAAI,CAACtB,kBAAL,CAAwBsB,CAAxB,IAA6B,MAAI,CAACtB,kBAAL,CAAwB8B,CAAxB,CAA7B;AACA,kBAAI,CAAC9B,kBAAL,CAAwB8B,CAAxB,IAA6BE,IAA7B;AACD,WAPe,CAAhB;AAQA,eAAKpC,KAAL,CAAWa,IAAX,CAAgB,KAAK/B,MAAL,CAAYwD,mBAAZ,CAAgCP,SAAhC,CAA0C,UAAC5D,CAAD,EAAoC;;;AAC5F,gBAAI,aAAI,CAACmC,eAAL,MAAoB,IAApB,IAAoB,aAApB,GAAoB,MAApB,GAAoB,GAAEe,OAAtB,KAAiClD,CAAC,CAACkD,OAAvC,EAAgD,MAAI,CAACkB,OAAL;;AAChD,kBAAI,CAAClC,qBAAL,CAA2BmC,MAA3B,CAAkCrE,CAAC,CAAC6D,KAApC,EAA2C,CAA3C,EAA8C,CAA9C,EAAkDS,OAAlD;;AACA,kBAAI,CAACrC,kBAAL,CAAwBoC,MAAxB,CAA+BrE,CAAC,CAAC6D,KAAjC,EAAwC,CAAxC;AACD,WAJe,CAAhB;AAMA,eAAKU,aAAL,CAAmBC,aAAnB,CAAiCC,gBAAjC,CAAkD,YAAlD,EAAgE,UAACzE,CAAD,EAAY;AAC1E,kBAAI,CAAC0E,YAAL,CAAkB1E,CAAlB;AACD,WAFD;AAGA,eAAKuE,aAAL,CAAmBC,aAAnB,CAAiCC,gBAAjC,CAAkD,gBAAlD,EAAoE,UAACzE,CAAD,EAAY;AAC9E,kBAAI,CAAC0E,YAAL,CAAkB1E,CAAlB;AACD,WAFD;AAGD;;;+CAE8BkD,O,EAAkBW,K,EAAe;AAC9D,cAAIc,OAAJ;;AACA,kBAAQzB,OAAO,CAAC0B,IAAhB;AACE,iBAAK,yEAAaA,IAAlB;AACED,qBAAO,GAAG,KAAK/C,yBAAL,CAA+BiD,uBAA/B,CAAuD,8GAAvD,CAAV;AACA;;AACF,iBAAK,uEAAYD,IAAjB;AACED,qBAAO,GAAG,KAAK/C,yBAAL,CAA+BiD,uBAA/B,CAAuD,2GAAvD,CAAV;AACA;AANJ;;AAQA,cAAMC,YAAY,GAAG,KAAKC,oBAAL,CAA0BC,eAA1B,CACjBL,OADiB,EACRd,KADQ,EACD,KAAKrC,SADJ,CAArB;AAECsD,sBAAY,CAACG,QAAb,CAA8B/B,OAA9B,GAAwCA,OAAxC;AACD,eAAKhB,qBAAL,CAA2BmC,MAA3B,CAAkCR,KAAlC,EAAyC,CAAzC,EAA4CiB,YAA5C;AACA,eAAK7C,kBAAL,CAAwBoC,MAAxB,CAA+BR,KAA/B,EAAsC,CAAtC,EAAyCiB,YAAY,CAACG,QAAtD;AACD;;;8CAE4BC,gB,EAAqC;AAChE,eAAKd,OAAL;AACA,cAAMe,gBAAgB,GAAGD,gBAAgB,CAACC,gBAA1C;AACAA,0BAAiB,CAACC,KAAlB;AACA,eAAKjD,eAAL,GAAuB+C,gBAAvB;AACA,eAAKpD,yBAAL,CAA+BuD,IAA/B,CAAoCH,gBAApC;AACA,eAAKI,SAAL,GAAiB,IAAI,kEAAJ,CAAmBH,gBAAgB,CAACI,UAApC,EAAgDJ,gBAAgB,CAACK,gBAAjE,CAAjB;AACD;;;kCAEgB;AACf,eAAK,IAAIjC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKtB,kBAAL,CAAwBwB,MAA5C,EAAoDF,CAAC,EAArD,EAA0D;AACxD,gBAAML,OAAO,GAAG,KAAKjB,kBAAL,CAAwBsB,CAAxB,CAAhB;AACAL,mBAAO,CAACiC,gBAAR,CAAyBM,IAAzB;AACD;;AACD,eAAKH,SAAL,GAAiB,IAAjB;AACA,eAAKnD,eAAL,GAAuB,IAAvB;AACA,eAAKL,yBAAL,CAA+BuD,IAA/B,CAAoC,IAApC;AACD;;;oCAEWrF,C,EAAe;AAAA;;AACzB,cAAIA,CAAC,CAAC0F,MAAF,IAAY,CAAhB,EAAmB;AACjB,gBAAIC,OAAO,GAAuB3F,CAAC,CAAC4F,MAApC;AACA,gBAAIC,SAAS,GAAG,CAAhB;;AACA,mBAAOF,OAAO,YAAYG,WAA1B,EAAuC;AACrC,kBAAIH,OAAO,CAACI,OAAR,CAAgBC,WAAhB,MAAiC,SAArC,EAAgD;AAC9CH,yBAAS,GAAG,CAACF,OAAO,CAACM,YAAR,CAAqB,YAArB,CAAb;AACA;AACD;;AACDN,qBAAO,GAAGA,OAAO,CAACO,aAAlB;AACD;;AACD,gBAAI,CAACL,SAAL,EAAgB;AACd,mBAAKzB,OAAL;AACA;AACD;;AACD,gBAAMc,gBAAgB,GAAG,KAAKiB,8BAAL,CAAoCN,SAApC,CAAzB;AACA,iBAAKO,qBAAL,CAA2BlB,gBAA3B;AACD,WAhBD,MAiBK,IAAIlF,CAAC,CAAC0F,MAAF,IAAY,CAAhB,EAAmB;AACtB1F,aAAC,CAACqG,cAAF;AACA,iBAAKC,kBAAL,GAA0B,IAAI,yDAAJ,CAAS,CAACtG,CAAC,CAACuG,OAAH,EAAYvG,CAAC,CAACwG,OAAd,CAAT,CAA1B;AACAC,kBAAM,CAAChC,gBAAP,CAAwB,WAAxB,EAAqC,KAAKjC,UAA1C;;AACA,gBAAMkE,OAAO,GAAG,SAAVA,OAAU,GAAM;AACpBD,oBAAM,CAACE,mBAAP,CAA2B,WAA3B,EAAwC,MAAI,CAACnE,UAA7C;AACAiE,oBAAM,CAACE,mBAAP,CAA2B,SAA3B,EAAsCD,OAAtC;AACD,aAHD;;AAIAD,kBAAM,CAAChC,gBAAP,CAAwB,SAAxB,EAAmCiC,OAAnC;AACD;AACF;;;qCAEY1G,C,EAAe;AAC1B,cAAM4G,GAAG,GAAG,IAAI,yDAAJ,CAAS,CAAC5G,CAAC,CAAC6G,KAAH,EAAU7G,CAAC,CAAC8G,KAAZ,CAAT,CAAZ;AACA,cAAMC,KAAK,GAAG,KAAKC,gBAAL,CAAsBJ,GAAtB,CAAd;AACA,cAAMK,KAAK,GAAGjH,CAAC,CAACkH,MAAF,GAAWlH,CAAC,CAACmH,MAA3B;AACA,cAAMC,QAAQ,GAAG,KAAKC,UAAtB;;AACA,cAAIJ,KAAK,GAAG,CAAZ,EAAe;AACb,iBAAKI,UAAL,GAAkB,KAAKA,UAAL,GAAkB,GAApC;AACD,WAFD,MAGK;AACH,iBAAKA,UAAL,GAAkB,KAAKA,UAAL,GAAkB,GAApC;AACD;;AACD,cAAMC,EAAE,GAAG,KAAKD,UAAL,GAAkBD,QAA7B;AACA,cAAMG,EAAE,GAAGR,KAAK,CAACS,KAAN,CAAYF,EAAZ,CAAX;AACA,eAAKG,OAAL,GAAe,KAAKA,OAAL,GAAeF,EAAE,CAACG,CAAjC;AACA,eAAKC,OAAL,GAAe,KAAKA,OAAL,GAAeJ,EAAE,CAACK,CAAjC;AACD;;;mCAEkB5H,C,EAAe;AAChC,cAAM6H,QAAQ,GAAG,IAAI,yDAAJ,CAAS,CAAC7H,CAAC,CAACuG,OAAH,EAAYvG,CAAC,CAACwG,OAAd,CAAT,CAAjB;AACAqB,kBAAQ,CAACC,QAAT,CAAkB,KAAKxB,kBAAvB;AACA,eAAKmB,OAAL,GAAe,KAAKA,OAAL,GAAeI,QAAQ,CAACH,CAAvC;AACA,eAAKC,OAAL,GAAe,KAAKA,OAAL,GAAeE,QAAQ,CAACD,CAAvC;AACA,eAAKtB,kBAAL,GAA0B,IAAI,yDAAJ,CAAS,CAACtG,CAAC,CAACuG,OAAH,EAAYvG,CAAC,CAACwG,OAAd,CAAT,CAA1B;AAA2D;AAC5D;;;yCAEuBuB,G,EAAW;AACjC,cAAMC,MAAM,GAAG,IAAI,yDAAJ,CAAS,CACtB,KAAKzD,aAAL,CAAmBC,aAAnB,CAAiCyD,WAAjC,GAA+C,CADzB,EAEtB,KAAK1D,aAAL,CAAmBC,aAAnB,CAAiC0D,YAAjC,GAAgD,CAF1B,CAAT,CAAf;AAGA,cAAMC,EAAE,GAAGJ,GAAG,CAACK,IAAJ,EAAX;AACAD,YAAE,CAACL,QAAH,CAAYE,MAAZ;AACAG,YAAE,CAACL,QAAH,CAAY,IAAI,yDAAJ,CAAS,CAAC,KAAKL,OAAN,EAAe,KAAKE,OAApB,CAAT,CAAZ;AACAQ,YAAE,CAACX,KAAH,CAAS,IAAI,KAAKH,UAAlB;AACAc,YAAE,CAACT,CAAH,GAAOW,IAAI,CAACC,KAAL,CAAWH,EAAE,CAACT,CAAd,CAAP;AACAS,YAAE,CAACP,CAAH,GAAOS,IAAI,CAACC,KAAL,CAAWH,EAAE,CAACP,CAAd,CAAP;AACA,iBAAOO,EAAP;AACD;;;+CAE6BJ,G,EAAW;AACvC,cAAMC,MAAM,GAAG,IAAI,yDAAJ,CAAS,CACtB,KAAKzD,aAAL,CAAmBC,aAAnB,CAAiCyD,WAAjC,GAA+C,CADzB,EAEtB,KAAK1D,aAAL,CAAmBC,aAAnB,CAAiC0D,YAAjC,GAAgD,CAF1B,CAAT,CAAf;AAGA,cAAMC,EAAE,GAAG,IAAI,yDAAJ,CAAS,CAACJ,GAAG,CAACL,CAAL,EAAQK,GAAG,CAACH,CAAZ,CAAT,CAAX;AACAO,YAAE,CAACL,QAAH,CAAYE,MAAZ;AACA,iBAAOG,EAAP;AACD;;;gDAE+B7H,E,EAAU;AACxC,eAAK,IAAIiD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKtB,kBAAL,CAAwBwB,MAA5C,EAAoDF,CAAC,EAArD,EAA0D;AACxD,gBAAML,OAAO,GAAG,KAAKjB,kBAAL,CAAwBsB,CAAxB,CAAhB;AACA,gBAAM7C,OAAO,GAAGwC,OAAO,CAACA,OAAR,CAAgBxC,OAAhC;AACA,gBAAIA,OAAO,CAACJ,EAAR,IAAcA,EAAlB,EAAsB,OAAO4C,OAAO,CAACiC,gBAAf;AACvB;;AACD,iBAAO,IAAP;AACD;;;uDAEsC7E,E,EAAU;AAC/C,eAAK,IAAIiD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKtB,kBAAL,CAAwBwB,MAA5C,EAAoDF,CAAC,EAArD,EAA0D;AACxD,gBAAML,OAAO,GAAG,KAAKjB,kBAAL,CAAwBsB,CAAxB,CAAhB;AACA,gBAAM7C,OAAO,GAAGwC,OAAO,CAACA,OAAR,CAAgBxC,OAAhC;AACA,gBAAIA,OAAO,CAACJ,EAAR,IAAcA,EAAlB,EAAsB,OAAO4C,OAAP;AACvB;;AACD,iBAAO,IAAP;AACD;;;qDAEoCA,O,EAAgB;AACnD,eAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKtB,kBAAL,CAAwBwB,MAA5C,EAAoDF,CAAC,EAArD,EAA0D;AACxD,gBAAM2B,gBAAgB,GAAG,KAAKjD,kBAAL,CAAwBsB,CAAxB,CAAzB;AACA,gBAAI2B,gBAAgB,CAAChC,OAAjB,KAA6BA,OAAjC,EAA0C,OAAOgC,gBAAP;AAC3C;;AACD,iBAAO,IAAP;AACD;;;0CAEwB;AACvB,iBAAO;AACLqD,iBAAK,YAAK,KAAK5H,MAAL,CAAY4H,KAAjB,OADA;AAELC,kBAAM,YAAK,KAAK7H,MAAL,CAAY6H,MAAjB;AAFD,WAAP;AAID;;;yCAEuB;AACtB,iBAAO;AACLC,qBAAS,iCACM,KAAKrG,QADX,qCAEM,KAAKC,QAFX,gCAGC,KAAKC,WAHN;AADJ,WAAP;AAMD;;;iCAEY;AACX,cAAM3B,MAAM,GAAG,KAAKA,MAApB;AACA,cAAM+H,GAAG,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAZ;AACA,cAAMC,MAAM,GAAGF,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACA,cAAME,GAAG,GAAGJ,GAAG,CAACK,UAAJ,CAAe,IAAf,CAAZ;AACA,cAAMC,MAAM,GAAGH,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAf;AACAL,aAAG,CAACH,KAAJ,GAAY,KAAK5H,MAAL,CAAY4H,KAAxB;AACAG,aAAG,CAACF,MAAJ,GAAa,KAAK7H,MAAL,CAAY6H,MAAzB;AACAM,aAAG,CAACG,SAAJ,GAAgB,OAAhB;AACAH,aAAG,CAACI,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmBR,GAAG,CAACH,KAAvB,EAA8BG,GAAG,CAACF,MAAlC;;AACA,eAAK,IAAIjF,CAAC,GAAG,KAAKW,iBAAL,CAAuBT,MAAvB,GAAgC,CAA7C,EAAgDF,CAAC,IAAI,CAArD,EAAwDA,CAAC,EAAzD,EAA8D;AAC5D,gBAAM2B,gBAAgB,GAAG,KAAKhB,iBAAL,CAAuBX,CAAvB,CAAzB;AACA,gBAAM7C,OAAO,GAAGwE,gBAAgB,CAACC,gBAAjB,CAAkCzE,OAAlD;AACAmI,kBAAM,CAACN,KAAP,GAAe7H,OAAO,CAACyI,CAAvB;AACAN,kBAAM,CAACL,MAAP,GAAgB9H,OAAO,CAAC0I,CAAxB;AACAlE,4BAAgB,CAACmE,MAAjB,CAAwBL,MAAxB,EAL4D,CAO5D;;AACAF,eAAG,CAACQ,IAAJ;AACAR,eAAG,CAACS,SAAJ,CAAc7I,OAAO,CAACgH,CAAR,GAAY/G,MAAM,CAAC4H,KAAP,GAAe,CAAzC,EAA4C7H,OAAO,CAACkH,CAAR,GAAYjH,MAAM,CAAC6H,MAAP,GAAgB,CAAxE;AACAM,eAAG,CAACU,MAAJ,CAAW9I,OAAO,CAAC+I,GAAnB;AACAX,eAAG,CAACY,SAAJ,CAAcb,MAAd,EAAsB,CAACnI,OAAO,CAACyI,CAAT,GAAa,CAAnC,EAAsC,CAACzI,OAAO,CAAC0I,CAAT,GAAa,CAAnD;AACAN,eAAG,CAACa,OAAJ;AACD;;AACD,iBAAOjB,GAAG,CAACkB,SAAJ,CAAc,WAAd,EAA2B,GAA3B,CAAP;AACD;;;4BA1R2B;AAC1B,iBAAO,KAAK3H,kBAAZ;AAAiC;;;4BAIP;AAAE,iBAAO,KAAKE,eAAZ;AAA8B;;;4BAIvC;AAAE,iBAAO,KAAKC,QAAZ;AAAuB,S;0BAC3ByH,C,EAAW;AAC5B,eAAKzH,QAAL,GAAgByH,CAAhB;AACA,eAAK9H,iBAAL,CAAuBsD,IAAvB;AACD;;;4BAEoB;AAAE,iBAAO,KAAKhD,QAAZ;AAAuB,S;0BAC3BwH,C,EAAW;AAC5B,eAAKxH,QAAL,GAAgBwH,CAAhB;AACA,eAAK9H,iBAAL,CAAuBsD,IAAvB;AACD;;;4BAEuB;AAAE,iBAAO,KAAK/C,WAAZ;AAA0B,S;0BAC9BuH,C,EAAW;AAC/BA,WAAC,GAAGxB,IAAI,CAACyB,GAAL,CAAS,CAAT,EAAYzB,IAAI,CAAC0B,GAAL,CAAS,GAAT,EAAcF,CAAd,CAAZ,CAAJ;AACAA,WAAC,IAAI,EAAL;AACAA,WAAC,GAAGxB,IAAI,CAACC,KAAL,CAAWuB,CAAX,CAAJ;AACAA,WAAC,IAAI,EAAL;AACA,eAAKvH,WAAL,GAAmBuH,CAAnB;AACA,eAAK9H,iBAAL,CAAuBsD,IAAvB;AACD;;;;;;;uBAnDU9D,e,EAAe,uH,EAAA,0K,EAAA,sJ,EAAA,gEAyDhB,+EAzDgB,C,EAyDD,uI;AAAA,K;;;YAzDdA,e;AAAe,uC;AAAA;AAAA;+EAUY,8D;;;;;;;;;;;;;;;;;;;;;;;AChCxC;;AACE;AAAA,mBAAa,IAAAyI,WAAA,QAAb;AAAgC,WAAhC;;AACA;;AACE;;AACE;;AAEA;;AACA;;AACE;;AACA;;AACA;;AACA;;AACF;;AACA;;AACE;;AAEF;;AACF;;AACA;;AACF;;AACF;;;;AAjB+B;;AAAA;;AAGM;;AAAA;;AACJ;;AAAA;;AAWhB;;AAAA;;;;;;;;;sEDIJzI,e,EAAe;cAL3B,uDAK2B;eALjB;AACTT,kBAAQ,EAAE,kBADD;AAETC,qBAAW,EAAE,yBAFJ;AAGTC,mBAAS,EAAE,CAAC,yBAAD;AAHF,S;AAKiB,Q;;;;;;;;;;kBAyDvB,oD;mBAAO,+E;;;;;;;gBAlDT;;;gBAGA,uD;iBAAU,kB,EAAoB;AAACiJ,gBAAI,EAAE;AAAP,W;;;gBAE9B,uD;iBAAU,W,EAAa;AAAC,sBAAO;AAAR,W;;;gBAEvB,uD;iBAAU,Q,EAAU;AAAC,sBAAO;AAAR,W;;;;;;;;;;;;;;;;;;;;AEpCvB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACsCE;;;;;;AACI;;;;QDpBOC,sB;;;AA4BX,sCACmB1I,SADnB,EAEmBI,yBAFnB,EAGmBpB,cAHnB,EAImBiB,uBAJnB,EAK4CE,eAL5C,EAK8E;AAAA;;AAAA;;AAJ3D,aAAAH,SAAA,GAAAA,SAAA;AACA,aAAAI,yBAAA,GAAAA,yBAAA;AACA,aAAApB,cAAA,GAAAA,cAAA;AACA,aAAAiB,uBAAA,GAAAA,uBAAA;AACyB,aAAAE,eAAA,GAAAA,eAAA;AA/BpC,aAAAE,KAAA,GAAwB,EAAxB;AAiCN,YAAMlB,MAAM,GAAGH,cAAc,CAACG,MAA9B;AACA,YAAM4B,eAAe,GAAGd,uBAAuB,CAACc,eAAhD;AACA,aAAK4H,WAAL,GAAmBxJ,MAAM,CAAC4H,KAA1B;AACA,aAAK6B,YAAL,GAAoBzJ,MAAM,CAAC6H,MAA3B;AACA,aAAK3G,KAAL,CAAWa,IAAX,CAAgB/B,MAAM,CAAC0J,eAAP,CAAuBzG,SAAvB,CAAiC,YAAM;AACrD,gBAAI,CAACuG,WAAL,GAAmBxJ,MAAM,CAAC4H,KAA1B;AACA,gBAAI,CAAC6B,YAAL,GAAoBzJ,MAAM,CAAC6H,MAA3B;AACD,SAHe,CAAhB;AAIA,aAAK8B,UAAL,GAAkB/H,eAAe,CAAC8E,UAAlC;AACA,aAAKxF,KAAL,CAAWa,IAAX,CAAgBH,eAAe,CAACR,iBAAhB,CAAkC6B,SAAlC,CAA4C,YAAM;AAChE,gBAAI,CAAC0G,UAAL,GAAkB/H,eAAe,CAAC8E,UAAlC;AACD,SAFe,CAAhB;AAGA,aAAKlF,eAAL,GAAuBI,eAAe,CAACS,cAAvC;AACA,aAAKnB,KAAL,CAAWa,IAAX,CAAgBH,eAAe,CAACT,yBAAhB,CAA0C8B,SAA1C,CAAoD,UAAAsB,gBAAgB,EAAI;AACtF,gBAAI,CAACqF,oBAAL,CAA0BrF,gBAA1B;AACD,SAFe,CAAhB;AAID;;;;2CA3CkBiE,C,EAAWC,C,EAAW;AACvC,cAAMzI,MAAM,GAAG,KAAKH,cAAL,CAAoBG,MAAnC;AACA,cAAM6J,EAAE,GAAIrB,CAAC,KAAKsB,SAAN,GAAkB9J,MAAM,CAAC4H,KAAzB,GAAiCY,CAA7C;AACA,cAAMuB,EAAE,GAAItB,CAAC,KAAKqB,SAAN,GAAkB9J,MAAM,CAAC6H,MAAzB,GAAkCY,CAA9C;AACA,eAAKzH,eAAL,CAAqBsB,QAArB,CACE,IAAI,wEAAJ,CAAwBtC,MAAxB,EAAgC6J,EAAhC,EAAoCE,EAApC,CADF;AAED;;;2CAEkB1K,C,EAAoB;AACrC,eAAKyB,uBAAL,CAA6Bc,eAA7B,CAA6C8E,UAA7C,GAA0DrH,CAAC,CAAC2K,KAA5D;AACD;;;6CAmC4BzF,gB,EAAqC;AAChE,eAAK/C,eAAL,GAAuB+C,gBAAvB,CADgE,CAEhE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;;;yCAEgB;AACf,cAAMhC,OAAO,GAAG,IAAI,sEAAJ,CAAgB,gBAAhB,EAAkC,EAAlC,EAAsC,MAAtC,CAAhB;AACA,cAAMvC,MAAM,GAAG,KAAKH,cAAL,CAAoBG,MAAnC;AACA,eAAKgB,eAAL,CAAqBsB,QAArB,CACE,IAAI,4EAAJ,CAA4BtC,MAA5B,EAAoCuC,OAApC,CADF;AAEA,eAAKvB,eAAL,CAAqBsB,QAArB,CAA8B,IAAI,iFAAJ,EAA9B;AACD;;;wCAEejD,C,EAAQ;AAAA;;AACtB,cAAM4K,IAAI,GAAS5K,CAAC,CAAC4F,MAAF,CAASiF,KAAT,CAAe,CAAf,CAAnB;AACA,cAAI,CAACD,IAAL,EAAW;AACX,cAAME,MAAM,GAAG,IAAIC,UAAJ,EAAf;AACAD,gBAAM,CAACrG,gBAAP,CAAwB,MAAxB,EAAgC,YAAM;AACpC,gBAAMuG,KAAK,GAAG,IAAIC,KAAJ,EAAd;AACAD,iBAAK,CAACE,GAAN,GAAYJ,MAAM,CAACK,MAAnB;;AACAH,iBAAK,CAACI,MAAN,GAAe,YAAM;AACnB,kBAAMC,YAAY,GAAG,IAAI,wEAAJ,CAAiBL,KAAjB,CAArB;;AACA,oBAAI,CAACrJ,eAAL,CAAqBsB,QAArB,CACE,IAAI,4EAAJ,CAA4B,MAAI,CAACzC,cAAL,CAAoBG,MAAhD,EAAwD0K,YAAxD,CADF;;AAEA,oBAAI,CAAC1J,eAAL,CAAqBsB,QAArB,CAA8B,IAAI,iFAAJ,EAA9B;AACD,aALD;AAMD,WATD;AAUA6H,gBAAM,CAACQ,aAAP,CAAqBV,IAArB;AACD;;;4BA9EmB;AAClB,iBAAO,KAAKpK,cAAL,CAAoBG,MAA3B;AAAoC;;;4BAGV;AAAE,iBAAO,KAAKwB,eAAZ;AAA8B;;;;;;;uBAzBjD+H,sB,EAAsB,uH,EAAA,uI,EAAA,6I,EAAA,0K,EAAA,gEAiCvB,+EAjCuB,C;AAiCR,K;;;YAjCdA,sB;AAAsB,qC;AAAA;AAAA;+EAIY,8D;;;;;;;;;;;;;;ACvB/C;;AACE;;AACE;;AACE;;AAAwB;AAAA,mBAAS,IAAAqB,cAAA,EAAT;AAAyB,WAAzB;;AACtB;;AAA6B;;AAAK;;AACpC;;AACF;;AACA;;AACE;;AACE;;AAA6B;AAAA,mBAAU,IAAAC,eAAA,QAAV;AAAiC,WAAjC;;AAA7B;;AACA;;AACE;;AAA6B;;AAAY;;AAC3C;;AACF;;AACF;;AACF;;AACA;;AACA;;AACE;;AACE;;AACE;;AAA2C;AAAA;AAAA,aAAyB,OAAzB,EAAyB;AAAA,mBACzD,IAAAC,kBAAA,uBAAmB,CAAnB,EAAyChB,SAAzC,CADyD;AACN,WADnB;;AAA3C;;AAEA;;AAAgB;;AAAE;;AACpB;;AACA;;AACE;;AAA4C;AAAA;AAAA,aAA0B,OAA1B,EAA0B;AAAA,mBAC3D,IAAAgB,kBAAA,CAAmBhB,SAAnB,EAA8B,MAAF,OAAE,CAAF,KAAE,IAA9B,CAD2D;AACR,WADlB;;AAA5C;;AAEA;;AAAgB;;AAAE;;AACpB;;AACF;;AACA;;AACE;;AAAK;;AAAK;;AAAM;;AAAe;;AAAO;;AACtC;;AAAyC;AAAA;AAAA,aAAsB,OAAtB,EAAsB;AAAA,mBACpD,IAAAiB,kBAAA,QADoD;AAC1B,WADI;;AAEzC;;AACF;;AACF;;AACA;;AACA;;AAGA;;AACF;;;;AAtBmD;;AAAA;;AAKC;;AAAA;;AAM9B;;AAAA;;AACyB;;AAAA;;AAM5B;;AAAA;;AAGA;;AAAA;;;;;;;;;sEDtBNxB,sB,EAAsB;cALlC,uDAKkC;eALxB;AACTpJ,kBAAQ,EAAE,gBADD;AAETC,qBAAW,EAAE,iCAFJ;AAGTC,mBAAS,EAAE,CAAC,iCAAD;AAHF,S;AAKwB,Q;;;;;;;;;;;;kBAiC9B,oD;mBAAO,+E;;;;;gBA7BT,uD;iBAAU,yB,EAA2B;AAACiJ,gBAAI,EAAE;AAAP,W;;;;;;;;;;;;;;;;;;;;AErBxC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAKa0B,qB;;;AAEX,qCAA6BC,QAA7B,EAAiE;AAAA;;AAApC,aAAAA,QAAA,GAAAA,QAAA;AAAsC;;;;+BAGjEC,S,EACA3I,O,EAAkB4I,Q,EAAkB;AACpC,cAAI,CAAC5I,OAAL,EAAc,OAAO,IAAP;AACd,cAAI6I,SAAJ;;AACA,kBAAQ7I,OAAO,CAAC0B,IAAhB;AACE,iBAAK,uEAAYA,IAAjB;AACEmH,uBAAS,GAAG,kIAAZ;AACA;;AACF,iBAAK,yEAAanH,IAAlB;AACEmH,uBAAS,GAAG,qIAAZ;AACA;AANJ;;AAQA,cAAI,CAACA,SAAL,EAAgB,OAAO,IAAP;AAChB,cAAMpH,OAAO,GAAG,KAAKiH,QAAL,CAAc/G,uBAAd,CAAsCkH,SAAtC,CAAhB;AACA,cAAMjH,YAAY,GAAG+G,SAAS,CAAC7G,eAAV,CAA0BL,OAA1B,EAAmC8F,SAAnC,EAA8CqB,QAA9C,CAArB;AACChH,sBAAY,CAACG,QAAb,CAA8B/B,OAA9B,GAAwCA,OAAxC;AACD,iBAAO4B,YAAP;AACD;;;;;;;;;;;;;;;;;;;;;AC7BH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;ACCA;;AACE;;AACE;;AACE;;AAAW;;AAAM;;AACjB;;AACI;AAAA;;AAAA;;AAAA;AAAA;;AACF;;AAAY;;AAAI;;AAChB;;AAA8B;;AAAS;;AACvC;;AAAyB;;AAAI;;AAC7B;;AAA0B;;AAAK;;AACjC;;AACF;;AACF;;AACF;;;;;;AATkB;;AAAA;;;;QDULkH,uB;;;AAqCX,uCACmBxK,SADnB,EAEmBI,yBAFnB,EAG4CD,eAH5C,EAG8E;AAAA;;AAF3D,aAAAH,SAAA,GAAAA,SAAA;AACA,aAAAI,yBAAA,GAAAA,yBAAA;AACyB,aAAAD,eAAA,GAAAA,eAAA;AAtCpC,aAAAE,KAAA,GAAwB,EAAxB;AAwCP;;;;uCAzBc7B,C,EAAoB;AACjC,cAAM2K,KAAK,GAAG3K,CAAC,CAAC2K,KAAhB;AACA,cAAIsB,MAAJ;;AACA,kBAAQtB,KAAR;AACE,iBAAK,WAAL;AACEsB,oBAAM,GAAG,IAAI,mFAAJ,EAAT;AACA;;AACF,iBAAK,MAAL;AACEA,oBAAM,GAAG,IAAI,8EAAJ,EAAT;AACA;;AACF,iBAAK,OAAL;AACEA,oBAAM,GAAG,IAAI,+EAAJ,EAAT;AACA;AATJ;;AAWA,eAAKtK,eAAL,CAAqBsB,QAArB,CACE,IAAI,gFAAJ,CAA+B,KAAKC,OAApC,EAA6C+I,MAA7C,CADF;AAEA,eAAKtK,eAAL,CAAqBsB,QAArB,CACE,IAAI,iFAAJ,EADF;AAED;;;sCASa;AACZ,eAAKpB,KAAL,CAAWsB,OAAX,CAAmB,UAAAC,GAAG;AAAA,mBAAIA,GAAG,CAACC,WAAJ,EAAJ;AAAA,WAAtB;AACD;;;oCAEW6I,O,EAAwB;AAAA;;AAClC,cAAIA,OAAO,CAAChJ,OAAZ,EAAqB;AACnB,iBAAKrB,KAAL,CAAWsB,OAAX,CAAmB,UAAAC,GAAG;AAAA,qBAAIA,GAAG,CAACC,WAAJ,EAAJ;AAAA,aAAtB;AACA,iBAAKxB,KAAL,CAAW4B,MAAX,GAAoB,CAApB;AAEA,iBAAK0I,oBAAL;AACA,iBAAKC,mBAAL;AACA,gBAAI,CAAC,KAAKlJ,OAAV,EAAmB;AACnB,iBAAKrB,KAAL,CAAWa,IAAX,CAAgB,KAAKQ,OAAL,CAAamJ,iBAAb,CAA+BzI,SAA/B,CAAyC,YAAM;AAC7D,oBAAI,CAACwI,mBAAL;AACD,aAFe,CAAhB;AAGD;AACF;;;+CAE8B;AAC7B,cAAI,KAAKE,eAAT,EAA0B,KAAKA,eAAL,CAAqBhI,OAArB;AAC1B,cAAMK,OAAO,GAAG,IAAI,gHAAJ,CAA0B,KAAK/C,yBAA/B,CAAhB;AACA,cAAM2K,IAAI,GAAG5H,OAAO,CAAC6H,MAAR,CAAe,KAAKC,wBAApB,EAA8C,KAAKvJ,OAAnD,EAA4D,KAAK1B,SAAjE,CAAb;AACA,eAAK8K,eAAL,GAAuBC,IAAvB;AACD;;;8CAE6B;AAC5B,cAAI,KAAKG,cAAT,EAAyB,KAAKA,cAAL,CAAoBpI,OAApB;AACzB,cAAI,CAAC,KAAKpB,OAAV,EAAmB;AACnB,cAAMyB,OAAO,GAAG,IAAI,6GAAJ,CAAyB,KAAK/C,yBAA9B,CAAhB;AACA,cAAM2K,IAAI,GAAG5H,OAAO,CAAC6H,MAAR,CAAe,KAAKG,uBAApB,EAA6C,KAAKzJ,OAAL,CAAa+I,MAA1D,EAAkE,KAAKzK,SAAvE,CAAb;AACA,eAAKkL,cAAL,GAAsBH,IAAtB;AACD;;;4BA7DuB;;;AACtB,iBAAO,CAAP,WAAO,KAAKrJ,OAAZ,MAAmB,IAAnB,IAAmB,aAAnB,GAAmB,MAAnB,GAAmB,GAAE+I,MAAd,MAAoB,IAApB,IAAoB,aAApB,GAAoB,MAApB,GAAoB,GAAErH,IAAF,CAAOoB,WAAP,EAA3B;AACD;;;;;;;uBAhBUgG,uB,EAAuB,uH,EAAA,uI,EAAA,gEAwCxB,+EAxCwB,C;AAwCT,K;;;YAxCdA,uB;AAAuB,sC;AAAA;AAAA;+EAKW,8D;;+EAED,8D;;;;;;;;;;;;;;;;;;;ACtB9C;;AACA;;AAcA;;;;AAdc;;AAAA;;;;;;;;;sEDcDA,uB,EAAuB;cALnC,uDAKmC;eALzB;AACTlL,kBAAQ,EAAE,iBADD;AAETC,qBAAW,EAAE,kCAFJ;AAGTC,mBAAS,EAAE,CAAC,kCAAD;AAHF,S;AAKyB,Q;;;;;;;;kBAwC/B,oD;mBAAO,+E;;;;;gBApCT;;;gBACA,uD;iBAAU,yB,EAA2B;AAACiJ,gBAAI,EAAE;AAAP,W;;;gBAErC,uD;iBAAU,wB,EAA0B;AAACA,gBAAI,EAAE;AAAP,W;;;;;;;;;;;;;;;;;;;;AEtBvC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAWa2C,2B;;;AAWX,2CAC4CjL,eAD5C,EAC8E;AAAA;;AAAlC,aAAAA,eAAA,GAAAA,eAAA;AAE3C;;;;gCAEOkL,C,EAAWC,C,EAAWC,C,EAAWC,C,EAAW;AAClDH,WAAC,GAAIA,CAAC,KAAKpC,SAAN,GAAkB,KAAKwB,MAAL,CAAYY,CAA9B,GAAkCA,CAAvC;AACAC,WAAC,GAAIA,CAAC,KAAKrC,SAAN,GAAkB,KAAKwB,MAAL,CAAYa,CAA9B,GAAkCA,CAAvC;AACAC,WAAC,GAAIA,CAAC,KAAKtC,SAAN,GAAkB,KAAKwB,MAAL,CAAYc,CAA9B,GAAkCA,CAAvC;AACAC,WAAC,GAAIA,CAAC,KAAKvC,SAAN,GAAkB,KAAKwB,MAAL,CAAYe,CAA9B,GAAkCA,CAAvC;AACA,eAAKrL,eAAL,CAAqBsB,QAArB,CACE,IAAI,2FAAJ,CAAmC,KAAKgJ,MAAxC,EACEY,CADF,EACKC,CADL,EACQC,CADR,EACWC,CADX,CADF;AAGD;;;mCAEU;AACTC,iBAAO,CAACC,GAAR,CAAY,QAAZ;AACA,eAAKvL,eAAL,CAAqBsB,QAArB,CACE,IAAI,iFAAJ,EADF;AAED;;;mCAEU;AAAA;;AACT,eAAK4J,CAAL,GAAS,KAAKZ,MAAL,CAAYY,CAArB;AACA,eAAKC,CAAL,GAAS,KAAKb,MAAL,CAAYa,CAArB;AACA,eAAKC,CAAL,GAAS,KAAKd,MAAL,CAAYc,CAArB;AACA,eAAKC,CAAL,GAAS,KAAKf,MAAL,CAAYe,CAArB;AACA,eAAKG,IAAL,GAAY,KAAKlB,MAAL,CAAYmB,QAAZ,CAAqBxJ,SAArB,CAA+B,YAAM;AAC/C,kBAAI,CAACiJ,CAAL,GAAS,MAAI,CAACZ,MAAL,CAAYY,CAArB;AACA,kBAAI,CAACC,CAAL,GAAS,MAAI,CAACb,MAAL,CAAYa,CAArB;AACA,kBAAI,CAACC,CAAL,GAAS,MAAI,CAACd,MAAL,CAAYc,CAArB;AACA,kBAAI,CAACC,CAAL,GAAS,MAAI,CAACf,MAAL,CAAYe,CAArB;AACD,WALW,CAAZ;AAMD;;;sCAEa;AACZ,eAAKG,IAAL,CAAU9J,WAAV;AACD;;;;;;;uBA/CUuJ,2B,EAA2B,gEAY5B,+EAZ4B,C;AAYb,K;;;YAZdA,2B;AAA2B,2C;AAAA;AAAA;AAAA,O;AAAA,e;AAAA,a;AAAA,yM;AAAA;AAAA;ACVxC;;AACE;;AAAK;;AAAC;;AAAa;;AACnB;;AAAuC;AAAA;AAAA,aAAa,OAAb,EAAa;AAAA,mBACzC,IAAAS,OAAA,eAAsB5C,SAAtB,EAAiCA,SAAjC,EAA4CA,SAA5C,CADyC;AACa,WAD1B,EAAa,QAAb,EAAa;AAAA,mBAExC,IAAA6C,QAAA,EAFwC;AAE9B,WAFiB;;AAGvC;;AACF;;AACA;;AACE;;AAAK;;AAAC;;AAAa;;AACnB;;AAAuC;AAAA;AAAA,aAAa,OAAb,EAAa;AAAA,mBACzC,IAAAD,OAAA,CAAQ5C,SAAR,EAAmB8C,MAAM,CAAC5C,KAA1B,EAAiCF,SAAjC,EAA4CA,SAA5C,CADyC;AACa,WAD1B,EAAa,QAAb,EAAa;AAAA,mBAExC,IAAA6C,QAAA,EAFwC;AAE9B,WAFiB;;AAGvC;;AACF;;AACA;;AACE;;AAAK;;AAAC;;AAAa;;AACnB;;AAAuC;AAAA;AAAA,aAAa,OAAb,EAAa;AAAA,mBACzC,IAAAD,OAAA,CAAQ5C,SAAR,EAAmBA,SAAnB,EAA8B8C,MAAM,CAAC5C,KAArC,EAA4CF,SAA5C,CADyC;AACa,WAD1B,EAAa,QAAb,EAAa;AAAA,mBAExC,IAAA6C,QAAA,EAFwC;AAE9B,WAFiB;;AAGvC;;AACF;;AACA;;AACE;;AAAK;;AAAC;;AAAa;;AACnB;;AAAwC;AAAA;AAAA,aAAa,OAAb,EAAa;AAAA,mBAC1C,IAAAD,OAAA,CAAQ5C,SAAR,EAAmBA,SAAnB,EAA8BA,SAA9B,EAAyC8C,MAAM,CAAC5C,KAAhD,CAD0C;AACY,WADzB,EAAa,QAAb,EAAa;AAAA,mBAEzC,IAAA2C,QAAA,EAFyC;AAE/B,WAFkB;;AAGxC;;AACF;;;;AAzByC;;AAAA;;AAOA;;AAAA;;AAOA;;AAAA;;AAOC;;AAAA;;;;;;;;;sEDb7BV,2B,EAA2B;cALvC,uDAKuC;eAL7B;AACT9L,kBAAQ,EAAE,sBADD;AAETC,qBAAW,EAAE,6BAFJ;AAGTC,mBAAS,EAAE,CAAC,6BAAD;AAHF,S;AAK6B,Q;;;;kBAYnC,oD;mBAAO,+E;;;;;gBART;;;;;;;;;;;;;;;;;;;;AEfH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAIawM,oB;;;AAEX,oCAA6B5B,QAA7B,EAAiE;AAAA;;AAApC,aAAAA,QAAA,GAAAA,QAAA;AAAsC;;;;+BAGjEC,S,EACAI,M,EAAwBH,Q,EAAkB;AAC1C,cAAI,CAACG,MAAL,EAAa,OAAO,IAAP;AACb,cAAIF,SAAJ;;AACA,kBAAQE,MAAM,CAACrH,IAAf;AACE,iBAAK,gFAAmBA,IAAxB;AACEmH,uBAAS,GAAG,kHAAZ;AACA;AAHJ;;AAKA,cAAI,CAACA,SAAL,EAAgB,OAAO,IAAP;AAChB,cAAMpH,OAAO,GAAG,KAAKiH,QAAL,CAAc/G,uBAAd,CAAsCkH,SAAtC,CAAhB;AACA,cAAMjH,YAAY,GAAG+G,SAAS,CAAC7G,eAAV,CAA0BL,OAA1B,EAAmC8F,SAAnC,EAA8CqB,QAA9C,CAArB;AACChH,sBAAY,CAACG,QAAb,CAA8BgH,MAA9B,GAAuCA,MAAvC;AACD,iBAAOnH,YAAP;AACD;;;;;;;;;;;;;;;;;;;;;ACvBH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAWa2I,4B;;;AAiBX,4CAC4C9L,eAD5C,EAC8E;AAAA;;AAAlC,aAAAA,eAAA,GAAAA,eAAA;AAhBpC,aAAAE,KAAA,GAAwB,EAAxB;AAkBP;;;;uCAZc6F,C,EAAYE,C,EAAY;AACrCF,WAAC,GAAIA,CAAC,KAAK+C,SAAN,GAAkB,KAAKvH,OAAL,CAAawK,OAA/B,GAAyChG,CAA9C;AACAE,WAAC,GAAIA,CAAC,KAAK6C,SAAN,GAAkB,KAAKvH,OAAL,CAAayK,OAA/B,GAAyC/F,CAA9C;AACA,eAAKjG,eAAL,CAAqBsB,QAArB,CACE,IAAI,2FAAJ,CAAoC,KAAKC,OAAzC,EAAkDwE,CAAlD,EAAqDE,CAArD,CADF;AAEA,eAAKjG,eAAL,CAAqBsB,QAArB,CACE,IAAI,iFAAJ,EADF;AAED;;;mCAOU;AAAA;;AACT,eAAKyK,OAAL,GAAe,KAAKxK,OAAL,CAAawK,OAA5B;AACA,eAAKC,OAAL,GAAe,KAAKzK,OAAL,CAAayK,OAA5B;AACA,eAAK9L,KAAL,CAAWa,IAAX,CAAgB,KAAKQ,OAAL,CAAa0K,UAAb,CAAwBhK,SAAxB,CAAkC,YAAM;AACtD,kBAAI,CAAC8J,OAAL,GAAe,MAAI,CAACxK,OAAL,CAAawK,OAA5B;AACA,kBAAI,CAACC,OAAL,GAAe,MAAI,CAACzK,OAAL,CAAayK,OAA5B;AACD,WAHe,CAAhB;AAID;;;sCAEa;AACZ,eAAK9L,KAAL,CAAWsB,OAAX,CAAmB,UAAAC,GAAG;AAAA,mBAAIA,GAAG,CAACC,WAAJ,EAAJ;AAAA,WAAtB;AACD;;;;;;;uBAjCUoK,4B,EAA4B,gEAkB7B,+EAlB6B,C;AAkBd,K;;;YAlBdA,4B;AAA4B,4C;AAAA;AAAA;AAAA,O;AAAA,c;AAAA,a;AAAA,yH;AAAA;AAAA;ACXzC;;AACE;;AACE;;AACE;AAAA,mBAAU,IAAAI,cAAA,iBAA+BpD,SAA/B,CAAV;AAAmD,WAAnD;;AAAqD;;AACvD;;AACA;;AACE;AAAA,mBAAU,IAAAoD,cAAA,CAAepD,SAAf,EAA0B8C,MAAM,CAACO,OAAjC,CAAV;AAAmD,WAAnD;;AAAqD;;AACvD;;AACF;;AACF;;;;AAPkB;;AAAA;;AAGA;;AAAA;;;;;;;;;sEDMLL,4B,EAA4B;cALxC,uDAKwC;eAL9B;AACT3M,kBAAQ,EAAE,uBADD;AAETC,qBAAW,EAAE;AAFJ,S;AAK8B,Q;;;;kBAkBpC,oD;mBAAO,+E;;;;;gBAdT;;;;;;;;;;;;;;;;;;;;AEfH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAQagN,yB,GALb;AAAA;;AAUW,WAAAC,MAAA,GAAkB,KAAlB;AAEV,K;;;uBAPYD,yB;AAAyB,K;;;YAAzBA,yB;AAAyB,yC;AAAA,iB;AAAA;AAAA;;;;;;;;;;;;;ACRtC;;AACE;;AAAkB;;AAAgB;;AACpC;;;;AADoB;;AAAA;;;;;;;;sEDOPA,yB,EAAyB;cALrC,uDAKqC;eAL3B;AACTjN,kBAAQ,EAAE,oBADD;AAETC,qBAAW,EAAE,qCAFJ;AAGTC,mBAAS,EAAE,CAAC,qCAAD;AAHF,S;AAK2B,Q;;gBAEnC;;;gBAEA,yD;iBAAY,c;;gBACZ;;;;;;;;;;;;;;;;;;;;AEbH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACEI;;AAEE;;AAAoB;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAGpB;;AACA;;AACF;;;;;;;;AAJI;;AAAA,0GAAoC,QAApC,EAAoC,uDAApC;;;;QDOKiN,qB;;;AAcX,qCACmBxM,uBADnB,EAE4CE,eAF5C,EAE8E;AAAA;;AAD3D,aAAAF,uBAAA,GAAAA,uBAAA;AACyB,aAAAE,eAAA,GAAAA,eAAA;AAE3C;;;;oCAEWuD,gB,EAAqC;AAC/C,eAAKvE,MAAL,CAAYyF,qBAAZ,CAAkClB,gBAAlC;AACD;;;kCAESrB,K,EAAe0I,I,EAAyB;AAChD,iBAAOA,IAAI,CAACrJ,OAAL,CAAa5C,EAApB;AACD;;;wCAEe;AACd,cAAI,CAAC,KAAK0C,cAAV,EAA0B;AAC1B,cAAMa,KAAK,GAAG,KAAKlD,MAAL,CAAYA,MAAZ,CAAmBuN,eAAnB,CAAmC,KAAKlL,cAAxC,CAAd;AACA,eAAKrB,eAAL,CAAqBsB,QAArB,CACE,IAAI,yEAAJ,CAAyB,KAAKtC,MAAL,CAAYA,MAArC,EAA6CkD,KAA7C,EAAoDA,KAAK,GAAG,CAA5D,CADF;AAEA,eAAKlC,eAAL,CAAqBsB,QAArB,CACE,IAAI,iFAAJ,EADF;AAED;;;0CAEiB;AAChB,cAAI,CAAC,KAAKD,cAAV,EAA0B;AAC1B,cAAMa,KAAK,GAAG,KAAKlD,MAAL,CAAYA,MAAZ,CAAmBuN,eAAnB,CAAmC,KAAKlL,cAAxC,CAAd;AACA,eAAKrB,eAAL,CAAqBsB,QAArB,CACE,IAAI,yEAAJ,CAAyB,KAAKtC,MAAL,CAAYA,MAArC,EAA6CkD,KAA7C,EAAoDA,KAAK,GAAG,CAA5D,CADF;AAEA,eAAKlC,eAAL,CAAqBsB,QAArB,CACE,IAAI,iFAAJ,EADF;AAED;;;wCAEe;AACd,cAAI,CAAC,KAAKD,cAAV,EAA0B;AAC1B,eAAKrB,eAAL,CAAqBsB,QAArB,CACE,IAAI,+EAAJ,CAA+B,KAAKtC,MAAL,CAAYA,MAA3C,EAAmD,KAAKqC,cAAxD,CADF;AAEA,eAAKrB,eAAL,CAAqBsB,QAArB,CACE,IAAI,iFAAJ,EADF;AAED;;;sCAEa;AACV,cAAI+H,KAAK,GAAG,KAAKvJ,uBAAL,CAA6Bc,eAA7B,CAA6C8G,MAA7C,EAAZ;AACA2B,eAAK,GAAGA,KAAK,CAACmD,OAAN,CAAc,WAAd,EAA2B,oBAA3B,CAAR;AACA,cAAIC,IAAI,GAAGzF,QAAQ,CAAC0F,cAAT,CAAwB,MAAxB,CAAX;AACAD,cAAI,CAACE,YAAL,CAAkB,UAAlB,EAA8B,eAA9B;AACAF,cAAI,CAACE,YAAL,CAAkB,MAAlB,EAA0BtD,KAA1B;AACAoD,cAAI,CAACG,KAAL;AACH;;;4BA3DmB;AAClB,iBAAO,KAAK9M,uBAAL,CAA6Bc,eAApC;AACD;;;4BAE2B;;;AAC1B,iBAAO,CAAP,KAAO,KAAK5B,MAAL,CAAYqC,cAAZ,MAA0B,IAA1B,IAA0B,aAA1B,GAA0B,MAA1B,GAA0B,GAAEE,OAAnC;AACD;;;4BAE2B;AAC1B,iBAAO,KAAKvC,MAAL,CAAYuD,iBAAnB;AACD;;;;;;;uBAZU+J,qB,EAAqB,0K,EAAA,gEAgBtB,+EAhBsB,C;AAgBP,K;;;YAhBdA,qB;AAAqB,oC;AAAA,e;AAAA,a;AAAA,mQ;AAAA;AAAA;ACZlC;;AACE;;AACE;;AAQF;;AACA;;AACE;;AAAwB;AAAA,mBAAS,IAAAO,aAAA,EAAT;AAAwB,WAAxB;;AACtB;;AAA6B;;AAAiB;;AAChD;;AACA;;AAAwB;AAAA,mBAAS,IAAAC,eAAA,EAAT;AAA0B,WAA1B;;AACtB;;AAA6B;;AAAmB;;AAClD;;AACA;;AAAwB;AAAA,mBAAS,IAAAC,aAAA,EAAT;AAAwB,WAAxB;;AACtB;;AAA6B;;AAAM;;AACrC;;AACA;;AAAwB;AAAA,mBAAS,IAAAC,WAAA,EAAT;AAAsB,WAAtB;;AACtB;;AAA6B;;AAAQ;;AACvC;;AACF;;AACF;;;;AAvBkB;;AAAA,qGACmB,cADnB,EACmB,aADnB;;;;;;;;;sEDULV,qB,EAAqB;cALjC,uDAKiC;eALvB;AACTnN,kBAAQ,EAAE,eADD;AAETC,qBAAW,EAAE,gCAFJ;AAGTC,mBAAS,EAAE,CAAC,gCAAD;AAHF,S;AAKuB,Q;;;;;;kBAgB7B,oD;mBAAO,+E;;;;;;;;;;;;;;;;;;;;;AE5BZ;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAWa4N,uB;;;AAuCX,uCAC4CjN,eAD5C,EAC8E;AAAA;;AAAlC,aAAAA,eAAA,GAAAA,eAAA;AAtCpC,aAAAE,KAAA,GAAwB,EAAxB;AAwCP;;;;yCAlCuB6F,C,EAAWE,C,EAAW;AAC5C,cAAMlH,OAAO,GAAG,KAAKA,OAArB;AACA,cAAM8J,EAAE,GAAI9C,CAAC,KAAK+C,SAAN,GAAkB/J,OAAO,CAACgH,CAA1B,GAA8BA,CAA1C;AACA,cAAMgD,EAAE,GAAI9C,CAAC,KAAK6C,SAAN,GAAkB/J,OAAO,CAACkH,CAA1B,GAA8BA,CAA1C;AACA,eAAKjG,eAAL,CAAqBsB,QAArB,CACE,IAAI,6EAAJ,CAA4BvC,OAA5B,EAAqC8J,EAArC,EAAyCE,EAAzC,CADF;AAEA,eAAK/I,eAAL,CAAqBsB,QAArB,CACE,IAAI,iFAAJ,EADF;AAED;;;qCAImBkG,C,EAAWC,C,EAAW;AACxC,cAAM1I,OAAO,GAAG,KAAKA,OAArB;AACA,cAAM8J,EAAE,GAAIrB,CAAC,KAAKsB,SAAN,GAAkB/J,OAAO,CAACyI,CAA1B,GAA8BA,CAA1C;AACA,cAAMuB,EAAE,GAAItB,CAAC,KAAKqB,SAAN,GAAkB/J,OAAO,CAAC0I,CAA1B,GAA8BA,CAA1C;AACA,eAAKzH,eAAL,CAAqBsB,QAArB,CACE,IAAI,0EAAJ,CAAyBvC,OAAzB,EAAkC8J,EAAlC,EAAsCE,EAAtC,CADF;AAEA,eAAK/I,eAAL,CAAqBsB,QAArB,CACE,IAAI,iFAAJ,EADF;AAED;;;4CAG0B4J,C,EAAW,CACpC;AACA;AACA;AACA;AACD;;;oCAQWX,O,EAAwB;AAAA;;AAClC,cAAIA,OAAO,CAACxL,OAAZ,EAAqB;AACnB,iBAAKmB,KAAL,CAAWsB,OAAX,CAAmB,UAAAC,GAAG;AAAA,qBAAIA,GAAG,CAACC,WAAJ,EAAJ;AAAA,aAAtB;AACA,iBAAKxB,KAAL,GAAa,EAAb;AAEA,gBAAMnB,OAAO,GAAG,KAAKA,OAArB;AACA,iBAAKgH,CAAL,GAAShH,OAAO,CAACgH,CAAjB;AACA,iBAAKE,CAAL,GAASlH,OAAO,CAACkH,CAAjB;AACA,iBAAKuB,CAAL,GAASzI,OAAO,CAACyI,CAAjB;AACA,iBAAKC,CAAL,GAAS1I,OAAO,CAAC0I,CAAjB;AACA,iBAAKyD,CAAL,GAASnM,OAAO,CAACmM,CAAjB;AACA,iBAAKhL,KAAL,CAAWa,IAAX,CAAgBhC,OAAO,CAACmO,WAAR,CAAoBjL,SAApB,CAA8B,YAAM;AAClD,oBAAI,CAAC8D,CAAL,GAAShH,OAAO,CAACgH,CAAjB;AACA,oBAAI,CAACE,CAAL,GAASlH,OAAO,CAACkH,CAAjB;AACA,oBAAI,CAACuB,CAAL,GAASzI,OAAO,CAACyI,CAAjB;AACA,oBAAI,CAACC,CAAL,GAAS1I,OAAO,CAAC0I,CAAjB;AACA,oBAAI,CAACyD,CAAL,GAASnM,OAAO,CAACmM,CAAjB;AACD,aANe,CAAhB;AAOD;AACF;;;mCAEU,CACV;;;sCAEa;AACZ,eAAKhL,KAAL,CAAWsB,OAAX,CAAmB,UAAAC,GAAG;AAAA,mBAAIA,GAAG,CAACC,WAAJ,EAAJ;AAAA,WAAtB;AACD;;;;;;;uBAtEUuL,uB,EAAuB,gEAwCxB,+EAxCwB,C;AAwCT,K;;;YAxCdA,uB;AAAuB,sC;AAAA;AAAA;AAAA,O;AAAA,oF;AAAA,e;AAAA,a;AAAA,gZ;AAAA;AAAA;ACXpC;;AACE;;AACE;;AACE;;AAAyC;AAAA;AAAA,aAAe,OAAf,EAAe;AAAA,mBAC7C,IAAAE,gBAAA,uBAAiB,CAAjB,EAAuCrE,SAAvC,CAD6C;AACI,WADnB;;AAAzC;;AAEA;;AAAgB;;AAAE;;AACpB;;AACA;;AACE;;AAAyC;AAAA;AAAA,aAAe,OAAf,EAAe;AAAA,mBAC7C,IAAAqE,gBAAA,CAAiBrE,SAAjB,EAA4B,MAAF,OAAE,CAAF,KAAE,IAA5B,CAD6C;AACI,WADnB;;AAAzC;;AAEA;;AAAgB;;AAAE;;AACpB;;AACF;;AACA;;AACE;;AACE;;AAAoC;AAAA;AAAA,aAAe,OAAf,EAAe;AAAA,mBACxC,IAAAsE,YAAA,uBAAa,CAAb,EAAmCtE,SAAnC,CADwC;AACK,WADpB;;AAApC;;AAEA;;AAAgB;;AAAE;;AACpB;;AACA;;AACE;;AAAqC;AAAA;AAAA,aAAe,OAAf,EAAe;AAAA,mBACzC,IAAAsE,YAAA,CAAatE,SAAb,EAAwB,MAAF,OAAE,CAAF,KAAE,IAAxB,CADyC;AACI,WADnB;;AAArC;;AAEA;;AAAgB;;AAAE;;AACpB;;AACF;;AACF;;;;AAtB+C;;AAAA;;AAKA;;AAAA;;AAOL;;AAAA;;AAKC;;AAAA;;;;;;;;;sEDT9BmE,uB,EAAuB;cALnC,uDAKmC;eALzB;AACT9N,kBAAQ,EAAE,iBADD;AAETC,qBAAW,EAAE,kCAFJ;AAGTC,mBAAS,EAAE,CAAC,kCAAD;AAHF,S;AAKyB,Q;;;;kBAwC/B,oD;mBAAO,+E;;;;;gBApCT;;;;;;;;;;;;;;;;;;;;AEfH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAWagO,2B;;;AAwCX,2CAC4CrN,eAD5C,EAC8E;AAAA;;AAAlC,aAAAA,eAAA,GAAAA,eAAA;AAvCpC,aAAAE,KAAA,GAAwB,EAAxB;AAyCP;;;;qCApCmBoN,I,EAAc;AAChC,cAAM/L,OAAO,GAAG,KAAKA,OAArB;AACA,eAAKvB,eAAL,CAAqBsB,QAArB,CACE,IAAI,uFAAJ,CAAiCC,OAAjC,EAA0C+L,IAA1C,CADF;AAED;;;qCAGmBC,I,EAAc;AAChC,cAAMhM,OAAO,GAAG,KAAKA,OAArB;AACA,eAAKvB,eAAL,CAAqBsB,QAArB,CACE,IAAI,uFAAJ,CAAiCC,OAAjC,EAA0CgM,IAA1C,CADF;AAED;;;wCAQe;AACd,eAAKvN,eAAL,CAAqBsB,QAArB,CACE,IAAI,iFAAJ,EADF;AAED;;;qCAGmBkM,I,EAAc;AAChC,cAAMjM,OAAO,GAAG,KAAKA,OAArB;AACA,eAAKvB,eAAL,CAAqBsB,QAArB,CACE,IAAI,uFAAJ,CAAiCC,OAAjC,EAA0CiM,IAA1C,CADF;AAEA,eAAKxN,eAAL,CAAqBsB,QAArB,CACE,IAAI,iFAAJ,EADF;AAED;;;mCAOU;AAAA;;AACT,eAAKgM,IAAL,GAAY,KAAK/L,OAAL,CAAa+L,IAAzB;AACA,eAAKC,IAAL,GAAY,KAAKhM,OAAL,CAAagM,IAAzB;AACA,eAAKC,IAAL,GAAY,KAAKjM,OAAL,CAAaiM,IAAzB;AACA,eAAKC,MAAL,GAAc,KAAKlM,OAAL,CAAamM,KAA3B;AACA,eAAKxN,KAAL,CAAWa,IAAX,CAAgB,KAAKQ,OAAL,CAAaoM,eAAb,CAA6B1L,SAA7B,CAAuC,YAAM;AAC3D,mBAAI,CAACqL,IAAL,GAAY,OAAI,CAAC/L,OAAL,CAAa+L,IAAzB;AACA,mBAAI,CAACC,IAAL,GAAY,OAAI,CAAChM,OAAL,CAAagM,IAAzB;AACA,mBAAI,CAACE,MAAL,GAAc,OAAI,CAAClM,OAAL,CAAamM,KAA3B;AACA,mBAAI,CAACF,IAAL,GAAY,OAAI,CAACjM,OAAL,CAAaiM,IAAzB;AACD,WALe,CAAhB;AAMD;;;sCAEa;AACZ,eAAKtN,KAAL,CAAWsB,OAAX,CAAmB,UAAAC,GAAG;AAAA,mBAAIA,GAAG,CAACC,WAAJ,EAAJ;AAAA,WAAtB;AACD;;;iCAEQ;AACP,eAAK1B,eAAL,CAAqBsB,QAArB,CACE,IAAI,iFAAJ,EADF;AAED;;;4BA5CkB;AAAE,iBAAO,KAAKmM,MAAZ;AAAqB,S;0BACzBvF,C,EAAW;AAC1B,eAAKlI,eAAL,CAAqBsB,QAArB,CACE,IAAI,wFAAJ,CAAkC,KAAKC,OAAvC,EAAgD2G,CAAhD,CADF;AAED;;;;;;;uBAzBUmF,2B,EAA2B,gEAyC5B,+EAzC4B,C;AAyCb,K;;;YAzCdA,2B;AAA2B,2C;AAAA;AAAA;AAAA,O;AAAA,e;AAAA,a;AAAA,if;AAAA;AAAA;ACXxC;;AACE;;AACE;;AACE;;AAAmC;AAAA;AAAA,aAAkB,OAAlB,EAAkB;AAAA,mBAC1C,IAAAO,YAAA,qBAD0C;AACT,WADT,EAAkB,MAAlB,EAAkB;AAAA,mBAE3C,IAAAC,MAAA,EAF2C;AAEnC,WAFiB;;AAAnC;;AAGF;;AACF;;AACA;;AACE;;AACE;;AAAW;;AAAI;;AACf;;AACI;AAAA,mBAAmB,IAAAC,YAAA,cAAnB;AAA6C,WAA7C;;AACF;;AAAiC;;AAAY;;AAC7C;;AAAmC;;AAAc;;AACjD;;AAAuC;;AAAkB;;AACzD;;AAAqC;;AAAgB;;AACvD;;AACF;;AACF;;AACA;;AACE;;AACE;;AAAmC;AAAA;AAAA,aAAkB,OAAlB,EAAkB;AAAA,mBAC1C,IAAAV,YAAA,uBAAa,CAAb,CAD0C;AACR,WADV,EAAkB,MAAlB,EAAkB;AAAA,mBAE3C,IAAAS,MAAA,EAF2C;AAEnC,WAFiB;;AAAnC;;AAGF;;AACA;;AACE;;AAAqB;AAAA;AAAA,aAAuB,mBAAvB,EAAuB;AAAA,mBACnB,IAAAE,aAAA,EADmB;AACJ,WADnB;;AAArB;;AAIF;;AACF;;AACF;;;;AA9ByC;;AAAA;;AAQvB;;AAAA;;AAWuB;;AAAA;;AAQ/B;;AAAA;;AAHiB,6FAAuB,YAAvB,EAAuB,MAAvB;;;;;;;;;sEDhBdV,2B,EAA2B;cALvC,uDAKuC;eAL7B;AACTlO,kBAAQ,EAAE,sBADD;AAETC,qBAAW,EAAE,uCAFJ;AAGTC,mBAAS,EAAE,CAAC,uCAAD;AAHF,S;AAK6B,Q;;;;kBAyCnC,oD;mBAAO,+E;;;;;gBArCT;;;;;;;;;;;;;;;;;;;;AEfH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;QAaa2O,qB;;;AAWX,uCAAc;AAAA;;AAFN,aAAA9N,KAAA,GAAwB,EAAxB;AAGP;;;;0CAEiB;AAAA;;AAChB,eAAK+N,IAAL,GAAY,KAAKC,UAAL,CAAgBrL,aAA5B;AACA,eAAKsL,IAAL,GAAY,KAAKD,UAAL,CAAgBrL,aAAhB,CAA8BuE,UAA9B,CAAyC,IAAzC,CAAZ;AACA,eAAKlH,KAAL,CAAWa,IAAX,CAAgB,KAAKyC,gBAAL,CAAsB4K,WAAtB,CAAkCnM,SAAlC,CAA4C,YAAM;AAChE,mBAAI,CAACoM,WAAL;AACD,WAFe,CAAhB;AAGA,eAAKnO,KAAL,CAAWa,IAAX,CAAgB,KAAKQ,OAAL,CAAa0K,UAAb,CAAwBqC,IAAxB,CACd,oEAAa,EAAb,EAAiBxF,SAAjB,EAA4B;AAACyF,oBAAQ,EAAE;AAAX,WAA5B,CADc,EAEdtM,SAFc,CAEJ,YAAM;AAAE,mBAAI,CAACoM,WAAL;AAAoB,WAFxB,CAAhB;AAGA,eAAKA,WAAL;AACD;;;sCAEa;AACZ,eAAKnO,KAAL,CAAWsB,OAAX,CAAmB,UAAAC,GAAG;AAAA,mBAAIA,GAAG,CAACC,WAAJ,EAAJ;AAAA,WAAtB;AACD;;;sCAEqB;AACpB,cAAM3C,OAAO,GAAG,KAAKwC,OAAL,CAAaxC,OAA7B;AACA,eAAKkP,IAAL,CAAUrH,KAAV,GAAkBF,IAAI,CAAC8H,GAAL,CAASzP,OAAO,CAACyI,CAAjB,CAAlB;AACA,eAAKyG,IAAL,CAAUpH,MAAV,GAAmBH,IAAI,CAAC8H,GAAL,CAASzP,OAAO,CAAC0I,CAAjB,CAAnB;AACA,eAAKC,MAAL,CAAY,KAAKyG,IAAjB;AACD;;;+BAEahH,G,EAA+B;AAC3C,cAAMpI,OAAO,GAAG,KAAKwC,OAAL,CAAaxC,OAA7B;AACA,cAAIgH,CAAC,GAAG,CAAR;AAAA,cAAWE,CAAC,GAAG,CAAf;AACAkB,aAAG,CAACQ,IAAJ;;AACA,cAAI,KAAKpG,OAAL,CAAawK,OAAjB,EAA0B;AACxBhG,aAAC,GAAG,CAAChH,OAAO,CAACyI,CAAb;AACAL,eAAG,CAACtB,KAAJ,CAAU,CAAC,CAAX,EAAc,CAAd;AACD;;AACD,cAAI,KAAKtE,OAAL,CAAayK,OAAjB,EAA0B;AACxB/F,aAAC,GAAG,CAAClH,OAAO,CAAC0I,CAAb;AACAN,eAAG,CAACtB,KAAJ,CAAU,CAAV,EAAa,CAAC,CAAd;AACD;;AACDsB,aAAG,CAACY,SAAJ,CAAc,KAAKxG,OAAL,CAAakN,GAA3B,EACI,CADJ,EACO,CADP,EACU,KAAKlN,OAAL,CAAakN,GAAb,CAAiB7H,KAD3B,EACkC,KAAKrF,OAAL,CAAakN,GAAb,CAAiB5H,MADnD,EAEId,CAFJ,EAEOE,CAFP,EAEUlH,OAAO,CAACyI,CAFlB,EAEqBzI,OAAO,CAAC0I,CAF7B;AAGA,cAAM6C,MAAM,GAAG,KAAK/I,OAAL,CAAa+I,MAA5B;AACAA,gBAAM,IAAIA,MAAM,CAACoE,KAAP,CAAavH,GAAb,CAAV;AACAA,aAAG,CAACa,OAAJ;AACD;;;;;;;uBAvDUgG,qB;AAAqB,K;;;YAArBA,qB;AAAqB,oC;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;ACblC;;AACE;;AACF;;;;AAFkB;;;;;;;;;sEDaLA,qB,EAAqB;cALjC,uDAKiC;eALvB;AACT7O,kBAAQ,EAAE,eADD;AAETC,qBAAW,EAAE,gCAFJ;AAGTuP,yBAAe,EAAE,sEAAwBC;AAHhC,S;AAKuB,Q;;;;gBAE/B,uD;iBAAU,Q;;;gBACV,uD;iBAAU,S;;;gBAIV;;;;;;;;;;;;;;;;;;;;AEpBH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;ACEI;;AACE;;AACE;AAAA;;AAAA;;AAAA;AAAA;;AACmC;;AACrC;;AACE;AAAA;;AAAA;;AAAA;AAAA;;AACmC;;AACrC;;AACE;AAAA;;AAAA;;AAAA;AAAA;;AACmC;;AACrC;;AACE;AAAA;;AAAA;;AAAA;AAAA;;AACmC;;AACrC;;AACA;;AACA;;AACA;;AACA;;AACE;;AACE;AAAA;;AAAA;;AAAA;AAAA;;AAAkC;;AACtC;;AAKF;;;;;;AAzBoB;;AAGhB;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AACoB;;AAAA;;AACE;;AAAA;;AACC;;AAAA;;AACF;;AAAA;;AACE;;AAAA;;;;;;QDFlBC,gB;;;AAmCX,gCACkBhL,gBADlB,EAEmBiL,SAFnB,EAGmBhP,uBAHnB,EAI4CE,eAJ5C,EAI8E;AAAA;;AAH5D,aAAA6D,gBAAA,GAAAA,gBAAA;AACC,aAAAiL,SAAA,GAAAA,SAAA;AACA,aAAAhP,uBAAA,GAAAA,uBAAA;AACyB,aAAAE,eAAA,GAAAA,eAAA;AArC5B,aAAAoO,WAAA,GAAc,IAAI,0DAAJ,EAAd;AAGP,aAAAW,OAAA,GAAmB,KAAnB;AAOD,aAAA7O,KAAA,GAAwB,EAAxB;AAED,aAAA8O,SAAA,GAAY,IAAI,yDAAJ,EAAZ;AACA,aAAAC,OAAA,GAAU,IAAI,yDAAJ,EAAV;AACA,aAAAC,OAAA,GAAU,IAAI,yDAAJ,EAAV;AACA,aAAAC,OAAA,GAAU,IAAI,yDAAJ,EAAV;AACA,aAAAC,OAAA,GAAU,IAAI,yDAAJ,EAAV;AACA,aAAAC,OAAA,GAAU,IAAI,yDAAJ,EAAV;AACA,aAAAC,OAAA,GAAU,IAAI,yDAAJ,EAAV;AACA,aAAAC,OAAA,GAAU,IAAI,yDAAJ,EAAV;AASS,aAAAC,cAAA,GAAiB,KAAKC,YAAL,CAAkB3O,IAAlB,CAAuB,IAAvB,EAA6B,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAA7B,CAAjB;AACA,aAAA4O,cAAA,GAAiB,KAAKD,YAAL,CAAkB3O,IAAlB,CAAuB,IAAvB,EAA6B,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAA7B,CAAjB;AACA,aAAA6O,cAAA,GAAiB,KAAKF,YAAL,CAAkB3O,IAAlB,CAAuB,IAAvB,EAA6B,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAA7B,CAAjB;AACA,aAAA8O,cAAA,GAAiB,KAAKH,YAAL,CAAkB3O,IAAlB,CAAuB,IAAvB,EAA6B,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAA7B,CAAjB;AAOd,aAAK+O,eAAL,GAAuB,KAAKA,eAAL,CAAqB/O,IAArB,CAA0B,IAA1B,CAAvB;AACA,aAAKgP,YAAL,GAAoB,KAAKA,YAAL,CAAkBhP,IAAlB,CAAuB,IAAvB,CAApB;AACD;;;;mCAEU;AAAA;;AACT,eAAKiP,MAAL;AACA,eAAK7P,KAAL,CAAWa,IAAX,CAAgB,KAAKhC,OAAL,CAAamO,WAAb,CAAyBoB,IAAzB,CACd,oEAAa,EAAb,EAAiBxF,SAAjB,EAA4B;AAACyF,oBAAQ,EAAE;AAAX,WAA5B,CADc,EACiCtM,SADjC,CAC2C,YAAM;AAC/D,mBAAI,CAAC8N,MAAL;AACD,WAHe,CAAhB;AAIA,eAAK7P,KAAL,CAAWa,IAAX,CAAgB,KAAKjB,uBAAL,CAA6Bc,eAA7B,CAA6CR,iBAA7C,CAA+DkO,IAA/D,CACd,oEAAa,EAAb,EAAiBxF,SAAjB,EAA4B;AAACyF,oBAAQ,EAAE;AAAX,WAA5B,CADc,EACiCtM,SADjC,CAC2C,YAAM;AAC/D,mBAAI,CAAC8N,MAAL;AACD,WAHe,CAAhB;AAID;;;sCAEa;AACZ,eAAK7P,KAAL,CAAWsB,OAAX,CAAmB,UAAAC,GAAG;AAAA,mBAAIA,GAAG,CAACC,WAAJ,EAAJ;AAAA,WAAtB;AACD;;;0CAEyB;AACxB,eAAKsO,eAAL,GAAuB,0DAAKC,QAAL,CAAc,KAAKlR,OAAL,CAAa+I,GAA3B,CAAvB;AACA,eAAKoI,gBAAL,GAAwB,0DAAKD,QAAL,CAAc,CAAC,CAAD,GAAK,KAAKlR,OAAL,CAAa+I,GAAhC,CAAxB;AACD;;;iCAEgB;AACf,cAAI,CAAC,KAAKiH,OAAV,EAAmB;AACjB,iBAAKX,WAAL,CAAiB1K,IAAjB;AACA,iBAAKoL,SAAL,CAAeqB,YAAf;AACA;AACD;;AACD,cAAMnR,MAAM,GAAG,KAAKc,uBAAL,CAA6Bc,eAA5C;AACA,cAAMwP,IAAI,GAAGpR,MAAM,CAAC0G,UAApB;AAPe,sBAQA,CAAC,KAAK3G,OAAL,CAAayI,CAAd,EAAiB,KAAKzI,OAAL,CAAa0I,CAA9B,CARA;AAAA,cAQRD,CARQ;AAAA,cAQLC,CARK;AASf,cAAMpB,MAAM,GAAG,IAAI,yDAAJ,CAAS,CAAC,KAAKtH,OAAL,CAAagH,CAAd,EAAiB,KAAKhH,OAAL,CAAakH,CAA9B,CAAT,CAAf;AACA,cAAMoK,OAAO,GAAG,IAAI,yDAAJ,CAAS,CAACD,IAAD,EAAOA,IAAP,CAAT,CAAhB;AACA,cAAMxI,SAAS,GAAG,IAAI,yDAAJ,CAAS,CAAC5I,MAAM,CAAC8G,OAAR,EAAiB9G,MAAM,CAACgH,OAAxB,CAAT,CAAlB;AACAK,gBAAM,CAACiK,QAAP,CAAgBD,OAAhB;AACA,eAAKrB,SAAL,CAAeuB,EAAf,GAAoB,CAAClK,MAAM,CAACN,CAAR,EAAWM,MAAM,CAACJ,CAAlB,CAApB;AACA,eAAK+I,SAAL,CAAewB,GAAf,CAAmB5I,SAAnB;AACA,eAAKqH,OAAL,GAAe,IAAI,yDAAJ,CAAS,CAAC,KAAKlQ,OAAL,CAAayI,CAAd,EAAiB,KAAKzI,OAAL,CAAa0I,CAA9B,CAAT,CAAf;AACA,eAAKwH,OAAL,CAAaqB,QAAb,CAAsBD,OAAtB,EAhBe,CAiBf;;AACD,WAAC,CAAC,KAAKnB,OAAN,EACE,IAAI,yDAAJ,CAAS,CAAC,CAAC1H,CAAD,GAAK,CAAN,EAAS,CAACC,CAAD,GAAK,CAAd,CAAT,CADF,CAAD,EAEC,CAAC,KAAK0H,OAAN,EACE,IAAI,yDAAJ,CAAS,CAAC3H,CAAC,GAAG,CAAL,EAAQ,CAACC,CAAD,GAAK,CAAb,CAAT,CADF,CAFD,EAIC,CAAC,KAAK2H,OAAN,EACA,IAAI,yDAAJ,CAAS,CAAC,CAAC5H,CAAD,GAAK,CAAN,EAASC,CAAC,GAAG,CAAb,CAAT,CADA,CAJD,EAMC,CAAC,KAAK4H,OAAN,EACA,IAAI,yDAAJ,CAAS,CAAC7H,CAAC,GAAG,CAAL,EAAQC,CAAC,GAAG,CAAZ,CAAT,CADA,CAND,EAQC,CAAC,KAAK6H,OAAN,EACA,IAAI,yDAAJ,CAAS,CAAC,CAAD,EAAI7H,CAAC,GAAG,CAAR,CAAT,CADA,CARD,EAUC,CAAC,KAAK8H,OAAN,EACA,IAAI,yDAAJ,CAAS,CAAC,CAAD,EAAI9H,CAAC,GAAG,CAAJ,GAAQ,EAAZ,CAAT,CADA,CAVD,EAW6BjG,OAX7B,CAWqC,UAAAiP,KAAK,EAAI;AAC3C,gBAAMC,EAAE,GAAGD,KAAK,CAAC,CAAD,CAAhB;AACAC,cAAE,CAACJ,QAAH,CAAY,IAAI,yDAAJ,CAAS,CAACF,IAAD,EAAOA,IAAP,CAAT,CAAZ,EAF2C,CAG3C;AACA;AACA;;AACAK,iBAAK,CAAC,CAAD,CAAL,CAASF,EAAT,GAAcG,EAAE,CAACH,EAAjB;AACD,WAlBF;AAmBC,eAAKnC,WAAL,CAAiB1K,IAAjB;AACA,eAAKoL,SAAL,CAAeqB,YAAf;AACD;;;uCAEqB9R,C,EAA0C;AAAA;;AAAA,cAA3BsS,QAA2B,uEAAP,KAAO;AAC9D,cAAItS,CAAC,CAAC0F,MAAF,IAAY,CAAhB,EAAmB;AACnB,cAAI4M,QAAJ,EAActS,CAAC,CAACuS,eAAF;AACd,cAAM7R,OAAO,GAAG,KAAKA,OAArB;AACA,eAAK8R,iBAAL,GAAyB,IAAI,yDAAJ,CAAS,CAACxS,CAAC,CAACuG,OAAH,EAAYvG,CAAC,CAACwG,OAAd,CAAT,CAAzB;AACA,eAAKiM,gBAAL,GAAwB,IAAI,yDAAJ,CAAS,CAC/B/R,OAAO,CAACgH,CADuB,EACpBhH,OAAO,CAACkH,CADY,EACTlH,OAAO,CAACyI,CADC,EACEzI,OAAO,CAAC0I,CADV,CAAT,CAAxB;AAEA3C,gBAAM,CAAChC,gBAAP,CAAwB,WAAxB,EAAqC,KAAK+M,eAA1C;;AACA,cAAM9K,OAAO,GAAG,SAAVA,OAAU,GAAM;AACpB,mBAAI,CAAC/E,eAAL,CAAqBsB,QAArB,CACE,IAAI,iFAAJ,EADF;;AAEAwD,kBAAM,CAACE,mBAAP,CAA2B,WAA3B,EAAwC,OAAI,CAAC6K,eAA7C;AACA/K,kBAAM,CAACE,mBAAP,CAA2B,SAA3B,EAAsCD,OAAtC;AACD,WALD;;AAMAD,gBAAM,CAAChC,gBAAP,CAAwB,SAAxB,EAAmCiC,OAAnC;AACD;;;wCAEuB1G,C,EAAe;AACrC,cAAMU,OAAO,GAAG,KAAKA,OAArB;AACA,cAAMgS,oBAAoB,GAAG,IAAI,yDAAJ,CAAS,CAAC1S,CAAC,CAACuG,OAAH,EAAYvG,CAAC,CAACwG,OAAd,CAAT,CAA7B;AACA,cAAMmM,EAAE,GAAGD,oBAAoB,CAAC5K,QAArB,CAA8B,KAAK0K,iBAAnC,CAAX;AACA,cAAMT,IAAI,GAAG,IAAI,KAAKtQ,uBAAL,CAA6Bc,eAA7B,CAA6C8E,UAA9D;AACAsL,YAAE,CAACV,QAAH,CAAY,IAAI,yDAAJ,CAAS,CAACF,IAAD,EAAOA,IAAP,CAAT,CAAZ;AACA,cAAMa,EAAE,GAAG,KAAKH,gBAAL,CAAsB/K,CAAtB,GAA0BiL,EAAE,CAACjL,CAAxC;AACA,cAAMmL,EAAE,GAAG,KAAKJ,gBAAL,CAAsB7K,CAAtB,GAA0B+K,EAAE,CAAC/K,CAAxC;AAEA,cAAMkL,OAAO,GAAG,IAAI,6EAAJ,CAA4BpS,OAA5B,EAAqCkS,EAArC,EAAyCC,EAAzC,CAAhB;AACA,eAAKlR,eAAL,CAAqBsB,QAArB,CAA8B6P,OAA9B;AACD;;;oCAEkB9S,C,EAAe+S,U,EAAiB;AAAA;;AACjD,cAAI/S,CAAC,CAAC0F,MAAF,IAAY,CAAhB,EAAmB;AACnB1F,WAAC,CAACuS,eAAF;AACA,cAAM7R,OAAO,GAAG,KAAKA,OAArB;AACA,eAAK8R,iBAAL,GAAyB,IAAI,yDAAJ,CAAS,CAACxS,CAAC,CAACuG,OAAH,EAAYvG,CAAC,CAACwG,OAAd,CAAT,CAAzB;AACA,eAAKiM,gBAAL,GAAwB,IAAI,yDAAJ,CAAS,CAC/B/R,OAAO,CAACgH,CADuB,EACpBhH,OAAO,CAACkH,CADY,EACTlH,OAAO,CAACyI,CADC,EACEzI,OAAO,CAAC0I,CADV,CAAT,CAAxB;AAEA,eAAK4J,iBAAL,GAAyBtS,OAAO,CAACmM,CAAjC;AACA,eAAKoG,eAAL;AACAxM,gBAAM,CAAChC,gBAAP,CAAwB,WAAxB,EAAqCsO,UAArC;;AACA,cAAMrM,OAAO,GAAG,SAAVA,OAAU,GAAM;AACpB,mBAAI,CAAC/E,eAAL,CAAqBsB,QAArB,CACE,IAAI,iFAAJ,EADF;;AAEAwD,kBAAM,CAACE,mBAAP,CAA2B,WAA3B,EAAwCoM,UAAxC;AACAtM,kBAAM,CAACE,mBAAP,CAA2B,SAA3B,EAAsCD,OAAtC;AACD,WALD;;AAMAD,gBAAM,CAAChC,gBAAP,CAAwB,SAAxB,EAAmCiC,OAAnC;AACD;;;qCAGGwM,U,EACAlT,C,EAAe;AACjBA,WAAC,CAACuS,eAAF;AACA,cAAM7R,OAAO,GAAG,KAAKA,OAArB;AACA,cAAMwK,GAAG,GAAG,KAAKuH,gBAAjB;AACA,cAAMC,oBAAoB,GAAG,IAAI,yDAAJ,CAAS,CAAC1S,CAAC,CAACuG,OAAH,EAAYvG,CAAC,CAACwG,OAAd,CAAT,CAA7B;AACA,cAAMmM,EAAE,GAAGD,oBAAoB,CAAC5K,QAArB,CAA8B,KAAK0K,iBAAnC,CAAX;AACA,cAAMW,QAAQ,GAAG,IAAI,yDAAJ,CAAS,CAACR,EAAE,CAACjL,CAAJ,EAAOiL,EAAE,CAAC/K,CAAV,CAAT,CAAjB;AACAuL,kBAAQ,CAACC,YAAT,CAAsB,KAAKvB,gBAA3B;AACA,cAAME,IAAI,GAAG,IAAI,KAAKtQ,uBAAL,CAA6Bc,eAA7B,CAA6C8E,UAA9D;AACA8L,kBAAQ,CAAClB,QAAT,CAAkB,IAAI,yDAAJ,CAAS,CAACF,IAAD,EAAOA,IAAP,CAAT,CAAlB;;AAEA,cAAIrR,OAAO,CAAC2S,MAAZ,EAAoB;AAClB,gBAAMC,UAAU,GAAG,IAAI,yDAAJ,CAAS,CAC1B,CAACpI,GAAG,CAACqI,CAAL,GAASL,UAAU,CAAC,CAAD,CAAnB,GAAyBhI,GAAG,CAACqI,CAAJ,GAAQL,UAAU,CAAC,CAAD,CADjB,EAE1B,CAAChI,GAAG,CAAC/B,CAAL,GAAS+J,UAAU,CAAC,CAAD,CAAnB,GAAyBhI,GAAG,CAAC/B,CAAJ,GAAQ+J,UAAU,CAAC,CAAD,CAFjB,CAAT,EAEgCM,SAFhC,EAAnB;AAGAF,sBAAU,CAAC9L,KAAX,CAAiB,0DAAKiM,GAAL,CAASH,UAAT,EAAqBH,QAArB,CAAjB,EAAiDA,QAAjD;AACD;;AAED,cAAMO,UAAU,GAAG,IAAI,yDAAJ,CAAS,CAC1B,CAAExI,GAAG,CAACqI,CAAN,GAAU,CAAV,GAAcJ,QAAQ,CAACzL,CAAT,GAAawL,UAAU,CAAC,CAAD,CADX,EAE1B,CAAEhI,GAAG,CAAC/B,CAAN,GAAU,CAAV,GAAcgK,QAAQ,CAACvL,CAAT,GAAasL,UAAU,CAAC,CAAD,CAFX,CAAT,CAAnB;AAGA,cAAMS,UAAU,GAAG,IAAI,yDAAJ,CAAS,CAC1BzI,GAAG,CAACqI,CAAJ,GAAQ,CAAR,GAAYJ,QAAQ,CAACzL,CAAT,GAAawL,UAAU,CAAC,CAAD,CADT,EAE1BhI,GAAG,CAAC/B,CAAJ,GAAQ,CAAR,GAAYgK,QAAQ,CAACvL,CAAT,GAAasL,UAAU,CAAC,CAAD,CAFT,CAAT,CAAnB;AAGA,cAAMU,cAAc,GAAIF,UAAU,CAACtL,IAAX,EAAxB;AACAwL,wBAAc,CAACzB,GAAf,CAAmBwB,UAAnB,EAA+B1B,QAA/B,CAAwC,IAAI,yDAAJ,CAAS,CAAC,GAAD,EAAM,GAAN,CAAT,CAAxC;AACA,cAAM4B,SAAS,GAAGD,cAAc,CAACxL,IAAf,EAAlB;AACAyL,mBAAS,CAACT,YAAV,CAAuB,KAAKzB,eAA5B;AACAkC,mBAAS,CAAC1B,GAAV,CAAc,IAAI,yDAAJ,CAAS,CAACjH,GAAG,CAACxD,CAAL,EAAQwD,GAAG,CAACtD,CAAZ,CAAT,CAAd;AACA,cAAMkM,KAAK,GAAGJ,UAAU,CAACtL,IAAX,EAAd;AACA,cAAM2L,KAAK,GAAGJ,UAAU,CAACvL,IAAX,EAAd;AACA0L,eAAK,CAACV,YAAN,CAAmB,KAAKzB,eAAxB,EAAyCQ,GAAzC,CAA6C0B,SAA7C;AACAE,eAAK,CAACX,YAAN,CAAmB,KAAKzB,eAAxB,EAAyCQ,GAAzC,CAA6C0B,SAA7C;AACA,cAAMG,OAAO,GAAGL,UAAU,CAAC7L,QAAX,CAAoB4L,UAApB,CAAhB;AAEA,cAAMd,EAAE,GAAGiB,SAAS,CAACnM,CAArB;AACA,cAAMmL,EAAE,GAAGgB,SAAS,CAACjM,CAArB;AACA,cAAMqM,EAAE,GAAG5L,IAAI,CAAC8H,GAAL,CAAS6D,OAAO,CAACtM,CAAjB,CAAX;AACA,cAAMwM,EAAE,GAAG7L,IAAI,CAAC8H,GAAL,CAAS6D,OAAO,CAACpM,CAAjB,CAAX;AACA,cAAMuM,EAAE,GAAIH,OAAO,CAACtM,CAAR,IAAa,CAAb,IAAkBsM,OAAO,CAACpM,CAAR,IAAa,CAAhC,GACT,KAAKoL,iBADI,GAET,CAAC,KAAKA,iBAAL,GAAyB,GAAzB,GAA+B,GAAhC,IAAuC,GAFzC;AAIA,eAAKrR,eAAL,CAAqBsB,QAArB,CACI,IAAI,6EAAJ,CAA4BvC,OAA5B,EAAqCkS,EAArC,EAAyCC,EAAzC,CADJ;AAEA,eAAKlR,eAAL,CAAqBsB,QAArB,CACI,IAAI,0EAAJ,CAAyBvC,OAAzB,EAAkCuT,EAAlC,EAAsCC,EAAtC,CADJ;AAEA,eAAKvS,eAAL,CAAqBsB,QAArB,CACI,IAAI,0EAAJ,CAAyBvC,OAAzB,EAAkCyT,EAAlC,CADJ;AAED;;;oCAEWnU,C,EAAe;AAAA;;AACzB,cAAIA,CAAC,CAAC0F,MAAF,IAAY,CAAhB,EAAmB;AACnB1F,WAAC,CAACuS,eAAF;AACA,cAAM7R,OAAO,GAAG,KAAKA,OAArB;AACA,eAAK8R,iBAAL,GAAyB,IAAI,yDAAJ,CAAS,CAACxS,CAAC,CAAC6G,KAAH,EAAU7G,CAAC,CAAC8G,KAAZ,CAAT,CAAzB;AACA,eAAK2L,gBAAL,GAAwB,IAAI,yDAAJ,CAAS,CAC/B/R,OAAO,CAACgH,CADuB,EACpBhH,OAAO,CAACkH,CADY,EACTlH,OAAO,CAACyI,CADC,EACEzI,OAAO,CAAC0I,CADV,CAAT,CAAxB;AAEA,eAAK4J,iBAAL,GAAyBtS,OAAO,CAACmM,CAAjC;AACA,eAAKoG,eAAL;AACAxM,gBAAM,CAAChC,gBAAP,CAAwB,WAAxB,EAAqC,KAAKgN,YAA1C;;AACA,cAAM/K,OAAO,GAAG,SAAVA,OAAU,GAAM;AACpB,mBAAI,CAAC/E,eAAL,CAAqBsB,QAArB,CACE,IAAI,iFAAJ,EADF;;AAEAwD,kBAAM,CAACE,mBAAP,CAA2B,WAA3B,EAAwC,OAAI,CAAC8K,YAA7C;AACAhL,kBAAM,CAACE,mBAAP,CAA2B,SAA3B,EAAsCD,OAAtC;AACD,WALD;;AAMAD,gBAAM,CAAChC,gBAAP,CAAwB,SAAxB,EAAmCiC,OAAnC;AACD;;;qCAEoB1G,C,EAAe;AAClCA,WAAC,CAACuS,eAAF;AACA,cAAM7R,OAAO,GAAG,KAAKA,OAArB;AACA,cAAMgS,oBAAoB,GAAG,IAAI,yDAAJ,CAAS,CAAC1S,CAAC,CAAC6G,KAAH,EAAU7G,CAAC,CAAC8G,KAAZ,CAAT,CAA7B;AACA,cAAM6L,EAAE,GAAG,KAAKlR,uBAAL,CACPc,eADO,CACS6R,sBADT,CACgC1B,oBADhC,CAAX;AAEAC,YAAE,CAAC7K,QAAH,CAAY,KAAK6I,SAAjB;AACA,cAAMlH,GAAG,GAAGpB,IAAI,CAACgM,KAAL,CAAW1B,EAAE,CAAC/K,CAAd,EAAiB+K,EAAE,CAACjL,CAApB,CAAZ;AACA,cAAM4M,GAAG,GAAG,CAAE7K,GAAG,GAAGpB,IAAI,CAACkM,EAAX,GAAgB,GAAhB,GAAsB,EAAvB,GAA6B,GAA9B,IAAqC,GAAjD;AAEA,eAAK5S,eAAL,CAAqBsB,QAArB,CACI,IAAI,0EAAJ,CAAyBvC,OAAzB,EAAkC4T,GAAlC,CADJ;AAED;;;gCAEc;AACb,eAAK5D,OAAL,GAAe,IAAf;AACA,eAAKgB,MAAL;AACA,eAAKjB,SAAL,CAAeqB,YAAf;AACD;;;+BAEa;AACZ,eAAKpB,OAAL,GAAe,KAAf;AACA,eAAKgB,MAAL;AACA,eAAKjB,SAAL,CAAeqB,YAAf;AACD;;;yCAEuB;AACtB,iBAAO;AACL,uBAAW,KAAKpR,OAAL,CAAa6S,CADnB;AAEL9K,qBAAS,iCACM,KAAK/H,OAAL,CAAagH,CADnB,qCAEM,KAAKhH,OAAL,CAAakH,CAFnB;AAFJ,WAAP;AAMD;;;8CAE4B;AAC3B,iBAAO;AACLa,qBAAS,iCACM,KAAKkI,SAAL,CAAejJ,CADrB,qCAEM,KAAKiJ,SAAL,CAAe/I,CAFrB,iCAGE,KAAKlH,OAAL,CAAamM,CAHf;AADJ,WAAP;AAMD;;;+CAE6B;AAC5B,iBAAO;AACLtE,iBAAK,YAAK,KAAKqI,OAAL,CAAalJ,CAAlB,OADA;AAELc,kBAAM,YAAK,KAAKoI,OAAL,CAAahJ,CAAlB,OAFD;AAGLa,qBAAS,iCACM,CAAC,KAAKmI,OAAL,CAAalJ,CAAd,GAAkB,CADxB,qCAEM,CAAC,KAAKkJ,OAAL,CAAahJ,CAAd,GAAkB,CAFxB;AAHJ,WAAP;AAOD;;;sCAEoB;AACnB,iBAAO;AACLW,iBAAK,YAAKF,IAAI,CAAC8H,GAAL,CAAS,KAAKzP,OAAL,CAAayI,CAAtB,CAAL,OADA;AAELX,kBAAM,YAAKH,IAAI,CAAC8H,GAAL,CAAS,KAAKzP,OAAL,CAAa0I,CAAtB,CAAL,OAFD;AAGLX,qBAAS,iCACM,CAACJ,IAAI,CAAC8H,GAAL,CAAS,KAAKzP,OAAL,CAAayI,CAAtB,CAAD,GAA4B,CADlC,qCAEM,CAACd,IAAI,CAAC8H,GAAL,CAAS,KAAKzP,OAAL,CAAa0I,CAAtB,CAAD,GAA4B,CAFlC,iCAGE,KAAK1I,OAAL,CAAamM,CAHf;AAHJ,WAAP;AAQD;;;sCAEoB;AACnB,iBAAO;AACLpE,qBAAS,iCACM,KAAK/H,OAAL,CAAagH,CADnB,qCAEM,KAAKhH,OAAL,CAAakH,CAFnB;AADJ,WAAP;AAKD;;;sCAEoBwK,K,EAAa;AAChC,iBAAO;AACL3J,qBAAS,uBAAgB2J,KAAK,CAAC1K,CAAtB,4BAAyC0K,KAAK,CAACxK,CAA/C;AADJ,WAAP;AAGD;;;qCAEmB4M,I,EAAYC,E,EAAU;AACxC,cAAMrR,GAAG,GAAG,IAAI,yDAAJ,CAAS,CAACqR,EAAE,CAAC/M,CAAJ,EAAO+M,EAAE,CAAC7M,CAAV,CAAT,CAAZ;AACAxE,aAAG,CAAC0E,QAAJ,CAAa0M,IAAb;AACA,cAAME,KAAK,GAAGrM,IAAI,CAACgM,KAAL,CAAWjR,GAAG,CAACwE,CAAf,EAAkBxE,GAAG,CAACsE,CAAtB,IAA2BW,IAAI,CAACkM,EAAhC,GAAqC,GAAnD;AACA,iBAAO;AACLhM,iBAAK,YAAKnF,GAAG,CAACK,MAAJ,EAAL,OADA;AAELgF,qBAAS,uBAAgB+L,IAAI,CAAC9M,CAAL,GAAS,GAAzB,4BAA8C8M,IAAI,CAAC5M,CAAnD,wBAAkE8M,KAAlE;AAFJ,WAAP;AAID;;;4BAhTe;AAAE,iBAAO,KAAKhU,OAAL,CAAaJ,EAApB;AAAyB;;;;;;;uBAVhCkQ,gB,EAAgB,+H,EAAA,gI,EAAA,0K,EAAA,gEAuCjB,+EAvCiB,C;AAuCF,K;;;YAvCdA,gB;AAAgB,8B;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjB7B;;AACE;;AA4BA;;AACE;AAAA,mBAAa,IAAAmE,cAAA,QAAb;AAAmC,WAAnC;;AACA;;AACF;;AACF;;;;AAjCqB;;AA6BE;;AAAA;;;;;;;;;;sEDZVnE,gB,EAAgB;cAN5B,uDAM4B;eANlB;AACT1P,kBAAQ,EAAE,SADD;AAETC,qBAAW,EAAE,0BAFJ;AAGTC,mBAAS,EAAE,CAAC,wBAAD,CAHF;AAITsP,yBAAe,EAAE,sEAAwBC;AAJhC,S;AAMkB,Q;;;;;;;;;;kBAuCxB,oD;mBAAO,+E;;;;;gBAnCT;;;gBACA;;;gBAEA,uD;iBAAU,K;;;gBAEV,yD;iBAAY,iB;;;;;;;;;;;;;;;;;;;;AE1Bf;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;QAgBaqE,oB;;;AAWX,sCAAc;AAAA;;AAFN,aAAA/S,KAAA,GAAwB,EAAxB;AAGP;;;;0CAEiB;AAAA;;AAChB,eAAK+N,IAAL,GAAY,KAAKC,UAAL,CAAgBrL,aAA5B;AACA,eAAKsL,IAAL,GAAY,KAAKD,UAAL,CAAgBrL,aAAhB,CAA8BuE,UAA9B,CAAyC,IAAzC,CAAZ;AACA,eAAKlH,KAAL,CAAWa,IAAX,CAAgB,KAAKyC,gBAAL,CAAsB4K,WAAtB,CAAkCnM,SAAlC,CAA4C,YAAM;AAChE,mBAAI,CAACoM,WAAL;AACD,WAFe,CAAhB;AAGA,eAAKnO,KAAL,CAAWa,IAAX,CAAgB,KAAKQ,OAAL,CAAa0K,UAAb,CAAwBqC,IAAxB,CACd,oEAAa,EAAb,EAAiBxF,SAAjB,EAA4B;AAACyF,oBAAQ,EAAE;AAAX,WAA5B,CADc,EAEdtM,SAFc,CAEJ,YAAM;AAAE,mBAAI,CAACoM,WAAL;AAAoB,WAFxB,CAAhB;AAGA,eAAKnO,KAAL,CAAWa,IAAX,CAAgB,KAAKQ,OAAL,CAAaoM,eAAb,CAA6BW,IAA7B,CACd,oEAAa,EAAb,EAAiBxF,SAAjB,EAA4B;AAACyF,oBAAQ,EAAE;AAAX,WAA5B,CADc,EAEdtM,SAFc,CAEJ,YAAM;AAAE,mBAAI,CAACoM,WAAL;AAAoB,WAFxB,CAAhB;AAGA,eAAKA,WAAL;AACD;;;sCAEa;AACZ,eAAKnO,KAAL,CAAWsB,OAAX,CAAmB,UAAAC,GAAG;AAAA,mBAAIA,GAAG,CAACC,WAAJ,EAAJ;AAAA,WAAtB;AACD;;;sCAEqB;AACpB,cAAM3C,OAAO,GAAG,KAAKwC,OAAL,CAAaxC,OAA7B;AACA,eAAKkP,IAAL,CAAUrH,KAAV,GAAkBF,IAAI,CAAC8H,GAAL,CAASzP,OAAO,CAACyI,CAAjB,CAAlB;AACA,eAAKyG,IAAL,CAAUpH,MAAV,GAAmBH,IAAI,CAAC8H,GAAL,CAASzP,OAAO,CAAC0I,CAAjB,CAAnB;AACA,eAAKC,MAAL,CAAY,KAAKyG,IAAjB;AACD;;;+BAEahH,G,EAA+B;AAC3C,cAAM5F,OAAO,GAAG,KAAKA,OAArB;AACA,cAAMxC,OAAO,GAAG,KAAKwC,OAAL,CAAaxC,OAA7B;AACAoI,aAAG,CAACqG,IAAJ,aAAc9G,IAAI,CAAC8H,GAAL,CAASjN,OAAO,CAACgM,IAAjB,CAAd,gBAA0ChM,OAAO,CAACiM,IAAlD;AACArG,aAAG,CAACG,SAAJ,GAAgB,KAAK/F,OAAL,CAAamM,KAA7B;AACAvG,aAAG,CAAC+L,YAAJ,GAAmB,QAAnB;AACA/L,aAAG,CAACgM,QAAJ,CAAa5R,OAAO,CAAC+L,IAArB,EAA2B,CAA3B,EAA8BvO,OAAO,CAAC0I,CAAR,GAAY,CAA1C;AACA,cAAM6C,MAAM,GAAG,KAAK/I,OAAL,CAAa+I,MAA5B;AACAA,gBAAM,IAAIA,MAAM,CAACoE,KAAP,CAAavH,GAAb,CAAV;AACD;;;;;;;uBAjDU8L,oB;AAAoB,K;;;YAApBA,oB;AAAoB,mC;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;AAL7B;;AACE;;AACF;;;;AAFkB;;;;;;;;;sEAKTA,oB,EAAoB;cARhC,uDAQgC;eARtB;AACT9T,kBAAQ,EAAE,cADD;AAETiU,kBAAQ,2GAFC;AAMTzE,yBAAe,EAAE,sEAAwBC;AANhC,S;AAQsB,Q;;;;gBAE9B,uD;iBAAU,Q;;;gBACV,uD;iBAAU,S;;;gBAIV;;;;;;;;;;;;;;;;;;;;ACrBH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAGsByE,a;;;;QAKTC,4B;;;;;;;;;;;;;;;kCACG;AACZ,eAAKtU,MAAL,CAAYkC,SAAZ,CAAsBqS,gBAAtB;AACA,iBAAO,IAAP;AACD;;;;MAJ+CF,a;;QAOrCG,uB;;;AACX,uCAA4BxU,MAA5B,EACkBuC,OADlB,EACoDW,KADpD,EACoE;AAAA;;AADxC,aAAAlD,MAAA,GAAAA,MAAA;AACV,aAAAuC,OAAA,GAAAA,OAAA;AAAkC,aAAAW,KAAA,GAAAA,KAAA;AAAkB;;;;kCAExD;AACZ,eAAKlD,MAAL,CAAYyU,UAAZ,CAAuB,KAAKlS,OAA5B;AACA,iBAAO,IAAImS,0BAAJ,CAA+B,KAAK1U,MAApC,EAA4C,KAAKuC,OAAjD,CAAP;AACD;;;;;;QAIUoS,mB;;;AACX,mCAA4B3U,MAA5B,EACkBwI,CADlB,EAC6CC,CAD7C,EACwD;AAAA;;AAD5B,aAAAzI,MAAA,GAAAA,MAAA;AACV,aAAAwI,CAAA,GAAAA,CAAA;AAA2B,aAAAC,CAAA,GAAAA,CAAA;AAAa;;;;kCAE5C;AACZ,cAAMzI,MAAM,GAAG,KAAKA,MAApB;AACA,cAAM4U,OAAO,GAAG,IAAID,mBAAJ,CACd3U,MADc,EACNA,MAAM,CAAC4H,KADD,EACQ5H,MAAM,CAAC6H,MADf,CAAhB;AAEA7H,gBAAM,CAAC4H,KAAP,GAAe,KAAKY,CAApB;AACAxI,gBAAM,CAAC6H,MAAP,GAAgB,KAAKY,CAArB;AACA,iBAAOmM,OAAP;AACD;;;;;;QAIUF,0B;;;AACX,0CAA4B1U,MAA5B,EACkBuC,OADlB,EACoC;AAAA;;AADR,aAAAvC,MAAA,GAAAA,MAAA;AACV,aAAAuC,OAAA,GAAAA,OAAA;AAAoB;;;;kCAExB;AACZ,cAAI,CAAC,KAAKvC,MAAL,CAAY6U,UAAZ,CAAuB,KAAKtS,OAA5B,CAAL,EAA2C;AAC3C,cAAMW,KAAK,GAAG,KAAKlD,MAAL,CAAYuN,eAAZ,CAA4B,KAAKhL,OAAjC,CAAd;AACA,cAAMqS,OAAO,GAAG,IAAIJ,uBAAJ,CACd,KAAKxU,MADS,EACD,KAAKuC,OADJ,EACaW,KADb,CAAhB;AAEA,eAAKlD,MAAL,CAAY8U,aAAZ,CAA0B,KAAKvS,OAA/B;AACA,iBAAOqS,OAAP;AACD;;;;;;QAGUG,oB;;;AACX,oCAA4B/U,MAA5B,EACkB4C,CADlB,EAC6CQ,CAD7C,EACwD;AAAA;;AAD5B,aAAApD,MAAA,GAAAA,MAAA;AACV,aAAA4C,CAAA,GAAAA,CAAA;AAA2B,aAAAQ,CAAA,GAAAA,CAAA;AAAa;;;;kCAE5C;AACZ,cAAMpD,MAAM,GAAG,KAAKA,MAApB;AACA,cAAMgV,EAAE,GAAGhV,MAAM,CAAC6C,QAAP,CAAgB,KAAKD,CAArB,CAAX;AACA,cAAMqS,EAAE,GAAGjV,MAAM,CAAC6C,QAAP,CAAgB,KAAKO,CAArB,CAAX;AACA,cAAI,CAAC4R,EAAD,IAAO,CAACC,EAAZ,EAAgB;AAChB,cAAML,OAAO,GAAG,IAAIG,oBAAJ,CACd/U,MADc,EACN,KAAK4C,CADC,EACE,KAAKQ,CADP,CAAhB;AAEApD,gBAAM,CAACkV,WAAP,CAAmB,KAAKtS,CAAxB,EAA2B,KAAKQ,CAAhC;AACA,iBAAOwR,OAAP;AACD;;;;;;QASUO,M;;;AAmCX,wBAAc;AAAA;;AAjCE,aAAAnS,eAAA,GAAkB,IAAI,0DAAJ,EAAlB;AACA,aAAAQ,mBAAA,GAAsB,IAAI,0DAAJ,EAAtB;AACA,aAAAkG,eAAA,GAAkB,IAAI,0DAAJ,EAAlB;AACA,aAAAvG,mBAAA,GAAsB,IAAI,0DAAJ,EAAtB;AAER,aAAAiS,UAAA,GAAwB,IAAI,kEAAJ,EAAxB;AAGA,aAAAC,SAAA,GAA4B,EAA5B;AAIA,aAAAC,MAAA,GAAiB,GAAjB;AAUA,aAAAC,OAAA,GAAkB,GAAlB;AAaP;;;;wCAEsBhT,O,EAAkB;AACvC,iBAAO,KAAK8S,SAAL,CAAeG,OAAf,CAAuBjT,OAAvB,CAAP;AACD;;;oCAEkBK,C,EAAWQ,C,EAAW;AACvC,cAAMqS,GAAG,GAAG,KAAKJ,SAAL,CAAezS,CAAf,CAAZ;AACA,eAAKyS,SAAL,CAAezS,CAAf,IAAoB,KAAKyS,SAAL,CAAejS,CAAf,CAApB;AACA,eAAKiS,SAAL,CAAejS,CAAf,IAAoBqS,GAApB;AACA,eAAKC,OAAL;AACA,eAAKvS,mBAAL,CAAyBuB,IAAzB,CAA8B,CAAC9B,CAAD,EAAIQ,CAAJ,CAA9B;AACD;;;mCAEiBb,O,EAAkB;AAClC,iBAAO,KAAKM,QAAL,CAAc2S,OAAd,CAAsBjT,OAAtB,KAAkC,CAAC,CAA1C;AACD;;;mCAEiBA,O,EAAkBW,K,EAAgB;AAClDA,eAAK,GAAGA,KAAK,IAAI,CAAjB;AACA,eAAKmS,SAAL,CAAe3R,MAAf,CAAsBR,KAAK,IAAI,CAA/B,EAAkC,CAAlC,EAAqCX,OAArC;AACA,eAAKmT,OAAL;AACA,eAAK1S,eAAL,CAAqB0B,IAArB,CAA0B;AACxBnC,mBAAO,EAAEA,OADe;AAExBW,iBAAK,EAAEA;AAFiB,WAA1B;AAID;;;sCAEoBX,O,EAAkB;AACrC,eAAKiB,mBAAL,CAAyBkB,IAAzB,CAA8B;AAC5BnC,mBAAO,EAAEA,OADmB;AAE5BW,iBAAK,EAAE,KAAKqK,eAAL,CAAqBhL,OAArB;AAFqB,WAA9B;AAIA,eAAKmT,OAAL;AACA,eAAKL,SAAL,CAAe3R,MAAf,CAAsB,KAAK2R,SAAL,CAAeG,OAAf,CAAuBjT,OAAvB,CAAtB,EAAuD,CAAvD;AACD;;;oCAEkB4P,O,EAAmB;AACpC,eAAKiD,UAAL,CAAgBO,eAAhB,CAAgCxD,OAAhC;AACD;;;kCAEiB;AAChB,cAAIS,CAAC,GAAG,KAAKyC,SAAL,CAAevS,MAAf,GAAwB,CAAhC;;AACA,eAAK,IAAIF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKyS,SAAL,CAAevS,MAAnC,EAA2CF,CAAC,EAA5C,EAAiD;AAC/C,gBAAML,OAAO,GAAG,KAAK8S,SAAL,CAAezS,CAAf,CAAhB;AACAL,mBAAO,CAACxC,OAAR,CAAgB6S,CAAhB,GAAoBA,CAAC,EAArB;AACD;AACF;;;4BA5EsB;AAAE,iBAAO,KAAKwC,UAAZ;AAAyB;;;4BAG/B;AACjB,iBAAO,KAAKC,SAAZ;AAAwB;;;4BAGP;AAAE,iBAAO,KAAKC,MAAZ;AAAoB,S;0BACxBpM,C,EAAW;AAC1B,cAAI0M,KAAK,CAAC1M,CAAD,CAAT,EAAc;AACZ,iBAAKQ,eAAL,CAAqBhF,IAArB;AACA;AACD;;AACD,eAAK4Q,MAAL,GAAcpM,CAAd;AACA,eAAKQ,eAAL,CAAqBhF,IAArB;AACD;;;4BAEmB;AAAE,iBAAO,KAAK6Q,OAAZ;AAAsB,S;0BAC1BrM,C,EAAW;AAC3B,cAAI0M,KAAK,CAAC1M,CAAD,CAAT,EAAc;AACZ,iBAAKQ,eAAL,CAAqBhF,IAArB;AACA;AACD;;AACD,eAAK6Q,OAAL,GAAerM,CAAf;AACA,eAAKQ,eAAL,CAAqBhF,IAArB;AACD;;;;;;;;;;;;;;;;;;;;;AChHH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAcsBmR,qB,GAAtB;AAAA;;AAGkB,WAAApJ,QAAA,GAAW,IAAI,0DAAJ,EAAX;AAIjB,K;;QAEYqJ,iB;;;;;;;AAAb;AAAA;;AAAA;;;AAGW,gBAAA7R,IAAA,GAAO6R,iBAAiB,CAAC7R,IAAzB;AAHX;AAUC;;;;8BALckE,G,EAA+B;AAC1C,cAAMgE,CAAC,GAAG,IAAI,CAAd;AACA,gFAAY4J,SAAZ,CAAsB5N,GAAtB,EAA2B,CAACgE,CAAD,EAAGA,CAAH,EAAKA,CAAL,EAAOA,CAAP,EAASA,CAAT,EAAWA,CAAX,EAAaA,CAAb,EAAeA,CAAf,EAAiBA,CAAjB,CAA3B;AACD;;;;MARoC0J,qB;;AAEd,sBAAA5R,IAAA,GAAO,MAAP;;QAUZ+R,kB;;;;;;;AAAb;AAAA;;AAAA;;;AAGW,gBAAA/R,IAAA,GAAO+R,kBAAkB,CAAC/R,IAA1B;AAED,gBAAAgS,EAAA,GAAa,GAAb;AAMA,gBAAAC,EAAA,GAAa,EAAb;AAMA,gBAAAC,EAAA,GAAa,EAAb;AAMA,gBAAAC,EAAA,GAAa,GAAb;AAvBV;AAkCC;;;;8BAJcjO,G,EAA+B;AAC1C,gFAAYkO,YAAZ,CAAyBlO,GAAzB,EAA8B,KAAK+D,CAAnC,EAAsC,KAAKC,CAA3C,EAA8C,KAAKC,CAAnD,EAAsD,KAAKC,CAA3D;AACD;;;4BA1Bc;AAAE,iBAAO,KAAK4J,EAAZ;AAAiB,S;0BACrB/M,C,EAAW;AACtB,eAAK+M,EAAL,GAAU/M,CAAV;AACA,eAAKuD,QAAL,CAAc/H,IAAd;AACD;;;4BAEc;AAAE,iBAAO,KAAKwR,EAAZ;AAAiB,S;0BACrBhN,C,EAAW;AACtB,eAAKgN,EAAL,GAAUhN,CAAV;AACA,eAAKuD,QAAL,CAAc/H,IAAd;AACD;;;4BAEc;AAAE,iBAAO,KAAKyR,EAAZ;AAAiB,S;0BACrBjN,C,EAAW;AACtB,eAAKiN,EAAL,GAAUjN,CAAV;AACA,eAAKuD,QAAL,CAAc/H,IAAd;AACD;;;4BAEc;AAAE,iBAAO,KAAK0R,EAAZ;AAAiB,S;0BACrBlN,C,EAAW;AACtB,eAAKkN,EAAL,GAAUlN,CAAV;AACA,eAAKuD,QAAL,CAAc/H,IAAd;AACD;;;;MA5BqCmR,qB;;AAEf,uBAAA5R,IAAA,GAAO,OAAP;;QAkCZqS,8B;;;AACX,8CAA4BhL,MAA5B,EACkBY,CADlB,EACqCC,CADrC,EACwDC,CADxD,EAEkBC,CAFlB,EAEqB;AAAA;;AAFO,aAAAf,MAAA,GAAAA,MAAA;AACV,aAAAY,CAAA,GAAAA,CAAA;AAAmB,aAAAC,CAAA,GAAAA,CAAA;AAAmB,aAAAC,CAAA,GAAAA,CAAA;AACtC,aAAAC,CAAA,GAAAA,CAAA;AAAK;;;;kCAET;AACZ,cAAMuI,OAAO,GAAG,IAAI0B,8BAAJ,CACd,KAAKhL,MADS,EACD,KAAKA,MAAL,CAAYY,CADX,EACc,KAAKZ,MAAL,CAAYa,CAD1B,EAC6B,KAAKb,MAAL,CAAYc,CADzC,EAEd,KAAKd,MAAL,CAAYe,CAFE,CAAhB;AAGA,eAAKf,MAAL,CAAYY,CAAZ,GAAgB,KAAKA,CAArB;AACA,eAAKZ,MAAL,CAAYa,CAAZ,GAAgB,KAAKA,CAArB;AACA,eAAKb,MAAL,CAAYc,CAAZ,GAAgB,KAAKA,CAArB;AACA,eAAKd,MAAL,CAAYe,CAAZ,GAAgB,KAAKA,CAArB;AACA,iBAAOuI,OAAP;AACD;;;;;;QAGU2B,sB;;;;;;;AAAb;AAAA;;AAAA;;;AAGW,gBAAAtS,IAAA,GAAOsS,sBAAsB,CAACtS,IAA9B;AAHX;AASC;;;;8BAJckE,G,EAA+B;AAC1C,gFAAYqO,SAAZ,CAAsBrO,GAAtB;AACD;;;;MAPyC0N,qB;;AAEnB,2BAAA5R,IAAA,GAAO,WAAP;;QASnBwS,c;;;;;;;;;+BAEUxS,I,EAAc;AAC1B,kBAAQA,IAAR;AACE,iBAAK6R,iBAAiB,CAAC7R,IAAvB;AACE,qBAAO,IAAI6R,iBAAJ,EAAP;;AACF,iBAAKE,kBAAkB,CAAC/R,IAAxB;AACE,qBAAO,IAAI+R,kBAAJ,EAAP;;AACF,iBAAKO,sBAAsB,CAACtS,IAA5B;AACE,qBAAO,IAAIsS,sBAAJ,EAAP;AANJ;;AAQA,iBAAO,IAAP;AACD;;;;;;AAGI,QAAMG,aAAa,GAAG,IAAID,cAAJ,EAAtB;;;;;;;;;;;;;;;;AChHP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAIA,QAAIE,SAAS,GAAG,CAAhB;;QAYaC,0B;;;AACX,0CAA4BrU,OAA5B,EACoB+I,MADpB,EAC4C;AAAA;;AADhB,aAAA/I,OAAA,GAAAA,OAAA;AACR,aAAA+I,MAAA,GAAAA,MAAA;AAA0B;;;;kCAEhC;AACZ,cAAMuL,IAAI,GAAG,KAAKtU,OAAL,CAAa+I,MAA1B;AACA,cAAMsJ,OAAO,GAAG,IAAIgC,0BAAJ,CAA+B,KAAKrU,OAApC,EACZsU,IADY,CAAhB;AAEA,eAAKtU,OAAL,CAAa+I,MAAb,GAAsB,KAAKA,MAA3B;AACA,iBAAOsJ,OAAP;AACD;;;;;;QAGmBkC,O;;;AAwBpB,uBACkB7S,IADlB,EAES8S,IAFT,EAEuB;AAAA;;AADL,aAAA9S,IAAA,GAAAA,IAAA;AACT,aAAA8S,IAAA,GAAAA,IAAA;AAtBO,aAAA9J,UAAA,GAAa,IAAI,0DAAJ,EAAb;AACA,aAAAvB,iBAAA,GAAoB,IAAI,0DAAJ,EAApB;AAsBd,aAAK/L,EAAL,GAAU,EAAEgX,SAAZ;AACD;;;;kCAEgB;AACf,eAAKK,UAAL,IAAmB,KAAKA,UAAL,CAAgBtU,WAAhB,EAAnB;AACD;;;4BApBmB;AAAE,iBAAO,KAAKuU,OAAZ;AAAsB,S;0BAC1B3L,M,EAAwB;AAAA;;AACxC,eAAK0L,UAAL,IAAmB,KAAKA,UAAL,CAAgBtU,WAAhB,EAAnB;AACA,eAAKuU,OAAL,GAAe3L,MAAf;;AACA,cAAIA,MAAJ,EAAY;AACV,iBAAK0L,UAAL,GAAkB,KAAKC,OAAL,CAAaxK,QAAb,CAAsBxJ,SAAtB,CAAgC,YAAM;AACtD,qBAAI,CAACgK,UAAL,CAAgBvI,IAAhB;AAAyB,aADT,CAAlB;AAED;;AACD,eAAKgH,iBAAL,CAAuBhH,IAAvB;AACA,eAAKuI,UAAL,CAAgBvI,IAAhB;AACD;;;;;;;;;;;;;;;;;;;;;AC/CH;AAAA;;;AAAA;AAAA;AAAA;;QAAMwS,Y;;;AAAN;AAAA;;AAES,aAAAC,QAAA,GAAuB,EAAvB;AAMR;;;;6BAJMhF,O,EAAiB;AACpB,eAAKgF,QAAL,CAAcpV,IAAd,CAAmBoQ,OAAnB;AACD;;;;;;QAIUiF,S;;;AAAb;AAAA;;AAEU,aAAAC,KAAA,GAAwB,EAAxB;AACA,aAAAC,OAAA,GAA0B,EAA1B;AACA,aAAAC,oBAAA,GAA4C,IAA5C;AAuDT;;;;wCArDwBpF,O,EAAmB;AACxC,cAAMyC,OAAO,GAAGzC,OAAO,CAACqF,OAAR,EAAhB;AACA,cAAI,CAAC5C,OAAL,EAAc;;AACd,cAAI,CAAC,KAAK2C,oBAAV,EAAgC;AAC9B,iBAAKA,oBAAL,GAA4B,IAAIL,YAAJ,EAA5B;AACD;;AACD,eAAKK,oBAAL,CAA0BxV,IAA1B,CAA+B6S,OAA/B;AACA,eAAK0C,OAAL,GAAe,EAAf;AACD;;;2CAEsB;AACrB,cAAI,KAAKC,oBAAL,KAA8B,IAAlC,EAAwC;AACtC,iBAAKF,KAAL,CAAWtV,IAAX,CAAgB,KAAKwV,oBAArB;AACA,iBAAKA,oBAAL,GAA4B,IAA5B;AACD;AACF;;;+BAUa;AACZ,eAAKhD,gBAAL;AACA,cAAMkD,gBAAgB,GAAG,KAAKJ,KAAL,CAAWK,GAAX,EAAzB;AACA,cAAI,CAACD,gBAAL,EAAuB;AACvB,cAAME,kBAAkB,GAAG,IAAIT,YAAJ,EAA3B;;AACA,eAAK,IAAItU,CAAC,GAAG6U,gBAAgB,CAACN,QAAjB,CAA0BrU,MAA1B,GAAmC,CAAhD,EAAmDF,CAAC,IAAI,CAAxD,EAA4DA,CAAC,EAA7D,EAAkE;AAChE,gBAAMuP,OAAO,GAAGsF,gBAAgB,CAACN,QAAjB,CAA0BvU,CAA1B,CAAhB;AACA,gBAAMgS,OAAO,GAAGzC,OAAO,CAACqF,OAAR,EAAhB;AACA,gBAAI,CAAC5C,OAAL,EAAc;AACd+C,8BAAkB,CAAC5V,IAAnB,CAAwB6S,OAAxB;AACD;;AACD,eAAK0C,OAAL,CAAavV,IAAb,CAAkB4V,kBAAlB;AAED;;;+BAEa;AACZ,cAAMC,kBAAkB,GAAG,KAAKN,OAAL,CAAaI,GAAb,EAA3B;AACA,cAAI,CAACE,kBAAL,EAAyB;AACzB,cAAMC,gBAAgB,GAAG,IAAIX,YAAJ,EAAzB;;AACA,eAAK,IAAItU,CAAC,GAAGgV,kBAAkB,CAACT,QAAnB,CAA4BrU,MAA5B,GAAqC,CAAlD,EAAqDF,CAAC,IAAI,CAA1D,EAA8DA,CAAC,EAA/D,EAAoE;AAClE,gBAAMuP,OAAO,GAAGyF,kBAAkB,CAACT,QAAnB,CAA4BvU,CAA5B,CAAhB;AACA,gBAAMgS,OAAO,GAAGzC,OAAO,CAACqF,OAAR,EAAhB;AACA,gBAAI,CAAC5C,OAAL,EAAc;AACdiD,4BAAgB,CAAC9V,IAAjB,CAAsB6S,OAAtB;AACD;;AACD,eAAKyC,KAAL,CAAWtV,IAAX,CAAgB8V,gBAAhB;AACD;;;4BAlCoB;AACnB,iBAAO,KAAKR,KAAL,CAAWvU,MAAX,GAAoB,CAApB,IAAyB,KAAKyU,oBAAL,IAA6B,IAA7D;AACD;;;4BAEoB;AACnB,iBAAO,KAAKD,OAAL,CAAaxU,MAAb,GAAsB,CAA7B;AACD;;;;;;;;;;;;;;;;;;;;;AC7CH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAKagV,+B;;;AACX,+CAA4BvV,OAA5B,EACkBwK,OADlB,EACoDC,OADpD,EACsE;AAAA;;AAD1C,aAAAzK,OAAA,GAAAA,OAAA;AACV,aAAAwK,OAAA,GAAAA,OAAA;AAAkC,aAAAC,OAAA,GAAAA,OAAA;AAAoB;;;;kCAE1D;AACZ,cAAM4H,OAAO,GAAG,IAAIkD,+BAAJ,CACd,KAAKvV,OADS,EACA,KAAKwK,OADL,EACc,KAAKC,OADnB,CAAhB;AAEA,cAAMD,OAAO,GAAG,KAAKA,OAAL,IAAgB,KAAKA,OAArC;AACA,cAAMC,OAAO,GAAG,KAAKA,OAAL,IAAgB,KAAKA,OAArC;AACA,eAAKzK,OAAL,CAAawK,OAAb,GAAuBA,OAAvB;AACA,eAAKxK,OAAL,CAAayK,OAAb,GAAuBA,OAAvB;AACA,iBAAO4H,OAAP;AACD;;;;;;QAGUmD,Y;;;;;;;AAmBX,4BACkBtI,GADlB,EACyC;AAAA;;AAAA;;AACvC,qCAAMsI,YAAY,CAAC9T,IAAnB;AADgB,gBAAAwL,GAAA,GAAAA,GAAA;AAhBF,gBAAA1P,OAAA,GAAU,IAAI,6DAAJ,EAAV;AAER,gBAAAiY,QAAA,GAAoB,KAApB;AAMA,gBAAAC,QAAA,GAAoB,KAApB;AAUN,gBAAKlB,IAAL,mBAAqB,QAAKpX,EAA1B;AACA,gBAAKI,OAAL,CAAayI,CAAb,GAAiBiH,GAAG,CAAC7H,KAArB;AACA,gBAAK7H,OAAL,CAAa0I,CAAb,GAAiBgH,GAAG,CAAC5H,MAArB;;AACA,gBAAK9H,OAAL,CAAa2J,eAAb,CAA6BzG,SAA7B,CAAuC;AAAA,iBAAM,QAAKgK,UAAL,CAAgBvI,IAAhB,EAAN;AAAA,SAAvC;;AALuC;AAMxC;;;;4BAnBoB;AAAE,iBAAO,KAAKsT,QAAZ;AAAuB,S;0BAC3B9O,C,EAAY;AAC7B,eAAK8O,QAAL,GAAgB,CAAC,CAAC9O,CAAlB;AACA,eAAK+D,UAAL,CAAgBvI,IAAhB;AACD;;;4BAEoB;AAAE,iBAAO,KAAKuT,QAAZ;AAAuB,S;0BAC3B/O,C,EAAY;AAC7B,eAAK+O,QAAL,GAAgB,CAAC,CAAC/O,CAAlB;AACA,eAAK+D,UAAL,CAAgBvI,IAAhB;AACD;;;;MAjB+B,6D;;AAEhB,iBAAAT,IAAA,GAAO,cAAP;;;;;;;;;;;;;;;;ACtBlB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAGaiU,oB;;;AACX,oCAA4BnY,OAA5B,EACkByI,CADlB,EAC6CC,CAD7C,EACwD;AAAA;;AAD5B,aAAA1I,OAAA,GAAAA,OAAA;AACV,aAAAyI,CAAA,GAAAA,CAAA;AAA2B,aAAAC,CAAA,GAAAA,CAAA;AAAa;;;;kCAEnD;AACL,cAAM1I,OAAO,GAAG,KAAKA,OAArB;AACA,cAAM6U,OAAO,GAAG,IAAIsD,oBAAJ,CACdnY,OADc,EACLA,OAAO,CAACyI,CADH,EACMzI,OAAO,CAAC0I,CADd,CAAhB;AAEA1I,iBAAO,CAACyI,CAAR,GAAY,KAAKA,CAAjB;AACAzI,iBAAO,CAAC0I,CAAR,GAAY,KAAKA,CAAjB;AACA,iBAAOmM,OAAP;AACD;;;;;;QAIUuD,uB;;;AACb,uCAA4BpY,OAA5B,EACoBgH,CADpB,EAC+CE,CAD/C,EAC0D;AAAA;;AAD9B,aAAAlH,OAAA,GAAAA,OAAA;AACR,aAAAgH,CAAA,GAAAA,CAAA;AAA2B,aAAAE,CAAA,GAAAA,CAAA;AAAa;;;;kCAEnD;AACL,cAAMlH,OAAO,GAAG,KAAKA,OAArB;AACA,cAAM6U,OAAO,GAAG,IAAIuD,uBAAJ,CACdpY,OADc,EACLA,OAAO,CAACgH,CADH,EACMhH,OAAO,CAACkH,CADd,CAAhB;AAEAlH,iBAAO,CAACgH,CAAR,GAAY,KAAKA,CAAjB;AACAhH,iBAAO,CAACkH,CAAR,GAAY,KAAKA,CAAjB;AACA,iBAAO2N,OAAP;AACD;;;;;;QAIUwD,oB;;;AACX,oCAA4BrY,OAA5B,EACkBmM,CADlB,EAC6B;AAAA;;AADD,aAAAnM,OAAA,GAAAA,OAAA;AACV,aAAAmM,CAAA,GAAAA,CAAA;AAAa;;;;kCAExB;AACL,cAAMnM,OAAO,GAAG,KAAKA,OAArB;AACA,cAAM6U,OAAO,GAAG,IAAIwD,oBAAJ,CACdrY,OADc,EACLA,OAAO,CAACmM,CADH,CAAhB;AAEAnM,iBAAO,CAACmM,CAAR,GAAY,KAAKA,CAAjB;AACA,iBAAO0I,OAAP;AACD;;;;;;AAIH,QAAIyD,iBAAiB,GAAG,CAAxB;;QAEaC,O;;;AAoGX,yBAAc;AAAA;;AAlGE,aAAA3Y,EAAA,GAAK,EAAE0Y,iBAAP;AAEA,aAAAnK,WAAA,GAAc,IAAI,0DAAJ,EAAd;AACA,aAAAqK,mBAAA,GAAsB,IAAI,0DAAJ,EAAtB;AACA,aAAA7O,eAAA,GAAkB,IAAI,0DAAJ,EAAlB;AACA,aAAA8O,mBAAA,GAAsB,IAAI,0DAAJ,EAAtB;AAER,aAAAC,EAAA,GAAa,CAAb;AACA,aAAAC,EAAA,GAAa,CAAb;AACA,aAAAC,EAAA,GAAa,CAAb;AACA,aAAAC,EAAA,GAAa,GAAb;AACA,aAAAC,EAAA,GAAa,EAAb;AACA,aAAA5C,EAAA,GAAa,CAAb;AACA,aAAA6C,IAAA,GAAe,CAAf;AAEA,aAAAC,OAAA,GAAmB,IAAnB;AAMA,aAAAC,YAAA,GAAuB,CAAvB;AA8EP;;;;4BAnFmB;AAAE,iBAAO,KAAKD,OAAZ;AAAsB,S;0BAC1B7P,C,EAAY;AAC5B,eAAK6P,OAAL,GAAe7P,CAAf;AACA,eAAKgF,WAAL,CAAiBxJ,IAAjB;AACD;;;4BAIc;AAAE,iBAAO,KAAK+T,EAAZ;AAAiB,S;0BACrBvP,C,EAAW;AACtB,cAAI0M,KAAK,CAAC1M,CAAD,CAAT,EAAc;AACZ,iBAAKqP,mBAAL,CAAyB7T,IAAzB;AACA,iBAAKwJ,WAAL,CAAiBxJ,IAAjB;AACA;AACD;;AACDwE,WAAC,GAAGxB,IAAI,CAACC,KAAL,CAAWuB,CAAX,CAAJ;AACA,eAAKuP,EAAL,GAAUvP,CAAV;AACA,eAAKqP,mBAAL,CAAyB7T,IAAzB;AACA,eAAKwJ,WAAL,CAAiBxJ,IAAjB;AACD;;;4BACc;AAAE,iBAAO,KAAKiU,EAAZ;AAAiB,S;0BACrBzP,C,EAAW;AACtB,cAAI0M,KAAK,CAAC1M,CAAD,CAAT,EAAc;AACZ,iBAAKqP,mBAAL,CAAyB7T,IAAzB;AACA,iBAAKwJ,WAAL,CAAiBxJ,IAAjB;AACA;AACD;;AACD,eAAKiU,EAAL,GAAUzP,CAAV;AACA,eAAKqP,mBAAL,CAAyB7T,IAAzB;AACA,eAAKwJ,WAAL,CAAiBxJ,IAAjB;AACD;;;4BACc;AAAE,iBAAO,KAAKgU,EAAZ;AAAiB,S;0BACrBxP,C,EAAW;AACtB,cAAI0M,KAAK,CAAC1M,CAAD,CAAT,EAAc;AACZ,iBAAKqP,mBAAL,CAAyB7T,IAAzB;AACA,iBAAKwJ,WAAL,CAAiBxJ,IAAjB;AACA;AACD;;AACDwE,WAAC,GAAGxB,IAAI,CAACC,KAAL,CAAWuB,CAAX,CAAJ;AACA,eAAKwP,EAAL,GAAUxP,CAAV;AACA,eAAKqP,mBAAL,CAAyB7T,IAAzB;AACA,eAAKwJ,WAAL,CAAiBxJ,IAAjB;AACD;;;4BACc;AAAE,iBAAO,KAAKkU,EAAZ;AAAiB,S;0BACrB1P,C,EAAW;AACtB,cAAI0M,KAAK,CAAC1M,CAAD,CAAT,EAAc;AACZ,iBAAKQ,eAAL,CAAqBhF,IAArB;AACA,iBAAKwJ,WAAL,CAAiBxJ,IAAjB;AACA;AACD;;AACDwE,WAAC,GAAGxB,IAAI,CAACC,KAAL,CAAWuB,CAAX,CAAJ;AACA,eAAK0P,EAAL,GAAU1P,CAAV;AACA,eAAKQ,eAAL,CAAqBhF,IAArB;AACA,eAAKwJ,WAAL,CAAiBxJ,IAAjB;AACD;;;4BACc;AAAE,iBAAO,KAAKmU,EAAZ;AAAiB,S;0BACrB3P,C,EAAW;AACtB,cAAI0M,KAAK,CAAC1M,CAAD,CAAT,EAAc;AACZ,iBAAKQ,eAAL,CAAqBhF,IAArB;AACA,iBAAKwJ,WAAL,CAAiBxJ,IAAjB;AACA;AACD;;AACDwE,WAAC,GAAGxB,IAAI,CAACC,KAAL,CAAWuB,CAAX,CAAJ;AACA,eAAK2P,EAAL,GAAU3P,CAAV;AACA,eAAKQ,eAAL,CAAqBhF,IAArB;AACA,eAAKwJ,WAAL,CAAiBxJ,IAAjB;AACD;;;4BACc;AAAE,iBAAO,KAAKuR,EAAZ;AAAiB,S;0BACrB/M,C,EAAW;AACtB,cAAI0M,KAAK,CAAC1M,CAAD,CAAT,EAAc;AACZ,iBAAKsP,mBAAL,CAAyB9T,IAAzB;AACA,iBAAKwJ,WAAL,CAAiBxJ,IAAjB;AACA;AACD;;AACDwE,WAAC,GAAGxB,IAAI,CAACC,KAAL,CAAWuB,CAAX,CAAJ;AACA,eAAK+M,EAAL,GAAU/M,CAAV;AACA,eAAK4P,IAAL,GAAY5P,CAAC,GAAG,GAAJ,GAAUxB,IAAI,CAACkM,EAA3B;AACA,eAAK4E,mBAAL,CAAyB9T,IAAzB;AACA,eAAKwJ,WAAL,CAAiBxJ,IAAjB;AACD;;;4BACgB;AAAE,iBAAO,KAAKoU,IAAZ;AAAmB;;;;;;;;;;;;;;;;;;;;;ACnJxC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAMaG,4B;;;AACX,4CAA4B1W,OAA5B,EACkB+L,IADlB,EACgC;AAAA;;AADJ,aAAA/L,OAAA,GAAAA,OAAA;AACV,aAAA+L,IAAA,GAAAA,IAAA;AAAgB;;;;kCAEpB;AACZ,cAAI,KAAKA,IAAL,KAAc,KAAK/L,OAAL,CAAa+L,IAA/B,EAAqC;AACrC,cAAMsG,OAAO,GAAG,IAAIqE,4BAAJ,CACZ,KAAK1W,OADO,EACE,KAAKA,OAAL,CAAa+L,IADf,CAAhB;AAEA,eAAK/L,OAAL,CAAa+L,IAAb,GAAoB,KAAKA,IAAzB;AACA,iBAAOsG,OAAP;AACD;;;;;;QAIUsE,4B;;;AACX,4CAA4B3W,OAA5B,EACkBgM,IADlB,EACgC;AAAA;;AADJ,aAAAhM,OAAA,GAAAA,OAAA;AACV,aAAAgM,IAAA,GAAAA,IAAA;AAAgB;;;;kCAEpB;AACZ,cAAI,KAAKA,IAAL,KAAc,KAAKhM,OAAL,CAAagM,IAA/B,EAAqC;AACrC,cAAMqG,OAAO,GAAG,IAAIsE,4BAAJ,CACZ,KAAK3W,OADO,EACE,KAAKA,OAAL,CAAagM,IADf,CAAhB;AAEA,eAAKhM,OAAL,CAAagM,IAAb,GAAoB,KAAKA,IAAzB;AACA,iBAAOqG,OAAP;AACD;;;;;;QAIUuE,6B;;;AACX,6CAA4B5W,OAA5B,EACkBmM,KADlB,EACiC;AAAA;;AADL,aAAAnM,OAAA,GAAAA,OAAA;AACV,aAAAmM,KAAA,GAAAA,KAAA;AAAiB;;;;kCAErB;AACZ,cAAI,KAAKA,KAAL,KAAe,KAAKnM,OAAL,CAAamM,KAAhC,EAAuC;AACvC,cAAMkG,OAAO,GAAG,IAAIuE,6BAAJ,CACZ,KAAK5W,OADO,EACE,KAAKA,OAAL,CAAamM,KADf,CAAhB;AAEA,eAAKnM,OAAL,CAAamM,KAAb,GAAqB,KAAKA,KAA1B;AACA,iBAAOkG,OAAP;AACD;;;;;;QAIUwE,4B;;;AACX,4CAA4B7W,OAA5B,EACkBiM,IADlB,EACgC;AAAA;;AADJ,aAAAjM,OAAA,GAAAA,OAAA;AACV,aAAAiM,IAAA,GAAAA,IAAA;AAAgB;;;;kCAEpB;AACZ,cAAI,KAAKA,IAAL,KAAc,KAAKjM,OAAL,CAAaiM,IAA/B,EAAqC;AACrC,cAAMoG,OAAO,GAAG,IAAIwE,4BAAJ,CACZ,KAAK7W,OADO,EACE,KAAKA,OAAL,CAAaiM,IADf,CAAhB;AAEA,eAAKjM,OAAL,CAAaiM,IAAb,GAAoB,KAAKA,IAAzB;AACA,iBAAOoG,OAAP;AACD;;;;;;QAIGyE,W;;;AAAN;AAAA;;AACmB,aAAApK,IAAA,GAAOjH,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAP;AACA,aAAAkH,IAAA,GAAO,KAAKF,IAAL,CAAU7G,UAAV,CAAqB,IAArB,CAAP;AAMlB;;;;gCAJgBoG,I,EAAcD,I,EAAcD,I,EAAY;AACrD,eAAKa,IAAL,CAAUX,IAAV,aAAoBD,IAApB,gBAA8BC,IAA9B;AACA,iBAAO,KAAKW,IAAL,CAAUmK,WAAV,CAAsBhL,IAAtB,CAAP;AACD;;;;;;AAEH,QAAMiL,OAAO,GAAG,IAAIF,WAAJ,EAAhB;;QAEaG,W;;;;;;;AA6BX,2BACEhL,IADF,EACgBD,IADhB,EAC8BD,IAD9B,EAC4C;AAAA;;AAAA;;AAC1C,qCAAMkL,WAAW,CAACvV,IAAlB,EAAwB,MAAxB;AA3Bc,gBAAA0K,eAAA,GAAkB,IAAI,0DAAJ,EAAlB;AAEA,gBAAA5O,OAAA,GAAU,IAAI,6DAAJ,EAAV;AAER,gBAAAmB,KAAA,GAAwB,EAAxB;AAEA,gBAAAuY,2BAAA,GAA8B,KAA9B;AAEA,gBAAAC,KAAA,GAAgB,cAAhB;AAMA,gBAAAjL,MAAA,GAAiB,SAAjB;AAMA,gBAAAkL,OAAA,GAAkB,CAAlB;AAEA,gBAAAC,OAAA,GAAkB,CAAlB;AAMN,gBAAK7C,IAAL,kBAAoB,QAAKpX,EAAzB;AACA,gBAAK+Z,KAAL,GAAalL,IAAb;AACA,gBAAKqL,KAAL,GAAatL,IAAb;AACA,gBAAKD,IAAL,GAAYA,IAAZ;;AACA,gBAAKpN,KAAL,CAAWa,IAAX,CAAgB,QAAKhC,OAAL,CAAa2J,eAAb,CAA6BzG,SAA7B,CAAuC,YAAM;AAC3D,kBAAK6W,oBAAL;AACD,SAFe,CAAhB;;AAN0C;AAS3C;;;;+CAE8B;AAC7B,cAAI,KAAKL,2BAAT,EAAsC;AACtC,eAAKI,KAAL,GAAanS,IAAI,CAACC,KAAL,CAAW,KAAK5H,OAAL,CAAa0I,CAAb,GAAiB,GAA5B,CAAb;AACA,eAAKkG,eAAL,CAAqBjK,IAArB;AACD;;;4BAhCiB;AAAE,iBAAO,KAAKgV,KAAZ;AAAoB,S;0BAkCxBxQ,C,EAAW;AACzB,eAAKwQ,KAAL,GAAaxQ,CAAb;AACA,eAAKuQ,2BAAL,GAAmC,IAAnC;AACA,cAAMM,OAAO,GAAGR,OAAO,CAACS,OAAR,CAAgB,KAAKxL,IAArB,EAA2B,KAAKD,IAAhC,EAAsC,KAAKD,IAA3C,CAAhB;AACA,eAAKvO,OAAL,CAAayI,CAAb,GAAiBuR,OAAO,CAACnS,KAAR,GAAgB,KAAKqS,MAAtC;AACA,eAAKla,OAAL,CAAa0I,CAAb,GAAiB,KAAK8F,IAAL,GAAY,KAAK2L,MAAjB,GAA0B,GAA3C;AACA,eAAKT,2BAAL,GAAmC,KAAnC;AACA,eAAK9K,eAAL,CAAqBjK,IAArB;AACD;;;4BAxCiB;AAAE,iBAAO,KAAKmV,KAAZ;AAAoB,S;0BAkDxB3Q,C,EAAW;AACzB,cAAI0M,KAAK,CAAC1M,CAAD,CAAT,EAAc;AACZ,iBAAKyF,eAAL,CAAqBjK,IAArB;AACA;AACD;;AACD,eAAKmV,KAAL,GAAa3Q,CAAb;AACA,eAAKuQ,2BAAL,GAAmC,IAAnC;AACA,cAAMM,OAAO,GAAGR,OAAO,CAACS,OAAR,CAAgB,KAAKxL,IAArB,EAA2B,KAAKD,IAAhC,EAAsC,KAAKD,IAA3C,CAAhB;AACA,eAAKvO,OAAL,CAAayI,CAAb,GAAiBuR,OAAO,CAACnS,KAAR,GAAgB,KAAKqS,MAAtC;AACA,eAAKla,OAAL,CAAa0I,CAAb,GAAiB,KAAK8F,IAAL,GAAY,KAAK2L,MAAjB,GAA0B,GAA3C;AACA,eAAKT,2BAAL,GAAmC,KAAnC;AACA,eAAK9K,eAAL,CAAqBjK,IAArB;AACD;;;4BA5DiB;AAAE,iBAAO,KAAKyV,KAAZ;AAAoB,S;0BAwCxBjR,C,EAAW;AACzB,eAAKiR,KAAL,GAAajR,CAAb;AACA,cAAM6Q,OAAO,GAAGR,OAAO,CAACS,OAAR,CAAgB,KAAKxL,IAArB,EAA2B,KAAKD,IAAhC,EAAsC,KAAKD,IAA3C,CAAhB;AACA,eAAKvO,OAAL,CAAayI,CAAb,GAAiBuR,OAAO,CAACnS,KAAR,GAAgB,KAAKqS,MAAtC;AACA,eAAKla,OAAL,CAAa0I,CAAb,GAAiB,KAAK8F,IAAL,GAAY,KAAK2L,MAAjB,GAA0B,GAA3C;AACA,eAAKvL,eAAL,CAAqBjK,IAArB;AACD;;;4BA5CkB;AAAE,iBAAO,KAAK+J,MAAZ;AAAqB,S;0BACzBvF,C,EAAW;AAC1B,eAAKuF,MAAL,GAAcvF,CAAd;AACA,eAAKyF,eAAL,CAAqBjK,IAArB;AACD;;;4BAEmB;AAAE,iBAAO,KAAKiV,OAAZ;AAAsB;;;4BAExB;AAAE,iBAAO,KAAKC,OAAZ;AAAsB;;;;MA3Bb,6D;;AAEf,gBAAA3V,IAAA,GAAO,aAAP;;;;;;;;;;;;;;;;AC3ElB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAMamW,a;;;AASX,+BAAc;AAAA;;AALN,aAAAlZ,KAAA,GAAwB,EAAxB;AAMN,aAAKlB,MAAL,GAAc,IAAI,2DAAJ,EAAd;AACD;;;;yCAJuB;AAAE,iBAAO,KAAKwB,eAAZ;AAA8B;;;;;;;uBAP7C4Y,a;AAAa,K;;;aAAbA,a;AAAa,eAAbA,aAAa;;;;;sEAAbA,a,EAAa;cADzB;AACyB,Q;;;;;;;;;;;;;;;;;;;;ACJ1B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAcaC,oB;;;;;;;;;iCAIKlI,O,EAAmB;AAChCA,iBAAe,CAACnS,MAAhB,GAAyB,KAAKA,MAA9B;AACD,eAAKA,MAAL,CAAYsa,WAAZ,CAAwBnI,OAAxB;AACD;;;;;;;uBAPUkI,oB;AAAoB,K;;;aAApBA,oB;AAAoB,eAApBA,oBAAoB;;;;;sEAApBA,oB,EAAoB;cADhC;AACgC,Q;;;AAW1B,QAAME,eAAe,GACxB,IAAI,4DAAJ,CAAoC,gBAApC,CADG;;;;;;;;;;;;;;;;AC3BP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAcaC,iB;;;;;;;;;6BAECC,O,EAAsBC,I,EAAc;AAC9C,cAAI1Y,QAAQ,GAAGyY,OAAO,CAACzY,QAAvB;;AACA,cAAI,iEAAJ,EAAiB;AACfA,oBAAQ,GAAGyY,OAAO,CAACxY,GAAR,IAAeD,QAA1B;AACD;;AACD,cAAMW,QAAQ,GAAG,SAAXA,QAAW,GAAM;AACrB,+DAAQgY,MAAR,CAAe3Y,QAAf,EAAyB0Y,IAAzB;AACD,WAFD;;AAGA,qEAAQ1Y,QAAR,EAAkB0Y,IAAlB;AACA,iBAAO/X,QAAP;AACD;;;;;;;uBAZU6X,iB;AAAiB,K;;;aAAjBA,iB;AAAiB,eAAjBA,iBAAiB;;;;;sEAAjBA,iB,EAAiB;cAD7B;AAC6B,Q;;;;;;;;;;;;;;;;;;ACd9B;AAAA;;;AAAA;AAAA;AAAA;;AAAO,QAAMI,OAAO,GAAG,OAAhB;;;;;;;;;;;;;;;;ACOP;AAAA;;;AAAA;AAAA;AAAA;;QAAaC,W;;;;;;;;;+BAIU;AACnB,cAAI,EAAE,iBAAiB/U,MAAnB,CAAJ,EAAgC;AAC9B+U,uBAAW,CAACC,OAAZ,GAAsB,KAAtB;AACAC,iBAAK,CAAC,yEAAD,CAAL;AACD,WAHD,MAIK;AACHF,uBAAW,CAACC,OAAZ,GAAsB,IAAtB;AACD;AACF;;;kCAEuB3S,G,EAA+B;AACrD,cAAI,CAAC0S,WAAW,CAACC,OAAjB,EAA0B;AAC1B,cAAM/S,GAAG,GAAGI,GAAG,CAACnI,MAAhB;AACA,cAAMgb,MAAM,GAAG7S,GAAG,CAAC8S,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuBlT,GAAG,CAACH,KAA3B,EAAkCG,GAAG,CAACF,MAAtC,EAA8CqT,IAA7D;AACA,cAAMpY,MAAM,GAAGkY,MAAM,CAAClY,MAAtB;;AACA,cAAMqY,MAAM,GAAGC,OAAO,CAACtY,MAAD,CAAtB;;AACAuY,gBAAM,CAACC,GAAP,CAAWN,MAAX,EAAmBG,MAAnB;;AACAI,oBAAU,CAACJ,MAAD,EAASpT,GAAG,CAACH,KAAb,EAAoBG,GAAG,CAACF,MAAxB,CAAV;;AACA,cAAM2C,MAAM,GAAG6Q,MAAM,CAACG,QAAP,CAAgBL,MAAhB,EAAwBA,MAAM,GAAGrY,MAAjC,CAAf;AACAqF,aAAG,CAACsT,YAAJ,CAAiB,IAAIC,SAAJ,CAAc,IAAIC,iBAAJ,CAAsBnR,MAAtB,CAAd,EAA6CzC,GAAG,CAACH,KAAjD,EAAwDG,GAAG,CAACF,MAA5D,CAAjB,EAAsF,CAAtF,EAAyF,CAAzF;;AACA+T,eAAK,CAACT,MAAD,CAAL;AACD;;;kCAEuBhT,G,EACtBmD,M,EAA0E;AAC1E,cAAI,CAACuP,WAAW,CAACC,OAAjB,EAA0B;AAC1B,cAAM/S,GAAG,GAAGI,GAAG,CAACnI,MAAhB;AACA,cAAMgb,MAAM,GAAG7S,GAAG,CAAC8S,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuBlT,GAAG,CAACH,KAA3B,EAAkCG,GAAG,CAACF,MAAtC,EAA8CqT,IAA7D;AACA,cAAMpY,MAAM,GAAGkY,MAAM,CAAClY,MAAtB;;AACA,cAAMqY,MAAM,GAAGC,OAAO,CAACtY,MAAD,CAAtB;;AACAuY,gBAAM,CAACC,GAAP,CAAWN,MAAX,EAAmBG,MAAnB;;AACAU,oBAAU,MAAV,UAAWV,MAAX,EAAmBpT,GAAG,CAACH,KAAvB,EAA8BG,GAAG,CAACF,MAAlC,4BAA6CyD,MAA7C;;AACA,cAAMd,MAAM,GAAG6Q,MAAM,CAACG,QAAP,CAAgBL,MAAhB,EAAwBA,MAAM,GAAGrY,MAAjC,CAAf;AACAqF,aAAG,CAACsT,YAAJ,CAAiB,IAAIC,SAAJ,CAAc,IAAIC,iBAAJ,CAAsBnR,MAAtB,CAAd,EAA6CzC,GAAG,CAACH,KAAjD,EAAwDG,GAAG,CAACF,MAA5D,CAAjB,EAAsF,CAAtF,EAAyF,CAAzF;;AACA+T,eAAK,CAACT,MAAD,CAAL;AACD;;;qCAE0BhT,G,EACzB+D,C,EAAWC,C,EAAWC,C,EAAW0P,O,EAAiB;AAClD,cAAI,CAACjB,WAAW,CAACC,OAAjB,EAA0B;AAC1B,cAAM/S,GAAG,GAAGI,GAAG,CAACnI,MAAhB;AACA,cAAMgb,MAAM,GAAG7S,GAAG,CAAC8S,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuBlT,GAAG,CAACH,KAA3B,EAAkCG,GAAG,CAACF,MAAtC,EAA8CqT,IAA7D;AACA,cAAMpY,MAAM,GAAGkY,MAAM,CAAClY,MAAtB;;AACA,cAAMqY,MAAM,GAAGC,OAAO,CAACtY,MAAD,CAAtB;;AACAuY,gBAAM,CAACC,GAAP,CAAWN,MAAX,EAAmBG,MAAnB;;AACAY,uBAAa,CAACZ,MAAD,EAASpT,GAAG,CAACH,KAAb,EAAoBG,GAAG,CAACF,MAAxB,EAAgCqE,CAAhC,EAAmCC,CAAnC,EAAsCC,CAAtC,EAAyC0P,OAAzC,CAAb;;AACA,cAAMtR,MAAM,GAAG6Q,MAAM,CAACG,QAAP,CAAgBL,MAAhB,EAAwBA,MAAM,GAAGrY,MAAjC,CAAf;AACAqF,aAAG,CAACsT,YAAJ,CAAiB,IAAIC,SAAJ,CAAc,IAAIC,iBAAJ,CAAsBnR,MAAtB,CAAd,EAA6CzC,GAAG,CAACH,KAAjD,EAAwDG,GAAG,CAACF,MAA5D,CAAjB,EAAsF,CAAtF,EAAyF,CAAzF;;AACA+T,eAAK,CAACT,MAAD,CAAL;AACD;;;;;;AAnDa,gBAAAL,OAAA,GAAU,KAAV;;;;;;;;;;;;;;;;ACThB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAKqBkB,I;;;AAEjB,oBAAYC,MAAZ,EAA+B;AAAA;;AAMvB,aAAAA,MAAA,GAAS,IAAIC,YAAJ,CAAiB,CAAjB,CAAT;;AALJ,YAAID,MAAM,KAAKnS,SAAf,EAA0B;AACtB,eAAKqS,IAAL,CAAUF,MAAV;AACH;AACJ;;;;2BAYE/Y,K,EAAa;AACZ,iBAAO,KAAK+Y,MAAL,CAAY/Y,KAAZ,CAAP;AACH;;;6BAEI+Y,M,EAAgB;AACjB,eAAK,IAAIrZ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxB,iBAAKqZ,MAAL,CAAYrZ,CAAZ,IAAiBqZ,MAAM,CAACrZ,CAAD,CAAvB;AACH;;AAED,iBAAO,IAAP;AACH;;;gCAEI;AACD,eAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxB,iBAAKqZ,MAAL,CAAYrZ,CAAZ,IAAiB,CAAjB;AACH;AACJ;;;6BAEIwZ,I,EAAW;AACZ,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAIJ,IAAJ,EAAP;AAAmB;;AAEhC,eAAK,IAAIpZ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxBwZ,gBAAI,CAACH,MAAL,CAAYrZ,CAAZ,IAAiB,KAAKqZ,MAAL,CAAYrZ,CAAZ,CAAjB;AACH;;AAED,iBAAOwZ,IAAP;AACH;;;8BAEE;AACC,cAAMlB,IAAI,GAAa,EAAvB;;AACA,eAAK,IAAItY,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxBsY,gBAAI,CAACtY,CAAD,CAAJ,GAAU,KAAKqZ,MAAL,CAAYrZ,CAAZ,CAAV;AACH;;AAED,iBAAOsY,IAAP;AACH;;;4BAEGhY,K,EAAa;AACb,iBAAO,CACH,KAAK+Y,MAAL,CAAY/Y,KAAK,GAAG,CAAR,GAAY,CAAxB,CADG,EAEH,KAAK+Y,MAAL,CAAY/Y,KAAK,GAAG,CAAR,GAAY,CAAxB,CAFG,CAAP;AAIH;;;4BAEGA,K,EAAa;AACb,iBAAO,CACH,KAAK+Y,MAAL,CAAY/Y,KAAZ,CADG,EAEH,KAAK+Y,MAAL,CAAY/Y,KAAK,GAAG,CAApB,CAFG,CAAP;AAIH;;;+BAEMmZ,M,EAAiC;AAAA,cAAnBC,SAAmB,uEAAP,kDAAO;;AACpC,eAAK,IAAI1Z,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxB,gBAAI8E,IAAI,CAAC8H,GAAL,CAAS,KAAKyM,MAAL,CAAYrZ,CAAZ,IAAiByZ,MAAM,CAACE,EAAP,CAAU3Z,CAAV,CAA1B,IAA0C0Z,SAA9C,EAAyD;AACrD,qBAAO,KAAP;AACH;AACJ;;AAED,iBAAO,IAAP;AACH;;;sCAEU;AACP,iBAAO,KAAKL,MAAL,CAAY,CAAZ,IAAiB,KAAKA,MAAL,CAAY,CAAZ,CAAjB,GAAkC,KAAKA,MAAL,CAAY,CAAZ,IAAiB,KAAKA,MAAL,CAAY,CAAZ,CAA1D;AACH;;;sCAEU;AACP,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AAEA,iBAAO,IAAP;AACH;;;oCAEQ;AACL,cAAMO,IAAI,GAAG,KAAKP,MAAL,CAAY,CAAZ,CAAb;AAEA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,KAAKA,MAAL,CAAY,CAAZ,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBO,IAAjB;AAEA,iBAAO,IAAP;AACH;;;kCAEM;AACH,cAAIC,GAAG,GAAG,KAAKC,WAAL,EAAV;;AAEA,cAAI,CAACD,GAAL,EAAU;AAAE,mBAAO,IAAP;AAAa;;AAEzBA,aAAG,GAAG,MAAMA,GAAZ;AAEA,cAAME,GAAG,GAAG,KAAKV,MAAL,CAAY,CAAZ,CAAZ;AAEA,eAAKA,MAAL,CAAY,CAAZ,IAAiBQ,GAAG,GAAI,KAAKR,MAAL,CAAY,CAAZ,CAAxB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBQ,GAAG,GAAI,CAAC,KAAKR,MAAL,CAAY,CAAZ,CAAzB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBQ,GAAG,GAAI,CAAC,KAAKR,MAAL,CAAY,CAAZ,CAAzB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBQ,GAAG,GAAGE,GAAvB;AAEA,iBAAO,IAAP;AACH;;;iCAEQN,M,EAAY;AACjB,cAAMM,GAAG,GAAG,KAAKV,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMW,GAAG,GAAG,KAAKX,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMY,GAAG,GAAG,KAAKZ,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMa,GAAG,GAAG,KAAKb,MAAL,CAAY,CAAZ,CAAZ;AAEA,eAAKA,MAAL,CAAY,CAAZ,IAAiBU,GAAG,GAAGN,MAAM,CAACE,EAAP,CAAU,CAAV,CAAN,GAAqBK,GAAG,GAAGP,MAAM,CAACE,EAAP,CAAU,CAAV,CAA5C;AACA,eAAKN,MAAL,CAAY,CAAZ,IAAiBU,GAAG,GAAGN,MAAM,CAACE,EAAP,CAAU,CAAV,CAAN,GAAqBK,GAAG,GAAGP,MAAM,CAACE,EAAP,CAAU,CAAV,CAA5C;AACA,eAAKN,MAAL,CAAY,CAAZ,IAAiBY,GAAG,GAAGR,MAAM,CAACE,EAAP,CAAU,CAAV,CAAN,GAAqBO,GAAG,GAAGT,MAAM,CAACE,EAAP,CAAU,CAAV,CAA5C;AACA,eAAKN,MAAL,CAAY,CAAZ,IAAiBY,GAAG,GAAGR,MAAM,CAACE,EAAP,CAAU,CAAV,CAAN,GAAqBO,GAAG,GAAGT,MAAM,CAACE,EAAP,CAAU,CAAV,CAA5C;AAEA,iBAAO,IAAP;AACH;;;qCAEYQ,M,EAAcvS,M,EAAY;AACnC,cAAMzD,CAAC,GAAGgW,MAAM,CAAChW,CAAjB;AACA,cAAME,CAAC,GAAG8V,MAAM,CAAC9V,CAAjB;;AAEA,cAAIuD,MAAJ,EAAY;AACRA,kBAAM,CAAC+G,EAAP,GAAY,CACRxK,CAAC,GAAG,KAAKkV,MAAL,CAAY,CAAZ,CAAJ,GAAqBhV,CAAC,GAAG,KAAKgV,MAAL,CAAY,CAAZ,CADjB,EAERlV,CAAC,GAAG,KAAKkV,MAAL,CAAY,CAAZ,CAAJ,GAAqBhV,CAAC,GAAG,KAAKgV,MAAL,CAAY,CAAZ,CAFjB,CAAZ;AAKA,mBAAOzR,MAAP;AACH,WAPD,MAOO;AACH,mBAAO,IAAI,6CAAJ,CAAS,CACZzD,CAAC,GAAG,KAAKkV,MAAL,CAAY,CAAZ,CAAJ,GAAqBhV,CAAC,GAAG,KAAKgV,MAAL,CAAY,CAAZ,CADb,EAEZlV,CAAC,GAAG,KAAKkV,MAAL,CAAY,CAAZ,CAAJ,GAAqBhV,CAAC,GAAG,KAAKgV,MAAL,CAAY,CAAZ,CAFb,CAAT,CAAP;AAIH;AACJ;;;8BAEKc,M,EAAY;AACd,cAAMJ,GAAG,GAAG,KAAKV,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMW,GAAG,GAAG,KAAKX,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMY,GAAG,GAAG,KAAKZ,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMa,GAAG,GAAG,KAAKb,MAAL,CAAY,CAAZ,CAAZ;AAEA,cAAMlV,CAAC,GAAGgW,MAAM,CAAChW,CAAjB;AACA,cAAME,CAAC,GAAG8V,MAAM,CAAC9V,CAAjB;AAEA,eAAKgV,MAAL,CAAY,CAAZ,IAAiBU,GAAG,GAAG5V,CAAvB;AACA,eAAKkV,MAAL,CAAY,CAAZ,IAAiBW,GAAG,GAAG3V,CAAvB;AACA,eAAKgV,MAAL,CAAY,CAAZ,IAAiBY,GAAG,GAAG9V,CAAvB;AACA,eAAKkV,MAAL,CAAY,CAAZ,IAAiBa,GAAG,GAAG7V,CAAvB;AAEA,iBAAO,IAAP;AACH;;;iCA1Je8M,K,EAAa;AACzB,cAAMiJ,GAAG,GAAGtV,IAAI,CAACsV,GAAL,CAASjJ,KAAT,CAAZ;AACA,cAAMkJ,GAAG,GAAGvV,IAAI,CAACuV,GAAL,CAASlJ,KAAT,CAAZ;AACA,iBAAO,IAAIiI,IAAJ,CAAS,CAACgB,GAAD,EAAM,CAACC,GAAP,EAAYA,GAAZ,EAAiBD,GAAjB,CAAT,CAAP;AACH;;;gCAwJcE,E,EAAUC,E,EAAU3S,M,EAAY;AAC3C,cAAMmS,GAAG,GAAGO,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMK,GAAG,GAAGM,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMM,GAAG,GAAGK,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMO,GAAG,GAAGI,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;;AAEA,cAAI/R,MAAJ,EAAY;AACRA,kBAAM,CAAC2R,IAAP,CAAY,CACRQ,GAAG,GAAGQ,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAN,GAAiBK,GAAG,GAAGO,EAAE,CAACZ,EAAH,CAAM,CAAN,CADf,EAERI,GAAG,GAAGQ,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAN,GAAiBK,GAAG,GAAGO,EAAE,CAACZ,EAAH,CAAM,CAAN,CAFf,EAGRM,GAAG,GAAGM,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAN,GAAiBO,GAAG,GAAGK,EAAE,CAACZ,EAAH,CAAM,CAAN,CAHf,EAIRM,GAAG,GAAGM,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAN,GAAiBO,GAAG,GAAGK,EAAE,CAACZ,EAAH,CAAM,CAAN,CAJf,CAAZ;AAOA,mBAAO/R,MAAP;AACH,WATD,MASO;AACH,mBAAO,IAAIwR,IAAJ,CAAS,CACZW,GAAG,GAAGQ,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAN,GAAiBK,GAAG,GAAGO,EAAE,CAACZ,EAAH,CAAM,CAAN,CADX,EAEZI,GAAG,GAAGQ,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAN,GAAiBK,GAAG,GAAGO,EAAE,CAACZ,EAAH,CAAM,CAAN,CAFX,EAGZM,GAAG,GAAGM,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAN,GAAiBO,GAAG,GAAGK,EAAE,CAACZ,EAAH,CAAM,CAAN,CAHX,EAIZM,GAAG,GAAGM,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAN,GAAiBO,GAAG,GAAGK,EAAE,CAACZ,EAAH,CAAM,CAAN,CAJX,CAAT,CAAP;AAMH;AACJ;;;;;;AArLe,SAAAa,QAAA,GAAW,IAAIpB,IAAJ,GAAWqB,WAAX,EAAX;;;;;;;;;;;;;;;;ACfpB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOqBC,I;;;AAEjB,oBAAYrB,MAAZ,EAA+B;AAAA;;AAMvB,aAAAA,MAAA,GAAS,IAAIC,YAAJ,CAAiB,CAAjB,CAAT;;AALJ,YAAID,MAAM,KAAKnS,SAAf,EAA0B;AACtB,eAAKqS,IAAL,CAAUF,MAAV;AACH;AACJ;;;;2BAME/Y,K,EAAa;AACZ,iBAAO,KAAK+Y,MAAL,CAAY/Y,KAAZ,CAAP;AACH;;;6BAEI+Y,M,EAAgB;AACjB,eAAK,IAAIrZ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxB,iBAAKqZ,MAAL,CAAYrZ,CAAZ,IAAiBqZ,MAAM,CAACrZ,CAAD,CAAvB;AACH;;AAED,iBAAO,IAAP;AACH;;;gCAEI;AACD,eAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxB,iBAAKqZ,MAAL,CAAYrZ,CAAZ,IAAiB,CAAjB;AACH;AACJ;;;6BAEIwZ,I,EAAW;AACZ,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAIkB,IAAJ,EAAP;AAAmB;;AAEhC,eAAK,IAAI1a,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxBwZ,gBAAI,CAACH,MAAL,CAAYrZ,CAAZ,IAAiB,KAAKqZ,MAAL,CAAYrZ,CAAZ,CAAjB;AACH;;AAED,iBAAOwZ,IAAP;AACH;;;8BAEE;AACC,cAAMlB,IAAI,GAAa,EAAvB;;AACA,eAAK,IAAItY,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxBsY,gBAAI,CAACtY,CAAD,CAAJ,GAAU,KAAKqZ,MAAL,CAAYrZ,CAAZ,CAAV;AACH;;AAED,iBAAOsY,IAAP;AACH;;;4BAEGhY,K,EAAa;AACb,iBAAO,CACH,KAAK+Y,MAAL,CAAY/Y,KAAK,GAAG,CAAR,GAAY,CAAxB,CADG,EAEH,KAAK+Y,MAAL,CAAY/Y,KAAK,GAAG,CAAR,GAAY,CAAxB,CAFG,EAGH,KAAK+Y,MAAL,CAAY/Y,KAAK,GAAG,CAAR,GAAY,CAAxB,CAHG,CAAP;AAKH;;;4BAEGA,K,EAAa;AACb,iBAAO,CACH,KAAK+Y,MAAL,CAAY/Y,KAAZ,CADG,EAEH,KAAK+Y,MAAL,CAAY/Y,KAAK,GAAG,CAApB,CAFG,EAGH,KAAK+Y,MAAL,CAAY/Y,KAAK,GAAG,CAApB,CAHG,CAAP;AAKH;;;+BAEMmZ,M,EAAiC;AAAA,cAAnBC,SAAmB,uEAAP,kDAAO;;AACpC,eAAK,IAAI1Z,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxB,gBAAI8E,IAAI,CAAC8H,GAAL,CAAS,KAAKyM,MAAL,CAAYrZ,CAAZ,IAAiByZ,MAAM,CAACE,EAAP,CAAU3Z,CAAV,CAA1B,IAA0C0Z,SAA9C,EAAyD;AACrD,qBAAO,KAAP;AACH;AACJ;;AAED,iBAAO,IAAP;AACH;;;sCAEU;AACP,cAAMiB,GAAG,GAAG,KAAKtB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMuB,GAAG,GAAG,KAAKvB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMwB,GAAG,GAAG,KAAKxB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMyB,GAAG,GAAG,KAAKzB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMU,GAAG,GAAG,KAAKV,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMW,GAAG,GAAG,KAAKX,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAM0B,GAAG,GAAG,KAAK1B,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMY,GAAG,GAAG,KAAKZ,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMa,GAAG,GAAG,KAAKb,MAAL,CAAY,CAAZ,CAAZ;AAEA,cAAM2B,KAAK,GAAGd,GAAG,GAAGH,GAAN,GAAYC,GAAG,GAAGC,GAAhC;AACA,cAAMgB,KAAK,GAAG,CAACf,GAAD,GAAOY,GAAP,GAAad,GAAG,GAAGe,GAAjC;AACA,cAAMG,KAAK,GAAGjB,GAAG,GAAGa,GAAN,GAAYf,GAAG,GAAGgB,GAAhC;AAEA,iBAAOJ,GAAG,GAAGK,KAAN,GAAcJ,GAAG,GAAGK,KAApB,GAA4BJ,GAAG,GAAGK,KAAzC;AACH;;;sCAEU;AACP,eAAK7B,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AAEA,iBAAO,IAAP;AACH;;;oCAEQ;AACL,cAAM8B,MAAM,GAAG,KAAK9B,MAAL,CAAY,CAAZ,CAAf;AACA,cAAM+B,MAAM,GAAG,KAAK/B,MAAL,CAAY,CAAZ,CAAf;AACA,cAAMgC,MAAM,GAAG,KAAKhC,MAAL,CAAY,CAAZ,CAAf;AAEA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,KAAKA,MAAL,CAAY,CAAZ,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,KAAKA,MAAL,CAAY,CAAZ,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB8B,MAAjB;AACA,eAAK9B,MAAL,CAAY,CAAZ,IAAiB,KAAKA,MAAL,CAAY,CAAZ,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB+B,MAAjB;AACA,eAAK/B,MAAL,CAAY,CAAZ,IAAiBgC,MAAjB;AAEA,iBAAO,IAAP;AACH;;;kCAEM;AACH,cAAMV,GAAG,GAAG,KAAKtB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMuB,GAAG,GAAG,KAAKvB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMwB,GAAG,GAAG,KAAKxB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMyB,GAAG,GAAG,KAAKzB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMU,GAAG,GAAG,KAAKV,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMW,GAAG,GAAG,KAAKX,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAM0B,GAAG,GAAG,KAAK1B,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMY,GAAG,GAAG,KAAKZ,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMa,GAAG,GAAG,KAAKb,MAAL,CAAY,CAAZ,CAAZ;AAEA,cAAM2B,KAAK,GAAGd,GAAG,GAAGH,GAAN,GAAYC,GAAG,GAAGC,GAAhC;AACA,cAAMgB,KAAK,GAAG,CAACf,GAAD,GAAOY,GAAP,GAAad,GAAG,GAAGe,GAAjC;AACA,cAAMG,KAAK,GAAGjB,GAAG,GAAGa,GAAN,GAAYf,GAAG,GAAGgB,GAAhC;AAEA,cAAIlB,GAAG,GAAGc,GAAG,GAAGK,KAAN,GAAcJ,GAAG,GAAGK,KAApB,GAA4BJ,GAAG,GAAGK,KAA5C;;AAEA,cAAI,CAACrB,GAAL,EAAU;AACN,mBAAO,IAAP;AACH;;AAEDA,aAAG,GAAG,MAAMA,GAAZ;AAEA,eAAKR,MAAL,CAAY,CAAZ,IAAiB2B,KAAK,GAAGnB,GAAzB;AACA,eAAKR,MAAL,CAAY,CAAZ,IAAiB,CAAC,CAACa,GAAD,GAAOU,GAAP,GAAaC,GAAG,GAAGZ,GAApB,IAA2BJ,GAA5C;AACA,eAAKR,MAAL,CAAY,CAAZ,IAAiB,CAACW,GAAG,GAAGY,GAAN,GAAYC,GAAG,GAAGd,GAAnB,IAA0BF,GAA3C;AACA,eAAKR,MAAL,CAAY,CAAZ,IAAiB4B,KAAK,GAAGpB,GAAzB;AACA,eAAKR,MAAL,CAAY,CAAZ,IAAiB,CAACa,GAAG,GAAGS,GAAN,GAAYE,GAAG,GAAGE,GAAnB,IAA0BlB,GAA3C;AACA,eAAKR,MAAL,CAAY,CAAZ,IAAiB,CAAC,CAACW,GAAD,GAAOW,GAAP,GAAaE,GAAG,GAAGC,GAApB,IAA2BjB,GAA5C;AACA,eAAKR,MAAL,CAAY,CAAZ,IAAiB6B,KAAK,GAAGrB,GAAzB;AACA,eAAKR,MAAL,CAAY,CAAZ,IAAiB,CAAC,CAACY,GAAD,GAAOU,GAAP,GAAaC,GAAG,GAAGG,GAApB,IAA2BlB,GAA5C;AACA,eAAKR,MAAL,CAAY,CAAZ,IAAiB,CAACU,GAAG,GAAGY,GAAN,GAAYC,GAAG,GAAGE,GAAnB,IAA0BjB,GAA3C;AAEA,iBAAO,IAAP;AACH;;;iCAEQJ,M,EAAY;AACjB,cAAMkB,GAAG,GAAG,KAAKtB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMuB,GAAG,GAAG,KAAKvB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMwB,GAAG,GAAG,KAAKxB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMyB,GAAG,GAAG,KAAKzB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMU,GAAG,GAAG,KAAKV,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMW,GAAG,GAAG,KAAKX,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAM0B,GAAG,GAAG,KAAK1B,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMY,GAAG,GAAG,KAAKZ,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMa,GAAG,GAAG,KAAKb,MAAL,CAAY,CAAZ,CAAZ;AAEA,cAAMiC,GAAG,GAAG7B,MAAM,CAACE,EAAP,CAAU,CAAV,CAAZ;AACA,cAAM4B,GAAG,GAAG9B,MAAM,CAACE,EAAP,CAAU,CAAV,CAAZ;AACA,cAAM6B,GAAG,GAAG/B,MAAM,CAACE,EAAP,CAAU,CAAV,CAAZ;AACA,cAAM8B,GAAG,GAAGhC,MAAM,CAACE,EAAP,CAAU,CAAV,CAAZ;AACA,cAAM+B,GAAG,GAAGjC,MAAM,CAACE,EAAP,CAAU,CAAV,CAAZ;AACA,cAAMgC,GAAG,GAAGlC,MAAM,CAACE,EAAP,CAAU,CAAV,CAAZ;AACA,cAAMiC,GAAG,GAAGnC,MAAM,CAACE,EAAP,CAAU,CAAV,CAAZ;AACA,cAAMkC,GAAG,GAAGpC,MAAM,CAACE,EAAP,CAAU,CAAV,CAAZ;AACA,cAAMmC,GAAG,GAAGrC,MAAM,CAACE,EAAP,CAAU,CAAV,CAAZ;AAEA,eAAKN,MAAL,CAAY,CAAZ,IAAiBiC,GAAG,GAAGX,GAAN,GAAYY,GAAG,GAAGT,GAAlB,GAAwBU,GAAG,GAAGT,GAA/C;AACA,eAAK1B,MAAL,CAAY,CAAZ,IAAiBiC,GAAG,GAAGV,GAAN,GAAYW,GAAG,GAAGxB,GAAlB,GAAwByB,GAAG,GAAGvB,GAA/C;AACA,eAAKZ,MAAL,CAAY,CAAZ,IAAiBiC,GAAG,GAAGT,GAAN,GAAYU,GAAG,GAAGvB,GAAlB,GAAwBwB,GAAG,GAAGtB,GAA/C;AAEA,eAAKb,MAAL,CAAY,CAAZ,IAAiBoC,GAAG,GAAGd,GAAN,GAAYe,GAAG,GAAGZ,GAAlB,GAAwBa,GAAG,GAAGZ,GAA/C;AACA,eAAK1B,MAAL,CAAY,CAAZ,IAAiBoC,GAAG,GAAGb,GAAN,GAAYc,GAAG,GAAG3B,GAAlB,GAAwB4B,GAAG,GAAG1B,GAA/C;AACA,eAAKZ,MAAL,CAAY,CAAZ,IAAiBoC,GAAG,GAAGZ,GAAN,GAAYa,GAAG,GAAG1B,GAAlB,GAAwB2B,GAAG,GAAGzB,GAA/C;AAEA,eAAKb,MAAL,CAAY,CAAZ,IAAiBuC,GAAG,GAAGjB,GAAN,GAAYkB,GAAG,GAAGf,GAAlB,GAAwBgB,GAAG,GAAGf,GAA/C;AACA,eAAK1B,MAAL,CAAY,CAAZ,IAAiBuC,GAAG,GAAGhB,GAAN,GAAYiB,GAAG,GAAG9B,GAAlB,GAAwB+B,GAAG,GAAG7B,GAA/C;AACA,eAAKZ,MAAL,CAAY,CAAZ,IAAiBuC,GAAG,GAAGf,GAAN,GAAYgB,GAAG,GAAG7B,GAAlB,GAAwB8B,GAAG,GAAG5B,GAA/C;AAEA,iBAAO,IAAP;AACH;;;qCAEYC,M,EAAcvS,M,EAAY;AACnC,cAAMzD,CAAC,GAAGgW,MAAM,CAAChW,CAAjB;AACA,cAAME,CAAC,GAAG8V,MAAM,CAAC9V,CAAjB;;AAEA,cAAIuD,MAAJ,EAAY;AACRA,kBAAM,CAAC+G,EAAP,GAAY,CACRxK,CAAC,GAAG,KAAKkV,MAAL,CAAY,CAAZ,CAAJ,GAAqBhV,CAAC,GAAG,KAAKgV,MAAL,CAAY,CAAZ,CAAzB,GAA0C,KAAKA,MAAL,CAAY,CAAZ,CADlC,EAERlV,CAAC,GAAG,KAAKkV,MAAL,CAAY,CAAZ,CAAJ,GAAqBhV,CAAC,GAAG,KAAKgV,MAAL,CAAY,CAAZ,CAAzB,GAA0C,KAAKA,MAAL,CAAY,CAAZ,CAFlC,CAAZ;AAKA,mBAAOzR,MAAP;AACH,WAPD,MAOO;AACH,mBAAO,IAAI,6CAAJ,CAAS,CACZzD,CAAC,GAAG,KAAKkV,MAAL,CAAY,CAAZ,CAAJ,GAAqBhV,CAAC,GAAG,KAAKgV,MAAL,CAAY,CAAZ,CAAzB,GAA0C,KAAKA,MAAL,CAAY,CAAZ,CAD9B,EAEZlV,CAAC,GAAG,KAAKkV,MAAL,CAAY,CAAZ,CAAJ,GAAqBhV,CAAC,GAAG,KAAKgV,MAAL,CAAY,CAAZ,CAAzB,GAA0C,KAAKA,MAAL,CAAY,CAAZ,CAF9B,CAAT,CAAP;AAIH;AACJ;;;qCAEYc,M,EAAcvS,M,EAAY;AACnC,cAAMzD,CAAC,GAAGgW,MAAM,CAAChW,CAAjB;AACA,cAAME,CAAC,GAAG8V,MAAM,CAAC9V,CAAjB;AACA,cAAM2L,CAAC,GAAGmK,MAAM,CAACnK,CAAjB;;AAEA,cAAIpI,MAAJ,EAAY;AACRA,kBAAM,CAACmU,GAAP,GAAa,CACT5X,CAAC,GAAG,KAAKkV,MAAL,CAAY,CAAZ,CAAJ,GAAqBhV,CAAC,GAAG,KAAKgV,MAAL,CAAY,CAAZ,CAAzB,GAA0CrJ,CAAC,GAAG,KAAKqJ,MAAL,CAAY,CAAZ,CADrC,EAETlV,CAAC,GAAG,KAAKkV,MAAL,CAAY,CAAZ,CAAJ,GAAqBhV,CAAC,GAAG,KAAKgV,MAAL,CAAY,CAAZ,CAAzB,GAA0CrJ,CAAC,GAAG,KAAKqJ,MAAL,CAAY,CAAZ,CAFrC,EAGTlV,CAAC,GAAG,KAAKkV,MAAL,CAAY,CAAZ,CAAJ,GAAqBhV,CAAC,GAAG,KAAKgV,MAAL,CAAY,CAAZ,CAAzB,GAA0CrJ,CAAC,GAAG,KAAKqJ,MAAL,CAAY,CAAZ,CAHrC,CAAb;AAMA,mBAAOzR,MAAP;AACH,WARD,MAQO;AACH,mBAAO,IAAI,6CAAJ,CAAS,CACZzD,CAAC,GAAG,KAAKkV,MAAL,CAAY,CAAZ,CAAJ,GAAqBhV,CAAC,GAAG,KAAKgV,MAAL,CAAY,CAAZ,CAAzB,GAA0CrJ,CAAC,GAAG,KAAKqJ,MAAL,CAAY,CAAZ,CADlC,EAEZlV,CAAC,GAAG,KAAKkV,MAAL,CAAY,CAAZ,CAAJ,GAAqBhV,CAAC,GAAG,KAAKgV,MAAL,CAAY,CAAZ,CAAzB,GAA0CrJ,CAAC,GAAG,KAAKqJ,MAAL,CAAY,CAAZ,CAFlC,EAGZlV,CAAC,GAAG,KAAKkV,MAAL,CAAY,CAAZ,CAAJ,GAAqBhV,CAAC,GAAG,KAAKgV,MAAL,CAAY,CAAZ,CAAzB,GAA0CrJ,CAAC,GAAG,KAAKqJ,MAAL,CAAY,CAAZ,CAHlC,CAAT,CAAP;AAKH;AACJ;;;+BAEMzR,M,EAAY;AACf,cAAIA,MAAJ,EAAY;AACRA,kBAAM,CAAC2R,IAAP,CAAY,CACR,KAAKF,MAAL,CAAY,CAAZ,CADQ,EAER,KAAKA,MAAL,CAAY,CAAZ,CAFQ,EAGR,KAAKA,MAAL,CAAY,CAAZ,CAHQ,EAIR,CAJQ,EAMR,KAAKA,MAAL,CAAY,CAAZ,CANQ,EAOR,KAAKA,MAAL,CAAY,CAAZ,CAPQ,EAQR,KAAKA,MAAL,CAAY,CAAZ,CARQ,EASR,CATQ,EAWR,KAAKA,MAAL,CAAY,CAAZ,CAXQ,EAYR,KAAKA,MAAL,CAAY,CAAZ,CAZQ,EAaR,KAAKA,MAAL,CAAY,CAAZ,CAbQ,EAcR,CAdQ,EAgBR,CAhBQ,EAiBR,CAjBQ,EAkBR,CAlBQ,EAmBR,CAnBQ,CAAZ;AAsBA,mBAAOzR,MAAP;AACH,WAxBD,MAwBO;AACH,mBAAO,IAAI,6CAAJ,CAAS,CACZ,KAAKyR,MAAL,CAAY,CAAZ,CADY,EAEZ,KAAKA,MAAL,CAAY,CAAZ,CAFY,EAGZ,KAAKA,MAAL,CAAY,CAAZ,CAHY,EAIZ,CAJY,EAMZ,KAAKA,MAAL,CAAY,CAAZ,CANY,EAOZ,KAAKA,MAAL,CAAY,CAAZ,CAPY,EAQZ,KAAKA,MAAL,CAAY,CAAZ,CARY,EASZ,CATY,EAWZ,KAAKA,MAAL,CAAY,CAAZ,CAXY,EAYZ,KAAKA,MAAL,CAAY,CAAZ,CAZY,EAaZ,KAAKA,MAAL,CAAY,CAAZ,CAbY,EAcZ,CAdY,EAgBZ,CAhBY,EAiBZ,CAjBY,EAkBZ,CAlBY,EAmBZ,CAnBY,CAAT,CAAP;AAqBH;AACJ;;;iCAEK;AACF,cAAM2C,GAAG,GAAG,KAAK3C,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAM4C,GAAG,GAAG,KAAK5C,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAM6C,GAAG,GAAG,KAAK7C,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAM8C,GAAG,GAAG,KAAK9C,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAM+C,GAAG,GAAG,KAAK/C,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMgD,GAAG,GAAG,KAAKhD,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMiD,GAAG,GAAG,KAAKjD,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMkD,GAAG,GAAG,KAAKlD,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMmD,GAAG,GAAG,KAAKnD,MAAL,CAAY,CAAZ,CAAZ;AAEA,cAAMoD,kBAAkB,GAAGT,GAAG,GAAGI,GAAN,GAAYI,GAAvC;AACA,cAAME,kBAAkB,GAAGN,GAAG,GAAGJ,GAAN,GAAYQ,GAAvC;AACA,cAAMG,kBAAkB,GAAGH,GAAG,GAAGR,GAAN,GAAYI,GAAvC;AACA,cAAMQ,kBAAkB,GAAGZ,GAAG,GAAGI,GAAN,GAAYI,GAAvC;AAEA,cAAIK,YAAY,GAAG,CAAnB;AAEA,cAAIC,wBAAwB,GAAGF,kBAA/B;;AAEA,cAAIH,kBAAkB,GAAGK,wBAAzB,EAAmD;AAC/CA,oCAAwB,GAAGL,kBAA3B;AACAI,wBAAY,GAAG,CAAf;AACH;;AAED,cAAIH,kBAAkB,GAAGI,wBAAzB,EAAmD;AAC/CA,oCAAwB,GAAGJ,kBAA3B;AACAG,wBAAY,GAAG,CAAf;AACH;;AAED,cAAIF,kBAAkB,GAAGG,wBAAzB,EAAmD;AAC/CA,oCAAwB,GAAGH,kBAA3B;AACAE,wBAAY,GAAG,CAAf;AACH;;AAED,cAAME,UAAU,GAAGjY,IAAI,CAACkY,IAAL,CAAUF,wBAAwB,GAAG,CAArC,IAA0C,GAA7D;AACA,cAAMG,IAAI,GAAG,OAAOF,UAApB;AAEA,cAAMnV,MAAM,GAAG,IAAI,6CAAJ,EAAf;;AAEA,kBAAQiV,YAAR;AACI,iBAAK,CAAL;AAEIjV,oBAAM,CAAChC,CAAP,GAAWmX,UAAX;AACAnV,oBAAM,CAACzD,CAAP,GAAW,CAACkY,GAAG,GAAGE,GAAP,IAAcU,IAAzB;AACArV,oBAAM,CAACvD,CAAP,GAAW,CAACiY,GAAG,GAAGJ,GAAP,IAAce,IAAzB;AACArV,oBAAM,CAACoI,CAAP,GAAW,CAACiM,GAAG,GAAGE,GAAP,IAAcc,IAAzB;AAEA;;AAEJ,iBAAK,CAAL;AAEIrV,oBAAM,CAAChC,CAAP,GAAW,CAACyW,GAAG,GAAGE,GAAP,IAAcU,IAAzB;AACArV,oBAAM,CAACzD,CAAP,GAAW4Y,UAAX;AACAnV,oBAAM,CAACvD,CAAP,GAAW,CAAC4X,GAAG,GAAGE,GAAP,IAAcc,IAAzB;AACArV,oBAAM,CAACoI,CAAP,GAAW,CAACsM,GAAG,GAAGJ,GAAP,IAAce,IAAzB;AAEA;;AAEJ,iBAAK,CAAL;AAEIrV,oBAAM,CAAChC,CAAP,GAAW,CAAC0W,GAAG,GAAGJ,GAAP,IAAce,IAAzB;AACArV,oBAAM,CAACzD,CAAP,GAAW,CAAC8X,GAAG,GAAGE,GAAP,IAAcc,IAAzB;AACArV,oBAAM,CAACvD,CAAP,GAAW0Y,UAAX;AACAnV,oBAAM,CAACoI,CAAP,GAAW,CAACqM,GAAG,GAAGE,GAAP,IAAcU,IAAzB;AAEA;;AAEJ,iBAAK,CAAL;AAEIrV,oBAAM,CAAChC,CAAP,GAAW,CAACqW,GAAG,GAAGE,GAAP,IAAcc,IAAzB;AACArV,oBAAM,CAACzD,CAAP,GAAW,CAACmY,GAAG,GAAGJ,GAAP,IAAce,IAAzB;AACArV,oBAAM,CAACvD,CAAP,GAAW,CAACgY,GAAG,GAAGE,GAAP,IAAcU,IAAzB;AACArV,oBAAM,CAACoI,CAAP,GAAW+M,UAAX;AAEA;AAnCR;;AAsCA,iBAAOnV,MAAP;AACH;;;+BAEMuJ,K,EAAe+L,I,EAAU;AAC5B,cAAI/Y,CAAC,GAAG+Y,IAAI,CAAC/Y,CAAb;AACA,cAAIE,CAAC,GAAG6Y,IAAI,CAAC7Y,CAAb;AACA,cAAI2L,CAAC,GAAGkN,IAAI,CAAClN,CAAb;AAEA,cAAI9P,MAAM,GAAG4E,IAAI,CAACkY,IAAL,CAAU7Y,CAAC,GAAGA,CAAJ,GAAQE,CAAC,GAAGA,CAAZ,GAAgB2L,CAAC,GAAGA,CAA9B,CAAb;;AAEA,cAAI,CAAC9P,MAAL,EAAa;AACT,mBAAO,IAAP;AACH;;AAED,cAAIA,MAAM,KAAK,CAAf,EAAkB;AACdA,kBAAM,GAAG,IAAIA,MAAb;AACAiE,aAAC,IAAIjE,MAAL;AACAmE,aAAC,IAAInE,MAAL;AACA8P,aAAC,IAAI9P,MAAL;AACH;;AAED,cAAMid,CAAC,GAAGrY,IAAI,CAACuV,GAAL,CAASlJ,KAAT,CAAV;AACA,cAAMiM,CAAC,GAAGtY,IAAI,CAACsV,GAAL,CAASjJ,KAAT,CAAV;AAEA,cAAMkM,CAAC,GAAG,MAAMD,CAAhB;AAEA,cAAMzC,GAAG,GAAG,KAAKtB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMuB,GAAG,GAAG,KAAKvB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMwB,GAAG,GAAG,KAAKxB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMyB,GAAG,GAAG,KAAKzB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMU,GAAG,GAAG,KAAKV,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMW,GAAG,GAAG,KAAKX,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAM0B,GAAG,GAAG,KAAK1B,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMY,GAAG,GAAG,KAAKZ,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMa,GAAG,GAAG,KAAKb,MAAL,CAAY,EAAZ,CAAZ;AAEA,cAAMiC,GAAG,GAAGnX,CAAC,GAAGA,CAAJ,GAAQkZ,CAAR,GAAYD,CAAxB;AACA,cAAM7B,GAAG,GAAGlX,CAAC,GAAGF,CAAJ,GAAQkZ,CAAR,GAAYrN,CAAC,GAAGmN,CAA5B;AACA,cAAM3B,GAAG,GAAGxL,CAAC,GAAG7L,CAAJ,GAAQkZ,CAAR,GAAYhZ,CAAC,GAAG8Y,CAA5B;AACA,cAAM1B,GAAG,GAAGtX,CAAC,GAAGE,CAAJ,GAAQgZ,CAAR,GAAYrN,CAAC,GAAGmN,CAA5B;AACA,cAAMzB,GAAG,GAAGrX,CAAC,GAAGA,CAAJ,GAAQgZ,CAAR,GAAYD,CAAxB;AACA,cAAMzB,GAAG,GAAG3L,CAAC,GAAG3L,CAAJ,GAAQgZ,CAAR,GAAYlZ,CAAC,GAAGgZ,CAA5B;AACA,cAAMvB,GAAG,GAAGzX,CAAC,GAAG6L,CAAJ,GAAQqN,CAAR,GAAYhZ,CAAC,GAAG8Y,CAA5B;AACA,cAAMtB,GAAG,GAAGxX,CAAC,GAAG2L,CAAJ,GAAQqN,CAAR,GAAYlZ,CAAC,GAAGgZ,CAA5B;AACA,cAAMrB,GAAG,GAAG9L,CAAC,GAAGA,CAAJ,GAAQqN,CAAR,GAAYD,CAAxB;AAEA,eAAK/D,MAAL,CAAY,CAAZ,IAAiBsB,GAAG,GAAGW,GAAN,GAAYR,GAAG,GAAGS,GAAlB,GAAwBR,GAAG,GAAGS,GAA/C;AACA,eAAKnC,MAAL,CAAY,CAAZ,IAAiBuB,GAAG,GAAGU,GAAN,GAAYvB,GAAG,GAAGwB,GAAlB,GAAwBtB,GAAG,GAAGuB,GAA/C;AACA,eAAKnC,MAAL,CAAY,CAAZ,IAAiBwB,GAAG,GAAGS,GAAN,GAAYtB,GAAG,GAAGuB,GAAlB,GAAwBrB,GAAG,GAAGsB,GAA/C;AAEA,eAAKnC,MAAL,CAAY,CAAZ,IAAiBsB,GAAG,GAAGc,GAAN,GAAYX,GAAG,GAAGY,GAAlB,GAAwBX,GAAG,GAAGY,GAA/C;AACA,eAAKtC,MAAL,CAAY,CAAZ,IAAiBuB,GAAG,GAAGa,GAAN,GAAY1B,GAAG,GAAG2B,GAAlB,GAAwBzB,GAAG,GAAG0B,GAA/C;AACA,eAAKtC,MAAL,CAAY,CAAZ,IAAiBwB,GAAG,GAAGY,GAAN,GAAYzB,GAAG,GAAG0B,GAAlB,GAAwBxB,GAAG,GAAGyB,GAA/C;AAEA,eAAKtC,MAAL,CAAY,CAAZ,IAAiBsB,GAAG,GAAGiB,GAAN,GAAYd,GAAG,GAAGe,GAAlB,GAAwBd,GAAG,GAAGe,GAA/C;AACA,eAAKzC,MAAL,CAAY,CAAZ,IAAiBuB,GAAG,GAAGgB,GAAN,GAAY7B,GAAG,GAAG8B,GAAlB,GAAwB5B,GAAG,GAAG6B,GAA/C;AACA,eAAKzC,MAAL,CAAY,CAAZ,IAAiBwB,GAAG,GAAGe,GAAN,GAAY5B,GAAG,GAAG6B,GAAlB,GAAwB3B,GAAG,GAAG4B,GAA/C;AAEA,iBAAO,IAAP;AACH;;;gCAEcxB,E,EAAUC,E,EAAU3S,M,EAAY;AAC3C,cAAM+S,GAAG,GAAGL,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMiB,GAAG,GAAGN,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMkB,GAAG,GAAGP,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMmB,GAAG,GAAGR,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMI,GAAG,GAAGO,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMK,GAAG,GAAGM,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMoB,GAAG,GAAGT,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMM,GAAG,GAAGK,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMO,GAAG,GAAGI,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AAEA,cAAM2B,GAAG,GAAGf,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAZ;AACA,cAAM4B,GAAG,GAAGhB,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAZ;AACA,cAAM6B,GAAG,GAAGjB,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAZ;AACA,cAAM8B,GAAG,GAAGlB,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAZ;AACA,cAAM+B,GAAG,GAAGnB,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMgC,GAAG,GAAGpB,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMiC,GAAG,GAAGrB,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMkC,GAAG,GAAGtB,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMmC,GAAG,GAAGvB,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAZ;;AAEA,cAAI/R,MAAJ,EAAY;AACRA,kBAAM,CAAC2R,IAAP,CAAY,CACR+B,GAAG,GAAGX,GAAN,GAAYY,GAAG,GAAGT,GAAlB,GAAwBU,GAAG,GAAGT,GADtB,EAERO,GAAG,GAAGV,GAAN,GAAYW,GAAG,GAAGxB,GAAlB,GAAwByB,GAAG,GAAGvB,GAFtB,EAGRqB,GAAG,GAAGT,GAAN,GAAYU,GAAG,GAAGvB,GAAlB,GAAwBwB,GAAG,GAAGtB,GAHtB,EAKRuB,GAAG,GAAGd,GAAN,GAAYe,GAAG,GAAGZ,GAAlB,GAAwBa,GAAG,GAAGZ,GALtB,EAMRU,GAAG,GAAGb,GAAN,GAAYc,GAAG,GAAG3B,GAAlB,GAAwB4B,GAAG,GAAG1B,GANtB,EAORwB,GAAG,GAAGZ,GAAN,GAAYa,GAAG,GAAG1B,GAAlB,GAAwB2B,GAAG,GAAGzB,GAPtB,EASR0B,GAAG,GAAGjB,GAAN,GAAYkB,GAAG,GAAGf,GAAlB,GAAwBgB,GAAG,GAAGf,GATtB,EAURa,GAAG,GAAGhB,GAAN,GAAYiB,GAAG,GAAG9B,GAAlB,GAAwB+B,GAAG,GAAG7B,GAVtB,EAWR2B,GAAG,GAAGf,GAAN,GAAYgB,GAAG,GAAG7B,GAAlB,GAAwB8B,GAAG,GAAG5B,GAXtB,CAAZ;AAcA,mBAAOtS,MAAP;AACH,WAhBD,MAgBO;AACH,mBAAO,IAAI8S,IAAJ,CAAS,CACZY,GAAG,GAAGX,GAAN,GAAYY,GAAG,GAAGT,GAAlB,GAAwBU,GAAG,GAAGT,GADlB,EAEZO,GAAG,GAAGV,GAAN,GAAYW,GAAG,GAAGxB,GAAlB,GAAwByB,GAAG,GAAGvB,GAFlB,EAGZqB,GAAG,GAAGT,GAAN,GAAYU,GAAG,GAAGvB,GAAlB,GAAwBwB,GAAG,GAAGtB,GAHlB,EAKZuB,GAAG,GAAGd,GAAN,GAAYe,GAAG,GAAGZ,GAAlB,GAAwBa,GAAG,GAAGZ,GALlB,EAMZU,GAAG,GAAGb,GAAN,GAAYc,GAAG,GAAG3B,GAAlB,GAAwB4B,GAAG,GAAG1B,GANlB,EAOZwB,GAAG,GAAGZ,GAAN,GAAYa,GAAG,GAAG1B,GAAlB,GAAwB2B,GAAG,GAAGzB,GAPlB,EASZ0B,GAAG,GAAGjB,GAAN,GAAYkB,GAAG,GAAGf,GAAlB,GAAwBgB,GAAG,GAAGf,GATlB,EAUZa,GAAG,GAAGhB,GAAN,GAAYiB,GAAG,GAAG9B,GAAlB,GAAwB+B,GAAG,GAAG7B,GAVlB,EAWZ2B,GAAG,GAAGf,GAAN,GAAYgB,GAAG,GAAG7B,GAAlB,GAAwB8B,GAAG,GAAG5B,GAXlB,CAAT,CAAP;AAaH;AACJ;;;;;;AAlde,SAAAM,QAAA,GAAW,IAAIE,IAAJ,GAAWD,WAAX,EAAX;;;;;;;;;;;;;;;;ACjBpB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAMqB6C,I;;;AAEjB,oBAAYjE,MAAZ,EAA+B;AAAA;;AAMvB,aAAAA,MAAA,GAAS,IAAIC,YAAJ,CAAiB,EAAjB,CAAT;;AALJ,YAAID,MAAM,KAAKnS,SAAf,EAA0B;AACtB,eAAKqS,IAAL,CAAUF,MAAV;AACH;AACJ;;;;2BAME/Y,K,EAAa;AACZ,iBAAO,KAAK+Y,MAAL,CAAY/Y,KAAZ,CAAP;AACH;;;6BAEI+Y,M,EAAgB;AACjB,eAAK,IAAIrZ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AACzB,iBAAKqZ,MAAL,CAAYrZ,CAAZ,IAAiBqZ,MAAM,CAACrZ,CAAD,CAAvB;AACH;;AAED,iBAAO,IAAP;AACH;;;gCAEI;AACD,eAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AACzB,iBAAKqZ,MAAL,CAAYrZ,CAAZ,IAAiB,CAAjB;AACH;AACJ;;;6BAEIwZ,I,EAAW;AACZ,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI8D,IAAJ,EAAP;AAAmB;;AAEhC,eAAK,IAAItd,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AACzBwZ,gBAAI,CAACH,MAAL,CAAYrZ,CAAZ,IAAiB,KAAKqZ,MAAL,CAAYrZ,CAAZ,CAAjB;AACH;;AAED,iBAAOwZ,IAAP;AACH;;;8BAEE;AACC,cAAMlB,IAAI,GAAa,EAAvB;;AACA,eAAK,IAAItY,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AACzBsY,gBAAI,CAACtY,CAAD,CAAJ,GAAU,KAAKqZ,MAAL,CAAYrZ,CAAZ,CAAV;AACH;;AAED,iBAAOsY,IAAP;AACH;;;4BAEGhY,K,EAAa;AACb,iBAAO,CACH,KAAK+Y,MAAL,CAAY/Y,KAAK,GAAG,CAAR,GAAY,CAAxB,CADG,EAEH,KAAK+Y,MAAL,CAAY/Y,KAAK,GAAG,CAAR,GAAY,CAAxB,CAFG,EAGH,KAAK+Y,MAAL,CAAY/Y,KAAK,GAAG,CAAR,GAAY,CAAxB,CAHG,EAIH,KAAK+Y,MAAL,CAAY/Y,KAAK,GAAG,CAAR,GAAY,CAAxB,CAJG,CAAP;AAMH;;;4BAEGA,K,EAAa;AACb,iBAAO,CACH,KAAK+Y,MAAL,CAAY/Y,KAAZ,CADG,EAEH,KAAK+Y,MAAL,CAAY/Y,KAAK,GAAG,CAApB,CAFG,EAGH,KAAK+Y,MAAL,CAAY/Y,KAAK,GAAG,CAApB,CAHG,EAIH,KAAK+Y,MAAL,CAAY/Y,KAAK,GAAG,EAApB,CAJG,CAAP;AAMH;;;+BAEMmZ,M,EAAiC;AAAA,cAAnBC,SAAmB,uEAAP,kDAAO;;AACpC,eAAK,IAAI1Z,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AACzB,gBAAI8E,IAAI,CAAC8H,GAAL,CAAS,KAAKyM,MAAL,CAAYrZ,CAAZ,IAAiByZ,MAAM,CAACE,EAAP,CAAU3Z,CAAV,CAA1B,IAA0C0Z,SAA9C,EAAyD;AACrD,qBAAO,KAAP;AACH;AACJ;;AAED,iBAAO,IAAP;AACH;;;sCAEU;AACP,cAAMiB,GAAG,GAAG,KAAKtB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMuB,GAAG,GAAG,KAAKvB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMwB,GAAG,GAAG,KAAKxB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMkE,GAAG,GAAG,KAAKlE,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMyB,GAAG,GAAG,KAAKzB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMU,GAAG,GAAG,KAAKV,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMW,GAAG,GAAG,KAAKX,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMmE,GAAG,GAAG,KAAKnE,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAM0B,GAAG,GAAG,KAAK1B,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMY,GAAG,GAAG,KAAKZ,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMa,GAAG,GAAG,KAAKb,MAAL,CAAY,EAAZ,CAAZ;AACA,cAAMoE,GAAG,GAAG,KAAKpE,MAAL,CAAY,EAAZ,CAAZ;AACA,cAAMqE,GAAG,GAAG,KAAKrE,MAAL,CAAY,EAAZ,CAAZ;AACA,cAAMsE,GAAG,GAAG,KAAKtE,MAAL,CAAY,EAAZ,CAAZ;AACA,cAAMuE,GAAG,GAAG,KAAKvE,MAAL,CAAY,EAAZ,CAAZ;AACA,cAAMwE,GAAG,GAAG,KAAKxE,MAAL,CAAY,EAAZ,CAAZ;AAEA,cAAMyE,KAAK,GAAGnD,GAAG,GAAGZ,GAAN,GAAYa,GAAG,GAAGE,GAAhC;AACA,cAAME,KAAK,GAAGL,GAAG,GAAGX,GAAN,GAAYa,GAAG,GAAGC,GAAhC;AACA,cAAMiD,KAAK,GAAGpD,GAAG,GAAG6C,GAAN,GAAYD,GAAG,GAAGzC,GAAhC;AACA,cAAMkD,KAAK,GAAGpD,GAAG,GAAGZ,GAAN,GAAYa,GAAG,GAAGd,GAAhC;AACA,cAAMkE,KAAK,GAAGrD,GAAG,GAAG4C,GAAN,GAAYD,GAAG,GAAGxD,GAAhC;AACA,cAAMmE,KAAK,GAAGrD,GAAG,GAAG2C,GAAN,GAAYD,GAAG,GAAGvD,GAAhC;AACA,cAAMmE,KAAK,GAAGpD,GAAG,GAAG4C,GAAN,GAAY1D,GAAG,GAAGyD,GAAhC;AACA,cAAMU,KAAK,GAAGrD,GAAG,GAAG6C,GAAN,GAAY1D,GAAG,GAAGwD,GAAhC;AACA,cAAMW,KAAK,GAAGtD,GAAG,GAAG8C,GAAN,GAAYJ,GAAG,GAAGC,GAAhC;AACA,cAAMY,KAAK,GAAGrE,GAAG,GAAG2D,GAAN,GAAY1D,GAAG,GAAGyD,GAAhC;AACA,cAAMY,KAAK,GAAGtE,GAAG,GAAG4D,GAAN,GAAYJ,GAAG,GAAGE,GAAhC;AACA,cAAM1C,KAAK,GAAGf,GAAG,GAAG2D,GAAN,GAAYJ,GAAG,GAAGG,GAAhC;AAEA,iBAAQE,KAAK,GAAG7C,KAAR,GAAgBD,KAAK,GAAGuD,KAAxB,GAAgCR,KAAK,GAAGO,KAAxC,GAAgDN,KAAK,GAAGK,KAAxD,GAAgEJ,KAAK,GAAGG,KAAxE,GAAgFF,KAAK,GAAGC,KAAhG;AACH;;;sCAEU;AACP,eAAK9E,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAjB;AACA,eAAKA,MAAL,CAAY,EAAZ,IAAkB,CAAlB;AACA,eAAKA,MAAL,CAAY,EAAZ,IAAkB,CAAlB;AACA,eAAKA,MAAL,CAAY,EAAZ,IAAkB,CAAlB;AACA,eAAKA,MAAL,CAAY,EAAZ,IAAkB,CAAlB;AACA,eAAKA,MAAL,CAAY,EAAZ,IAAkB,CAAlB;AACA,eAAKA,MAAL,CAAY,EAAZ,IAAkB,CAAlB;AAEA,iBAAO,IAAP;AACH;;;oCAEQ;AACL,cAAM8B,MAAM,GAAG,KAAK9B,MAAL,CAAY,CAAZ,CAAf;AACA,cAAM+B,MAAM,GAAG,KAAK/B,MAAL,CAAY,CAAZ,CAAf;AACA,cAAMmF,MAAM,GAAG,KAAKnF,MAAL,CAAY,CAAZ,CAAf;AACA,cAAMgC,MAAM,GAAG,KAAKhC,MAAL,CAAY,CAAZ,CAAf;AACA,cAAMoF,MAAM,GAAG,KAAKpF,MAAL,CAAY,CAAZ,CAAf;AACA,cAAMqF,MAAM,GAAG,KAAKrF,MAAL,CAAY,EAAZ,CAAf;AAEA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,KAAKA,MAAL,CAAY,CAAZ,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,KAAKA,MAAL,CAAY,CAAZ,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,KAAKA,MAAL,CAAY,EAAZ,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB8B,MAAjB;AACA,eAAK9B,MAAL,CAAY,CAAZ,IAAiB,KAAKA,MAAL,CAAY,CAAZ,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB,KAAKA,MAAL,CAAY,EAAZ,CAAjB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiB+B,MAAjB;AACA,eAAK/B,MAAL,CAAY,CAAZ,IAAiBgC,MAAjB;AACA,eAAKhC,MAAL,CAAY,EAAZ,IAAkB,KAAKA,MAAL,CAAY,EAAZ,CAAlB;AACA,eAAKA,MAAL,CAAY,EAAZ,IAAkBmF,MAAlB;AACA,eAAKnF,MAAL,CAAY,EAAZ,IAAkBoF,MAAlB;AACA,eAAKpF,MAAL,CAAY,EAAZ,IAAkBqF,MAAlB;AAEA,iBAAO,IAAP;AACH;;;kCAEM;AACH,cAAM/D,GAAG,GAAG,KAAKtB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMuB,GAAG,GAAG,KAAKvB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMwB,GAAG,GAAG,KAAKxB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMkE,GAAG,GAAG,KAAKlE,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMyB,GAAG,GAAG,KAAKzB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMU,GAAG,GAAG,KAAKV,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMW,GAAG,GAAG,KAAKX,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMmE,GAAG,GAAG,KAAKnE,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAM0B,GAAG,GAAG,KAAK1B,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMY,GAAG,GAAG,KAAKZ,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMa,GAAG,GAAG,KAAKb,MAAL,CAAY,EAAZ,CAAZ;AACA,cAAMoE,GAAG,GAAG,KAAKpE,MAAL,CAAY,EAAZ,CAAZ;AACA,cAAMqE,GAAG,GAAG,KAAKrE,MAAL,CAAY,EAAZ,CAAZ;AACA,cAAMsE,GAAG,GAAG,KAAKtE,MAAL,CAAY,EAAZ,CAAZ;AACA,cAAMuE,GAAG,GAAG,KAAKvE,MAAL,CAAY,EAAZ,CAAZ;AACA,cAAMwE,GAAG,GAAG,KAAKxE,MAAL,CAAY,EAAZ,CAAZ;AAEA,cAAMyE,KAAK,GAAGnD,GAAG,GAAGZ,GAAN,GAAYa,GAAG,GAAGE,GAAhC;AACA,cAAME,KAAK,GAAGL,GAAG,GAAGX,GAAN,GAAYa,GAAG,GAAGC,GAAhC;AACA,cAAMiD,KAAK,GAAGpD,GAAG,GAAG6C,GAAN,GAAYD,GAAG,GAAGzC,GAAhC;AACA,cAAMkD,KAAK,GAAGpD,GAAG,GAAGZ,GAAN,GAAYa,GAAG,GAAGd,GAAhC;AACA,cAAMkE,KAAK,GAAGrD,GAAG,GAAG4C,GAAN,GAAYD,GAAG,GAAGxD,GAAhC;AACA,cAAMmE,KAAK,GAAGrD,GAAG,GAAG2C,GAAN,GAAYD,GAAG,GAAGvD,GAAhC;AACA,cAAMmE,KAAK,GAAGpD,GAAG,GAAG4C,GAAN,GAAY1D,GAAG,GAAGyD,GAAhC;AACA,cAAMU,KAAK,GAAGrD,GAAG,GAAG6C,GAAN,GAAY1D,GAAG,GAAGwD,GAAhC;AACA,cAAMW,KAAK,GAAGtD,GAAG,GAAG8C,GAAN,GAAYJ,GAAG,GAAGC,GAAhC;AACA,cAAMY,KAAK,GAAGrE,GAAG,GAAG2D,GAAN,GAAY1D,GAAG,GAAGyD,GAAhC;AACA,cAAMY,KAAK,GAAGtE,GAAG,GAAG4D,GAAN,GAAYJ,GAAG,GAAGE,GAAhC;AACA,cAAM1C,KAAK,GAAGf,GAAG,GAAG2D,GAAN,GAAYJ,GAAG,GAAGG,GAAhC;AAEA,cAAI/D,GAAG,GAAIiE,KAAK,GAAG7C,KAAR,GAAgBD,KAAK,GAAGuD,KAAxB,GAAgCR,KAAK,GAAGO,KAAxC,GAAgDN,KAAK,GAAGK,KAAxD,GAAgEJ,KAAK,GAAGG,KAAxE,GAAgFF,KAAK,GAAGC,KAAnG;;AAEA,cAAI,CAACtE,GAAL,EAAU;AACN,mBAAO,IAAP;AACH;;AAEDA,aAAG,GAAG,MAAMA,GAAZ;AAEA,eAAKR,MAAL,CAAY,CAAZ,IAAiB,CAACU,GAAG,GAAGkB,KAAN,GAAcjB,GAAG,GAAGuE,KAApB,GAA4Bf,GAAG,GAAGc,KAAnC,IAA4CzE,GAA7D;AACA,eAAKR,MAAL,CAAY,CAAZ,IAAiB,CAAC,CAACuB,GAAD,GAAOK,KAAP,GAAeJ,GAAG,GAAG0D,KAArB,GAA6BhB,GAAG,GAAGe,KAApC,IAA6CzE,GAA9D;AACA,eAAKR,MAAL,CAAY,CAAZ,IAAiB,CAACsE,GAAG,GAAGO,KAAN,GAAcN,GAAG,GAAGK,KAApB,GAA4BJ,GAAG,GAAGG,KAAnC,IAA4CnE,GAA7D;AACA,eAAKR,MAAL,CAAY,CAAZ,IAAiB,CAAC,CAACY,GAAD,GAAOiE,KAAP,GAAehE,GAAG,GAAG+D,KAArB,GAA6BR,GAAG,GAAGO,KAApC,IAA6CnE,GAA9D;AACA,eAAKR,MAAL,CAAY,CAAZ,IAAiB,CAAC,CAACyB,GAAD,GAAOG,KAAP,GAAejB,GAAG,GAAGqE,KAArB,GAA6Bb,GAAG,GAAGY,KAApC,IAA6CvE,GAA9D;AACA,eAAKR,MAAL,CAAY,CAAZ,IAAiB,CAACsB,GAAG,GAAGM,KAAN,GAAcJ,GAAG,GAAGwD,KAApB,GAA4Bd,GAAG,GAAGa,KAAnC,IAA4CvE,GAA7D;AACA,eAAKR,MAAL,CAAY,CAAZ,IAAiB,CAAC,CAACqE,GAAD,GAAOQ,KAAP,GAAeN,GAAG,GAAGG,KAArB,GAA6BF,GAAG,GAAG7C,KAApC,IAA6CnB,GAA9D;AACA,eAAKR,MAAL,CAAY,CAAZ,IAAiB,CAAC0B,GAAG,GAAGmD,KAAN,GAAchE,GAAG,GAAG6D,KAApB,GAA4BN,GAAG,GAAGzC,KAAnC,IAA4CnB,GAA7D;AACA,eAAKR,MAAL,CAAY,CAAZ,IAAiB,CAACyB,GAAG,GAAGyD,KAAN,GAAcxE,GAAG,GAAGsE,KAApB,GAA4Bb,GAAG,GAAGW,KAAnC,IAA4CtE,GAA7D;AACA,eAAKR,MAAL,CAAY,CAAZ,IAAiB,CAAC,CAACsB,GAAD,GAAO4D,KAAP,GAAe3D,GAAG,GAAGyD,KAArB,GAA6Bd,GAAG,GAAGY,KAApC,IAA6CtE,GAA9D;AACA,eAAKR,MAAL,CAAY,EAAZ,IAAkB,CAACqE,GAAG,GAAGO,KAAN,GAAcN,GAAG,GAAGI,KAApB,GAA4BF,GAAG,GAAGC,KAAnC,IAA4CjE,GAA9D;AACA,eAAKR,MAAL,CAAY,EAAZ,IAAkB,CAAC,CAAC0B,GAAD,GAAOkD,KAAP,GAAehE,GAAG,GAAG8D,KAArB,GAA6BN,GAAG,GAAGK,KAApC,IAA6CjE,GAA/D;AACA,eAAKR,MAAL,CAAY,EAAZ,IAAkB,CAAC,CAACyB,GAAD,GAAOwD,KAAP,GAAevE,GAAG,GAAGqE,KAArB,GAA6BpE,GAAG,GAAGmE,KAApC,IAA6CtE,GAA/D;AACA,eAAKR,MAAL,CAAY,EAAZ,IAAkB,CAACsB,GAAG,GAAG2D,KAAN,GAAc1D,GAAG,GAAGwD,KAApB,GAA4BvD,GAAG,GAAGsD,KAAnC,IAA4CtE,GAA9D;AACA,eAAKR,MAAL,CAAY,EAAZ,IAAkB,CAAC,CAACqE,GAAD,GAAOM,KAAP,GAAeL,GAAG,GAAG3C,KAArB,GAA6B4C,GAAG,GAAGE,KAApC,IAA6CjE,GAA/D;AACA,eAAKR,MAAL,CAAY,EAAZ,IAAkB,CAAC0B,GAAG,GAAGiD,KAAN,GAAc/D,GAAG,GAAGe,KAApB,GAA4Bd,GAAG,GAAG4D,KAAnC,IAA4CjE,GAA9D;AAEA,iBAAO,IAAP;AACH;;;iCAEQJ,M,EAAY;AACjB,cAAMkB,GAAG,GAAG,KAAKtB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMuB,GAAG,GAAG,KAAKvB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMwB,GAAG,GAAG,KAAKxB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMkE,GAAG,GAAG,KAAKlE,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMyB,GAAG,GAAG,KAAKzB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMU,GAAG,GAAG,KAAKV,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMW,GAAG,GAAG,KAAKX,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMmE,GAAG,GAAG,KAAKnE,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAM0B,GAAG,GAAG,KAAK1B,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMY,GAAG,GAAG,KAAKZ,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMa,GAAG,GAAG,KAAKb,MAAL,CAAY,EAAZ,CAAZ;AACA,cAAMoE,GAAG,GAAG,KAAKpE,MAAL,CAAY,EAAZ,CAAZ;AACA,cAAMqE,GAAG,GAAG,KAAKrE,MAAL,CAAY,EAAZ,CAAZ;AACA,cAAMsE,GAAG,GAAG,KAAKtE,MAAL,CAAY,EAAZ,CAAZ;AACA,cAAMuE,GAAG,GAAG,KAAKvE,MAAL,CAAY,EAAZ,CAAZ;AACA,cAAMwE,GAAG,GAAG,KAAKxE,MAAL,CAAY,EAAZ,CAAZ;AAEA,cAAIsF,EAAE,GAAGlF,MAAM,CAACE,EAAP,CAAU,CAAV,CAAT;AACA,cAAIiF,EAAE,GAAGnF,MAAM,CAACE,EAAP,CAAU,CAAV,CAAT;AACA,cAAIkF,EAAE,GAAGpF,MAAM,CAACE,EAAP,CAAU,CAAV,CAAT;AACA,cAAImF,EAAE,GAAGrF,MAAM,CAACE,EAAP,CAAU,CAAV,CAAT;AAEA,eAAKN,MAAL,CAAY,CAAZ,IAAiBsF,EAAE,GAAGhE,GAAL,GAAWiE,EAAE,GAAG9D,GAAhB,GAAsB+D,EAAE,GAAG9D,GAA3B,GAAiC+D,EAAE,GAAGpB,GAAvD;AACA,eAAKrE,MAAL,CAAY,CAAZ,IAAiBsF,EAAE,GAAG/D,GAAL,GAAWgE,EAAE,GAAG7E,GAAhB,GAAsB8E,EAAE,GAAG5E,GAA3B,GAAiC6E,EAAE,GAAGnB,GAAvD;AACA,eAAKtE,MAAL,CAAY,CAAZ,IAAiBsF,EAAE,GAAG9D,GAAL,GAAW+D,EAAE,GAAG5E,GAAhB,GAAsB6E,EAAE,GAAG3E,GAA3B,GAAiC4E,EAAE,GAAGlB,GAAvD;AACA,eAAKvE,MAAL,CAAY,CAAZ,IAAiBsF,EAAE,GAAGpB,GAAL,GAAWqB,EAAE,GAAGpB,GAAhB,GAAsBqB,EAAE,GAAGpB,GAA3B,GAAiCqB,EAAE,GAAGjB,GAAvD;AAEAc,YAAE,GAAGlF,MAAM,CAACE,EAAP,CAAU,CAAV,CAAL;AACAiF,YAAE,GAAGnF,MAAM,CAACE,EAAP,CAAU,CAAV,CAAL;AACAkF,YAAE,GAAGpF,MAAM,CAACE,EAAP,CAAU,CAAV,CAAL;AACAmF,YAAE,GAAGrF,MAAM,CAACE,EAAP,CAAU,CAAV,CAAL;AAEA,eAAKN,MAAL,CAAY,CAAZ,IAAiBsF,EAAE,GAAGhE,GAAL,GAAWiE,EAAE,GAAG9D,GAAhB,GAAsB+D,EAAE,GAAG9D,GAA3B,GAAiC+D,EAAE,GAAGpB,GAAvD;AACA,eAAKrE,MAAL,CAAY,CAAZ,IAAiBsF,EAAE,GAAG/D,GAAL,GAAWgE,EAAE,GAAG7E,GAAhB,GAAsB8E,EAAE,GAAG5E,GAA3B,GAAiC6E,EAAE,GAAGnB,GAAvD;AACA,eAAKtE,MAAL,CAAY,CAAZ,IAAiBsF,EAAE,GAAG9D,GAAL,GAAW+D,EAAE,GAAG5E,GAAhB,GAAsB6E,EAAE,GAAG3E,GAA3B,GAAiC4E,EAAE,GAAGlB,GAAvD;AACA,eAAKvE,MAAL,CAAY,CAAZ,IAAiBsF,EAAE,GAAGpB,GAAL,GAAWqB,EAAE,GAAGpB,GAAhB,GAAsBqB,EAAE,GAAGpB,GAA3B,GAAiCqB,EAAE,GAAGjB,GAAvD;AAEAc,YAAE,GAAGlF,MAAM,CAACE,EAAP,CAAU,CAAV,CAAL;AACAiF,YAAE,GAAGnF,MAAM,CAACE,EAAP,CAAU,CAAV,CAAL;AACAkF,YAAE,GAAGpF,MAAM,CAACE,EAAP,CAAU,EAAV,CAAL;AACAmF,YAAE,GAAGrF,MAAM,CAACE,EAAP,CAAU,EAAV,CAAL;AAEA,eAAKN,MAAL,CAAY,CAAZ,IAAiBsF,EAAE,GAAGhE,GAAL,GAAWiE,EAAE,GAAG9D,GAAhB,GAAsB+D,EAAE,GAAG9D,GAA3B,GAAiC+D,EAAE,GAAGpB,GAAvD;AACA,eAAKrE,MAAL,CAAY,CAAZ,IAAiBsF,EAAE,GAAG/D,GAAL,GAAWgE,EAAE,GAAG7E,GAAhB,GAAsB8E,EAAE,GAAG5E,GAA3B,GAAiC6E,EAAE,GAAGnB,GAAvD;AACA,eAAKtE,MAAL,CAAY,EAAZ,IAAkBsF,EAAE,GAAG9D,GAAL,GAAW+D,EAAE,GAAG5E,GAAhB,GAAsB6E,EAAE,GAAG3E,GAA3B,GAAiC4E,EAAE,GAAGlB,GAAxD;AACA,eAAKvE,MAAL,CAAY,EAAZ,IAAkBsF,EAAE,GAAGpB,GAAL,GAAWqB,EAAE,GAAGpB,GAAhB,GAAsBqB,EAAE,GAAGpB,GAA3B,GAAiCqB,EAAE,GAAGjB,GAAxD;AAEAc,YAAE,GAAGlF,MAAM,CAACE,EAAP,CAAU,EAAV,CAAL;AACAiF,YAAE,GAAGnF,MAAM,CAACE,EAAP,CAAU,EAAV,CAAL;AACAkF,YAAE,GAAGpF,MAAM,CAACE,EAAP,CAAU,EAAV,CAAL;AACAmF,YAAE,GAAGrF,MAAM,CAACE,EAAP,CAAU,EAAV,CAAL;AAEA,eAAKN,MAAL,CAAY,EAAZ,IAAkBsF,EAAE,GAAGhE,GAAL,GAAWiE,EAAE,GAAG9D,GAAhB,GAAsB+D,EAAE,GAAG9D,GAA3B,GAAiC+D,EAAE,GAAGpB,GAAxD;AACA,eAAKrE,MAAL,CAAY,EAAZ,IAAkBsF,EAAE,GAAG/D,GAAL,GAAWgE,EAAE,GAAG7E,GAAhB,GAAsB8E,EAAE,GAAG5E,GAA3B,GAAiC6E,EAAE,GAAGnB,GAAxD;AACA,eAAKtE,MAAL,CAAY,EAAZ,IAAkBsF,EAAE,GAAG9D,GAAL,GAAW+D,EAAE,GAAG5E,GAAhB,GAAsB6E,EAAE,GAAG3E,GAA3B,GAAiC4E,EAAE,GAAGlB,GAAxD;AACA,eAAKvE,MAAL,CAAY,EAAZ,IAAkBsF,EAAE,GAAGpB,GAAL,GAAWqB,EAAE,GAAGpB,GAAhB,GAAsBqB,EAAE,GAAGpB,GAA3B,GAAiCqB,EAAE,GAAGjB,GAAxD;AAEA,iBAAO,IAAP;AACH;;;qCAEY1D,M,EAAY;AACrB,cAAMhW,CAAC,GAAGgW,MAAM,CAAChW,CAAjB;AACA,cAAME,CAAC,GAAG8V,MAAM,CAAC9V,CAAjB;AACA,cAAM2L,CAAC,GAAGmK,MAAM,CAACnK,CAAjB;AAEA,iBAAO,IAAI,6CAAJ,CAAS,CACZ,KAAKqJ,MAAL,CAAY,CAAZ,IAAiBlV,CAAjB,GAAqB,KAAKkV,MAAL,CAAY,CAAZ,IAAiBhV,CAAtC,GAA0C,KAAKgV,MAAL,CAAY,CAAZ,IAAiBrJ,CAA3D,GAA+D,KAAKqJ,MAAL,CAAY,EAAZ,CADnD,EAEZ,KAAKA,MAAL,CAAY,CAAZ,IAAiBlV,CAAjB,GAAqB,KAAKkV,MAAL,CAAY,CAAZ,IAAiBhV,CAAtC,GAA0C,KAAKgV,MAAL,CAAY,CAAZ,IAAiBrJ,CAA3D,GAA+D,KAAKqJ,MAAL,CAAY,EAAZ,CAFnD,EAGZ,KAAKA,MAAL,CAAY,CAAZ,IAAiBlV,CAAjB,GAAqB,KAAKkV,MAAL,CAAY,CAAZ,IAAiBhV,CAAtC,GAA0C,KAAKgV,MAAL,CAAY,EAAZ,IAAkBrJ,CAA5D,GAAgE,KAAKqJ,MAAL,CAAY,EAAZ,CAHpD,CAAT,CAAP;AAKH;;;qCAEYc,M,EAAcX,I,EAAW;AAClC,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI,6CAAJ,EAAP;AAAmB;;AAEhC,cAAMrV,CAAC,GAAGgW,MAAM,CAAChW,CAAjB;AACA,cAAME,CAAC,GAAG8V,MAAM,CAAC9V,CAAjB;AACA,cAAM2L,CAAC,GAAGmK,MAAM,CAACnK,CAAjB;AACA,cAAMpK,CAAC,GAAGuU,MAAM,CAACvU,CAAjB;AAEA4T,cAAI,CAACrV,CAAL,GAAS,KAAKkV,MAAL,CAAY,CAAZ,IAAiBlV,CAAjB,GAAqB,KAAKkV,MAAL,CAAY,CAAZ,IAAiBhV,CAAtC,GAA0C,KAAKgV,MAAL,CAAY,CAAZ,IAAiBrJ,CAA3D,GAA+D,KAAKqJ,MAAL,CAAY,EAAZ,IAAkBzT,CAA1F;AACA4T,cAAI,CAACnV,CAAL,GAAS,KAAKgV,MAAL,CAAY,CAAZ,IAAiBlV,CAAjB,GAAqB,KAAKkV,MAAL,CAAY,CAAZ,IAAiBhV,CAAtC,GAA0C,KAAKgV,MAAL,CAAY,CAAZ,IAAiBrJ,CAA3D,GAA+D,KAAKqJ,MAAL,CAAY,EAAZ,IAAkBzT,CAA1F;AACA4T,cAAI,CAACxJ,CAAL,GAAS,KAAKqJ,MAAL,CAAY,CAAZ,IAAiBlV,CAAjB,GAAqB,KAAKkV,MAAL,CAAY,CAAZ,IAAiBhV,CAAtC,GAA0C,KAAKgV,MAAL,CAAY,EAAZ,IAAkBrJ,CAA5D,GAAgE,KAAKqJ,MAAL,CAAY,EAAZ,IAAkBzT,CAA3F;AACA4T,cAAI,CAAC5T,CAAL,GAAS,KAAKyT,MAAL,CAAY,CAAZ,IAAiBlV,CAAjB,GAAqB,KAAKkV,MAAL,CAAY,CAAZ,IAAiBhV,CAAtC,GAA0C,KAAKgV,MAAL,CAAY,EAAZ,IAAkBrJ,CAA5D,GAAgE,KAAKqJ,MAAL,CAAY,EAAZ,IAAkBzT,CAA3F;AAEA,iBAAO4T,IAAP;AACH;;;iCAEK;AACF,iBAAO,IAAI,6CAAJ,CAAS,CACZ,KAAKH,MAAL,CAAY,CAAZ,CADY,EAEZ,KAAKA,MAAL,CAAY,CAAZ,CAFY,EAGZ,KAAKA,MAAL,CAAY,CAAZ,CAHY,EAIZ,KAAKA,MAAL,CAAY,CAAZ,CAJY,EAKZ,KAAKA,MAAL,CAAY,CAAZ,CALY,EAMZ,KAAKA,MAAL,CAAY,CAAZ,CANY,EAOZ,KAAKA,MAAL,CAAY,CAAZ,CAPY,EAQZ,KAAKA,MAAL,CAAY,CAAZ,CARY,EASZ,KAAKA,MAAL,CAAY,EAAZ,CATY,CAAT,CAAP;AAWH;;;wCAEY;AACT,cAAMsB,GAAG,GAAG,KAAKtB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMuB,GAAG,GAAG,KAAKvB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMwB,GAAG,GAAG,KAAKxB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMyB,GAAG,GAAG,KAAKzB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMU,GAAG,GAAG,KAAKV,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMW,GAAG,GAAG,KAAKX,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAM0B,GAAG,GAAG,KAAK1B,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMY,GAAG,GAAG,KAAKZ,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMa,GAAG,GAAG,KAAKb,MAAL,CAAY,EAAZ,CAAZ;AAEA,cAAM2B,KAAK,GAAGd,GAAG,GAAGH,GAAN,GAAYC,GAAG,GAAGC,GAAhC;AACA,cAAMgB,KAAK,GAAG,CAACf,GAAD,GAAOY,GAAP,GAAad,GAAG,GAAGe,GAAjC;AACA,cAAMG,KAAK,GAAGjB,GAAG,GAAGa,GAAN,GAAYf,GAAG,GAAGgB,GAAhC;AAEA,cAAIlB,GAAG,GAAGc,GAAG,GAAGK,KAAN,GAAcJ,GAAG,GAAGK,KAApB,GAA4BJ,GAAG,GAAGK,KAA5C;;AAEA,cAAI,CAACrB,GAAL,EAAU;AACN,mBAAO,IAAP;AACH;;AAEDA,aAAG,GAAG,MAAMA,GAAZ;AAEA,iBAAO,IAAI,6CAAJ,CAAS,CACZmB,KAAK,GAAGnB,GADI,EAEZ,CAAC,CAACK,GAAD,GAAOU,GAAP,GAAaC,GAAG,GAAGZ,GAApB,IAA2BJ,GAFf,EAGZ,CAACG,GAAG,GAAGY,GAAN,GAAYC,GAAG,GAAGd,GAAnB,IAA0BF,GAHd,EAIZoB,KAAK,GAAGpB,GAJI,EAKZ,CAACK,GAAG,GAAGS,GAAN,GAAYE,GAAG,GAAGE,GAAnB,IAA0BlB,GALd,EAMZ,CAAC,CAACG,GAAD,GAAOW,GAAP,GAAaE,GAAG,GAAGC,GAApB,IAA2BjB,GANf,EAOZqB,KAAK,GAAGrB,GAPI,EAQZ,CAAC,CAACI,GAAD,GAAOU,GAAP,GAAaC,GAAG,GAAGG,GAApB,IAA2BlB,GARf,EASZ,CAACE,GAAG,GAAGY,GAAN,GAAYC,GAAG,GAAGE,GAAnB,IAA0BjB,GATd,CAAT,CAAP;AAWH;;;kCAESM,M,EAAY;AAClB,cAAMhW,CAAC,GAAGgW,MAAM,CAAChW,CAAjB;AACA,cAAME,CAAC,GAAG8V,MAAM,CAAC9V,CAAjB;AACA,cAAM2L,CAAC,GAAGmK,MAAM,CAACnK,CAAjB;AAEA,eAAKqJ,MAAL,CAAY,EAAZ,KAAmB,KAAKA,MAAL,CAAY,CAAZ,IAAiBlV,CAAjB,GAAqB,KAAKkV,MAAL,CAAY,CAAZ,IAAiBhV,CAAtC,GAA0C,KAAKgV,MAAL,CAAY,CAAZ,IAAiBrJ,CAA9E;AACA,eAAKqJ,MAAL,CAAY,EAAZ,KAAmB,KAAKA,MAAL,CAAY,CAAZ,IAAiBlV,CAAjB,GAAqB,KAAKkV,MAAL,CAAY,CAAZ,IAAiBhV,CAAtC,GAA0C,KAAKgV,MAAL,CAAY,CAAZ,IAAiBrJ,CAA9E;AACA,eAAKqJ,MAAL,CAAY,EAAZ,KAAmB,KAAKA,MAAL,CAAY,CAAZ,IAAiBlV,CAAjB,GAAqB,KAAKkV,MAAL,CAAY,CAAZ,IAAiBhV,CAAtC,GAA0C,KAAKgV,MAAL,CAAY,EAAZ,IAAkBrJ,CAA/E;AACA,eAAKqJ,MAAL,CAAY,EAAZ,KAAmB,KAAKA,MAAL,CAAY,CAAZ,IAAiBlV,CAAjB,GAAqB,KAAKkV,MAAL,CAAY,CAAZ,IAAiBhV,CAAtC,GAA0C,KAAKgV,MAAL,CAAY,EAAZ,IAAkBrJ,CAA/E;AAEA,iBAAO,IAAP;AACH;;;8BAEKmK,M,EAAY;AACd,cAAMhW,CAAC,GAAGgW,MAAM,CAAChW,CAAjB;AACA,cAAME,CAAC,GAAG8V,MAAM,CAAC9V,CAAjB;AACA,cAAM2L,CAAC,GAAGmK,MAAM,CAACnK,CAAjB;AAEA,eAAKqJ,MAAL,CAAY,CAAZ,KAAkBlV,CAAlB;AACA,eAAKkV,MAAL,CAAY,CAAZ,KAAkBlV,CAAlB;AACA,eAAKkV,MAAL,CAAY,CAAZ,KAAkBlV,CAAlB;AACA,eAAKkV,MAAL,CAAY,CAAZ,KAAkBlV,CAAlB;AAEA,eAAKkV,MAAL,CAAY,CAAZ,KAAkBhV,CAAlB;AACA,eAAKgV,MAAL,CAAY,CAAZ,KAAkBhV,CAAlB;AACA,eAAKgV,MAAL,CAAY,CAAZ,KAAkBhV,CAAlB;AACA,eAAKgV,MAAL,CAAY,CAAZ,KAAkBhV,CAAlB;AAEA,eAAKgV,MAAL,CAAY,CAAZ,KAAkBrJ,CAAlB;AACA,eAAKqJ,MAAL,CAAY,CAAZ,KAAkBrJ,CAAlB;AACA,eAAKqJ,MAAL,CAAY,EAAZ,KAAmBrJ,CAAnB;AACA,eAAKqJ,MAAL,CAAY,EAAZ,KAAmBrJ,CAAnB;AAEA,iBAAO,IAAP;AACH;;;+BAEMmB,K,EAAe+L,I,EAAU;AAC5B,cAAI/Y,CAAC,GAAG+Y,IAAI,CAAC/Y,CAAb;AACA,cAAIE,CAAC,GAAG6Y,IAAI,CAAC7Y,CAAb;AACA,cAAI2L,CAAC,GAAGkN,IAAI,CAAClN,CAAb;AAEA,cAAI9P,MAAM,GAAG4E,IAAI,CAACkY,IAAL,CAAU7Y,CAAC,GAAGA,CAAJ,GAAQE,CAAC,GAAGA,CAAZ,GAAgB2L,CAAC,GAAGA,CAA9B,CAAb;;AAEA,cAAI,CAAC9P,MAAL,EAAa;AACT,mBAAO,IAAP;AACH;;AAED,cAAIA,MAAM,KAAK,CAAf,EAAkB;AACdA,kBAAM,GAAG,IAAIA,MAAb;AACAiE,aAAC,IAAIjE,MAAL;AACAmE,aAAC,IAAInE,MAAL;AACA8P,aAAC,IAAI9P,MAAL;AACH;;AAED,cAAMid,CAAC,GAAGrY,IAAI,CAACuV,GAAL,CAASlJ,KAAT,CAAV;AACA,cAAMiM,CAAC,GAAGtY,IAAI,CAACsV,GAAL,CAASjJ,KAAT,CAAV;AAEA,cAAMkM,CAAC,GAAG,MAAMD,CAAhB;AAEA,cAAMzC,GAAG,GAAG,KAAKtB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMuB,GAAG,GAAG,KAAKvB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMwB,GAAG,GAAG,KAAKxB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMkE,GAAG,GAAG,KAAKlE,MAAL,CAAY,CAAZ,CAAZ;AAEA,cAAMyB,GAAG,GAAG,KAAKzB,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMU,GAAG,GAAG,KAAKV,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMW,GAAG,GAAG,KAAKX,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMmE,GAAG,GAAG,KAAKnE,MAAL,CAAY,CAAZ,CAAZ;AAEA,cAAM0B,GAAG,GAAG,KAAK1B,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMY,GAAG,GAAG,KAAKZ,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMa,GAAG,GAAG,KAAKb,MAAL,CAAY,EAAZ,CAAZ;AACA,cAAMoE,GAAG,GAAG,KAAKpE,MAAL,CAAY,EAAZ,CAAZ;AAEA,cAAMiC,GAAG,GAAGnX,CAAC,GAAGA,CAAJ,GAAQkZ,CAAR,GAAYD,CAAxB;AACA,cAAM7B,GAAG,GAAGlX,CAAC,GAAGF,CAAJ,GAAQkZ,CAAR,GAAYrN,CAAC,GAAGmN,CAA5B;AACA,cAAM3B,GAAG,GAAGxL,CAAC,GAAG7L,CAAJ,GAAQkZ,CAAR,GAAYhZ,CAAC,GAAG8Y,CAA5B;AAEA,cAAM1B,GAAG,GAAGtX,CAAC,GAAGE,CAAJ,GAAQgZ,CAAR,GAAYrN,CAAC,GAAGmN,CAA5B;AACA,cAAMzB,GAAG,GAAGrX,CAAC,GAAGA,CAAJ,GAAQgZ,CAAR,GAAYD,CAAxB;AACA,cAAMzB,GAAG,GAAG3L,CAAC,GAAG3L,CAAJ,GAAQgZ,CAAR,GAAYlZ,CAAC,GAAGgZ,CAA5B;AAEA,cAAMvB,GAAG,GAAGzX,CAAC,GAAG6L,CAAJ,GAAQqN,CAAR,GAAYhZ,CAAC,GAAG8Y,CAA5B;AACA,cAAMtB,GAAG,GAAGxX,CAAC,GAAG2L,CAAJ,GAAQqN,CAAR,GAAYlZ,CAAC,GAAGgZ,CAA5B;AACA,cAAMrB,GAAG,GAAG9L,CAAC,GAAGA,CAAJ,GAAQqN,CAAR,GAAYD,CAAxB;AAEA,eAAK/D,MAAL,CAAY,CAAZ,IAAiBsB,GAAG,GAAGW,GAAN,GAAYR,GAAG,GAAGS,GAAlB,GAAwBR,GAAG,GAAGS,GAA/C;AACA,eAAKnC,MAAL,CAAY,CAAZ,IAAiBuB,GAAG,GAAGU,GAAN,GAAYvB,GAAG,GAAGwB,GAAlB,GAAwBtB,GAAG,GAAGuB,GAA/C;AACA,eAAKnC,MAAL,CAAY,CAAZ,IAAiBwB,GAAG,GAAGS,GAAN,GAAYtB,GAAG,GAAGuB,GAAlB,GAAwBrB,GAAG,GAAGsB,GAA/C;AACA,eAAKnC,MAAL,CAAY,CAAZ,IAAiBkE,GAAG,GAAGjC,GAAN,GAAYkC,GAAG,GAAGjC,GAAlB,GAAwBkC,GAAG,GAAGjC,GAA/C;AAEA,eAAKnC,MAAL,CAAY,CAAZ,IAAiBsB,GAAG,GAAGc,GAAN,GAAYX,GAAG,GAAGY,GAAlB,GAAwBX,GAAG,GAAGY,GAA/C;AACA,eAAKtC,MAAL,CAAY,CAAZ,IAAiBuB,GAAG,GAAGa,GAAN,GAAY1B,GAAG,GAAG2B,GAAlB,GAAwBzB,GAAG,GAAG0B,GAA/C;AACA,eAAKtC,MAAL,CAAY,CAAZ,IAAiBwB,GAAG,GAAGY,GAAN,GAAYzB,GAAG,GAAG0B,GAAlB,GAAwBxB,GAAG,GAAGyB,GAA/C;AACA,eAAKtC,MAAL,CAAY,CAAZ,IAAiBkE,GAAG,GAAG9B,GAAN,GAAY+B,GAAG,GAAG9B,GAAlB,GAAwB+B,GAAG,GAAG9B,GAA/C;AAEA,eAAKtC,MAAL,CAAY,CAAZ,IAAiBsB,GAAG,GAAGiB,GAAN,GAAYd,GAAG,GAAGe,GAAlB,GAAwBd,GAAG,GAAGe,GAA/C;AACA,eAAKzC,MAAL,CAAY,CAAZ,IAAiBuB,GAAG,GAAGgB,GAAN,GAAY7B,GAAG,GAAG8B,GAAlB,GAAwB5B,GAAG,GAAG6B,GAA/C;AACA,eAAKzC,MAAL,CAAY,EAAZ,IAAkBwB,GAAG,GAAGe,GAAN,GAAY5B,GAAG,GAAG6B,GAAlB,GAAwB3B,GAAG,GAAG4B,GAAhD;AACA,eAAKzC,MAAL,CAAY,EAAZ,IAAkBkE,GAAG,GAAG3B,GAAN,GAAY4B,GAAG,GAAG3B,GAAlB,GAAwB4B,GAAG,GAAG3B,GAAhD;AAEA,iBAAO,IAAP;AACH;;;gCAEciD,I,EAAcC,K,EAAeC,M,EAAgBC,G,EAAaC,I,EAAcC,G,EAAW;AAC9F,cAAMC,EAAE,GAAIL,KAAK,GAAGD,IAApB;AACA,cAAMO,EAAE,GAAIJ,GAAG,GAAGD,MAAlB;AACA,cAAMM,EAAE,GAAIH,GAAG,GAAGD,IAAlB;AAEA,iBAAO,IAAI7B,IAAJ,CAAS,CACX6B,IAAI,GAAG,CAAR,GAAaE,EADD,EAEZ,CAFY,EAGZ,CAHY,EAIZ,CAJY,EAMZ,CANY,EAOXF,IAAI,GAAG,CAAR,GAAaG,EAPD,EAQZ,CARY,EASZ,CATY,EAWZ,CAACN,KAAK,GAAGD,IAAT,IAAiBM,EAXL,EAYZ,CAACH,GAAG,GAAGD,MAAP,IAAiBK,EAZL,EAaZ,EAAEF,GAAG,GAAGD,IAAR,IAAgBI,EAbJ,EAcZ,CAAC,CAdW,EAgBZ,CAhBY,EAiBZ,CAjBY,EAkBZ,EAAEH,GAAG,GAAGD,IAAN,GAAa,CAAf,IAAoBI,EAlBR,EAmBZ,CAnBY,CAAT,CAAP;AAqBH;;;oCAEkBC,G,EAAa1P,M,EAAgBqP,I,EAAcC,G,EAAW;AACrE,cAAMF,GAAG,GAAGC,IAAI,GAAGra,IAAI,CAAC2a,GAAL,CAASD,GAAG,GAAG1a,IAAI,CAACkM,EAAX,GAAgB,KAAzB,CAAnB;AACA,cAAMgO,KAAK,GAAGE,GAAG,GAAGpP,MAApB;AAEA,iBAAOwN,IAAI,CAACoC,OAAL,CAAa,CAACV,KAAd,EAAqBA,KAArB,EAA4B,CAACE,GAA7B,EAAkCA,GAAlC,EAAuCC,IAAvC,EAA6CC,GAA7C,CAAP;AACH;;;qCAEmBL,I,EAAcC,K,EAAeC,M,EAAgBC,G,EAAaC,I,EAAcC,G,EAAW;AACnG,cAAMC,EAAE,GAAIL,KAAK,GAAGD,IAApB;AACA,cAAMO,EAAE,GAAIJ,GAAG,GAAGD,MAAlB;AACA,cAAMM,EAAE,GAAIH,GAAG,GAAGD,IAAlB;AAEA,iBAAO,IAAI7B,IAAJ,CAAS,CACZ,IAAI+B,EADQ,EAEZ,CAFY,EAGZ,CAHY,EAIZ,CAJY,EAMZ,CANY,EAOZ,IAAIC,EAPQ,EAQZ,CARY,EASZ,CATY,EAWZ,CAXY,EAYZ,CAZY,EAaZ,CAAC,CAAD,GAAKC,EAbO,EAcZ,CAdY,EAgBZ,EAAER,IAAI,GAAGC,KAAT,IAAkBK,EAhBN,EAiBZ,EAAEH,GAAG,GAAGD,MAAR,IAAkBK,EAjBN,EAkBZ,EAAEF,GAAG,GAAGD,IAAR,IAAgBI,EAlBJ,EAmBZ,CAnBY,CAAT,CAAP;AAqBH;;;+BAEajb,Q,EAAgBjC,M,EAAgC;AAAA,cAAlBsd,EAAkB,uEAAP,8CAAKA,EAAE;;AAC1D,cAAIrb,QAAQ,CAACsb,MAAT,CAAgBvd,MAAhB,CAAJ,EAA6B;AACzB,mBAAO,KAAKmY,QAAZ;AACH;;AAED,cAAMxK,CAAC,GAAG,8CAAK6P,UAAL,CAAgBvb,QAAhB,EAA0BjC,MAA1B,EAAkC4N,SAAlC,EAAV;;AAEA,cAAM9L,CAAC,GAAG,8CAAK2b,KAAL,CAAWH,EAAX,EAAe3P,CAAf,EAAkBC,SAAlB,EAAV;;AACA,cAAM5L,CAAC,GAAG,8CAAKyb,KAAL,CAAW9P,CAAX,EAAc7L,CAAd,EAAiB8L,SAAjB,EAAV;;AAEA,iBAAO,IAAIqN,IAAJ,CAAS,CACZnZ,CAAC,CAACA,CADU,EAEZE,CAAC,CAACF,CAFU,EAGZ6L,CAAC,CAAC7L,CAHU,EAIZ,CAJY,EAMZA,CAAC,CAACE,CANU,EAOZA,CAAC,CAACA,CAPU,EAQZ2L,CAAC,CAAC3L,CARU,EASZ,CATY,EAWZF,CAAC,CAAC6L,CAXU,EAYZ3L,CAAC,CAAC2L,CAZU,EAaZA,CAAC,CAACA,CAbU,EAcZ,CAdY,EAgBZ,CAAC,8CAAKE,GAAL,CAAS/L,CAAT,EAAYG,QAAZ,CAhBW,EAiBZ,CAAC,8CAAK4L,GAAL,CAAS7L,CAAT,EAAYC,QAAZ,CAjBW,EAkBZ,CAAC,8CAAK4L,GAAL,CAASF,CAAT,EAAY1L,QAAZ,CAlBW,EAmBZ,CAnBY,CAAT,CAAP;AAqBH;;;gCAEcgW,E,EAAUC,E,EAAU3S,M,EAAY;AAC3C,cAAM+S,GAAG,GAAGL,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMiB,GAAG,GAAGN,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMkB,GAAG,GAAGP,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAM4D,GAAG,GAAGjD,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMmB,GAAG,GAAGR,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMI,GAAG,GAAGO,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMK,GAAG,GAAGM,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAM6D,GAAG,GAAGlD,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMoB,GAAG,GAAGT,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMM,GAAG,GAAGK,EAAE,CAACX,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMO,GAAG,GAAGI,EAAE,CAACX,EAAH,CAAM,EAAN,CAAZ;AACA,cAAM8D,GAAG,GAAGnD,EAAE,CAACX,EAAH,CAAM,EAAN,CAAZ;AACA,cAAM+D,GAAG,GAAGpD,EAAE,CAACX,EAAH,CAAM,EAAN,CAAZ;AACA,cAAMgE,GAAG,GAAGrD,EAAE,CAACX,EAAH,CAAM,EAAN,CAAZ;AACA,cAAMiE,GAAG,GAAGtD,EAAE,CAACX,EAAH,CAAM,EAAN,CAAZ;AACA,cAAMkE,GAAG,GAAGvD,EAAE,CAACX,EAAH,CAAM,EAAN,CAAZ;AAEA,cAAM2B,GAAG,GAAGf,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAZ;AACA,cAAM4B,GAAG,GAAGhB,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAZ;AACA,cAAM6B,GAAG,GAAGjB,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMoG,GAAG,GAAGxF,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAZ;AACA,cAAM8B,GAAG,GAAGlB,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAZ;AACA,cAAM+B,GAAG,GAAGnB,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMgC,GAAG,GAAGpB,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMqG,GAAG,GAAGzF,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMiC,GAAG,GAAGrB,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMkC,GAAG,GAAGtB,EAAE,CAACZ,EAAH,CAAM,CAAN,CAAZ;AACA,cAAMmC,GAAG,GAAGvB,EAAE,CAACZ,EAAH,CAAM,EAAN,CAAZ;AACA,cAAMsG,GAAG,GAAG1F,EAAE,CAACZ,EAAH,CAAM,EAAN,CAAZ;AACA,cAAMuG,GAAG,GAAG3F,EAAE,CAACZ,EAAH,CAAM,EAAN,CAAZ;AACA,cAAMwG,GAAG,GAAG5F,EAAE,CAACZ,EAAH,CAAM,EAAN,CAAZ;AACA,cAAMyG,GAAG,GAAG7F,EAAE,CAACZ,EAAH,CAAM,EAAN,CAAZ;AACA,cAAM0G,GAAG,GAAG9F,EAAE,CAACZ,EAAH,CAAM,EAAN,CAAZ;;AAEA,cAAI/R,MAAJ,EAAY;AACRA,kBAAM,CAAC2R,IAAP,CAAY,CACR+B,GAAG,GAAGX,GAAN,GAAYY,GAAG,GAAGT,GAAlB,GAAwBU,GAAG,GAAGT,GAA9B,GAAoCgF,GAAG,GAAGrC,GADlC,EAERpC,GAAG,GAAGV,GAAN,GAAYW,GAAG,GAAGxB,GAAlB,GAAwByB,GAAG,GAAGvB,GAA9B,GAAoC8F,GAAG,GAAGpC,GAFlC,EAGRrC,GAAG,GAAGT,GAAN,GAAYU,GAAG,GAAGvB,GAAlB,GAAwBwB,GAAG,GAAGtB,GAA9B,GAAoC6F,GAAG,GAAGnC,GAHlC,EAIRtC,GAAG,GAAGiC,GAAN,GAAYhC,GAAG,GAAGiC,GAAlB,GAAwBhC,GAAG,GAAGiC,GAA9B,GAAoCsC,GAAG,GAAGlC,GAJlC,EAMRpC,GAAG,GAAGd,GAAN,GAAYe,GAAG,GAAGZ,GAAlB,GAAwBa,GAAG,GAAGZ,GAA9B,GAAoCiF,GAAG,GAAGtC,GANlC,EAORjC,GAAG,GAAGb,GAAN,GAAYc,GAAG,GAAG3B,GAAlB,GAAwB4B,GAAG,GAAG1B,GAA9B,GAAoC+F,GAAG,GAAGrC,GAPlC,EAQRlC,GAAG,GAAGZ,GAAN,GAAYa,GAAG,GAAG1B,GAAlB,GAAwB2B,GAAG,GAAGzB,GAA9B,GAAoC8F,GAAG,GAAGpC,GARlC,EASRnC,GAAG,GAAG8B,GAAN,GAAY7B,GAAG,GAAG8B,GAAlB,GAAwB7B,GAAG,GAAG8B,GAA9B,GAAoCuC,GAAG,GAAGnC,GATlC,EAWRjC,GAAG,GAAGjB,GAAN,GAAYkB,GAAG,GAAGf,GAAlB,GAAwBgB,GAAG,GAAGf,GAA9B,GAAoCkF,GAAG,GAAGvC,GAXlC,EAYR9B,GAAG,GAAGhB,GAAN,GAAYiB,GAAG,GAAG9B,GAAlB,GAAwB+B,GAAG,GAAG7B,GAA9B,GAAoCgG,GAAG,GAAGtC,GAZlC,EAaR/B,GAAG,GAAGf,GAAN,GAAYgB,GAAG,GAAG7B,GAAlB,GAAwB8B,GAAG,GAAG5B,GAA9B,GAAoC+F,GAAG,GAAGrC,GAblC,EAcRhC,GAAG,GAAG2B,GAAN,GAAY1B,GAAG,GAAG2B,GAAlB,GAAwB1B,GAAG,GAAG2B,GAA9B,GAAoCwC,GAAG,GAAGpC,GAdlC,EAgBRqC,GAAG,GAAGvF,GAAN,GAAYwF,GAAG,GAAGrF,GAAlB,GAAwBsF,GAAG,GAAGrF,GAA9B,GAAoCsF,GAAG,GAAG3C,GAhBlC,EAiBRwC,GAAG,GAAGtF,GAAN,GAAYuF,GAAG,GAAGpG,GAAlB,GAAwBqG,GAAG,GAAGnG,GAA9B,GAAoCoG,GAAG,GAAG1C,GAjBlC,EAkBRuC,GAAG,GAAGrF,GAAN,GAAYsF,GAAG,GAAGnG,GAAlB,GAAwBoG,GAAG,GAAGlG,GAA9B,GAAoCmG,GAAG,GAAGzC,GAlBlC,EAmBRsC,GAAG,GAAG3C,GAAN,GAAY4C,GAAG,GAAG3C,GAAlB,GAAwB4C,GAAG,GAAG3C,GAA9B,GAAoC4C,GAAG,GAAGxC,GAnBlC,CAAZ;AAsBA,mBAAOjW,MAAP;AACH,WAxBD,MAwBO;AACH,mBAAO,IAAI0V,IAAJ,CAAS,CACZhC,GAAG,GAAGX,GAAN,GAAYY,GAAG,GAAGT,GAAlB,GAAwBU,GAAG,GAAGT,GAA9B,GAAoCgF,GAAG,GAAGrC,GAD9B,EAEZpC,GAAG,GAAGV,GAAN,GAAYW,GAAG,GAAGxB,GAAlB,GAAwByB,GAAG,GAAGvB,GAA9B,GAAoC8F,GAAG,GAAGpC,GAF9B,EAGZrC,GAAG,GAAGT,GAAN,GAAYU,GAAG,GAAGvB,GAAlB,GAAwBwB,GAAG,GAAGtB,GAA9B,GAAoC6F,GAAG,GAAGnC,GAH9B,EAIZtC,GAAG,GAAGiC,GAAN,GAAYhC,GAAG,GAAGiC,GAAlB,GAAwBhC,GAAG,GAAGiC,GAA9B,GAAoCsC,GAAG,GAAGlC,GAJ9B,EAMZpC,GAAG,GAAGd,GAAN,GAAYe,GAAG,GAAGZ,GAAlB,GAAwBa,GAAG,GAAGZ,GAA9B,GAAoCiF,GAAG,GAAGtC,GAN9B,EAOZjC,GAAG,GAAGb,GAAN,GAAYc,GAAG,GAAG3B,GAAlB,GAAwB4B,GAAG,GAAG1B,GAA9B,GAAoC+F,GAAG,GAAGrC,GAP9B,EAQZlC,GAAG,GAAGZ,GAAN,GAAYa,GAAG,GAAG1B,GAAlB,GAAwB2B,GAAG,GAAGzB,GAA9B,GAAoC8F,GAAG,GAAGpC,GAR9B,EASZnC,GAAG,GAAG8B,GAAN,GAAY7B,GAAG,GAAG8B,GAAlB,GAAwB7B,GAAG,GAAG8B,GAA9B,GAAoCuC,GAAG,GAAGnC,GAT9B,EAWZjC,GAAG,GAAGjB,GAAN,GAAYkB,GAAG,GAAGf,GAAlB,GAAwBgB,GAAG,GAAGf,GAA9B,GAAoCkF,GAAG,GAAGvC,GAX9B,EAYZ9B,GAAG,GAAGhB,GAAN,GAAYiB,GAAG,GAAG9B,GAAlB,GAAwB+B,GAAG,GAAG7B,GAA9B,GAAoCgG,GAAG,GAAGtC,GAZ9B,EAaZ/B,GAAG,GAAGf,GAAN,GAAYgB,GAAG,GAAG7B,GAAlB,GAAwB8B,GAAG,GAAG5B,GAA9B,GAAoC+F,GAAG,GAAGrC,GAb9B,EAcZhC,GAAG,GAAG2B,GAAN,GAAY1B,GAAG,GAAG2B,GAAlB,GAAwB1B,GAAG,GAAG2B,GAA9B,GAAoCwC,GAAG,GAAGpC,GAd9B,EAgBZqC,GAAG,GAAGvF,GAAN,GAAYwF,GAAG,GAAGrF,GAAlB,GAAwBsF,GAAG,GAAGrF,GAA9B,GAAoCsF,GAAG,GAAG3C,GAhB9B,EAiBZwC,GAAG,GAAGtF,GAAN,GAAYuF,GAAG,GAAGpG,GAAlB,GAAwBqG,GAAG,GAAGnG,GAA9B,GAAoCoG,GAAG,GAAG1C,GAjB9B,EAkBZuC,GAAG,GAAGrF,GAAN,GAAYsF,GAAG,GAAGnG,GAAlB,GAAwBoG,GAAG,GAAGlG,GAA9B,GAAoCmG,GAAG,GAAGzC,GAlB9B,EAmBZsC,GAAG,GAAG3C,GAAN,GAAY4C,GAAG,GAAG3C,GAAlB,GAAwB4C,GAAG,GAAG3C,GAA9B,GAAoC4C,GAAG,GAAGxC,GAnB9B,CAAT,CAAP;AAqBH;AACJ;;;;;;AAlnBe,SAAArD,QAAA,GAAW,IAAI8C,IAAJ,GAAW7C,WAAX,EAAX;;;;;;;;;;;;;;;;AChBpB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;AAKA,QAAM6F,gBAAgB,GAAG,IAAzB;AAEA,QAAIC,UAAU,GAAG,KAAjB;AACA,QAAIC,YAAY,GAAG,KAAnB;AACA,QAAIC,QAAQ,GAAG,KAAf;AACA,QAAIC,SAAS,GAAG,KAAhB;AACA,QAAIC,MAAM,GAAG,KAAb;AACA,QAAIC,MAAM,GAAG,KAAb;AACA,QAAIC,OAAO,GAAuB3Z,SAAlC;AACA,QAAI4Z,SAAS,GAAWR,gBAAxB;AACA,QAAIS,uBAAuB,GAAuB7Z,SAAlD;AACA,QAAI8Z,UAAU,GAAuB9Z,SAArC;AAiCA,QAAM+Z,kBAAkB,GAAI,OAAOC,OAAP,KAAmB,WAAnB,IAAkC,OAAOA,OAAO,CAACC,QAAf,KAA4B,WAA9D,IAA6E,OAAOD,OAAO,CAACC,QAAR,CAAiBC,QAAxB,KAAqC,WAAlH,IAAiIF,OAAO,CAAC7f,IAAR,KAAiB,UAA9K,C,CAEA;;AACA,QAAI,OAAOggB,SAAP,KAAqB,QAArB,IAAiC,CAACJ,kBAAtC,EAA0D;AACzDD,gBAAU,GAAGK,SAAS,CAACC,SAAvB;AACAf,gBAAU,GAAGS,UAAU,CAACpO,OAAX,CAAmB,SAAnB,KAAiC,CAA9C;AACA4N,kBAAY,GAAGQ,UAAU,CAACpO,OAAX,CAAmB,WAAnB,KAAmC,CAAlD;AACAgO,YAAM,GAAGI,UAAU,CAACpO,OAAX,CAAmB,WAAnB,KAAmC,CAAnC,IAAwC,CAAC,CAACyO,SAAS,CAACE,cAApD,IAAsEF,SAAS,CAACE,cAAV,GAA2B,CAA1G;AACAd,cAAQ,GAAGO,UAAU,CAACpO,OAAX,CAAmB,OAAnB,KAA+B,CAA1C;AACA+N,YAAM,GAAG,IAAT;AACAE,aAAO,GAAGQ,SAAS,CAACG,QAApB;AACAV,eAAS,GAAGD,OAAZ;AACA,KATD,MASO,IAAI,OAAOK,OAAP,KAAmB,QAAvB,EAAiC;AACvCX,gBAAU,GAAIW,OAAO,CAACO,QAAR,KAAqB,OAAnC;AACAjB,kBAAY,GAAIU,OAAO,CAACO,QAAR,KAAqB,QAArC;AACAhB,cAAQ,GAAIS,OAAO,CAACO,QAAR,KAAqB,OAAjC;AACAZ,aAAO,GAAGP,gBAAV;AACAQ,eAAS,GAAGR,gBAAZ;AACA,UAAMoB,YAAY,GAAGR,OAAO,CAACS,GAAR,CAAY,mBAAZ,CAArB;;AACA,UAAID,YAAJ,EAAkB;AACjB,YAAI;AACH,cAAME,SAAS,GAAcC,IAAI,CAACC,KAAL,CAAWJ,YAAX,CAA7B;AACA,cAAMK,QAAQ,GAAGH,SAAS,CAACI,kBAAV,CAA6B,GAA7B,CAAjB;AACAnB,iBAAO,GAAGe,SAAS,CAACK,MAApB,CAHG,CAIH;;AACAnB,mBAAS,GAAGiB,QAAQ,GAAGA,QAAH,GAAczB,gBAAlC;AACAS,iCAAuB,GAAGa,SAAS,CAACb,uBAApC;AACA,SAPD,CAOE,OAAOtkB,CAAP,EAAU,CACX;AACD;;AACDikB,eAAS,GAAG,IAAZ;AACA;;AAQM,aAASwB,gBAAT,CAA0BT,QAA1B,EAA8C;AACpD,cAAQA,QAAR;AACC,aAAK;AAAL;AAAA;AAAmB,iBAAO,KAAP;;AACnB,aAAK;AAAL;AAAA;AAAmB,iBAAO,KAAP;;AACnB,aAAK;AAAL;AAAA;AAAqB,iBAAO,OAAP;;AACrB,aAAK;AAAL;AAAA;AAAuB,iBAAO,SAAP;AAJxB;AAMA;;AAED,QAAIU,SAAS;AAAA;AAAb;;AACA,QAAI3B,YAAJ,EAAkB;AACjB2B,eAAS,GAAG;AAAH;AAAT;AACA,KAFD,MAEO,IAAI5B,UAAJ,EAAgB;AACtB4B,eAAS,GAAG;AAAH;AAAT;AACA,KAFM,MAEA,IAAI1B,QAAJ,EAAc;AACpB0B,eAAS,GAAG;AAAH;AAAT;AACA;;AAEM,QAAMC,SAAS,GAAG7B,UAAlB;AACA,QAAM8B,WAAW,GAAG7B,YAApB;AACA,QAAM8B,OAAO,GAAG7B,QAAhB;AACA,QAAM8B,QAAQ,GAAG7B,SAAjB;AACA,QAAM8B,KAAK,GAAG7B,MAAd;AACA,QAAM8B,KAAK,GAAG7B,MAAd;AACA,QAAMa,QAAQ,GAAGU,SAAjB;AACA,QAAMb,SAAS,GAAGN,UAAlB;;AAEA,aAAS0B,UAAT,GAAmB;AACzB,aAAOhC,SAAS,IAAI,CAACH,UAAd,IAA6BW,OAAO,CAACyB,MAAR,OAAqB,CAAzD;AACA;AAED;;;;;;;AAKO,QAAMnB,QAAQ,GAAGV,SAAjB;AAEA,QAAU8B,QAAV;;AAAP,eAAiBA,QAAjB,EAAyB;AAExB,eAAgBxb,KAAhB,GAAqB;AACpB,eAAOoa,QAAP;AACA;;AAFe,eAAApa,KAAA,GAAK,KAAL;;AAIhB,eAAgByb,gBAAhB,GAAgC;AAC/B,YAAIrB,QAAQ,CAACthB,MAAT,KAAoB,CAAxB,EAA2B;AAC1B,iBAAOshB,QAAQ,KAAK,IAApB;AACA,SAFD,MAEO,IAAIA,QAAQ,CAACthB,MAAT,IAAmB,CAAvB,EAA0B;AAChC,iBAAOshB,QAAQ,CAAC,CAAD,CAAR,KAAgB,GAAhB,IAAuBA,QAAQ,CAAC,CAAD,CAAR,KAAgB,GAAvC,IAA8CA,QAAQ,CAAC,CAAD,CAAR,KAAgB,GAArE;AACA,SAFM,MAEA;AACN,iBAAO,KAAP;AACA;AACD;;AARe,eAAAqB,gBAAA,GAAgB,gBAAhB;;AAUhB,eAAgBC,SAAhB,GAAyB;AACxB,eAAOtB,QAAQ,KAAK,IAApB;AACA;;AAFe,eAAAsB,SAAA,GAAS,SAAT;AAGhB,KAnBD,EAAiBF,QAAQ,KAARA,QAAQ,MAAzB;AAqBA;;;;;;;AAKO,QAAMX,MAAM,GAAGpB,OAAf;AAEP;;;;AAGO,QAAMkC,sBAAsB,GAAGhC,uBAA/B;;AAEP,QAAMiC,QAAQ,GAAI,OAAOC,IAAP,KAAgB,QAAhB,GAA2BA,IAA3B,GAAkC,OAAOC,MAAP,KAAkB,QAAlB,GAA6BA,MAA7B,GAAsC,EAA1F;;AACO,QAAMC,OAAO,GAAQH,QAArB;;AAMA,QAAMI,YAAY,GAAmB,SAASC,kBAAT,GAA8B;AACzE,UAAIF,OAAO,CAACC,YAAZ,EAA0B;AACzB,eAAOD,OAAO,CAACC,YAAR,CAAqBlkB,IAArB,CAA0BikB,OAA1B,CAAP;AACA;;AACD,UAAI,OAAOA,OAAO,CAACG,WAAf,KAA+B,UAA/B,IAA6C,CAACH,OAAO,CAACI,aAA1D,EAAyE;AAKxE,YAAIC,OAAO,GAAoB,EAA/B;AACAL,eAAO,CAACjiB,gBAAR,CAAyB,SAAzB,EAAoC,UAACzE,CAAD,EAAqB;AACxD,cAAIA,CAAC,CAAC6b,IAAF,IAAU7b,CAAC,CAAC6b,IAAF,CAAOmL,oBAArB,EAA2C;AAC1C,iBAAK,IAAIzjB,CAAC,GAAG,CAAR,EAAW0jB,GAAG,GAAGF,OAAO,CAACtjB,MAA9B,EAAsCF,CAAC,GAAG0jB,GAA1C,EAA+C1jB,CAAC,EAAhD,EAAoD;AACnD,kBAAM2jB,SAAS,GAAGH,OAAO,CAACxjB,CAAD,CAAzB;;AACA,kBAAI2jB,SAAS,CAAC5mB,EAAV,KAAiBN,CAAC,CAAC6b,IAAF,CAAOmL,oBAA5B,EAAkD;AACjDD,uBAAO,CAAC1iB,MAAR,CAAed,CAAf,EAAkB,CAAlB;AACA2jB,yBAAS,CAACC,QAAV;AACA;AACA;AACD;AACD;AACD,SAXD;AAYA,YAAIC,MAAM,GAAG,CAAb;AACA,eAAO,UAACD,QAAD,EAA0B;AAChC,cAAME,IAAI,GAAG,EAAED,MAAf;AACAL,iBAAO,CAACrkB,IAAR,CAAa;AACZpC,cAAE,EAAE+mB,IADQ;AAEZF,oBAAQ,EAAEA;AAFE,WAAb;AAIAT,iBAAO,CAACG,WAAR,CAAoB;AAAEG,gCAAoB,EAAEK;AAAxB,WAApB,EAAoD,GAApD;AACA,SAPD;AAQA;;AACD,UAAI,OAAO5C,OAAP,KAAmB,WAAnB,IAAkC,OAAOA,OAAO,CAAC6C,QAAf,KAA4B,UAAlE,EAA8E;AAC7E,eAAO7C,OAAO,CAAC6C,QAAR,CAAiB7kB,IAAjB,CAAsBgiB,OAAtB,CAAP;AACA;;AACD,UAAM8C,QAAQ,GAAG1nB,OAAO,CAACC,OAAR,EAAjB;;AACA,aAAO,UAACqnB,QAAD;AAAA,eAAwCI,QAAQ,CAACxnB,IAAT,CAAconB,QAAd,CAAxC;AAAA,OAAP;AACA,KArC0C,EAApC;;AA4CA,QAAMK,EAAE,GAAIzD,YAAY,GAAG;AAAD;AAAF,MAAgCD,UAAU,GAAG;AAAD;AAAF,MAA6B;AAAD;AAA9F;;;;;;;;;;;;;;;;AClNP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAMqB2D,I;;;AA4EjB,oBAAY7K,MAAZ,EAAuD;AAAA;;AAM/C,aAAAA,MAAA,GAAS,IAAIC,YAAJ,CAAiB,CAAjB,CAAT;;AALJ,YAAID,MAAM,KAAKnS,SAAf,EAA0B;AACtB,eAAKid,IAAL,GAAY9K,MAAZ;AACH;AACJ;;;;2BAME/Y,K,EAAa;AACZ,iBAAO,KAAK+Y,MAAL,CAAY/Y,KAAZ,CAAP;AACH;;;gCAEI;AACD,eAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxB,iBAAKqZ,MAAL,CAAYrZ,CAAZ,IAAiB,CAAjB;AACH;AACJ;;;6BAEIwZ,I,EAAW;AACZ,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI0K,IAAJ,EAAP;AAAmB;;AAEhC,eAAK,IAAIlkB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxBwZ,gBAAI,CAACH,MAAL,CAAYrZ,CAAZ,IAAiB,KAAKqZ,MAAL,CAAYrZ,CAAZ,CAAjB;AACH;;AAED,iBAAOwZ,IAAP;AACH;;;+BAEG;AACA,cAAMrV,CAAC,GAAG,KAAKA,CAAf;AACA,cAAME,CAAC,GAAG,KAAKA,CAAf;AACA,cAAM2L,CAAC,GAAG,KAAKA,CAAf;AACA,cAAMpK,CAAC,GAAG,KAAKA,CAAf;AAEA,iBAAOd,IAAI,CAACgM,KAAL,CAAW,OAAO3M,CAAC,GAAGE,CAAJ,GAAQuB,CAAC,GAAGoK,CAAnB,CAAX,EAAkCpK,CAAC,GAAGA,CAAJ,GAAQzB,CAAC,GAAGA,CAAZ,GAAgBE,CAAC,GAAGA,CAApB,GAAwB2L,CAAC,GAAGA,CAA9D,CAAP;AACH;;;gCAEI;AACD,cAAM7L,CAAC,GAAG,KAAKA,CAAf;AACA,cAAME,CAAC,GAAG,KAAKA,CAAf;AACA,cAAM2L,CAAC,GAAG,KAAKA,CAAf;AACA,cAAMpK,CAAC,GAAG,KAAKA,CAAf;AAEA,iBAAOd,IAAI,CAACgM,KAAL,CAAW,OAAOzM,CAAC,GAAG2L,CAAJ,GAAQpK,CAAC,GAAGzB,CAAnB,CAAX,EAAkCyB,CAAC,GAAGA,CAAJ,GAAQzB,CAAC,GAAGA,CAAZ,GAAgBE,CAAC,GAAGA,CAApB,GAAwB2L,CAAC,GAAGA,CAA9D,CAAP;AACH;;;8BAEE;AACC,iBAAOlL,IAAI,CAACsf,IAAL,CAAU,OAAO,KAAKjgB,CAAL,GAAS,KAAK6L,CAAd,GAAkB,KAAKpK,CAAL,GAAS,KAAKvB,CAAvC,CAAV,CAAP;AACH;;;+BAEM8V,M,EAAiC;AAAA,cAAnBT,SAAmB,uEAAP,kDAAO;;AACpC,eAAK,IAAI1Z,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxB,gBAAI8E,IAAI,CAAC8H,GAAL,CAAS,KAAKyM,MAAL,CAAYrZ,CAAZ,IAAiBma,MAAM,CAACR,EAAP,CAAU3Z,CAAV,CAA1B,IAA0C0Z,SAA9C,EAAyD;AACrD,qBAAO,KAAP;AACH;AACJ;;AAED,iBAAO,IAAP;AACH;;;sCAEU;AACP,eAAKvV,CAAL,GAAS,CAAT;AACA,eAAKE,CAAL,GAAS,CAAT;AACA,eAAK2L,CAAL,GAAS,CAAT;AACA,eAAKpK,CAAL,GAAS,CAAT;AAEA,iBAAO,IAAP;AACH;;;qCAES;AACN,cAAMzB,CAAC,GAAG,KAAKA,CAAf;AACA,cAAME,CAAC,GAAG,KAAKA,CAAf;AACA,cAAM2L,CAAC,GAAG,KAAKA,CAAf;AAEA,eAAKpK,CAAL,GAAS,CAAEd,IAAI,CAACkY,IAAL,CAAUlY,IAAI,CAAC8H,GAAL,CAAS,MAAMzI,CAAC,GAAGA,CAAV,GAAcE,CAAC,GAAGA,CAAlB,GAAsB2L,CAAC,GAAGA,CAAnC,CAAV,CAAX;AAEA,iBAAO,IAAP;AACH;;;kCAEM;AACH,cAAME,GAAG,GAAGgU,IAAI,CAAChU,GAAL,CAAS,IAAT,EAAe,IAAf,CAAZ;;AAEA,cAAI,CAACA,GAAL,EAAU;AACN,iBAAKiU,IAAL,GAAY,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAZ;AAEA,mBAAO,IAAP;AACH;;AAED,cAAME,MAAM,GAAGnU,GAAG,GAAG,MAAMA,GAAT,GAAe,CAAjC;AAEA,eAAK/L,CAAL,IAAU,CAACkgB,MAAX;AACA,eAAKhgB,CAAL,IAAU,CAACggB,MAAX;AACA,eAAKrU,CAAL,IAAU,CAACqU,MAAX;AACA,eAAKze,CAAL,IAAUye,MAAV;AAEA,iBAAO,IAAP;AACH;;;oCAEQ;AACL,eAAKhL,MAAL,CAAY,CAAZ,KAAkB,CAAC,CAAnB;AACA,eAAKA,MAAL,CAAY,CAAZ,KAAkB,CAAC,CAAnB;AACA,eAAKA,MAAL,CAAY,CAAZ,KAAkB,CAAC,CAAnB;AAEA,iBAAO,IAAP;AACH;;;iCAEK;AACF,cAAMlV,CAAC,GAAG,KAAKA,CAAf;AACA,cAAME,CAAC,GAAG,KAAKA,CAAf;AACA,cAAM2L,CAAC,GAAG,KAAKA,CAAf;AACA,cAAMpK,CAAC,GAAG,KAAKA,CAAf;AAEA,iBAAOd,IAAI,CAACkY,IAAL,CAAU7Y,CAAC,GAAGA,CAAJ,GAAQE,CAAC,GAAGA,CAAZ,GAAgB2L,CAAC,GAAGA,CAApB,GAAwBpK,CAAC,GAAGA,CAAtC,CAAP;AACH;;;kCAES4T,I,EAAW;AACjB,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAP;AAAa;;AAE1B,cAAMrV,CAAC,GAAG,KAAKA,CAAf;AACA,cAAME,CAAC,GAAG,KAAKA,CAAf;AACA,cAAM2L,CAAC,GAAG,KAAKA,CAAf;AACA,cAAMpK,CAAC,GAAG,KAAKA,CAAf;AAEA,cAAI1F,MAAM,GAAG4E,IAAI,CAACkY,IAAL,CAAU7Y,CAAC,GAAGA,CAAJ,GAAQE,CAAC,GAAGA,CAAZ,GAAgB2L,CAAC,GAAGA,CAApB,GAAwBpK,CAAC,GAAGA,CAAtC,CAAb;;AAEA,cAAI,CAAC1F,MAAL,EAAa;AACTsZ,gBAAI,CAACrV,CAAL,GAAS,CAAT;AACAqV,gBAAI,CAACnV,CAAL,GAAS,CAAT;AACAmV,gBAAI,CAACxJ,CAAL,GAAS,CAAT;AACAwJ,gBAAI,CAAC5T,CAAL,GAAS,CAAT;AAEA,mBAAO4T,IAAP;AACH;;AAEDtZ,gBAAM,GAAG,IAAIA,MAAb;AAEAsZ,cAAI,CAACrV,CAAL,GAASA,CAAC,GAAGjE,MAAb;AACAsZ,cAAI,CAACnV,CAAL,GAASA,CAAC,GAAGnE,MAAb;AACAsZ,cAAI,CAACxJ,CAAL,GAASA,CAAC,GAAG9P,MAAb;AACAsZ,cAAI,CAAC5T,CAAL,GAASA,CAAC,GAAG1F,MAAb;AAEA,iBAAOsZ,IAAP;AACH;;;4BAEG8K,K,EAAW;AACX,eAAK,IAAItkB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxB,iBAAKqZ,MAAL,CAAYrZ,CAAZ,KAAkBskB,KAAK,CAAC3K,EAAN,CAAS3Z,CAAT,CAAlB;AACH;;AAED,iBAAO,IAAP;AACH;;;iCAEQskB,K,EAAW;AAChB,cAAMC,GAAG,GAAG,KAAKlL,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMmL,GAAG,GAAG,KAAKnL,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMoL,GAAG,GAAG,KAAKpL,MAAL,CAAY,CAAZ,CAAZ;AACA,cAAMqL,GAAG,GAAG,KAAKrL,MAAL,CAAY,CAAZ,CAAZ;AAEA,cAAMsL,GAAG,GAAGL,KAAK,CAACngB,CAAlB;AACA,cAAMygB,GAAG,GAAGN,KAAK,CAACjgB,CAAlB;AACA,cAAMwgB,GAAG,GAAGP,KAAK,CAACtU,CAAlB;AACA,cAAM8U,GAAG,GAAGR,KAAK,CAAC1e,CAAlB;AAEA,eAAKzB,CAAL,GAASogB,GAAG,GAAGO,GAAN,GAAYJ,GAAG,GAAGC,GAAlB,GAAwBH,GAAG,GAAGK,GAA9B,GAAoCJ,GAAG,GAAGG,GAAnD;AACA,eAAKvgB,CAAL,GAASmgB,GAAG,GAAGM,GAAN,GAAYJ,GAAG,GAAGE,GAAlB,GAAwBH,GAAG,GAAGE,GAA9B,GAAoCJ,GAAG,GAAGM,GAAnD;AACA,eAAK7U,CAAL,GAASyU,GAAG,GAAGK,GAAN,GAAYJ,GAAG,GAAGG,GAAlB,GAAwBN,GAAG,GAAGK,GAA9B,GAAoCJ,GAAG,GAAGG,GAAnD;AACA,eAAK/e,CAAL,GAAS8e,GAAG,GAAGI,GAAN,GAAYP,GAAG,GAAGI,GAAlB,GAAwBH,GAAG,GAAGI,GAA9B,GAAoCH,GAAG,GAAGI,GAAnD;AAEA,iBAAO,IAAP;AACH;;;qCAEY1K,M,EAAcX,I,EAAW;AAClC,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI,6CAAJ,EAAP;AAAmB;;AAEhC,cAAMrV,CAAC,GAAGgW,MAAM,CAAChW,CAAjB;AACA,cAAME,CAAC,GAAG8V,MAAM,CAAC9V,CAAjB;AACA,cAAM2L,CAAC,GAAGmK,MAAM,CAACnK,CAAjB;AAEA,cAAM+U,EAAE,GAAG,KAAK5gB,CAAhB;AACA,cAAM6gB,EAAE,GAAG,KAAK3gB,CAAhB;AACA,cAAM4gB,EAAE,GAAG,KAAKjV,CAAhB;AACA,cAAMkV,EAAE,GAAG,KAAKtf,CAAhB;AAEA,cAAMuf,EAAE,GAAGD,EAAE,GAAG/gB,CAAL,GAAS6gB,EAAE,GAAGhV,CAAd,GAAkBiV,EAAE,GAAG5gB,CAAlC;AACA,cAAM+gB,EAAE,GAAGF,EAAE,GAAG7gB,CAAL,GAAS4gB,EAAE,GAAG9gB,CAAd,GAAkB4gB,EAAE,GAAG/U,CAAlC;AACA,cAAMqV,EAAE,GAAGH,EAAE,GAAGlV,CAAL,GAAS+U,EAAE,GAAG1gB,CAAd,GAAkB2gB,EAAE,GAAG7gB,CAAlC;AACA,cAAMmhB,EAAE,GAAG,CAACP,EAAD,GAAM5gB,CAAN,GAAU6gB,EAAE,GAAG3gB,CAAf,GAAmB4gB,EAAE,GAAGjV,CAAnC;AAEAwJ,cAAI,CAACrV,CAAL,GAASghB,EAAE,GAAGD,EAAL,GAAUI,EAAE,GAAG,CAACP,EAAhB,GAAqBK,EAAE,GAAG,CAACH,EAA3B,GAAgCI,EAAE,GAAG,CAACL,EAA/C;AACAxL,cAAI,CAACnV,CAAL,GAAS+gB,EAAE,GAAGF,EAAL,GAAUI,EAAE,GAAG,CAACN,EAAhB,GAAqBK,EAAE,GAAG,CAACN,EAA3B,GAAgCI,EAAE,GAAG,CAACF,EAA/C;AACAzL,cAAI,CAACxJ,CAAL,GAASqV,EAAE,GAAGH,EAAL,GAAUI,EAAE,GAAG,CAACL,EAAhB,GAAqBE,EAAE,GAAG,CAACH,EAA3B,GAAgCI,EAAE,GAAG,CAACL,EAA/C;AAEA,iBAAOvL,IAAP;AACH;;;+BAEMA,I,EAAW;AACd,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI,6CAAJ,EAAP;AAAmB;;AAEhC,cAAMrV,CAAC,GAAG,KAAKA,CAAf;AACA,cAAME,CAAC,GAAG,KAAKA,CAAf;AACA,cAAM2L,CAAC,GAAG,KAAKA,CAAf;AACA,cAAMpK,CAAC,GAAG,KAAKA,CAAf;AAEA,cAAM2f,EAAE,GAAGphB,CAAC,GAAGA,CAAf;AACA,cAAMqhB,EAAE,GAAGnhB,CAAC,GAAGA,CAAf;AACA,cAAMohB,EAAE,GAAGzV,CAAC,GAAGA,CAAf;AAEA,cAAM0V,EAAE,GAAGvhB,CAAC,GAAGohB,EAAf;AACA,cAAM5W,EAAE,GAAGxK,CAAC,GAAGqhB,EAAf;AACA,cAAMG,EAAE,GAAGxhB,CAAC,GAAGshB,EAAf;AACA,cAAMG,EAAE,GAAGvhB,CAAC,GAAGmhB,EAAf;AACA,cAAMK,EAAE,GAAGxhB,CAAC,GAAGohB,EAAf;AACA,cAAMK,EAAE,GAAG9V,CAAC,GAAGyV,EAAf;AACA,cAAMM,EAAE,GAAGngB,CAAC,GAAG2f,EAAf;AACA,cAAMS,EAAE,GAAGpgB,CAAC,GAAG4f,EAAf;AACA,cAAMS,EAAE,GAAGrgB,CAAC,GAAG6f,EAAf;AAEAjM,cAAI,CAACD,IAAL,CAAU,CACN,KAAKqM,EAAE,GAAGE,EAAV,CADM,EAENnX,EAAE,GAAGsX,EAFC,EAGNN,EAAE,GAAGK,EAHC,EAKNrX,EAAE,GAAGsX,EALC,EAMN,KAAKP,EAAE,GAAGI,EAAV,CANM,EAOND,EAAE,GAAGE,EAPC,EASNJ,EAAE,GAAGK,EATC,EAUNH,EAAE,GAAGE,EAVC,EAWN,KAAKL,EAAE,GAAGE,EAAV,CAXM,CAAV;AAcA,iBAAOpM,IAAP;AACH;;;+BAEMA,I,EAAW;AACd,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI,6CAAJ,EAAP;AAAmB;;AAEhC,cAAMrV,CAAC,GAAG,KAAKA,CAAf;AACA,cAAME,CAAC,GAAG,KAAKA,CAAf;AACA,cAAM2L,CAAC,GAAG,KAAKA,CAAf;AACA,cAAMpK,CAAC,GAAG,KAAKA,CAAf;AAEA,cAAM2f,EAAE,GAAGphB,CAAC,GAAGA,CAAf;AACA,cAAMqhB,EAAE,GAAGnhB,CAAC,GAAGA,CAAf;AACA,cAAMohB,EAAE,GAAGzV,CAAC,GAAGA,CAAf;AAEA,cAAM0V,EAAE,GAAGvhB,CAAC,GAAGohB,EAAf;AACA,cAAM5W,EAAE,GAAGxK,CAAC,GAAGqhB,EAAf;AACA,cAAMG,EAAE,GAAGxhB,CAAC,GAAGshB,EAAf;AACA,cAAMG,EAAE,GAAGvhB,CAAC,GAAGmhB,EAAf;AACA,cAAMK,EAAE,GAAGxhB,CAAC,GAAGohB,EAAf;AACA,cAAMK,EAAE,GAAG9V,CAAC,GAAGyV,EAAf;AACA,cAAMM,EAAE,GAAGngB,CAAC,GAAG2f,EAAf;AACA,cAAMS,EAAE,GAAGpgB,CAAC,GAAG4f,EAAf;AACA,cAAMS,EAAE,GAAGrgB,CAAC,GAAG6f,EAAf;AAEAjM,cAAI,CAACD,IAAL,CAAU,CACN,KAAKqM,EAAE,GAAGE,EAAV,CADM,EAENnX,EAAE,GAAGsX,EAFC,EAGNN,EAAE,GAAGK,EAHC,EAIN,CAJM,EAMNrX,EAAE,GAAGsX,EANC,EAON,KAAKP,EAAE,GAAGI,EAAV,CAPM,EAQND,EAAE,GAAGE,EARC,EASN,CATM,EAWNJ,EAAE,GAAGK,EAXC,EAYNH,EAAE,GAAGE,EAZC,EAaN,KAAKL,EAAE,GAAGE,EAAV,CAbM,EAcN,CAdM,EAgBN,CAhBM,EAiBN,CAjBM,EAkBN,CAlBM,EAmBN,CAnBM,CAAV;AAsBA,iBAAOpM,IAAP;AACH;;;4BAnWI;AACD,iBAAO,KAAKH,MAAL,CAAY,CAAZ,CAAP;AACH,S;0BAsCKjS,K,EAAe;AACjB,eAAKiS,MAAL,CAAY,CAAZ,IAAiBjS,KAAjB;AACH;;;4BAtCI;AACD,iBAAO,KAAKiS,MAAL,CAAY,CAAZ,CAAP;AACH,S;0BAsCKjS,K,EAAe;AACjB,eAAKiS,MAAL,CAAY,CAAZ,IAAiBjS,KAAjB;AACH;;;4BAtCI;AACD,iBAAO,KAAKiS,MAAL,CAAY,CAAZ,CAAP;AACH,S;0BAsCKjS,K,EAAe;AACjB,eAAKiS,MAAL,CAAY,CAAZ,IAAiBjS,KAAjB;AACH;;;4BAtCI;AACD,iBAAO,KAAKiS,MAAL,CAAY,CAAZ,CAAP;AACH,S;0BAsCKjS,K,EAAe;AACjB,eAAKiS,MAAL,CAAY,CAAZ,IAAiBjS,KAAjB;AACH;;;4BAtCK;AACF,iBAAO,CACH,KAAKiS,MAAL,CAAY,CAAZ,CADG,EAEH,KAAKA,MAAL,CAAY,CAAZ,CAFG,CAAP;AAIH,S;0BAmCMA,M,EAA0B;AAC7B,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACH;;;4BApCM;AACH,iBAAO,CACH,KAAKA,MAAL,CAAY,CAAZ,CADG,EAEH,KAAKA,MAAL,CAAY,CAAZ,CAFG,EAGH,KAAKA,MAAL,CAAY,CAAZ,CAHG,CAAP;AAKH,S;0BAgCOA,M,EAAkC;AACtC,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACH;;;4BAlCO;AACJ,iBAAO,CACH,KAAKA,MAAL,CAAY,CAAZ,CADG,EAEH,KAAKA,MAAL,CAAY,CAAZ,CAFG,EAGH,KAAKA,MAAL,CAAY,CAAZ,CAHG,EAIH,KAAKA,MAAL,CAAY,CAAZ,CAJG,CAAP;AAMH,S;0BA6BQA,M,EAA0C;AAC/C,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACH;;;4BA6RU6M,E,EAAUC,E,EAAQ;AACzB,iBAAOD,EAAE,CAAC/hB,CAAH,GAAOgiB,EAAE,CAAChiB,CAAV,GAAc+hB,EAAE,CAAC7hB,CAAH,GAAO8hB,EAAE,CAAC9hB,CAAxB,GAA4B6hB,EAAE,CAAClW,CAAH,GAAOmW,EAAE,CAACnW,CAAtC,GAA0CkW,EAAE,CAACtgB,CAAH,GAAOugB,EAAE,CAACvgB,CAA3D;AACH;;;4BAEUsgB,E,EAAUC,E,EAAU3M,I,EAAW;AACtC,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI0K,IAAJ,EAAP;AAAmB;;AAEhC1K,cAAI,CAACrV,CAAL,GAAS+hB,EAAE,CAAC/hB,CAAH,GAAOgiB,EAAE,CAAChiB,CAAnB;AACAqV,cAAI,CAACnV,CAAL,GAAS6hB,EAAE,CAAC7hB,CAAH,GAAO8hB,EAAE,CAAC9hB,CAAnB;AACAmV,cAAI,CAACxJ,CAAL,GAASkW,EAAE,CAAClW,CAAH,GAAOmW,EAAE,CAACnW,CAAnB;AACAwJ,cAAI,CAAC5T,CAAL,GAASsgB,EAAE,CAACtgB,CAAH,GAAOugB,EAAE,CAACvgB,CAAnB;AAEA,iBAAO4T,IAAP;AACH;;;gCAEc0M,E,EAAUC,E,EAAU3M,I,EAAW;AAC1C,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI0K,IAAJ,EAAP;AAAmB;;AAEhC,cAAMK,GAAG,GAAG2B,EAAE,CAAC/hB,CAAf;AACA,cAAMqgB,GAAG,GAAG0B,EAAE,CAAC7hB,CAAf;AACA,cAAMogB,GAAG,GAAGyB,EAAE,CAAClW,CAAf;AACA,cAAM0U,GAAG,GAAGwB,EAAE,CAACtgB,CAAf;AAEA,cAAM+e,GAAG,GAAGwB,EAAE,CAAChiB,CAAf;AACA,cAAMygB,GAAG,GAAGuB,EAAE,CAAC9hB,CAAf;AACA,cAAMwgB,GAAG,GAAGsB,EAAE,CAACnW,CAAf;AACA,cAAM8U,GAAG,GAAGqB,EAAE,CAACvgB,CAAf;AAEA4T,cAAI,CAACrV,CAAL,GAASogB,GAAG,GAAGO,GAAN,GAAYJ,GAAG,GAAGC,GAAlB,GAAwBH,GAAG,GAAGK,GAA9B,GAAoCJ,GAAG,GAAGG,GAAnD;AACApL,cAAI,CAACnV,CAAL,GAASmgB,GAAG,GAAGM,GAAN,GAAYJ,GAAG,GAAGE,GAAlB,GAAwBH,GAAG,GAAGE,GAA9B,GAAoCJ,GAAG,GAAGM,GAAnD;AACArL,cAAI,CAACxJ,CAAL,GAASyU,GAAG,GAAGK,GAAN,GAAYJ,GAAG,GAAGG,GAAlB,GAAwBN,GAAG,GAAGK,GAA9B,GAAoCJ,GAAG,GAAGG,GAAnD;AACAnL,cAAI,CAAC5T,CAAL,GAAS8e,GAAG,GAAGI,GAAN,GAAYP,GAAG,GAAGI,GAAlB,GAAwBH,GAAG,GAAGI,GAA9B,GAAoCH,GAAG,GAAGI,GAAnD;AAEA,iBAAOrL,IAAP;AACH;;;8BAEY0M,E,EAAUC,E,EAAU3M,I,EAAW;AACxC,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI0K,IAAJ,EAAP;AAAmB;;AAEhC,cAAMK,GAAG,GAAG2B,EAAE,CAAC/hB,CAAf;AACA,cAAMqgB,GAAG,GAAG0B,EAAE,CAAC7hB,CAAf;AACA,cAAMogB,GAAG,GAAGyB,EAAE,CAAClW,CAAf;AACA,cAAM0U,GAAG,GAAGwB,EAAE,CAACtgB,CAAf;AAEA,cAAM+e,GAAG,GAAGwB,EAAE,CAAChiB,CAAf;AACA,cAAMygB,GAAG,GAAGuB,EAAE,CAAC9hB,CAAf;AACA,cAAMwgB,GAAG,GAAGsB,EAAE,CAACnW,CAAf;AACA,cAAM8U,GAAG,GAAGqB,EAAE,CAACvgB,CAAf;AAEA4T,cAAI,CAACrV,CAAL,GAASugB,GAAG,GAAGG,GAAN,GAAYJ,GAAG,GAAGK,GAAlB,GAAwBP,GAAG,GAAGK,GAA9B,GAAoCJ,GAAG,GAAGG,GAAnD;AACAnL,cAAI,CAACnV,CAAL,GAASqgB,GAAG,GAAGI,GAAN,GAAYP,GAAG,GAAGI,GAAlB,GAAwBH,GAAG,GAAGI,GAA9B,GAAoCH,GAAG,GAAGI,GAAnD;AACArL,cAAI,CAACxJ,CAAL,GAAS0U,GAAG,GAAGC,GAAN,GAAYJ,GAAG,GAAGO,GAAlB,GAAwBN,GAAG,GAAGK,GAA9B,GAAoCJ,GAAG,GAAGG,GAAnD;AACApL,cAAI,CAAC5T,CAAL,GAAS8e,GAAG,GAAGE,GAAN,GAAYJ,GAAG,GAAGM,GAAlB,GAAwBL,GAAG,GAAGE,GAA9B,GAAoCJ,GAAG,GAAGM,GAAnD;AAEA,iBAAOrL,IAAP;AACH;;;iCAEe0M,E,EAAUC,E,EAAUC,I,EAAc5M,I,EAAW;AACzD,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI0K,IAAJ,EAAP;AAAmB;;AAEhC,cAAIkC,IAAI,IAAI,GAAZ,EAAiB;AACb5M,gBAAI,CAAC2K,IAAL,GAAY+B,EAAE,CAAC/B,IAAf;AAEA,mBAAO3K,IAAP;AACH,WAJD,MAIO,IAAI4M,IAAI,IAAI,GAAZ,EAAiB;AACpB5M,gBAAI,CAAC2K,IAAL,GAAYgC,EAAE,CAAChC,IAAf;AAEA,mBAAO3K,IAAP;AACH;;AAED,cAAIY,GAAG,GAAG8J,IAAI,CAAChU,GAAL,CAASgW,EAAT,EAAaC,EAAb,CAAV;AACA,cAAME,GAAG,GAAGF,EAAE,CAACthB,IAAH,EAAZ;;AAEA,cAAIuV,GAAG,GAAG,GAAV,EAAe;AACXiM,eAAG,CAACrU,OAAJ;AACAoI,eAAG,GAAG,CAACA,GAAP;AACH;;AAED,cAAIkM,EAAJ;AACA,cAAIC,EAAJ;;AAEA,cAAInM,GAAG,GAAG,MAAV,EAAkB;AACdkM,cAAE,GAAG,IAAIF,IAAT;AACAG,cAAE,GAAG,IAAIH,IAAT;AACH,WAHD,MAGO;AACH,gBAAM/L,GAAG,GAAWvV,IAAI,CAACkY,IAAL,CAAU,IAAI5C,GAAG,GAAGA,GAApB,CAApB;AACA,gBAAMjJ,KAAK,GAAWrM,IAAI,CAACgM,KAAL,CAAWuJ,GAAX,EAAgBD,GAAhB,CAAtB;AAEA,gBAAMoM,UAAU,GAAW,IAAInM,GAA/B;AAEAiM,cAAE,GAAGxhB,IAAI,CAACuV,GAAL,CAAS,CAAC,IAAI+L,IAAL,IAAajV,KAAtB,IAA+BqV,UAApC;AACAD,cAAE,GAAGzhB,IAAI,CAACuV,GAAL,CAAS,CAAC,IAAI+L,IAAL,IAAajV,KAAtB,IAA+BqV,UAApC;AACH;;AAEDhN,cAAI,CAACrV,CAAL,GAASmiB,EAAE,GAAGJ,EAAE,CAAC/hB,CAAR,GAAYoiB,EAAE,GAAGF,GAAG,CAACliB,CAA9B;AACAqV,cAAI,CAACnV,CAAL,GAASiiB,EAAE,GAAGJ,EAAE,CAAC7hB,CAAR,GAAYkiB,EAAE,GAAGF,GAAG,CAAChiB,CAA9B;AACAmV,cAAI,CAACxJ,CAAL,GAASsW,EAAE,GAAGJ,EAAE,CAAClW,CAAR,GAAYuW,EAAE,GAAGF,GAAG,CAACrW,CAA9B;AACAwJ,cAAI,CAAC5T,CAAL,GAAS0gB,EAAE,GAAGJ,EAAE,CAACtgB,CAAR,GAAY2gB,EAAE,GAAGF,GAAG,CAACzgB,CAA9B;AAEA,iBAAO4T,IAAP;AACH;;;4BAEU0M,E,EAAUC,E,EAAUC,I,EAAc5M,I,EAAW;AACpD,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI0K,IAAJ,EAAP;AAAmB;;AAEhC,cAAMuC,YAAY,GAAGP,EAAE,CAAC/hB,CAAH,GAAOgiB,EAAE,CAAChiB,CAAV,GAAc+hB,EAAE,CAAC7hB,CAAH,GAAO8hB,EAAE,CAAC9hB,CAAxB,GAA4B6hB,EAAE,CAAClW,CAAH,GAAOmW,EAAE,CAACnW,CAAtC,GAA0CkW,EAAE,CAACtgB,CAAH,GAAOugB,EAAE,CAACvgB,CAAzE;;AAEA,cAAId,IAAI,CAAC8H,GAAL,CAAS6Z,YAAT,KAA0B,GAA9B,EAAmC;AAC/BjN,gBAAI,CAAC2K,IAAL,GAAY+B,EAAE,CAAC/B,IAAf;AAEA,mBAAO3K,IAAP;AACH;;AAED,cAAMkN,SAAS,GAAG5hB,IAAI,CAAC6hB,IAAL,CAAUF,YAAV,CAAlB;AACA,cAAMG,YAAY,GAAG9hB,IAAI,CAACkY,IAAL,CAAU,MAAMyJ,YAAY,GAAGA,YAA/B,CAArB;;AAEA,cAAI3hB,IAAI,CAAC8H,GAAL,CAASga,YAAT,IAAyB,KAA7B,EAAoC;AAChCpN,gBAAI,CAACrV,CAAL,GAAS+hB,EAAE,CAAC/hB,CAAH,GAAO,GAAP,GAAagiB,EAAE,CAAChiB,CAAH,GAAO,GAA7B;AACAqV,gBAAI,CAACnV,CAAL,GAAS6hB,EAAE,CAAC7hB,CAAH,GAAO,GAAP,GAAa8hB,EAAE,CAAC9hB,CAAH,GAAO,GAA7B;AACAmV,gBAAI,CAACxJ,CAAL,GAASkW,EAAE,CAAClW,CAAH,GAAO,GAAP,GAAamW,EAAE,CAACnW,CAAH,GAAO,GAA7B;AACAwJ,gBAAI,CAAC5T,CAAL,GAASsgB,EAAE,CAACtgB,CAAH,GAAO,GAAP,GAAaugB,EAAE,CAACvgB,CAAH,GAAO,GAA7B;AAEA,mBAAO4T,IAAP;AACH;;AAED,cAAMqN,MAAM,GAAG/hB,IAAI,CAACuV,GAAL,CAAS,CAAC,IAAI+L,IAAL,IAAaM,SAAtB,IAAmCE,YAAlD;AACA,cAAME,MAAM,GAAGhiB,IAAI,CAACuV,GAAL,CAAS+L,IAAI,GAAGM,SAAhB,IAA6BE,YAA5C;AAEApN,cAAI,CAACrV,CAAL,GAAS+hB,EAAE,CAAC/hB,CAAH,GAAO0iB,MAAP,GAAgBV,EAAE,CAAChiB,CAAH,GAAO2iB,MAAhC;AACAtN,cAAI,CAACnV,CAAL,GAAS6hB,EAAE,CAAC7hB,CAAH,GAAOwiB,MAAP,GAAgBV,EAAE,CAAC9hB,CAAH,GAAOyiB,MAAhC;AACAtN,cAAI,CAACxJ,CAAL,GAASkW,EAAE,CAAClW,CAAH,GAAO6W,MAAP,GAAgBV,EAAE,CAACnW,CAAH,GAAO8W,MAAhC;AACAtN,cAAI,CAAC5T,CAAL,GAASsgB,EAAE,CAACtgB,CAAH,GAAOihB,MAAP,GAAgBV,EAAE,CAACvgB,CAAH,GAAOkhB,MAAhC;AAEA,iBAAOtN,IAAP;AACH;;;sCAEoB0D,I,EAAY/L,K,EAAeqI,I,EAAW;AACvD,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI0K,IAAJ,EAAP;AAAmB;;AAEhC/S,eAAK,IAAI,GAAT;AACA,cAAMkJ,GAAG,GAAGvV,IAAI,CAACuV,GAAL,CAASlJ,KAAT,CAAZ;AAEAqI,cAAI,CAACrV,CAAL,GAAS+Y,IAAI,CAAC/Y,CAAL,GAASkW,GAAlB;AACAb,cAAI,CAACnV,CAAL,GAAS6Y,IAAI,CAAC7Y,CAAL,GAASgW,GAAlB;AACAb,cAAI,CAACxJ,CAAL,GAASkN,IAAI,CAAClN,CAAL,GAASqK,GAAlB;AACAb,cAAI,CAAC5T,CAAL,GAASd,IAAI,CAACsV,GAAL,CAASjJ,KAAT,CAAT;AAEA,iBAAOqI,IAAP;AACH;;;;;;AAvae,SAAAgB,QAAA,GAAW,IAAI0J,IAAJ,GAAWzJ,WAAX,EAAX;;;;;;;;;;;;;;;;ACxFpB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAIqBsM,I;;;AA8BjB,oBAAY1N,MAAZ,EAAuC;AAAA;;AAM/B,aAAAA,MAAA,GAAS,IAAIC,YAAJ,CAAiB,CAAjB,CAAT;;AALJ,YAAID,MAAM,KAAKnS,SAAf,EAA0B;AACtB,eAAKyH,EAAL,GAAU0K,MAAV;AACH;AACJ;;;;2BAOE/Y,K,EAAa;AACZ,iBAAO,KAAK+Y,MAAL,CAAY/Y,KAAZ,CAAP;AACH;;;gCAEI;AACD,eAAK6D,CAAL,GAAS,CAAT;AACA,eAAKE,CAAL,GAAS,CAAT;AACH;;;6BAEImV,I,EAAW;AACZ,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAIuN,IAAJ,EAAP;AAAmB;;AAEhCvN,cAAI,CAACrV,CAAL,GAAS,KAAKA,CAAd;AACAqV,cAAI,CAACnV,CAAL,GAAS,KAAKA,CAAd;AAEA,iBAAOmV,IAAP;AACH;;;+BAEMA,I,EAAW;AACd,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAP;AAAa;;AAE1BA,cAAI,CAACrV,CAAL,GAAS,CAAC,KAAKA,CAAf;AACAqV,cAAI,CAACnV,CAAL,GAAS,CAAC,KAAKA,CAAf;AAEA,iBAAOmV,IAAP;AACH;;;+BAEMW,M,EAAiC;AAAA,cAAnBT,SAAmB,uEAAP,kDAAO;;AACpC,cAAI5U,IAAI,CAAC8H,GAAL,CAAS,KAAKzI,CAAL,GAASgW,MAAM,CAAChW,CAAzB,IAA8BuV,SAAlC,EAA6C;AACzC,mBAAO,KAAP;AACH;;AAED,cAAI5U,IAAI,CAAC8H,GAAL,CAAS,KAAKvI,CAAL,GAAS8V,MAAM,CAAC9V,CAAzB,IAA8BqV,SAAlC,EAA6C;AACzC,mBAAO,KAAP;AACH;;AAED,iBAAO,IAAP;AACH;;;iCAEK;AACF,iBAAO5U,IAAI,CAACkY,IAAL,CAAU,KAAKgK,aAAL,EAAV,CAAP;AACH;;;wCAEY;AACT,cAAM7iB,CAAC,GAAG,KAAKA,CAAf;AACA,cAAME,CAAC,GAAG,KAAKA,CAAf;AAEA,iBAAQF,CAAC,GAAGA,CAAJ,GAAQE,CAAC,GAAGA,CAApB;AACH;;;4BAEG8V,M,EAAY;AACZ,eAAKhW,CAAL,IAAUgW,MAAM,CAAChW,CAAjB;AACA,eAAKE,CAAL,IAAU8V,MAAM,CAAC9V,CAAjB;AAEA,iBAAO,IAAP;AACH;;;iCAEQ8V,M,EAAY;AACjB,eAAKhW,CAAL,IAAUgW,MAAM,CAAChW,CAAjB;AACA,eAAKE,CAAL,IAAU8V,MAAM,CAAC9V,CAAjB;AAEA,iBAAO,IAAP;AACH;;;iCAEQ8V,M,EAAY;AACjB,eAAKhW,CAAL,IAAUgW,MAAM,CAAChW,CAAjB;AACA,eAAKE,CAAL,IAAU8V,MAAM,CAAC9V,CAAjB;AAEA,iBAAO,IAAP;AACH;;;+BAEM8V,M,EAAY;AACf,eAAKhW,CAAL,IAAUgW,MAAM,CAAChW,CAAjB;AACA,eAAKE,CAAL,IAAU8V,MAAM,CAAC9V,CAAjB;AAEA,iBAAO,IAAP;AACH;;;8BAEK+C,K,EAAeoS,I,EAAW;AAC5B,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAP;AAAa;;AAE1BA,cAAI,CAACrV,CAAL,GAAS,KAAKA,CAAL,GAASiD,KAAlB;AACAoS,cAAI,CAACnV,CAAL,GAAS,KAAKA,CAAL,GAAS+C,KAAlB;AAEA,iBAAOoS,IAAP;AACH;;;kCAESA,I,EAAW;AACjB,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAP;AAAa;;AAE1B,cAAItZ,MAAM,GAAG,KAAKA,MAAL,EAAb;;AAEA,cAAIA,MAAM,KAAK,CAAf,EAAkB;AACd,mBAAO,IAAP;AACH;;AAED,cAAIA,MAAM,KAAK,CAAf,EAAkB;AACdsZ,gBAAI,CAACrV,CAAL,GAAS,CAAT;AACAqV,gBAAI,CAACnV,CAAL,GAAS,CAAT;AAEA,mBAAOmV,IAAP;AACH;;AAEDtZ,gBAAM,GAAG,MAAMA,MAAf;AAEAsZ,cAAI,CAACrV,CAAL,IAAUjE,MAAV;AACAsZ,cAAI,CAACnV,CAAL,IAAUnE,MAAV;AAEA,iBAAOsZ,IAAP;AACH;;;qCAEYC,M,EAAcD,I,EAAW;AAClC,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAP;AAAa;;AAE1B,iBAAOC,MAAM,CAACwN,YAAP,CAAoB,IAApB,EAA0BzN,IAA1B,CAAP;AACH;;;qCAEYC,M,EAAcD,I,EAAW;AAClC,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAP;AAAa;;AAE1B,iBAAOC,MAAM,CAACwN,YAAP,CAAoB,IAApB,EAA0BzN,IAA1B,CAAP;AACH;;;4BAhKI;AACD,iBAAO,KAAKH,MAAL,CAAY,CAAZ,CAAP;AACH,S;0BAaKjS,K,EAAe;AACjB,eAAKiS,MAAL,CAAY,CAAZ,IAAiBjS,KAAjB;AACH;;;4BAbI;AACD,iBAAO,KAAKiS,MAAL,CAAY,CAAZ,CAAP;AACH,S;0BAaKjS,K,EAAe;AACjB,eAAKiS,MAAL,CAAY,CAAZ,IAAiBjS,KAAjB;AACH;;;4BAbK;AACF,iBAAO,CACH,KAAKiS,MAAL,CAAY,CAAZ,CADG,EAEH,KAAKA,MAAL,CAAY,CAAZ,CAFG,CAAP;AAIH,S;0BAUMA,M,EAA0B;AAC7B,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACH;;;8BAwIYc,M,EAAc+M,O,EAAe1N,I,EAAW;AACjD,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI,6CAAJ,EAAP;AAAmB;;AAEhC,cAAMrV,CAAC,GAAGgW,MAAM,CAAChW,CAAjB;AACA,cAAME,CAAC,GAAG8V,MAAM,CAAC9V,CAAjB;AAEA,cAAMkhB,EAAE,GAAG2B,OAAO,CAAC/iB,CAAnB;AACA,cAAMqhB,EAAE,GAAG0B,OAAO,CAAC7iB,CAAnB;AAEA,cAAM2L,CAAC,GAAG7L,CAAC,GAAGqhB,EAAJ,GAASnhB,CAAC,GAAGkhB,EAAvB;AAEA/L,cAAI,CAACrV,CAAL,GAAS,CAAT;AACAqV,cAAI,CAACnV,CAAL,GAAS,CAAT;AACAmV,cAAI,CAACxJ,CAAL,GAASA,CAAT;AAEA,iBAAOwJ,IAAP;AACH;;;4BAEUW,M,EAAc+M,O,EAAa;AAClC,iBAAQ/M,MAAM,CAAChW,CAAP,GAAW+iB,OAAO,CAAC/iB,CAAnB,GAAuBgW,MAAM,CAAC9V,CAAP,GAAW6iB,OAAO,CAAC7iB,CAAlD;AACH;;;iCAEe8V,M,EAAc+M,O,EAAa;AACvC,iBAAOpiB,IAAI,CAACkY,IAAL,CAAU,KAAKmK,eAAL,CAAqBhN,MAArB,EAA6B+M,OAA7B,CAAV,CAAP;AACH;;;wCAEsB/M,M,EAAc+M,O,EAAa;AAC9C,cAAM/iB,CAAC,GAAG+iB,OAAO,CAAC/iB,CAAR,GAAYgW,MAAM,CAAChW,CAA7B;AACA,cAAME,CAAC,GAAG6iB,OAAO,CAAC7iB,CAAR,GAAY8V,MAAM,CAAC9V,CAA7B;AAEA,iBAAQF,CAAC,GAAGA,CAAJ,GAAQE,CAAC,GAAGA,CAApB;AACH;;;kCAEgB8V,M,EAAc+M,O,EAAe1N,I,EAAW;AACrD,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAIuN,IAAJ,EAAP;AAAmB;;AAEhC,cAAM5iB,CAAC,GAAGgW,MAAM,CAAChW,CAAP,GAAW+iB,OAAO,CAAC/iB,CAA7B;AACA,cAAME,CAAC,GAAG8V,MAAM,CAAC9V,CAAP,GAAW6iB,OAAO,CAAC7iB,CAA7B;AAEA,cAAInE,MAAM,GAAG4E,IAAI,CAACkY,IAAL,CAAU7Y,CAAC,GAAGA,CAAJ,GAAQE,CAAC,GAAGA,CAAtB,CAAb;;AAEA,cAAInE,MAAM,KAAK,CAAf,EAAkB;AACdsZ,gBAAI,CAACrV,CAAL,GAAS,CAAT;AACAqV,gBAAI,CAACnV,CAAL,GAAS,CAAT;AAEA,mBAAOmV,IAAP;AACH;;AAEDtZ,gBAAM,GAAG,IAAIA,MAAb;AAEAsZ,cAAI,CAACrV,CAAL,GAASA,CAAC,GAAGjE,MAAb;AACAsZ,cAAI,CAACnV,CAAL,GAASA,CAAC,GAAGnE,MAAb;AAEA,iBAAOsZ,IAAP;AACH;;;4BAEUW,M,EAAc+M,O,EAAed,I,EAAc5M,I,EAAW;AAC7D,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAIuN,IAAJ,EAAP;AAAmB;;AAEhC,cAAM5iB,CAAC,GAAGgW,MAAM,CAAChW,CAAjB;AACA,cAAME,CAAC,GAAG8V,MAAM,CAAC9V,CAAjB;AAEA,cAAMkhB,EAAE,GAAG2B,OAAO,CAAC/iB,CAAnB;AACA,cAAMqhB,EAAE,GAAG0B,OAAO,CAAC7iB,CAAnB;AAEAmV,cAAI,CAACrV,CAAL,GAASA,CAAC,GAAGiiB,IAAI,IAAIb,EAAE,GAAGphB,CAAT,CAAjB;AACAqV,cAAI,CAACnV,CAAL,GAASA,CAAC,GAAG+hB,IAAI,IAAIZ,EAAE,GAAGnhB,CAAT,CAAjB;AAEA,iBAAOmV,IAAP;AACH;;;4BAEUW,M,EAAc+M,O,EAAe1N,I,EAAW;AAC/C,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAIuN,IAAJ,EAAP;AAAmB;;AAEhCvN,cAAI,CAACrV,CAAL,GAASgW,MAAM,CAAChW,CAAP,GAAW+iB,OAAO,CAAC/iB,CAA5B;AACAqV,cAAI,CAACnV,CAAL,GAAS8V,MAAM,CAAC9V,CAAP,GAAW6iB,OAAO,CAAC7iB,CAA5B;AAEA,iBAAOmV,IAAP;AACH;;;mCAEiBW,M,EAAc+M,O,EAAe1N,I,EAAW;AACtD,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAIuN,IAAJ,EAAP;AAAmB;;AAEhCvN,cAAI,CAACrV,CAAL,GAASgW,MAAM,CAAChW,CAAP,GAAW+iB,OAAO,CAAC/iB,CAA5B;AACAqV,cAAI,CAACnV,CAAL,GAAS8V,MAAM,CAAC9V,CAAP,GAAW6iB,OAAO,CAAC7iB,CAA5B;AAEA,iBAAOmV,IAAP;AACH;;;gCAEcW,M,EAAc+M,O,EAAe1N,I,EAAW;AACnD,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAIuN,IAAJ,EAAP;AAAmB;;AAEhCvN,cAAI,CAACrV,CAAL,GAASgW,MAAM,CAAChW,CAAP,GAAW+iB,OAAO,CAAC/iB,CAA5B;AACAqV,cAAI,CAACnV,CAAL,GAAS8V,MAAM,CAAC9V,CAAP,GAAW6iB,OAAO,CAAC7iB,CAA5B;AAEA,iBAAOmV,IAAP;AACH;;;iCAEeW,M,EAAc+M,O,EAAe1N,I,EAAW;AACpD,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAIuN,IAAJ,EAAP;AAAmB;;AAEhCvN,cAAI,CAACrV,CAAL,GAASgW,MAAM,CAAChW,CAAP,GAAW+iB,OAAO,CAAC/iB,CAA5B;AACAqV,cAAI,CAACnV,CAAL,GAAS8V,MAAM,CAAC9V,CAAP,GAAW6iB,OAAO,CAAC7iB,CAA5B;AAEA,iBAAOmV,IAAP;AACH;;;;;;AAvOe,SAAA4N,IAAA,GAAO,IAAIL,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,CAAP;AACA,SAAAM,GAAA,GAAM,IAAIN,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,CAAN;;;;;;;;;;;;;;;;AC5CpB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAIqBO,I;;;AAoDjB,oBAAYjO,MAAZ,EAA+C;AAAA;;AAMvC,aAAAA,MAAA,GAAS,IAAIC,YAAJ,CAAiB,CAAjB,CAAT;;AALJ,YAAID,MAAM,KAAKnS,SAAf,EAA0B;AACtB,eAAK6U,GAAL,GAAW1C,MAAX;AACH;AACJ;;;;2BAWE/Y,K,EAAa;AACZ,iBAAO,KAAK+Y,MAAL,CAAY/Y,KAAZ,CAAP;AACH;;;gCAEI;AACD,eAAK6D,CAAL,GAAS,CAAT;AACA,eAAKE,CAAL,GAAS,CAAT;AACA,eAAK2L,CAAL,GAAS,CAAT;AACH;;;6BAEIwJ,I,EAAW;AACZ,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI8N,IAAJ,EAAP;AAAmB;;AAEhC9N,cAAI,CAACrV,CAAL,GAAS,KAAKA,CAAd;AACAqV,cAAI,CAACnV,CAAL,GAAS,KAAKA,CAAd;AACAmV,cAAI,CAACxJ,CAAL,GAAS,KAAKA,CAAd;AAEA,iBAAOwJ,IAAP;AACH;;;+BAEMA,I,EAAW;AACd,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAP;AAAa;;AAE1BA,cAAI,CAACrV,CAAL,GAAS,CAAC,KAAKA,CAAf;AACAqV,cAAI,CAACnV,CAAL,GAAS,CAAC,KAAKA,CAAf;AACAmV,cAAI,CAACxJ,CAAL,GAAS,CAAC,KAAKA,CAAf;AAEA,iBAAOwJ,IAAP;AACH;;;+BAEMW,M,EAAiC;AAAA,cAAnBT,SAAmB,uEAAP,kDAAO;;AACpC,cAAI5U,IAAI,CAAC8H,GAAL,CAAS,KAAKzI,CAAL,GAASgW,MAAM,CAAChW,CAAzB,IAA8BuV,SAAlC,EAA6C;AACzC,mBAAO,KAAP;AACH;;AAED,cAAI5U,IAAI,CAAC8H,GAAL,CAAS,KAAKvI,CAAL,GAAS8V,MAAM,CAAC9V,CAAzB,IAA8BqV,SAAlC,EAA6C;AACzC,mBAAO,KAAP;AACH;;AAED,cAAI5U,IAAI,CAAC8H,GAAL,CAAS,KAAKoD,CAAL,GAASmK,MAAM,CAACnK,CAAzB,IAA8B0J,SAAlC,EAA6C;AACzC,mBAAO,KAAP;AACH;;AAED,iBAAO,IAAP;AACH;;;iCAEK;AACF,iBAAO5U,IAAI,CAACkY,IAAL,CAAU,KAAKgK,aAAL,EAAV,CAAP;AACH;;;wCAEY;AACT,cAAM7iB,CAAC,GAAG,KAAKA,CAAf;AACA,cAAME,CAAC,GAAG,KAAKA,CAAf;AACA,cAAM2L,CAAC,GAAG,KAAKA,CAAf;AAEA,iBAAQ7L,CAAC,GAAGA,CAAJ,GAAQE,CAAC,GAAGA,CAAZ,GAAgB2L,CAAC,GAAGA,CAA5B;AACH;;;4BAEGmK,M,EAAY;AACZ,eAAKhW,CAAL,IAAUgW,MAAM,CAAChW,CAAjB;AACA,eAAKE,CAAL,IAAU8V,MAAM,CAAC9V,CAAjB;AACA,eAAK2L,CAAL,IAAUmK,MAAM,CAACnK,CAAjB;AAEA,iBAAO,IAAP;AACH;;;iCAEQmK,M,EAAY;AACjB,eAAKhW,CAAL,IAAUgW,MAAM,CAAChW,CAAjB;AACA,eAAKE,CAAL,IAAU8V,MAAM,CAAC9V,CAAjB;AACA,eAAK2L,CAAL,IAAUmK,MAAM,CAACnK,CAAjB;AAEA,iBAAO,IAAP;AACH;;;iCAEQmK,M,EAAY;AACjB,eAAKhW,CAAL,IAAUgW,MAAM,CAAChW,CAAjB;AACA,eAAKE,CAAL,IAAU8V,MAAM,CAAC9V,CAAjB;AACA,eAAK2L,CAAL,IAAUmK,MAAM,CAACnK,CAAjB;AAEA,iBAAO,IAAP;AACH;;;+BAEMmK,M,EAAY;AACf,eAAKhW,CAAL,IAAUgW,MAAM,CAAChW,CAAjB;AACA,eAAKE,CAAL,IAAU8V,MAAM,CAAC9V,CAAjB;AACA,eAAK2L,CAAL,IAAUmK,MAAM,CAACnK,CAAjB;AAEA,iBAAO,IAAP;AACH;;;8BAEK5I,K,EAAeoS,I,EAAW;AAC5B,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAP;AAAa;;AAE1BA,cAAI,CAACrV,CAAL,IAAUiD,KAAV;AACAoS,cAAI,CAACnV,CAAL,IAAU+C,KAAV;AACAoS,cAAI,CAACxJ,CAAL,IAAU5I,KAAV;AAEA,iBAAOoS,IAAP;AACH;;;kCAESA,I,EAAW;AACjB,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAP;AAAa;;AAE1B,cAAItZ,MAAM,GAAG,KAAKA,MAAL,EAAb;;AAEA,cAAIA,MAAM,KAAK,CAAf,EAAkB;AACd,mBAAO,IAAP;AACH;;AAED,cAAIA,MAAM,KAAK,CAAf,EAAkB;AACdsZ,gBAAI,CAACrV,CAAL,GAAS,CAAT;AACAqV,gBAAI,CAACnV,CAAL,GAAS,CAAT;AACAmV,gBAAI,CAACxJ,CAAL,GAAS,CAAT;AAEA,mBAAOwJ,IAAP;AACH;;AAEDtZ,gBAAM,GAAG,MAAMA,MAAf;AAEAsZ,cAAI,CAACrV,CAAL,IAAUjE,MAAV;AACAsZ,cAAI,CAACnV,CAAL,IAAUnE,MAAV;AACAsZ,cAAI,CAACxJ,CAAL,IAAU9P,MAAV;AAEA,iBAAOsZ,IAAP;AACH;;;uCAEcC,M,EAAcD,I,EAAW;AACpC,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAP;AAAa;;AAE1B,iBAAOC,MAAM,CAAC8N,YAAP,CAAoB,IAApB,EAA0B/N,IAA1B,CAAP;AACH;;;uCAEcgO,U,EAAkBhO,I,EAAW;AACxC,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAP;AAAa;;AAE1B,iBAAOgO,UAAU,CAACD,YAAX,CAAwB,IAAxB,EAA8B/N,IAA9B,CAAP;AACH;;;+BAEMA,I,EAAW;AACd,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI,6CAAJ,EAAP;AAAmB;;AAEhC,cAAM4D,CAAC,GAAG,IAAIkK,IAAJ,EAAV;AACA,cAAMnK,CAAC,GAAG,IAAImK,IAAJ,EAAV;AAEAlK,WAAC,CAACjZ,CAAF,GAAMW,IAAI,CAACsV,GAAL,CAAS,KAAKjW,CAAL,GAAS,GAAlB,CAAN;AACAgZ,WAAC,CAAChZ,CAAF,GAAMW,IAAI,CAACuV,GAAL,CAAS,KAAKlW,CAAL,GAAS,GAAlB,CAAN;AAEAiZ,WAAC,CAAC/Y,CAAF,GAAMS,IAAI,CAACsV,GAAL,CAAS,KAAK/V,CAAL,GAAS,GAAlB,CAAN;AACA8Y,WAAC,CAAC9Y,CAAF,GAAMS,IAAI,CAACuV,GAAL,CAAS,KAAKhW,CAAL,GAAS,GAAlB,CAAN;AAEA+Y,WAAC,CAACpN,CAAF,GAAMlL,IAAI,CAACsV,GAAL,CAAS,KAAKpK,CAAL,GAAS,GAAlB,CAAN;AACAmN,WAAC,CAACnN,CAAF,GAAMlL,IAAI,CAACuV,GAAL,CAAS,KAAKrK,CAAL,GAAS,GAAlB,CAAN;AAEAwJ,cAAI,CAACrV,CAAL,GAASgZ,CAAC,CAAChZ,CAAF,GAAMiZ,CAAC,CAAC/Y,CAAR,GAAY+Y,CAAC,CAACpN,CAAd,GAAkBoN,CAAC,CAACjZ,CAAF,GAAMgZ,CAAC,CAAC9Y,CAAR,GAAY8Y,CAAC,CAACnN,CAAzC;AACAwJ,cAAI,CAACnV,CAAL,GAAS+Y,CAAC,CAACjZ,CAAF,GAAMgZ,CAAC,CAAC9Y,CAAR,GAAY+Y,CAAC,CAACpN,CAAd,GAAkBmN,CAAC,CAAChZ,CAAF,GAAMiZ,CAAC,CAAC/Y,CAAR,GAAY8Y,CAAC,CAACnN,CAAzC;AACAwJ,cAAI,CAACxJ,CAAL,GAASoN,CAAC,CAACjZ,CAAF,GAAMiZ,CAAC,CAAC/Y,CAAR,GAAY8Y,CAAC,CAACnN,CAAd,GAAkBmN,CAAC,CAAChZ,CAAF,GAAMgZ,CAAC,CAAC9Y,CAAR,GAAY+Y,CAAC,CAACpN,CAAzC;AACAwJ,cAAI,CAAC5T,CAAL,GAASwX,CAAC,CAACjZ,CAAF,GAAMiZ,CAAC,CAAC/Y,CAAR,GAAY+Y,CAAC,CAACpN,CAAd,GAAkBmN,CAAC,CAAChZ,CAAF,GAAMgZ,CAAC,CAAC9Y,CAAR,GAAY8Y,CAAC,CAACnN,CAAzC;AAEA,iBAAOwJ,IAAP;AACH;;;4BAhOI;AACD,iBAAO,KAAKH,MAAL,CAAY,CAAZ,CAAP;AACH,S;0BAyBKjS,K,EAAe;AACjB,eAAKiS,MAAL,CAAY,CAAZ,IAAiBjS,KAAjB;AACH;;;4BAzBI;AACD,iBAAO,KAAKiS,MAAL,CAAY,CAAZ,CAAP;AACH,S;0BAyBKjS,K,EAAe;AACjB,eAAKiS,MAAL,CAAY,CAAZ,IAAiBjS,KAAjB;AACH;;;4BAzBI;AACD,iBAAO,KAAKiS,MAAL,CAAY,CAAZ,CAAP;AACH,S;0BAyBKjS,K,EAAe;AACjB,eAAKiS,MAAL,CAAY,CAAZ,IAAiBjS,KAAjB;AACH;;;4BAzBK;AACF,iBAAO,CACH,KAAKiS,MAAL,CAAY,CAAZ,CADG,EAEH,KAAKA,MAAL,CAAY,CAAZ,CAFG,CAAP;AAIH,S;0BAsBMA,M,EAA0B;AAC7B,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACH;;;4BAvBM;AACH,iBAAO,CACH,KAAKA,MAAL,CAAY,CAAZ,CADG,EAEH,KAAKA,MAAL,CAAY,CAAZ,CAFG,EAGH,KAAKA,MAAL,CAAY,CAAZ,CAHG,CAAP;AAKH,S;0BAmBOA,M,EAAkC;AACtC,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACH;;;8BAkLYc,M,EAAc+M,O,EAAe1N,I,EAAW;AACjD,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI8N,IAAJ,EAAP;AAAmB;;AAEhC,cAAMnjB,CAAC,GAAGgW,MAAM,CAAChW,CAAjB;AACA,cAAME,CAAC,GAAG8V,MAAM,CAAC9V,CAAjB;AACA,cAAM2L,CAAC,GAAGmK,MAAM,CAACnK,CAAjB;AAEA,cAAMuV,EAAE,GAAG2B,OAAO,CAAC/iB,CAAnB;AACA,cAAMqhB,EAAE,GAAG0B,OAAO,CAAC7iB,CAAnB;AACA,cAAMohB,EAAE,GAAGyB,OAAO,CAAClX,CAAnB;AAEAwJ,cAAI,CAACrV,CAAL,GAASE,CAAC,GAAGohB,EAAJ,GAASzV,CAAC,GAAGwV,EAAtB;AACAhM,cAAI,CAACnV,CAAL,GAAS2L,CAAC,GAAGuV,EAAJ,GAASphB,CAAC,GAAGshB,EAAtB;AACAjM,cAAI,CAACxJ,CAAL,GAAS7L,CAAC,GAAGqhB,EAAJ,GAASnhB,CAAC,GAAGkhB,EAAtB;AAEA,iBAAO/L,IAAP;AACH;;;4BAEUW,M,EAAc+M,O,EAAa;AAClC,cAAM/iB,CAAC,GAAGgW,MAAM,CAAChW,CAAjB;AACA,cAAME,CAAC,GAAG8V,MAAM,CAAC9V,CAAjB;AACA,cAAM2L,CAAC,GAAGmK,MAAM,CAACnK,CAAjB;AAEA,cAAMuV,EAAE,GAAG2B,OAAO,CAAC/iB,CAAnB;AACA,cAAMqhB,EAAE,GAAG0B,OAAO,CAAC7iB,CAAnB;AACA,cAAMohB,EAAE,GAAGyB,OAAO,CAAClX,CAAnB;AAEA,iBAAQ7L,CAAC,GAAGohB,EAAJ,GAASlhB,CAAC,GAAGmhB,EAAb,GAAkBxV,CAAC,GAAGyV,EAA9B;AACH;;;iCAEetL,M,EAAc+M,O,EAAa;AACvC,cAAM/iB,CAAC,GAAG+iB,OAAO,CAAC/iB,CAAR,GAAYgW,MAAM,CAAChW,CAA7B;AACA,cAAME,CAAC,GAAG6iB,OAAO,CAAC7iB,CAAR,GAAY8V,MAAM,CAAC9V,CAA7B;AACA,cAAM2L,CAAC,GAAGkX,OAAO,CAAClX,CAAR,GAAYmK,MAAM,CAACnK,CAA7B;AAEA,iBAAOlL,IAAI,CAACkY,IAAL,CAAU,KAAKmK,eAAL,CAAqBhN,MAArB,EAA6B+M,OAA7B,CAAV,CAAP;AACH;;;wCAEsB/M,M,EAAc+M,O,EAAa;AAC9C,cAAM/iB,CAAC,GAAG+iB,OAAO,CAAC/iB,CAAR,GAAYgW,MAAM,CAAChW,CAA7B;AACA,cAAME,CAAC,GAAG6iB,OAAO,CAAC7iB,CAAR,GAAY8V,MAAM,CAAC9V,CAA7B;AACA,cAAM2L,CAAC,GAAGkX,OAAO,CAAClX,CAAR,GAAYmK,MAAM,CAACnK,CAA7B;AAEA,iBAAQ7L,CAAC,GAAGA,CAAJ,GAAQE,CAAC,GAAGA,CAAZ,GAAgB2L,CAAC,GAAGA,CAA5B;AACH;;;kCAEgBmK,M,EAAc+M,O,EAAe1N,I,EAAW;AACrD,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI8N,IAAJ,EAAP;AAAmB;;AAEhC,cAAMnjB,CAAC,GAAGgW,MAAM,CAAChW,CAAP,GAAW+iB,OAAO,CAAC/iB,CAA7B;AACA,cAAME,CAAC,GAAG8V,MAAM,CAAC9V,CAAP,GAAW6iB,OAAO,CAAC7iB,CAA7B;AACA,cAAM2L,CAAC,GAAGmK,MAAM,CAACnK,CAAP,GAAWkX,OAAO,CAAClX,CAA7B;AAEA,cAAI9P,MAAM,GAAG4E,IAAI,CAACkY,IAAL,CAAU7Y,CAAC,GAAGA,CAAJ,GAAQE,CAAC,GAAGA,CAAZ,GAAgB2L,CAAC,GAAGA,CAA9B,CAAb;;AAEA,cAAI9P,MAAM,KAAK,CAAf,EAAkB;AACdsZ,gBAAI,CAACrV,CAAL,GAAS,CAAT;AACAqV,gBAAI,CAACnV,CAAL,GAAS,CAAT;AACAmV,gBAAI,CAACxJ,CAAL,GAAS,CAAT;AAEA,mBAAOwJ,IAAP;AACH;;AAEDtZ,gBAAM,GAAG,IAAIA,MAAb;AAEAsZ,cAAI,CAACrV,CAAL,GAASA,CAAC,GAAGjE,MAAb;AACAsZ,cAAI,CAACnV,CAAL,GAASA,CAAC,GAAGnE,MAAb;AACAsZ,cAAI,CAACxJ,CAAL,GAASA,CAAC,GAAG9P,MAAb;AAEA,iBAAOsZ,IAAP;AACH;;;4BAEUW,M,EAAc+M,O,EAAed,I,EAAc5M,I,EAAW;AAC7D,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI8N,IAAJ,EAAP;AAAmB;;AAEhC9N,cAAI,CAACrV,CAAL,GAASgW,MAAM,CAAChW,CAAP,GAAWiiB,IAAI,IAAIc,OAAO,CAAC/iB,CAAR,GAAYgW,MAAM,CAAChW,CAAvB,CAAxB;AACAqV,cAAI,CAACnV,CAAL,GAAS8V,MAAM,CAAC9V,CAAP,GAAW+hB,IAAI,IAAIc,OAAO,CAAC7iB,CAAR,GAAY8V,MAAM,CAAC9V,CAAvB,CAAxB;AACAmV,cAAI,CAACxJ,CAAL,GAASmK,MAAM,CAACnK,CAAP,GAAWoW,IAAI,IAAIc,OAAO,CAAClX,CAAR,GAAYmK,MAAM,CAACnK,CAAvB,CAAxB;AAEA,iBAAOwJ,IAAP;AACH;;;4BAEUW,M,EAAc+M,O,EAAe1N,I,EAAW;AAC/C,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI8N,IAAJ,EAAP;AAAmB;;AAEhC9N,cAAI,CAACrV,CAAL,GAASgW,MAAM,CAAChW,CAAP,GAAW+iB,OAAO,CAAC/iB,CAA5B;AACAqV,cAAI,CAACnV,CAAL,GAAS8V,MAAM,CAAC9V,CAAP,GAAW6iB,OAAO,CAAC7iB,CAA5B;AACAmV,cAAI,CAACxJ,CAAL,GAASmK,MAAM,CAACnK,CAAP,GAAWkX,OAAO,CAAClX,CAA5B;AAEA,iBAAOwJ,IAAP;AACH;;;mCAEiBW,M,EAAc+M,O,EAAe1N,I,EAAW;AACtD,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI8N,IAAJ,EAAP;AAAmB;;AAEhC9N,cAAI,CAACrV,CAAL,GAASgW,MAAM,CAAChW,CAAP,GAAW+iB,OAAO,CAAC/iB,CAA5B;AACAqV,cAAI,CAACnV,CAAL,GAAS8V,MAAM,CAAC9V,CAAP,GAAW6iB,OAAO,CAAC7iB,CAA5B;AACAmV,cAAI,CAACxJ,CAAL,GAASmK,MAAM,CAACnK,CAAP,GAAWkX,OAAO,CAAClX,CAA5B;AAEA,iBAAOwJ,IAAP;AACH;;;gCAEcW,M,EAAc+M,O,EAAe1N,I,EAAW;AACnD,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI8N,IAAJ,EAAP;AAAmB;;AAEhC9N,cAAI,CAACrV,CAAL,GAASgW,MAAM,CAAChW,CAAP,GAAW+iB,OAAO,CAAC/iB,CAA5B;AACAqV,cAAI,CAACnV,CAAL,GAAS8V,MAAM,CAAC9V,CAAP,GAAW6iB,OAAO,CAAC7iB,CAA5B;AACAmV,cAAI,CAACxJ,CAAL,GAASmK,MAAM,CAACnK,CAAP,GAAWkX,OAAO,CAAClX,CAA5B;AAEA,iBAAOwJ,IAAP;AACH;;;iCAEeW,M,EAAc+M,O,EAAe1N,I,EAAW;AACpD,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAI8N,IAAJ,EAAP;AAAmB;;AAEhC9N,cAAI,CAACrV,CAAL,GAASgW,MAAM,CAAChW,CAAP,GAAW+iB,OAAO,CAAC/iB,CAA5B;AACAqV,cAAI,CAACnV,CAAL,GAAS8V,MAAM,CAAC9V,CAAP,GAAW6iB,OAAO,CAAC7iB,CAA5B;AACAmV,cAAI,CAACxJ,CAAL,GAASmK,MAAM,CAACnK,CAAP,GAAWkX,OAAO,CAAClX,CAA5B;AAEA,iBAAOwJ,IAAP;AACH;;;;;;AAhSe,SAAA4N,IAAA,GAAO,IAAIE,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAT,CAAP;AACA,SAAAD,GAAA,GAAM,IAAIC,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAT,CAAN;AAEA,SAAA3H,EAAA,GAAK,IAAI2H,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAT,CAAL;AACA,SAAAtI,KAAA,GAAQ,IAAIsI,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAT,CAAR;AACA,SAAAG,OAAA,GAAU,IAAIH,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAT,CAAV;;;;;;;;;;;;;;;;ACpEpB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAEqBI,I;;;AAsJjB,oBAAYrO,MAAZ,EAAuD;AAAA;;AAM/C,aAAAA,MAAA,GAAS,IAAIC,YAAJ,CAAiB,CAAjB,CAAT;;AALJ,YAAID,MAAM,KAAKnS,SAAf,EAA0B;AACtB,eAAKid,IAAL,GAAY9K,MAAZ;AACH;AACJ;;;;2BAOE/Y,K,EAAa;AACZ,iBAAO,KAAK+Y,MAAL,CAAY/Y,KAAZ,CAAP;AACH;;;gCAEI;AACD,eAAK6D,CAAL,GAAS,CAAT;AACA,eAAKE,CAAL,GAAS,CAAT;AACA,eAAK2L,CAAL,GAAS,CAAT;AACA,eAAKpK,CAAL,GAAS,CAAT;AACH;;;6BAEI4T,I,EAAW;AACZ,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAIkO,IAAJ,EAAP;AAAmB;;AAEhClO,cAAI,CAACrV,CAAL,GAAS,KAAKA,CAAd;AACAqV,cAAI,CAACnV,CAAL,GAAS,KAAKA,CAAd;AACAmV,cAAI,CAACxJ,CAAL,GAAS,KAAKA,CAAd;AACAwJ,cAAI,CAAC5T,CAAL,GAAS,KAAKA,CAAd;AAEA,iBAAO4T,IAAP;AACH;;;+BAEMA,I,EAAW;AACd,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAP;AAAa;;AAE1BA,cAAI,CAACrV,CAAL,GAAS,CAAC,KAAKA,CAAf;AACAqV,cAAI,CAACnV,CAAL,GAAS,CAAC,KAAKA,CAAf;AACAmV,cAAI,CAACxJ,CAAL,GAAS,CAAC,KAAKA,CAAf;AACAwJ,cAAI,CAAC5T,CAAL,GAAS,CAAC,KAAKA,CAAf;AAEA,iBAAO4T,IAAP;AACH;;;+BAEMW,M,EAAiC;AAAA,cAAnBT,SAAmB,uEAAP,kDAAO;;AACpC,cAAI5U,IAAI,CAAC8H,GAAL,CAAS,KAAKzI,CAAL,GAASgW,MAAM,CAAChW,CAAzB,IAA8BuV,SAAlC,EAA6C;AACzC,mBAAO,KAAP;AACH;;AAED,cAAI5U,IAAI,CAAC8H,GAAL,CAAS,KAAKvI,CAAL,GAAS8V,MAAM,CAAC9V,CAAzB,IAA8BqV,SAAlC,EAA6C;AACzC,mBAAO,KAAP;AACH;;AAED,cAAI5U,IAAI,CAAC8H,GAAL,CAAS,KAAKoD,CAAL,GAASmK,MAAM,CAACnK,CAAzB,IAA8B0J,SAAlC,EAA6C;AACzC,mBAAO,KAAP;AACH;;AAED,cAAI5U,IAAI,CAAC8H,GAAL,CAAS,KAAKhH,CAAL,GAASuU,MAAM,CAACvU,CAAzB,IAA8B8T,SAAlC,EAA6C;AACzC,mBAAO,KAAP;AACH;;AAED,iBAAO,IAAP;AACH;;;iCAEK;AACF,iBAAO5U,IAAI,CAACkY,IAAL,CAAU,KAAKgK,aAAL,EAAV,CAAP;AACH;;;wCAEY;AACT,cAAM7iB,CAAC,GAAG,KAAKA,CAAf;AACA,cAAME,CAAC,GAAG,KAAKA,CAAf;AACA,cAAM2L,CAAC,GAAG,KAAKA,CAAf;AACA,cAAMpK,CAAC,GAAG,KAAKA,CAAf;AAEA,iBAAQzB,CAAC,GAAGA,CAAJ,GAAQE,CAAC,GAAGA,CAAZ,GAAgB2L,CAAC,GAAGA,CAApB,GAAwBpK,CAAC,GAAGA,CAApC;AACH;;;4BAEGuU,M,EAAY;AACZ,eAAKhW,CAAL,IAAUgW,MAAM,CAAChW,CAAjB;AACA,eAAKE,CAAL,IAAU8V,MAAM,CAAC9V,CAAjB;AACA,eAAK2L,CAAL,IAAUmK,MAAM,CAACnK,CAAjB;AACA,eAAKpK,CAAL,IAAUuU,MAAM,CAACvU,CAAjB;AAEA,iBAAO,IAAP;AACH;;;iCAEQuU,M,EAAY;AACjB,eAAKhW,CAAL,IAAUgW,MAAM,CAAChW,CAAjB;AACA,eAAKE,CAAL,IAAU8V,MAAM,CAAC9V,CAAjB;AACA,eAAK2L,CAAL,IAAUmK,MAAM,CAACnK,CAAjB;AACA,eAAKpK,CAAL,IAAUuU,MAAM,CAACvU,CAAjB;AAEA,iBAAO,IAAP;AACH;;;iCAEQuU,M,EAAY;AACjB,eAAKhW,CAAL,IAAUgW,MAAM,CAAChW,CAAjB;AACA,eAAKE,CAAL,IAAU8V,MAAM,CAAC9V,CAAjB;AACA,eAAK2L,CAAL,IAAUmK,MAAM,CAACnK,CAAjB;AACA,eAAKpK,CAAL,IAAUuU,MAAM,CAACvU,CAAjB;AAEA,iBAAO,IAAP;AACH;;;+BAEMuU,M,EAAY;AACf,eAAKhW,CAAL,IAAUgW,MAAM,CAAChW,CAAjB;AACA,eAAKE,CAAL,IAAU8V,MAAM,CAAC9V,CAAjB;AACA,eAAK2L,CAAL,IAAUmK,MAAM,CAACnK,CAAjB;AACA,eAAKpK,CAAL,IAAUuU,MAAM,CAACvU,CAAjB;AAEA,iBAAO,IAAP;AACH;;;8BAEKwB,K,EAAeoS,I,EAAW;AAC5B,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAP;AAAa;;AAE1BA,cAAI,CAACrV,CAAL,IAAUiD,KAAV;AACAoS,cAAI,CAACnV,CAAL,IAAU+C,KAAV;AACAoS,cAAI,CAACxJ,CAAL,IAAU5I,KAAV;AACAoS,cAAI,CAAC5T,CAAL,IAAUwB,KAAV;AAEA,iBAAOoS,IAAP;AACH;;;kCAESA,I,EAAW;AACjB,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAP;AAAa;;AAE1B,cAAItZ,MAAM,GAAG,KAAKA,MAAL,EAAb;;AAEA,cAAIA,MAAM,KAAK,CAAf,EAAkB;AACd,mBAAO,IAAP;AACH;;AAED,cAAIA,MAAM,KAAK,CAAf,EAAkB;AACdsZ,gBAAI,CAACrV,CAAL,IAAU,CAAV;AACAqV,gBAAI,CAACnV,CAAL,IAAU,CAAV;AACAmV,gBAAI,CAACxJ,CAAL,IAAU,CAAV;AACAwJ,gBAAI,CAAC5T,CAAL,IAAU,CAAV;AAEA,mBAAO4T,IAAP;AACH;;AAEDtZ,gBAAM,GAAG,MAAMA,MAAf;AAEAsZ,cAAI,CAACrV,CAAL,IAAUjE,MAAV;AACAsZ,cAAI,CAACnV,CAAL,IAAUnE,MAAV;AACAsZ,cAAI,CAACxJ,CAAL,IAAU9P,MAAV;AACAsZ,cAAI,CAAC5T,CAAL,IAAU1F,MAAV;AAEA,iBAAOsZ,IAAP;AACH;;;qCAEYC,M,EAAcD,I,EAAW;AAClC,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAP;AAAa;;AAE1B,iBAAOC,MAAM,CAACkO,YAAP,CAAoB,IAApB,EAA0BnO,IAA1B,CAAP;AACH;;;4BAhTI;AACD,iBAAO,KAAKH,MAAL,CAAY,CAAZ,CAAP;AACH,S;0BAsCKjS,K,EAAe;AACjB,eAAKiS,MAAL,CAAY,CAAZ,IAAiBjS,KAAjB;AACH;;;4BAtCI;AACD,iBAAO,KAAKiS,MAAL,CAAY,CAAZ,CAAP;AACH,S;0BAsCKjS,K,EAAe;AACjB,eAAKiS,MAAL,CAAY,CAAZ,IAAiBjS,KAAjB;AACH;;;4BAtCI;AACD,iBAAO,KAAKiS,MAAL,CAAY,CAAZ,CAAP;AACH,S;0BAsCKjS,K,EAAe;AACjB,eAAKiS,MAAL,CAAY,CAAZ,IAAiBjS,KAAjB;AACH;;;4BAtCI;AACD,iBAAO,KAAKiS,MAAL,CAAY,CAAZ,CAAP;AACH,S;0BAsCKjS,K,EAAe;AACjB,eAAKiS,MAAL,CAAY,CAAZ,IAAiBjS,KAAjB;AACH;;;4BAtCK;AACF,iBAAO,CACH,KAAKiS,MAAL,CAAY,CAAZ,CADG,EAEH,KAAKA,MAAL,CAAY,CAAZ,CAFG,CAAP;AAIH,S;0BAmCMA,M,EAA0B;AAC7B,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACH;;;4BApCM;AACH,iBAAO,CACH,KAAKA,MAAL,CAAY,CAAZ,CADG,EAEH,KAAKA,MAAL,CAAY,CAAZ,CAFG,EAGH,KAAKA,MAAL,CAAY,CAAZ,CAHG,CAAP;AAKH,S;0BAgCOA,M,EAAkC;AACtC,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACH;;;4BAlCO;AACJ,iBAAO,CACH,KAAKA,MAAL,CAAY,CAAZ,CADG,EAEH,KAAKA,MAAL,CAAY,CAAZ,CAFG,EAGH,KAAKA,MAAL,CAAY,CAAZ,CAHG,EAIH,KAAKA,MAAL,CAAY,CAAZ,CAJG,CAAP;AAMH,S;0BA6BQA,M,EAA0C;AAC/C,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACH;;;4BAEI;AACD,iBAAO,KAAKA,MAAL,CAAY,CAAZ,CAAP;AACH,S;0BAsCKjS,K,EAAe;AACjB,eAAKiS,MAAL,CAAY,CAAZ,IAAiBjS,KAAjB;AACH;;;4BAtCI;AACD,iBAAO,KAAKiS,MAAL,CAAY,CAAZ,CAAP;AACH,S;0BAsCKjS,K,EAAe;AACjB,eAAKiS,MAAL,CAAY,CAAZ,IAAiBjS,KAAjB;AACH;;;4BAtCI;AACD,iBAAO,KAAKiS,MAAL,CAAY,CAAZ,CAAP;AACH,S;0BAsCKjS,K,EAAe;AACjB,eAAKiS,MAAL,CAAY,CAAZ,IAAiBjS,KAAjB;AACH;;;4BAtCI;AACD,iBAAO,KAAKiS,MAAL,CAAY,CAAZ,CAAP;AACH,S;0BAsCKjS,K,EAAe;AACjB,eAAKiS,MAAL,CAAY,CAAZ,IAAiBjS,KAAjB;AACH;;;4BAtCK;AACF,iBAAO,CACH,KAAKiS,MAAL,CAAY,CAAZ,CADG,EAEH,KAAKA,MAAL,CAAY,CAAZ,CAFG,CAAP;AAIH,S;0BAmCMA,M,EAA0B;AAC7B,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACH;;;4BApCM;AACH,iBAAO,CACH,KAAKA,MAAL,CAAY,CAAZ,CADG,EAEH,KAAKA,MAAL,CAAY,CAAZ,CAFG,EAGH,KAAKA,MAAL,CAAY,CAAZ,CAHG,CAAP;AAKH,S;0BAgCOA,M,EAAkC;AACtC,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACH;;;4BAlCO;AACJ,iBAAO,CACH,KAAKA,MAAL,CAAY,CAAZ,CADG,EAEH,KAAKA,MAAL,CAAY,CAAZ,CAFG,EAGH,KAAKA,MAAL,CAAY,CAAZ,CAHG,EAIH,KAAKA,MAAL,CAAY,CAAZ,CAJG,CAAP;AAMH,S;0BA6BQA,M,EAA0C;AAC/C,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACA,eAAKA,MAAL,CAAY,CAAZ,IAAiBA,MAAM,CAAC,CAAD,CAAvB;AACH;;;4BAgKUc,M,EAAc+M,O,EAAed,I,EAAc5M,I,EAAW;AAC7D,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAIkO,IAAJ,EAAP;AAAmB;;AAEhClO,cAAI,CAACrV,CAAL,GAASgW,MAAM,CAAChW,CAAP,GAAWiiB,IAAI,IAAIc,OAAO,CAAC/iB,CAAR,GAAYgW,MAAM,CAAChW,CAAvB,CAAxB;AACAqV,cAAI,CAACnV,CAAL,GAAS8V,MAAM,CAAC9V,CAAP,GAAW+hB,IAAI,IAAIc,OAAO,CAAC7iB,CAAR,GAAY8V,MAAM,CAAC9V,CAAvB,CAAxB;AACAmV,cAAI,CAACxJ,CAAL,GAASmK,MAAM,CAACnK,CAAP,GAAWoW,IAAI,IAAIc,OAAO,CAAClX,CAAR,GAAYmK,MAAM,CAACnK,CAAvB,CAAxB;AACAwJ,cAAI,CAAC5T,CAAL,GAASuU,MAAM,CAACvU,CAAP,GAAWwgB,IAAI,IAAIc,OAAO,CAACthB,CAAR,GAAYuU,MAAM,CAACvU,CAAvB,CAAxB;AAEA,iBAAO4T,IAAP;AACH;;;4BAEUW,M,EAAc+M,O,EAAe1N,I,EAAW;AAC/C,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAIkO,IAAJ,EAAP;AAAmB;;AAEhClO,cAAI,CAACrV,CAAL,GAASgW,MAAM,CAAChW,CAAP,GAAW+iB,OAAO,CAAC/iB,CAA5B;AACAqV,cAAI,CAACnV,CAAL,GAAS8V,MAAM,CAAC9V,CAAP,GAAW6iB,OAAO,CAAC7iB,CAA5B;AACAmV,cAAI,CAACxJ,CAAL,GAASmK,MAAM,CAACnK,CAAP,GAAWkX,OAAO,CAAClX,CAA5B;AACAwJ,cAAI,CAAC5T,CAAL,GAASuU,MAAM,CAACvU,CAAP,GAAWshB,OAAO,CAACthB,CAA5B;AAEA,iBAAO4T,IAAP;AACH;;;mCAEiBW,M,EAAc+M,O,EAAe1N,I,EAAW;AACtD,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAIkO,IAAJ,EAAP;AAAmB;;AAEhClO,cAAI,CAACrV,CAAL,GAASgW,MAAM,CAAChW,CAAP,GAAW+iB,OAAO,CAAC/iB,CAA5B;AACAqV,cAAI,CAACnV,CAAL,GAAS8V,MAAM,CAAC9V,CAAP,GAAW6iB,OAAO,CAAC7iB,CAA5B;AACAmV,cAAI,CAACxJ,CAAL,GAASmK,MAAM,CAACnK,CAAP,GAAWkX,OAAO,CAAClX,CAA5B;AACAwJ,cAAI,CAAC5T,CAAL,GAASuU,MAAM,CAACvU,CAAP,GAAWshB,OAAO,CAACthB,CAA5B;AAEA,iBAAO4T,IAAP;AACH;;;gCAEcW,M,EAAc+M,O,EAAe1N,I,EAAW;AACnD,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAIkO,IAAJ,EAAP;AAAmB;;AAEhClO,cAAI,CAACrV,CAAL,GAASgW,MAAM,CAAChW,CAAP,GAAW+iB,OAAO,CAAC/iB,CAA5B;AACAqV,cAAI,CAACnV,CAAL,GAAS8V,MAAM,CAAC9V,CAAP,GAAW6iB,OAAO,CAAC7iB,CAA5B;AACAmV,cAAI,CAACxJ,CAAL,GAASmK,MAAM,CAACnK,CAAP,GAAWkX,OAAO,CAAClX,CAA5B;AACAwJ,cAAI,CAAC5T,CAAL,GAASuU,MAAM,CAACvU,CAAP,GAAWshB,OAAO,CAACthB,CAA5B;AAEA,iBAAO4T,IAAP;AACH;;;iCAEeW,M,EAAc+M,O,EAAe1N,I,EAAW;AACpD,cAAI,CAACA,IAAL,EAAW;AAAEA,gBAAI,GAAG,IAAIkO,IAAJ,EAAP;AAAmB;;AAEhClO,cAAI,CAACrV,CAAL,GAASgW,MAAM,CAAChW,CAAP,GAAW+iB,OAAO,CAAC/iB,CAA5B;AACAqV,cAAI,CAACnV,CAAL,GAAS8V,MAAM,CAAC9V,CAAP,GAAW6iB,OAAO,CAAC7iB,CAA5B;AACAmV,cAAI,CAACxJ,CAAL,GAASmK,MAAM,CAACnK,CAAP,GAAWkX,OAAO,CAAClX,CAA5B;AACAwJ,cAAI,CAAC5T,CAAL,GAASuU,MAAM,CAACvU,CAAP,GAAWshB,OAAO,CAACthB,CAA5B;AAEA,iBAAO4T,IAAP;AACH;;;;;;AA3Me,SAAA4N,IAAA,GAAO,IAAIM,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAT,CAAP;AACA,SAAAL,GAAA,GAAM,IAAIK,IAAJ,CAAS,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAT,CAAN;;;;;;;;;;;;;;;;ACnKpB;AAAA;;;AAAA;AAAA;AAAA,O,CAAA;AACA;AACA;;;AAEO,QAAME,WAAW,GAAG;AACzBC,gBAAU,EAAE;AADa,KAApB;AAIP;;;;;;;AAOA;;;;;;;;;;;;;;;;;ACfA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAOA,0EAAYtO,IAAZ;AAEArW,UAAM,CAAChC,gBAAP,CAAwB,aAAxB,EAAuC,UAAAzE,CAAC;AAAA,aAAIA,CAAC,CAACqG,cAAF,EAAJ;AAAA,KAAxC;;AAEA,QAAI,sEAAY+kB,UAAhB,EAA4B;AAC1B;AACD;;AAED,gFAAyBC,eAAzB,CAAyC,yDAAzC,WACS,UAAAC,GAAG;AAAA,aAAIre,OAAO,CAACse,KAAR,CAAcD,GAAd,CAAJ;AAAA,KADZ","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component } from '@angular/core';\nimport { Movable } from 'src/app/model/movable';\nimport { CanvasService } from 'src/app/service/canvas.service';\nimport { ICommandService, CanvasCommandService } from 'src/app/service/command.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n  providers: [{\n      provide: ICommandService,\n      useClass: CanvasCommandService\n    }\n  ]\n})\nexport class AppComponent {\n  title = 'thumb-up';\n\n  public movable = new Movable();\n\n  public get canvas() {\n    return this.canvasService_.canvas; }\n\n  constructor(\n    private readonly canvasService_: CanvasService) {\n\n  }\n}\n","<div class=\"container\">\n  <canvas-component [canvas]=\"canvas\"></canvas-component>\n  <control-pannel></control-pannel>\n  <layer-control></layer-control>\n</div>","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { PortalModule } from '@angular/cdk/portal';\n\nimport { AppComponent } from './app.component';\nimport { MovableComponent } from 'src/app/components/movable/movable.component';\nimport { CanvasService } from 'src/app/service/canvas.service';\nimport { ImageDrawingComponent } from 'src/app/components/image-drawing/image-drawing.component';\nimport { CanvasComponent } from 'src/app/components/canvas/canvas.component';\nimport { TextDrawingComponent } from 'src/app/components/text-drawing/text-drawing.component';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { ControlPannelComponent } from 'src/app/components/control/control-pannel.component';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatSliderModule } from '@angular/material/slider';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { FormsModule } from '@angular/forms';\nimport { CanvasComponentService } from 'src/app/components/canvas/canvas.component.service';\nimport { MovableControlComponent } from 'src/app/components/control/movable/movable-control.component';\nimport { LayerControlComponent } from 'src/app/components/control/layer/layer-control.component';\nimport { LayerControlItemComponent } from 'src/app/components/control/layer/layer-control-item.component';\nimport { TextDrawingControlComponent } from 'src/app/components/control/text-drawing/text-drawing-control.component';\nimport { DrawingControlComponent } from 'src/app/components/control/drawing/drawing-control.component';\nimport { ColorFilterControlComponent } from 'src/app/components/control/filter/color-filter-control';\nimport { ColorPickerModule } from 'ngx-color-picker';\nimport { ImageDrawingControlComponent } from 'src/app/components/control/image-drawing/image-drawing-control.component';\nimport { KeybindingService } from 'src/app/service/keybinding.service';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    ControlPannelComponent,\n    MovableControlComponent,\n    LayerControlComponent,\n    LayerControlItemComponent,\n    DrawingControlComponent,\n    ColorFilterControlComponent,\n    TextDrawingControlComponent,\n    ImageDrawingControlComponent,\n    MovableComponent,\n    CanvasComponent,\n    ImageDrawingComponent,\n    TextDrawingComponent,\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    BrowserAnimationsModule,\n    PortalModule,\n\n    MatFormFieldModule,\n    MatButtonModule,\n    MatDividerModule,\n    MatCardModule,\n    MatInputModule,\n    MatSliderModule,\n    MatSelectModule,\n    MatCheckboxModule,\n\n    ColorPickerModule\n  ],\n  providers: [\n    KeybindingService,\n    CanvasService,\n    CanvasComponentService\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\r\nimport { CanvasComponent } from 'src/app/components/canvas/canvas.component';\r\n\r\n@Injectable()\r\nexport class CanvasComponentService {\r\n\r\n  public canvasComponent: CanvasComponent;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n}","import { Component, ComponentFactoryResolver, Input, OnInit, Inject, Type, ViewChild, ViewContainerRef, AfterViewInit, ComponentFactory, Injector, OnDestroy, ComponentRef, EventEmitter, ElementRef } from '@angular/core';\r\nimport { ComponentPortal, Portal, TemplatePortal } from '@angular/cdk/portal';\r\nimport { Canvas, CanvasDrawingAddRemoveEvent, CanvasRemoveDrawingCommand, CanvasAddStackElementCommand } from 'src/app/model/canvas';\r\nimport { ICommandService, CanvasCommandService } from 'src/app/service/command.service';\r\nimport { Drawing } from 'src/app/model/drawing';\r\nimport { ImageDrawing } from 'src/app/model/image-drawing';\r\nimport { TextDrawing } from 'src/app/model/text-drawing';\r\nimport { TextDrawingComponent } from 'src/app/components/text-drawing/text-drawing.component';\r\nimport { ImageDrawingComponent } from 'src/app/components/image-drawing/image-drawing.component';\r\nimport { Subscription } from 'rxjs';\r\nimport { IDrawingComponent } from 'src/app/components/drawing/drawing.component';\r\nimport { MovableComponent } from 'src/app/components/movable/movable.component';\r\nimport { CanvasComponentService } from 'src/app/components/canvas/canvas.component.service';\r\nimport vec2 from 'src/app/util/vec2';\r\nimport hotkeys from 'hotkeys-js';\r\nimport { KeybindingService, IKeybindingDisposer } from 'src/app/service/keybinding.service';\r\n\r\n@Component({\r\n  selector: 'canvas-component',\r\n  templateUrl: './canvas.component.html',\r\n  styleUrls: ['./canvas.component.scss']\r\n})\r\nexport class CanvasComponent implements OnInit, OnDestroy, AfterViewInit {\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  public readonly onDidChangeFocusedDrawing = new EventEmitter<IDrawingComponent>();\r\n  public readonly onDidChangeCamera = new EventEmitter<void>();\r\n\r\n  @Input()\r\n  canvas: Canvas;\r\n\r\n  @ViewChild('drawingContainer', {read: ViewContainerRef}) \r\n      drawingContainerRef_: ViewContainerRef;\r\n  @ViewChild('container', {static:true})\r\n      containerRef_: ElementRef<HTMLDivElement>;\r\n  @ViewChild('canvas', {static:true})\r\n      canvasRef_: ElementRef<HTMLDivElement>;\r\n\r\n  private keybindingDisposers_: IKeybindingDisposer[] = [];\r\n\r\n  public guiPortal: Portal<any>;\r\n\r\n  private drawingComponents_: Array<IDrawingComponent> = [];\r\n  public get drawingComponents(): ReadonlyArray<IDrawingComponent> {\r\n    return this.drawingComponents_; }\r\n  private drawingComponentRefs_: Array<ComponentRef<IDrawingComponent>> = [];\r\n\r\n  private focusedDrawing_: IDrawingComponent = null;\r\n  public get focusedDrawing() { return this.focusedDrawing_; }\r\n\r\n  private lastMousePosition_: vec2;\r\n  private cameraX_: number = 0;\r\n  public get cameraX() { return this.cameraX_; }\r\n  public set cameraX(v: number) {\r\n    this.cameraX_ = v;\r\n    this.onDidChangeCamera.emit();\r\n  }\r\n  private cameraY_: number = 0;\r\n  public get cameraY() { return this.cameraY_; }\r\n  public set cameraY(v: number) {\r\n    this.cameraY_ = v;\r\n    this.onDidChangeCamera.emit();\r\n  }\r\n  private cameraZoom_: number = 1;\r\n  public get cameraZoom() { return this.cameraZoom_; }\r\n  public set cameraZoom(v: number) {\r\n    v = Math.min(3, Math.max(0.2, v));\r\n    v *= 10;\r\n    v = Math.round(v);\r\n    v /= 10;\r\n    this.cameraZoom_ = v;\r\n    this.onDidChangeCamera.emit();\r\n  }\r\n\r\n  constructor(\r\n    private readonly injector_: Injector,\r\n    private readonly canvasComponentService_: CanvasComponentService,\r\n    keybindingService_: KeybindingService,\r\n    @Inject(ICommandService) private readonly commandService_: CanvasCommandService,\r\n    private readonly componentFactoryResolver_: ComponentFactoryResolver) {\r\n    this.canvasComponentService_.canvasComponent = this;\r\n    this.moveCamera = this.moveCamera.bind(this);\r\n\r\n    this.keybindingDisposers_.push(keybindingService_.bind({\r\n      keychord: 'ctrl+z',\r\n      mac: 'command+z'\r\n    }, () => {\r\n      this.canvas.editStack.undo();\r\n    }));\r\n    this.keybindingDisposers_.push(keybindingService_.bind({\r\n      keychord: 'ctrl+y',\r\n      mac: 'command+y'\r\n    }, () => {\r\n      this.canvas.editStack.redo();\r\n    }));\r\n    this.keybindingDisposers_.push(keybindingService_.bind({\r\n      keychord: 'delete'\r\n    }, () => {\r\n      if (!this.focusedDrawing) return;\r\n      this.commandService_.dispatch(\r\n        new CanvasRemoveDrawingCommand(this.canvas, this.focusedDrawing.drawing));\r\n      this.commandService_.dispatch(\r\n        new CanvasAddStackElementCommand());\r\n    }));\r\n  }\r\n  \r\n  ngOnDestroy() {\r\n    this.subs_.forEach(sub => sub.unsubscribe());\r\n    this.keybindingDisposers_.forEach(disposer => disposer());\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.commandService_.canvas = this.canvas;\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    for (let i = 0; i < this.canvas.drawings.length; i ++) {\r\n      const drawing = this.canvas.drawings[i];\r\n      this.createDrawingComponent(drawing, i);\r\n    }\r\n    this.subs_.push(this.canvas.onDidAddDrawing.subscribe((e: CanvasDrawingAddRemoveEvent) => {\r\n      this.createDrawingComponent(e.drawing, e.index);\r\n    }));\r\n    this.subs_.push(this.canvas.onDidReorderDrawing.subscribe(([i, j]) => {\r\n      let tmp1 = this.drawingComponentRefs_[i];\r\n      this.drawingComponentRefs_[i] = this.drawingComponentRefs_[j];\r\n      this.drawingComponentRefs_[j] = tmp1;\r\n      let tmp2 = this.drawingComponents[i];\r\n      this.drawingComponents_[i] = this.drawingComponents_[j];\r\n      this.drawingComponents_[j] = tmp2;\r\n    }));\r\n    this.subs_.push(this.canvas.onWillRemoveDrawing.subscribe((e: CanvasDrawingAddRemoveEvent) => {\r\n      if (this.focusedDrawing_?.drawing == e.drawing) this.blurAll();\r\n      this.drawingComponentRefs_.splice(e.index, 1)[0]!.destroy();\r\n      this.drawingComponents_.splice(e.index, 1);\r\n    }));\r\n\r\n    this.containerRef_.nativeElement.addEventListener('mousewheel', (e: any) => {\r\n      this.onMouseWheel(e);\r\n    })\r\n    this.containerRef_.nativeElement.addEventListener('DOMMouseScroll', (e: any) => {\r\n      this.onMouseWheel(e);\r\n    })\r\n  }\r\n  \r\n  private createDrawingComponent(drawing: Drawing, index: number) {\r\n    let factory: ComponentFactory<any>;\r\n    switch (drawing.type) {\r\n      case ImageDrawing.type:\r\n        factory = this.componentFactoryResolver_.resolveComponentFactory(ImageDrawingComponent);\r\n        break;\r\n      case TextDrawing.type:\r\n        factory = this.componentFactoryResolver_.resolveComponentFactory(TextDrawingComponent);\r\n        break;\r\n    }\r\n    const componentRef = this.drawingContainerRef_.createComponent(\r\n        factory, index, this.injector_);\r\n    (componentRef.instance as any).drawing = drawing;\r\n    this.drawingComponentRefs_.splice(index, 0, componentRef);\r\n    this.drawingComponents_.splice(index, 0, componentRef.instance);\r\n  }\r\n\r\n  public focusDrawingComponent(drawingComponent: IDrawingComponent) {\r\n    this.blurAll();\r\n    const movableComponent = drawingComponent.movableComponent;\r\n    movableComponent!.focus();\r\n    this.focusedDrawing_ = drawingComponent;\r\n    this.onDidChangeFocusedDrawing.emit(drawingComponent);\r\n    this.guiPortal = new TemplatePortal(movableComponent.guiContent, movableComponent.viewContainerRef);\r\n  }\r\n\r\n  public blurAll() {\r\n    for (let i = 0; i < this.drawingComponents_.length; i ++) {\r\n      const drawing = this.drawingComponents_[i];\r\n      drawing.movableComponent.blur();\r\n    }\r\n    this.guiPortal = null;\r\n    this.focusedDrawing_ = null;\r\n    this.onDidChangeFocusedDrawing.emit(null);\r\n  }\r\n\r\n  onMousedown(e: MouseEvent) {\r\n    if (e.button == 0) {\r\n      let element: HTMLElement | null = e.target as (HTMLElement | null);\r\n      let movableId = 0;\r\n      while (element instanceof HTMLElement) {\r\n        if (element.tagName.toLowerCase() == 'movable') {\r\n          movableId = +element.getAttribute('movable-id');\r\n          break;\r\n        }\r\n        element = element.parentElement;\r\n      }\r\n      if (!movableId) {\r\n        this.blurAll();\r\n        return;\r\n      }\r\n      const drawingComponent = this.getDrawingComponentByMovableId(movableId);\r\n      this.focusDrawingComponent(drawingComponent);\r\n    }\r\n    else if (e.button == 2) {\r\n      e.preventDefault();\r\n      this.lastMousePosition_ = new vec2([e.screenX, e.screenY]);\r\n      window.addEventListener('mousemove', this.moveCamera);\r\n      const mouseup = () => {\r\n        window.removeEventListener('mousemove', this.moveCamera);\r\n        window.removeEventListener('mouseup', mouseup);\r\n      }\r\n      window.addEventListener('mouseup', mouseup);\r\n    }\r\n  }\r\n\r\n  onMouseWheel(e: WheelEvent) {\r\n    const pos = new vec2([e.pageX, e.pageY]);\r\n    const dvec2 = this.fromPageToCanvas(pos);\r\n    const delta = e.deltaY | e.detail;\r\n    const lastZoom = this.cameraZoom;\r\n    if (delta < 0) {\r\n      this.cameraZoom = this.cameraZoom + 0.1;\r\n    }\r\n    else {\r\n      this.cameraZoom = this.cameraZoom - 0.1;\r\n    }\r\n    const dz = this.cameraZoom - lastZoom;\r\n    const dx = dvec2.scale(dz);\r\n    this.cameraX = this.cameraX - dx.x;\r\n    this.cameraY = this.cameraY - dx.y;\r\n  }\r\n\r\n  private moveCamera(e: MouseEvent) {\r\n    const position = new vec2([e.screenX, e.screenY]);\r\n    position.subtract(this.lastMousePosition_);\r\n    this.cameraX = this.cameraX + position.x;\r\n    this.cameraY = this.cameraY + position.y;\r\n    this.lastMousePosition_ = new vec2([e.screenX, e.screenY]);;\r\n  }\r\n\r\n  public fromPageToCanvas(vec: vec2) {\r\n    const center = new vec2([\r\n      this.containerRef_.nativeElement.offsetWidth / 2,\r\n      this.containerRef_.nativeElement.offsetHeight / 2]);\r\n    const cs = vec.copy();\r\n    cs.subtract(center);\r\n    cs.subtract(new vec2([this.cameraX, this.cameraY]));\r\n    cs.scale(1 / this.cameraZoom);\r\n    cs.x = Math.round(cs.x);\r\n    cs.y = Math.round(cs.y);\r\n    return cs;\r\n  }\r\n\r\n  public fromPageToCanvasScreen(vec: vec2) {\r\n    const center = new vec2([\r\n      this.containerRef_.nativeElement.offsetWidth / 2,\r\n      this.containerRef_.nativeElement.offsetHeight / 2]);\r\n    const cs = new vec2([vec.x, vec.y]);\r\n    cs.subtract(center);\r\n    return cs;\r\n  }\r\n\r\n  private getMovableComponentById(id: number): MovableComponent | null {\r\n    for (let i = 0; i < this.drawingComponents_.length; i ++) {\r\n      const drawing = this.drawingComponents_[i];\r\n      const movable = drawing.drawing.movable;\r\n      if (movable.id == id) return drawing.movableComponent;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  private getDrawingComponentByMovableId(id: number): IDrawingComponent | null {\r\n    for (let i = 0; i < this.drawingComponents_.length; i ++) {\r\n      const drawing = this.drawingComponents_[i];\r\n      const movable = drawing.drawing.movable;\r\n      if (movable.id == id) return drawing;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  private getDrawingComponentByDrawing(drawing: Drawing): IDrawingComponent | null {\r\n    for (let i = 0; i < this.drawingComponents_.length; i ++) {\r\n      const drawingComponent = this.drawingComponents_[i];\r\n      if (drawingComponent.drawing === drawing) return drawingComponent;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public getContentStyle() {\r\n    return {\r\n      width: `${this.canvas.width}px`,\r\n      height: `${this.canvas.height}px`\r\n    }\r\n  }\r\n\r\n  public getCanvasStyle() {\r\n    return {\r\n      transform: `\r\n        translateX(${this.cameraX_}px)\r\n        translateY(${this.cameraY_}px)\r\n        scale(${this.cameraZoom_})`\r\n    }\r\n  }\r\n\r\n  public render(): string {\r\n    const canvas = this.canvas;\r\n    const cvs = document.createElement('canvas');\r\n    const tmpCvs = document.createElement('canvas');\r\n    const ctx = cvs.getContext('2d');\r\n    const tmpCtx = tmpCvs.getContext('2d');\r\n    cvs.width = this.canvas.width;\r\n    cvs.height = this.canvas.height;\r\n    ctx.fillStyle = 'white';\r\n    ctx.fillRect(0, 0, cvs.width, cvs.height);\r\n    for (let i = this.drawingComponents.length - 1; i >= 0; i --) {\r\n      const drawingComponent = this.drawingComponents[i];\r\n      const movable = drawingComponent.movableComponent.movable;\r\n      tmpCvs.width = movable.w;\r\n      tmpCvs.height = movable.h;\r\n      drawingComponent.render(tmpCtx);\r\n\r\n      // Blit\r\n      ctx.save();\r\n      ctx.translate(movable.x + canvas.width / 2, movable.y + canvas.height / 2);\r\n      ctx.rotate(movable.rad);\r\n      ctx.drawImage(tmpCvs, -movable.w / 2, -movable.h / 2);\r\n      ctx.restore();\r\n    }\r\n    return cvs.toDataURL('image/png', 1.0);\r\n  }\r\n\r\n}","<div class=\"container\" #container\r\n  (mousedown)=\"onMousedown($event)\">\r\n  <div class=\"canvas\" #canvas>\r\n    <div class=\"canvas-camera\" [ngStyle]=\"getCanvasStyle()\">\r\n      <div class=\"canvas-cover\">\r\n      </div>\r\n      <div class=\"canvas-background\" [ngStyle]=\"getContentStyle()\"></div>\r\n      <div class=\"canvas-border\" [ngStyle]=\"getContentStyle()\">\r\n        <div class=\"cover t\"></div>\r\n        <div class=\"cover b\"></div>\r\n        <div class=\"cover l\"></div>\r\n        <div class=\"cover r\"></div>\r\n      </div>\r\n      <div class=\"drawings\">\r\n        <ng-container #drawingContainer>\r\n        </ng-container>\r\n      </div>\r\n    </div>\r\n    <ng-template [cdkPortalOutlet]=\"guiPortal\"></ng-template>\r\n  </div>\r\n</div>","import { Component, Inject, Injector, ComponentFactoryResolver, ComponentRef, ComponentFactory, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { ICommandService } from 'src/app/service/command.service';\r\nimport { TextDrawing } from 'src/app/model/text-drawing';\r\nimport { CanvasService } from 'src/app/service/canvas.service';\r\nimport { CanvasAddDrawingCommand, CanvasResizeCommand, CanvasAddStackElementCommand } from 'src/app/model/canvas';\r\nimport { ImageDrawing } from 'src/app/model/image-drawing';\r\nimport { Subscription } from 'rxjs';\r\nimport { Movable } from 'src/app/model/movable';\r\nimport { CanvasComponentService } from 'src/app/components/canvas/canvas.component.service';\r\nimport { MovableComponent } from 'src/app/components/movable/movable.component';\r\nimport { IDrawingComponent } from 'src/app/components/drawing/drawing.component';\r\nimport { TextDrawingControlComponent } from 'src/app/components/control/text-drawing/text-drawing-control.component';\r\nimport { MatSliderChange } from '@angular/material/slider';\r\n\r\n@Component({\r\n  selector: 'control-pannel',\r\n  templateUrl: './control-pannel.component.html',\r\n  styleUrls: ['./control-pannel.component.scss']\r\n})\r\nexport class ControlPannelComponent {\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  @ViewChild('drawingControlContainer', {read: ViewContainerRef}) \r\n      drawingControlContainer_: ViewContainerRef;\r\n\r\n  public canvasWidth: number;\r\n  public canvasHeight: number;\r\n  onChangeCanvasSize(w: number, h: number) {\r\n    const canvas = this.canvasService_.canvas;\r\n    const ww = (w === undefined ? canvas.width : w); \r\n    const hh = (h === undefined ? canvas.height : h); \r\n    this.commandService_.dispatch(\r\n      new CanvasResizeCommand(canvas, ww, hh));\r\n  }\r\n  public canvasZoom: number;\r\n  onChangeCanvasZoom(e: MatSliderChange) {\r\n    this.canvasComponentService_.canvasComponent.cameraZoom = e.value;\r\n  }\r\n\r\n  public get canvas() {\r\n    return this.canvasService_.canvas; }\r\n\r\n  private focusedDrawing_: IDrawingComponent;\r\n  public get focusedDrawing() { return this.focusedDrawing_; }\r\n  private drawingControlComponent_: ComponentRef<any>;\r\n\r\n  constructor(\r\n    private readonly injector_: Injector,\r\n    private readonly componentFactoryResolver_: ComponentFactoryResolver,\r\n    private readonly canvasService_: CanvasService,\r\n    private readonly canvasComponentService_: CanvasComponentService,\r\n    @Inject(ICommandService) private readonly commandService_: ICommandService) {\r\n\r\n    const canvas = canvasService_.canvas;\r\n    const canvasComponent = canvasComponentService_.canvasComponent;\r\n    this.canvasWidth = canvas.width;\r\n    this.canvasHeight = canvas.height;\r\n    this.subs_.push(canvas.onDidChangeSize.subscribe(() => {\r\n      this.canvasWidth = canvas.width;\r\n      this.canvasHeight = canvas.height;\r\n    }));\r\n    this.canvasZoom = canvasComponent.cameraZoom;\r\n    this.subs_.push(canvasComponent.onDidChangeCamera.subscribe(() => {\r\n      this.canvasZoom = canvasComponent.cameraZoom;\r\n    }));\r\n    this.focusedDrawing_ = canvasComponent.focusedDrawing;\r\n    this.subs_.push(canvasComponent.onDidChangeFocusedDrawing.subscribe(drawingComponent => {\r\n      this.updateFocusedDrawing(drawingComponent);\r\n    }))\r\n\r\n  }\r\n\r\n  private updateFocusedDrawing(drawingComponent: IDrawingComponent) {\r\n    this.focusedDrawing_ = drawingComponent;\r\n    // if (this.drawingControlComponent_) {\r\n    //   this.drawingControlComponent_.destroy();\r\n    //   this.drawingControlComponent_ = null;\r\n    // }\r\n    // if (!drawingComponent) return;\r\n    // let factory: ComponentFactory<any>;\r\n    // switch (drawingComponent.drawing.type) {\r\n    //   case ImageDrawing.type:\r\n    //     break;\r\n    //   case TextDrawing.type:\r\n    //     factory = this.componentFactoryResolver_.resolveComponentFactory(TextDrawingControlComponent);\r\n    //     break;\r\n    // }\r\n    // if (!factory) return;\r\n    // const componentRef = this.drawingControlContainer_.createComponent(\r\n    //   factory, undefined, this.injector_);\r\n    // componentRef.instance.drawing = drawingComponent.drawing;\r\n    // this.drawingControlComponent_ = componentRef;\r\n  }\r\n\r\n  addTextDrawing() {\r\n    const drawing = new TextDrawing('Nanum Myeongjo', 30, 'Text');\r\n    const canvas = this.canvasService_.canvas;\r\n    this.commandService_.dispatch(\r\n      new CanvasAddDrawingCommand(canvas, drawing));\r\n    this.commandService_.dispatch(new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  addImageDrawing(e: any) {\r\n    const file: File = e.target.files[0];\r\n    if (!file) return;\r\n    const reader = new FileReader();\r\n    reader.addEventListener('load', () => {\r\n      const image = new Image();\r\n      image.src = reader.result as string;\r\n      image.onload = () => {\r\n        const imageDrawing = new ImageDrawing(image);\r\n        this.commandService_.dispatch(\r\n          new CanvasAddDrawingCommand(this.canvasService_.canvas, imageDrawing));\r\n        this.commandService_.dispatch(new CanvasAddStackElementCommand());\r\n      }\r\n    })\r\n    reader.readAsDataURL(file);\r\n  }\r\n\r\n}","<mat-card class=\"control-pannel\">\r\n  <div class=\"tools\">\r\n    <div class=\"item\">\r\n      <button mat-icon-button (click)=\"addTextDrawing()\">\r\n        <span class=\"material-icons\">title</span>\r\n      </button>\r\n    </div>\r\n    <div class=\"item file-input\">\r\n      <button accept=\"image/*\" mat-icon-button>\r\n        <input type=\"file\" id=\"file\" (change)=\"addImageDrawing($event)\">\r\n        <label for=\"file\">\r\n          <span class=\"material-icons\">insert_photo</span>\r\n        </label>\r\n      </button>\r\n    </div>\r\n  </div>\r\n  <mat-divider></mat-divider>\r\n  <div class=\"canvas\">\r\n    <div class=\"size eq\">\r\n      <mat-form-field>\r\n        <input matInput placeholder=\"Canvas width\" [(ngModel)]=\"canvasWidth\"\r\n          (keyup)=\"onChangeCanvasSize(+$event.target.value, undefined)\">\r\n        <span matSuffix>px</span>\r\n      </mat-form-field>\r\n      <mat-form-field>\r\n        <input matInput placeholder=\"Canvas height\" [(ngModel)]=\"canvasHeight\"\r\n          (keyup)=\"onChangeCanvasSize(undefined, +$event.target.value)\">\r\n        <span matSuffix>px</span>\r\n      </mat-form-field>\r\n    </div>\r\n    <div class=\"zoom\">\r\n      <div>Zoom <span>{{canvasZoom}}x</span></div>\r\n      <mat-slider min=\"0.2\" max=\"3\" step=\"0.1\" [(value)]=\"canvasZoom\"\r\n        (input)=\"onChangeCanvasZoom($event)\">\r\n      </mat-slider>\r\n    </div>\r\n  </div>\r\n  <mat-divider></mat-divider>\r\n  <movable-control *ngIf=\"focusedDrawing\"\r\n      [movable]=\"focusedDrawing.drawing.movable\">\r\n  </movable-control>\r\n  <drawing-control [drawing]=\"focusedDrawing?.drawing\"></drawing-control>\r\n</mat-card>","import { Injector, ComponentFactoryResolver, ViewContainerRef, ComponentRef } from '@angular/core';\r\nimport { Drawing } from 'src/app/model/drawing';\r\nimport { TextDrawing } from 'src/app/model/text-drawing';\r\nimport { TextDrawingControlComponent } from 'src/app/components/control/text-drawing/text-drawing-control.component';\r\nimport { ImageDrawing } from 'src/app/model/image-drawing';\r\nimport { ImageDrawingControlComponent } from 'src/app/components/control/image-drawing/image-drawing-control.component';\r\n\r\nexport class DrawingControlFactory {\r\n\r\n  constructor(private readonly resolver: ComponentFactoryResolver) {}\r\n\r\n  public create(\r\n    container: ViewContainerRef,\r\n    drawing: Drawing, injector: Injector): ComponentRef<any> {\r\n    if (!drawing) return null;\r\n    let component: any;\r\n    switch (drawing.type) {\r\n      case TextDrawing.type:\r\n        component = TextDrawingControlComponent;\r\n        break;\r\n      case ImageDrawing.type:\r\n        component = ImageDrawingControlComponent;\r\n        break;\r\n    }\r\n    if (!component) return null;\r\n    const factory = this.resolver.resolveComponentFactory(component);\r\n    const componentRef = container.createComponent(factory, undefined, injector);\r\n    (componentRef.instance as any).drawing = drawing;\r\n    return componentRef;\r\n  }\r\n\r\n}","import { Component, Input, OnInit, OnDestroy, OnChanges, SimpleChange, SimpleChanges, ComponentRef, ComponentFactoryResolver, Injector, ViewChild, ViewContainerRef, Inject } from '@angular/core';\r\nimport { Drawing, DrawingChangeFilterCommand } from 'src/app/model/drawing';\r\nimport { Subscription } from 'rxjs';\r\nimport { FilterControlFactory } from 'src/app/components/control/filter/filter-control-factory';\r\nimport { DrawingControlFactory } from 'src/app/components/control/drawing/drawing-control-factory';\r\nimport { MatSelectChange } from '@angular/material/select';\r\nimport { GrayscaleDrawingFilter, IDrawingFilter, BlurDrawingFilter, ColorDrawingFilter } from 'src/app/model/drawing-filter';\r\nimport { ICommandService } from 'src/app/service/command.service';\r\nimport { CanvasAddStackElementCommand } from 'src/app/model/canvas';\r\n\r\n@Component({\r\n  selector: 'drawing-control',\r\n  templateUrl: './drawing-control.component.html',\r\n  styleUrls: ['./drawing-control.component.scss']\r\n})\r\nexport class DrawingControlComponent implements OnDestroy, OnChanges {\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  @Input() drawing: Drawing;\r\n  @ViewChild('drawingControlContainer', {read: ViewContainerRef})\r\n    drawingControlContainer_: ViewContainerRef;\r\n  @ViewChild('filterControlContainer', {read: ViewContainerRef})\r\n    filterControlContainer_: ViewContainerRef;\r\n\r\n  private drawingControl_: ComponentRef<any>;\r\n  private filterControl_: ComponentRef<any>;\r\n\r\n  private filterType_: string;\r\n  public get filterType() {\r\n    return this.drawing?.filter?.type.toLowerCase();\r\n  }\r\n  onFilterChange(e: MatSelectChange) {\r\n    const value = e.value;\r\n    let filter: IDrawingFilter;\r\n    switch (value) {\r\n      case 'grayscale':\r\n        filter = new GrayscaleDrawingFilter();\r\n        break;\r\n      case 'blur':\r\n        filter = new BlurDrawingFilter();\r\n        break;\r\n      case 'color':\r\n        filter = new ColorDrawingFilter();\r\n        break;\r\n    }\r\n    this.commandService_.dispatch(\r\n      new DrawingChangeFilterCommand(this.drawing, filter));\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  constructor(\r\n    private readonly injector_: Injector,\r\n    private readonly componentFactoryResolver_: ComponentFactoryResolver,\r\n    @Inject(ICommandService) private readonly commandService_: ICommandService) {\r\n\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subs_.forEach(sub => sub.unsubscribe());\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (changes.drawing) {\r\n      this.subs_.forEach(sub => sub.unsubscribe());\r\n      this.subs_.length = 0;\r\n\r\n      this.createDrawingControl();\r\n      this.createFilterControl();\r\n      if (!this.drawing) return;\r\n      this.subs_.push(this.drawing.onDidChangeFilter.subscribe(() => {\r\n        this.createFilterControl();\r\n      }));\r\n    }\r\n  }\r\n\r\n  private createDrawingControl() {\r\n    if (this.drawingControl_) this.drawingControl_.destroy();\r\n    const factory = new DrawingControlFactory(this.componentFactoryResolver_);\r\n    const comp = factory.create(this.drawingControlContainer_, this.drawing, this.injector_);\r\n    this.drawingControl_ = comp;\r\n  }\r\n\r\n  private createFilterControl() {\r\n    if (this.filterControl_) this.filterControl_.destroy();\r\n    if (!this.drawing) return;\r\n    const factory = new FilterControlFactory(this.componentFactoryResolver_);\r\n    const comp = factory.create(this.filterControlContainer_, this.drawing.filter, this.injector_);\r\n    this.filterControl_ = comp;\r\n  }\r\n\r\n}","<ng-container #drawingControlContainer></ng-container>\r\n<ng-container *ngIf=\"drawing\">\r\n  <div class=\"filter\">\r\n    <mat-form-field>\r\n      <mat-label>Filter</mat-label>\r\n      <mat-select [value]=\"filterType\"\r\n          (selectionChange)=\"onFilterChange($event)\">\r\n        <mat-option>None</mat-option>\r\n        <mat-option value=\"grayscale\">Grayscale</mat-option>\r\n        <mat-option value=\"blur\">Blur</mat-option>\r\n        <mat-option value=\"color\">Color</mat-option>\r\n      </mat-select>\r\n    </mat-form-field>\r\n  </div>\r\n</ng-container>\r\n<ng-container #filterControlContainer></ng-container>","import { Component, Input, OnInit, OnDestroy, Inject } from '@angular/core';\r\nimport { IDrawingFilter, ColorDrawingFilter, ColorDawingFilterChangeCommand } from 'src/app/model/drawing-filter';\r\nimport { Subscription } from 'rxjs';\r\nimport { ICommandService } from 'src/app/service/command.service';\r\nimport { CanvasAddStackElementCommand } from 'src/app/model/canvas';\r\n\r\n@Component({\r\n  selector: 'color-filter-control',\r\n  templateUrl: './color-filter-control.html',\r\n  styleUrls: ['./color-filter-control.scss']\r\n})\r\nexport class ColorFilterControlComponent implements OnInit, OnDestroy {\r\n\r\n  private sub_: Subscription;\r\n\r\n  @Input() filter: ColorDrawingFilter;\r\n\r\n  public r: number;\r\n  public g: number;\r\n  public b: number;\r\n  public o: number;\r\n\r\n  constructor(\r\n    @Inject(ICommandService) private readonly commandService_: ICommandService) {\r\n\r\n  }\r\n\r\n  onInput(r: number, g: number, b: number, o: number) {\r\n    r = (r === undefined ? this.filter.r : r);\r\n    g = (g === undefined ? this.filter.g : g);\r\n    b = (b === undefined ? this.filter.b : b);\r\n    o = (o === undefined ? this.filter.o : o);\r\n    this.commandService_.dispatch(\r\n      new ColorDawingFilterChangeCommand(this.filter,\r\n        r, g, b, o));\r\n  }\r\n\r\n  onChange() {\r\n    console.log('change');\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.r = this.filter.r;\r\n    this.g = this.filter.g;\r\n    this.b = this.filter.b;\r\n    this.o = this.filter.o;\r\n    this.sub_ = this.filter.onUpdate.subscribe(() => {\r\n      this.r = this.filter.r;\r\n      this.g = this.filter.g;\r\n      this.b = this.filter.b;\r\n      this.o = this.filter.o;\r\n    })\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.sub_.unsubscribe();\r\n  }\r\n\r\n}","\r\n<div class=\"col\">\r\n  <div>R<span></span></div>\r\n  <mat-slider min=\"0\" max=\"255\" step=\"1\" [(value)]=\"r\"\r\n    (input)=\"onInput($event.value, undefined, undefined, undefined)\"\r\n    (change)=\"onChange()\">\r\n  </mat-slider>\r\n</div>\r\n<div class=\"col\">\r\n  <div>G<span></span></div>\r\n  <mat-slider min=\"0\" max=\"255\" step=\"1\" [(value)]=\"g\"\r\n    (input)=\"onInput(undefined, $event.value, undefined, undefined)\"\r\n    (change)=\"onChange()\">\r\n  </mat-slider>\r\n</div>\r\n<div class=\"col\">\r\n  <div>B<span></span></div>\r\n  <mat-slider min=\"0\" max=\"255\" step=\"1\" [(value)]=\"b\"\r\n    (input)=\"onInput(undefined, undefined, $event.value, undefined)\"\r\n    (change)=\"onChange()\">\r\n  </mat-slider>\r\n</div>\r\n<div class=\"col\">\r\n  <div>O<span></span></div>\r\n  <mat-slider min=\"0\" max=\"1\" step=\"0.05\" [(value)]=\"o\"\r\n    (input)=\"onInput(undefined, undefined, undefined, $event.value)\"\r\n    (change)=\"onChange()\">\r\n  </mat-slider>\r\n</div>","import { IDrawingFilter, ColorDrawingFilter } from 'src/app/model/drawing-filter';\r\nimport { Injector, ComponentFactoryResolver, ViewContainerRef, ComponentRef } from '@angular/core';\r\nimport { ColorFilterControlComponent } from 'src/app/components/control/filter/color-filter-control';\r\n\r\nexport class FilterControlFactory {\r\n\r\n  constructor(private readonly resolver: ComponentFactoryResolver) {}\r\n\r\n  public create(\r\n    container: ViewContainerRef,\r\n    filter: IDrawingFilter, injector: Injector): ComponentRef<any> {\r\n    if (!filter) return null;\r\n    let component: any;\r\n    switch (filter.type) {\r\n      case ColorDrawingFilter.type:\r\n        component = ColorFilterControlComponent;\r\n        break;\r\n    }\r\n    if (!component) return null;\r\n    const factory = this.resolver.resolveComponentFactory(component);\r\n    const componentRef = container.createComponent(factory, undefined, injector);\r\n    (componentRef.instance as any).filter = filter;\r\n    return componentRef;\r\n  }\r\n\r\n}","import { Component, Input, OnInit, OnDestroy, Inject } from '@angular/core';\r\nimport { ImageDrawing, ImageDrawingChangeInvertCommand } from 'src/app/model/image-drawing';\r\nimport { Subscription } from 'rxjs';\r\nimport { ICommandService } from 'src/app/service/command.service';\r\nimport { CanvasAddStackElementCommand } from 'src/app/model/canvas';\r\n\r\n@Component({\r\n  selector: 'image-drawing-control',\r\n  templateUrl: './image-drawing-control.component.html',\r\n  // styleUrls: ['./image-drawing-control.component.scss']\r\n})\r\nexport class ImageDrawingControlComponent implements OnInit, OnDestroy {\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  @Input() drawing: ImageDrawing;\r\n\r\n  public invertX;\r\n  public invertY;\r\n  onChangeInvert(x: boolean, y: boolean) {\r\n    x = (x === undefined ? this.drawing.invertX : x);\r\n    y = (y === undefined ? this.drawing.invertY : y);\r\n    this.commandService_.dispatch(\r\n      new ImageDrawingChangeInvertCommand(this.drawing, x, y));\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  constructor(\r\n    @Inject(ICommandService) private readonly commandService_: ICommandService) {\r\n    \r\n  }\r\n\r\n  ngOnInit() {\r\n    this.invertX = this.drawing.invertX;\r\n    this.invertY = this.drawing.invertY;\r\n    this.subs_.push(this.drawing.onDidDirty.subscribe(() => {\r\n      this.invertX = this.drawing.invertX;\r\n      this.invertY = this.drawing.invertY;\r\n    }));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subs_.forEach(sub => sub.unsubscribe())\r\n  }\r\n\r\n}","<div class=\"control\">\r\n  <div class=\"row\">\r\n    <mat-checkbox [ngModel]=\"invertX\" style=\"margin-right: 10px\"\r\n      (change)=\"onChangeInvert($event.checked, undefined)\">Invert X\r\n    </mat-checkbox>\r\n    <mat-checkbox [ngModel]=\"invertY\"\r\n      (change)=\"onChangeInvert(undefined, $event.checked)\">Invert Y\r\n    </mat-checkbox>\r\n  </div>\r\n</div>","import { Component, Input, HostBinding } from '@angular/core';\r\nimport { Drawing } from 'src/app/model/drawing';\r\n\r\n@Component({\r\n  selector: 'layer-control-item',\r\n  templateUrl: './layer-control-item.component.html',\r\n  styleUrls: ['./layer-control-item.component.scss']\r\n})\r\nexport class LayerControlItemComponent {\r\n\r\n  @Input() drawing: Drawing;\r\n  \r\n  @HostBinding('class.active')\r\n  @Input() active: boolean = false;\r\n\r\n}","<div class=\"item\">\r\n  <div class=\"name\">{{drawing.name}}</div>\r\n</div>","import { Component, Input, Inject } from '@angular/core';\r\nimport { Canvas, CanvasReorderCommand, CanvasRemoveDrawingCommand, CanvasAddStackElementCommand } from 'src/app/model/canvas';\r\nimport { Drawing } from 'src/app/model/drawing';\r\nimport { CanvasComponentService } from 'src/app/components/canvas/canvas.component.service';\r\nimport { IDrawingComponent } from 'src/app/components/drawing/drawing.component';\r\nimport { ICommandService } from 'src/app/service/command.service';\r\n\r\n@Component({\r\n  selector: 'layer-control',\r\n  templateUrl: './layer-control.component.html',\r\n  styleUrls: ['./layer-control.component.scss']\r\n})\r\nexport class LayerControlComponent {\r\n\r\n  public get canvas() {\r\n    return this.canvasComponentService_.canvasComponent;\r\n  }\r\n\r\n  public get focusedDrawing() {\r\n    return this.canvas.focusedDrawing?.drawing;\r\n  }\r\n\r\n  public get drawingComponents(): ReadonlyArray<IDrawingComponent> {\r\n    return this.canvas.drawingComponents;\r\n  }\r\n\r\n  constructor(\r\n    private readonly canvasComponentService_: CanvasComponentService,\r\n    @Inject(ICommandService) private readonly commandService_: ICommandService) {\r\n    \r\n  }\r\n\r\n  onItemClick(drawingComponent: IDrawingComponent) {\r\n    this.canvas.focusDrawingComponent(drawingComponent);\r\n  }\r\n\r\n  trackFunc(index: number, comp: IDrawingComponent) {\r\n    return comp.drawing.id;\r\n  }\r\n\r\n  onMoveUpClick() {\r\n    if (!this.focusedDrawing) return;\r\n    const index = this.canvas.canvas.getDrawingIndex(this.focusedDrawing);\r\n    this.commandService_.dispatch(\r\n      new CanvasReorderCommand(this.canvas.canvas, index, index - 1));\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  onMoveDownClick() {\r\n    if (!this.focusedDrawing) return;\r\n    const index = this.canvas.canvas.getDrawingIndex(this.focusedDrawing);\r\n    this.commandService_.dispatch(\r\n      new CanvasReorderCommand(this.canvas.canvas, index, index + 1));\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  onRemoveClick() {\r\n    if (!this.focusedDrawing) return;\r\n    this.commandService_.dispatch(\r\n      new CanvasRemoveDrawingCommand(this.canvas.canvas, this.focusedDrawing));\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  onSaveClick() {\r\n      let image = this.canvasComponentService_.canvasComponent.render();\r\n      image = image.replace('image/png', 'image/octet-stream');\r\n      var link = document.getElementById('link');\r\n      link.setAttribute('download', 'thumbnail.png');\r\n      link.setAttribute('href', image);\r\n      link.click();\r\n  }\r\n\r\n}","<mat-card class=\"layer-control\">\r\n  <div class=\"list\">\r\n    <ng-container *ngFor=\"let drawingComponent of drawingComponents;\r\n      index as i; trackBy: trackFunc\">\r\n      <layer-control-item (click)=\"onItemClick(drawingComponent)\"\r\n        [drawing]=\"drawingComponent.drawing\"\r\n        [active]=\"drawingComponent.drawing === focusedDrawing\">\r\n      </layer-control-item>\r\n      <mat-divider></mat-divider>\r\n    </ng-container>\r\n  </div>\r\n  <div class=\"buttons\">\r\n    <button mat-icon-button (click)=\"onMoveUpClick()\">\r\n      <span class=\"material-icons\">keyboard_arrow_up</span>\r\n    </button>\r\n    <button mat-icon-button (click)=\"onMoveDownClick()\">\r\n      <span class=\"material-icons\">keyboard_arrow_down</span>\r\n    </button>\r\n    <button mat-icon-button (click)=\"onRemoveClick()\">\r\n      <span class=\"material-icons\">delete</span>\r\n    </button>\r\n    <button mat-icon-button (click)=\"onSaveClick()\" style=\"float: right\">\r\n      <span class=\"material-icons\">save_alt</span>\r\n    </button>\r\n  </div>\r\n</mat-card>","import { Component, Inject, Input, OnInit, OnDestroy, OnChanges, SimpleChange, SimpleChanges } from '@angular/core';\r\nimport { ICommandService } from 'src/app/service/command.service';\r\nimport { Subscription } from 'rxjs';\r\nimport { Movable, MovableTranslateCommand, MovableResizeCommand } from 'src/app/model/movable';\r\nimport { CanvasAddStackElementCommand } from 'src/app/model/canvas';\r\n\r\n@Component({\r\n  selector: 'movable-control',\r\n  templateUrl: './movable-control.component.html',\r\n  styleUrls: ['./movable-control.component.scss']\r\n})\r\nexport class MovableControlComponent implements OnInit, OnDestroy, OnChanges {\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  @Input() movable: Movable;\r\n\r\n  public x: number;\r\n  public y: number;\r\n  public onChangePosition(x: number, y: number) {\r\n    const movable = this.movable;\r\n    const ww = (x === undefined ? movable.x : x); \r\n    const hh = (y === undefined ? movable.y : y); \r\n    this.commandService_.dispatch(\r\n      new MovableTranslateCommand(movable, ww, hh));\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  public w: number;\r\n  public h: number;\r\n  public onChangeSize(w: number, h: number) {\r\n    const movable = this.movable;\r\n    const ww = (w === undefined ? movable.w : w); \r\n    const hh = (h === undefined ? movable.h : h); \r\n    this.commandService_.dispatch(\r\n      new MovableResizeCommand(movable, ww, hh));\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  public r: number;\r\n  public onDidChangeRotation(r: number) {\r\n    // const movable = this.movable;\r\n    // const rr = (r === undefined ? movable.r : r); \r\n    // this.commandService_.dispatch(\r\n    //   new MovableResizeCommand(movable, ww, hh));\r\n  }\r\n\r\n\r\n  constructor(\r\n    @Inject(ICommandService) private readonly commandService_: ICommandService) {\r\n\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (changes.movable) {\r\n      this.subs_.forEach(sub => sub.unsubscribe());\r\n      this.subs_ = [];\r\n\r\n      const movable = this.movable;\r\n      this.x = movable.x;\r\n      this.y = movable.y;\r\n      this.w = movable.w;\r\n      this.h = movable.h;\r\n      this.r = movable.r;\r\n      this.subs_.push(movable.onDidChange.subscribe(() => {\r\n        this.x = movable.x;\r\n        this.y = movable.y;\r\n        this.w = movable.w;\r\n        this.h = movable.h;\r\n        this.r = movable.r;\r\n      }));\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subs_.forEach(sub => sub.unsubscribe());\r\n  }\r\n\r\n}","<div class=\"control\">\r\n  <div class=\"row\">\r\n    <mat-form-field>\r\n      <input matInput placeholder=\"Position X\" [(ngModel)]=\"x\"\r\n        (keyup)=\"onChangePosition(+$event.target.value, undefined)\">\r\n      <span matSuffix>px</span>\r\n    </mat-form-field>\r\n    <mat-form-field>\r\n      <input matInput placeholder=\"Position Y\" [(ngModel)]=\"y\"\r\n        (keyup)=\"onChangePosition(undefined, +$event.target.value)\">\r\n      <span matSuffix>px</span>\r\n    </mat-form-field>\r\n  </div>\r\n  <div class=\"row\">\r\n    <mat-form-field>\r\n      <input matInput placeholder=\"Width\" [(ngModel)]=\"w\"\r\n        (keyup)=\"onChangeSize(+$event.target.value, undefined)\">\r\n      <span matSuffix>px</span>\r\n    </mat-form-field>\r\n    <mat-form-field>\r\n      <input matInput placeholder=\"Height\" [(ngModel)]=\"h\"\r\n        (keyup)=\"onChangeSize(undefined, +$event.target.value)\">\r\n      <span matSuffix>px</span>\r\n    </mat-form-field>\r\n  </div>\r\n</div>","import { Component, Input, Inject, OnInit, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { TextDrawing, TextDrawingChangeTextCommand, TextDrawingChangeSizeCommand, TextDrawingChangeColorCommand, TextDrawingChangeFontCommand } from 'src/app/model/text-drawing';\r\nimport { ICommandService } from 'src/app/service/command.service';\r\nimport { CanvasAddStackElementCommand } from 'src/app/model/canvas';\r\n\r\n@Component({\r\n  selector: 'text-drawing-control',\r\n  templateUrl: './text-drawing-control.component.html',\r\n  styleUrls: ['./text-drawing-control.component.scss']\r\n})\r\nexport class TextDrawingControlComponent implements OnInit, OnDestroy {\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  @Input() drawing: TextDrawing;\r\n\r\n  public text: string;\r\n  public onChangeText(text: string) {\r\n    const drawing = this.drawing;\r\n    this.commandService_.dispatch(\r\n      new TextDrawingChangeTextCommand(drawing, text));\r\n  }\r\n\r\n  public size: number;\r\n  public onChangeSize(size: number) {\r\n    const drawing = this.drawing;\r\n    this.commandService_.dispatch(\r\n      new TextDrawingChangeSizeCommand(drawing, size));\r\n  }\r\n\r\n  private color_: string;\r\n  public get color() { return this.color_; }\r\n  public set color(v: string) {\r\n    this.commandService_.dispatch(\r\n      new TextDrawingChangeColorCommand(this.drawing, v));\r\n  }\r\n  onColorChange() {\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  public font: string;\r\n  public onChangeFont(font: string) {\r\n    const drawing = this.drawing;\r\n    this.commandService_.dispatch(\r\n      new TextDrawingChangeFontCommand(drawing, font));\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n  constructor(\r\n    @Inject(ICommandService) private readonly commandService_: ICommandService) {\r\n    \r\n  }\r\n\r\n  ngOnInit() {\r\n    this.text = this.drawing.text;\r\n    this.size = this.drawing.size;\r\n    this.font = this.drawing.font;\r\n    this.color_ = this.drawing.color;\r\n    this.subs_.push(this.drawing.onDidChangeText.subscribe(() => {\r\n      this.text = this.drawing.text;\r\n      this.size = this.drawing.size;\r\n      this.color_ = this.drawing.color;\r\n      this.font = this.drawing.font;\r\n    }));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subs_.forEach(sub => sub.unsubscribe());\r\n  }\r\n\r\n  onBlur() {\r\n    this.commandService_.dispatch(\r\n      new CanvasAddStackElementCommand());\r\n  }\r\n\r\n}","<div class=\"control\">\r\n  <div class=\"row\">\r\n    <mat-form-field style=\"width: 100%\">\r\n      <input matInput placeholder=\"Text\" [(ngModel)]=\"text\"\r\n        (keyup)=\"onChangeText($event.target.value)\"\r\n        (blur)=\"onBlur()\">\r\n    </mat-form-field>\r\n  </div>\r\n  <div class=\"row\">\r\n    <mat-form-field>\r\n      <mat-label>Font</mat-label>\r\n      <mat-select [value]=\"font\"\r\n          (selectionChange)=\"onChangeFont($event.value)\">\r\n        <mat-option value=\"Nanum Gothic\">Nanum Gothic</mat-option>\r\n        <mat-option value=\"Nanum Myeongjo\">Nanum Myeongjo</mat-option>\r\n        <mat-option value=\"Nanum Brush Script\">Nanum Brush Script</mat-option>\r\n        <mat-option value=\"Nanum Pen Script\">Nanum Pen Script</mat-option>\r\n      </mat-select>\r\n    </mat-form-field>\r\n  </div>\r\n  <div class=\"row\">\r\n    <mat-form-field>\r\n      <input matInput placeholder=\"Size\" [(ngModel)]=\"size\"\r\n        (keyup)=\"onChangeSize(+$event.target.value)\"\r\n        (blur)=\"onBlur()\">\r\n    </mat-form-field>\r\n    <div class=\"color\">\r\n      <input class=\"color\" [(colorPicker)]=\"color\"\r\n          (colorPickerSelect)=\"onColorChange()\"\r\n          [cpPosition]=\"'left'\"\r\n          [style.background]=\"color\"/>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, Input, ChangeDetectionStrategy, ViewChild, ElementRef, AfterViewInit, OnInit, OnDestroy, ComponentRef } from '@angular/core';\r\nimport { ImageDrawing } from 'src/app/model/image-drawing';\r\nimport { Subscription } from 'rxjs';\r\nimport { throttleTime } from 'rxjs/operators';\r\nimport { IDrawingComponent } from 'src/app/components/drawing/drawing.component';\r\nimport { MovableComponent } from 'src/app/components/movable/movable.component';\r\nimport { ImageFilter } from 'src/app/util/image-filter';\r\n\r\n@Component({\r\n  selector: 'image-drawing',\r\n  templateUrl: './image-drawing.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ImageDrawingComponent implements IDrawingComponent, AfterViewInit, OnDestroy {\r\n\r\n  @ViewChild('canvas') canvasRef_: ElementRef<HTMLCanvasElement>;\r\n  @ViewChild('movable') movableComponent: MovableComponent;\r\n  private cvs_: HTMLCanvasElement;\r\n  private ctx_: CanvasRenderingContext2D;\r\n\r\n  @Input() drawing: ImageDrawing;\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.cvs_ = this.canvasRef_.nativeElement;\r\n    this.ctx_ = this.canvasRef_.nativeElement.getContext('2d');\r\n    this.subs_.push(this.movableComponent.onDidUpdate.subscribe(() => {\r\n      this.localRender();\r\n    }));\r\n    this.subs_.push(this.drawing.onDidDirty.pipe(\r\n      throttleTime(16, undefined, {trailing: true})\r\n    ).subscribe(() => { this.localRender() }));\r\n    this.localRender();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subs_.forEach(sub => sub.unsubscribe());\r\n  }\r\n\r\n  private localRender() {\r\n    const movable = this.drawing.movable;\r\n    this.cvs_.width = Math.abs(movable.w);\r\n    this.cvs_.height = Math.abs(movable.h);\r\n    this.render(this.ctx_);\r\n  }\r\n\r\n  public render(ctx: CanvasRenderingContext2D) {\r\n    const movable = this.drawing.movable;\r\n    let x = 0, y = 0;\r\n    ctx.save();\r\n    if (this.drawing.invertX) {\r\n      x = -movable.w;\r\n      ctx.scale(-1, 1);\r\n    }\r\n    if (this.drawing.invertY) {\r\n      y = -movable.h;\r\n      ctx.scale(1, -1);\r\n    }\r\n    ctx.drawImage(this.drawing.img,\r\n        0, 0, this.drawing.img.width, this.drawing.img.height,\r\n        x, y, movable.w, movable.h);\r\n    const filter = this.drawing.filter;\r\n    filter && filter.apply(ctx);\r\n    ctx.restore();\r\n  }\r\n\r\n}","<movable #movable [movable]=\"drawing.movable\">\r\n  <canvas #canvas></canvas>\r\n</movable>","import { Component, Input, OnInit, OnDestroy, ChangeDetectionStrategy, ChangeDetectorRef, Inject, Optional, HostBinding, ViewChild, TemplateRef, ViewContainerRef, EventEmitter } from '@angular/core';\r\nimport vec2 from 'src/app/util/vec2';\r\nimport mat2 from 'src/app/util/mat2';\r\nimport { Movable, MovableTranslateCommand, MovableResizeCommand, MovableRotateCommand } from 'src/app/model/movable';\r\nimport vec4 from 'src/app/util/vec4';\r\nimport { Subscription } from 'rxjs';\r\nimport { throttleTime } from 'rxjs/operators';\r\nimport { ICommandService } from 'src/app/service/command.service';\r\nimport { CanvasAddStackElementCommand } from 'src/app/model/canvas';\r\nimport { CanvasComponentService } from 'src/app/components/canvas/canvas.component.service';\r\n\r\n@Component({\r\n  selector: 'movable',\r\n  templateUrl: './movable.component.html',\r\n  styleUrls: ['movable.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class MovableComponent implements OnInit, OnDestroy {\r\n\r\n  public readonly onDidUpdate = new EventEmitter<void>();\r\n\r\n  @Input() movable: Movable;\r\n  @Input() focused: boolean = false;\r\n\r\n  @ViewChild('gui') guiContent: TemplateRef<any>;\r\n\r\n  @HostBinding('attr.movable-id')\r\n  public get id() { return this.movable.id; }\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  public centerVec = new vec2();\r\n  public sizeVec = new vec2();\r\n  public thumbTL = new vec2();\r\n  public thumbTR = new vec2();\r\n  public thumbBL = new vec2();\r\n  public thumbBR = new vec2();\r\n  public thumbBC = new vec2();\r\n  public thumbCR = new vec2();\r\n\r\n  private srcMousePosition_: vec2;\r\n  private srcMovableState_: vec4;\r\n  private srcMovableRotate_: number;\r\n\r\n  private srcRotationMat_: mat2;\r\n  private srcRrotationMat_: mat2;\r\n\r\n  public readonly updateResizeUL = this.updateResize.bind(this, [1, 1, 0, 0]);\r\n  public readonly updateResizeUR = this.updateResize.bind(this, [0, 1, 1, 0]);\r\n  public readonly updateResizeBL = this.updateResize.bind(this, [1, 0, 0, 1]);\r\n  public readonly updateResizeBR = this.updateResize.bind(this, [0, 0, 1, 1]);\r\n\r\n  constructor(\r\n    public readonly viewContainerRef: ViewContainerRef,\r\n    private readonly changeRef: ChangeDetectorRef,\r\n    private readonly canvasComponentService_: CanvasComponentService,\r\n    @Inject(ICommandService) private readonly commandService_: ICommandService) {\r\n    this.updateTranslate = this.updateTranslate.bind(this);\r\n    this.updateRotate = this.updateRotate.bind(this);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.update();\r\n    this.subs_.push(this.movable.onDidChange.pipe(\r\n      throttleTime(16, undefined, {trailing: true})).subscribe(() => {\r\n      this.update();\r\n    }));\r\n    this.subs_.push(this.canvasComponentService_.canvasComponent.onDidChangeCamera.pipe(\r\n      throttleTime(16, undefined, {trailing: true})).subscribe(() => {\r\n      this.update();\r\n    }));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subs_.forEach(sub => sub.unsubscribe());\r\n  }\r\n\r\n  private saveSrcRotation() {\r\n    this.srcRotationMat_ = mat2.rotation(this.movable.rad);\r\n    this.srcRrotationMat_ = mat2.rotation(-1 * this.movable.rad);\r\n  }\r\n\r\n  private update() {\r\n    if (!this.focused) {\r\n      this.onDidUpdate.emit();\r\n      this.changeRef.markForCheck();\r\n      return;\r\n    }\r\n    const canvas = this.canvasComponentService_.canvasComponent;\r\n    const zoom = canvas.cameraZoom;\r\n    const [w, h] = [this.movable.w, this.movable.h];\r\n    const center = new vec2([this.movable.x, this.movable.y]);\r\n    const zoomVec = new vec2([zoom, zoom]);\r\n    const translate = new vec2([canvas.cameraX, canvas.cameraY]);\r\n    center.multiply(zoomVec);\r\n    this.centerVec.xy = [center.x, center.y];\r\n    this.centerVec.add(translate);\r\n    this.sizeVec = new vec2([this.movable.w, this.movable.h]);\r\n    this.sizeVec.multiply(zoomVec);\r\n    // translate.multiply(new vec2([zoom, zoom]));\r\n   [[this.thumbTL,\r\n      new vec2([-w / 2, -h / 2])],\r\n    [this.thumbTR,\r\n      new vec2([w / 2, -h / 2])],\r\n    [this.thumbBL,\r\n    new vec2([-w / 2, h / 2])],\r\n    [this.thumbBR,\r\n    new vec2([w / 2, h / 2])],\r\n    [this.thumbBC,\r\n    new vec2([0, h / 2])],\r\n    [this.thumbCR,\r\n    new vec2([0, h / 2 + 30])]].forEach(thumb => {\r\n      const ct = thumb[1];\r\n      ct.multiply(new vec2([zoom, zoom]));\r\n      // ct.add(center);\r\n      // ct.add(translate);\r\n      // const rot_ct = ct.multiplyMat2(rot);\r\n      thumb[0].xy = ct.xy;\r\n    })\r\n    this.onDidUpdate.emit();\r\n    this.changeRef.markForCheck();\r\n  }\r\n\r\n  public startTranslate(e: MouseEvent, stopProp: boolean = false) {\r\n    if (e.button != 0) return;\r\n    if (stopProp) e.stopPropagation();\r\n    const movable = this.movable;\r\n    this.srcMousePosition_ = new vec2([e.screenX, e.screenY]);\r\n    this.srcMovableState_ = new vec4([\r\n      movable.x, movable.y, movable.w, movable.h])\r\n    window.addEventListener('mousemove', this.updateTranslate);\r\n    const mouseup = () => {\r\n      this.commandService_.dispatch(\r\n        new CanvasAddStackElementCommand());\r\n      window.removeEventListener('mousemove', this.updateTranslate);\r\n      window.removeEventListener('mouseup', mouseup);\r\n    }\r\n    window.addEventListener('mouseup', mouseup);\r\n  }\r\n\r\n  private updateTranslate(e: MouseEvent) {\r\n    const movable = this.movable;\r\n    const currentMosuePosition = new vec2([e.screenX, e.screenY]);\r\n    const dp = currentMosuePosition.subtract(this.srcMousePosition_);\r\n    const zoom = 1 / this.canvasComponentService_.canvasComponent.cameraZoom;\r\n    dp.multiply(new vec2([zoom, zoom]));\r\n    const nx = this.srcMovableState_.x + dp.x;\r\n    const ny = this.srcMovableState_.y + dp.y;\r\n\r\n    const command = new MovableTranslateCommand(movable, nx, ny);\r\n    this.commandService_.dispatch(command);\r\n  }\r\n\r\n  public startResize(e: MouseEvent, resizeFunc: any) {\r\n    if (e.button != 0) return;\r\n    e.stopPropagation();\r\n    const movable = this.movable;\r\n    this.srcMousePosition_ = new vec2([e.screenX, e.screenY]);\r\n    this.srcMovableState_ = new vec4([\r\n      movable.x, movable.y, movable.w, movable.h])\r\n    this.srcMovableRotate_ = movable.r;\r\n    this.saveSrcRotation();\r\n    window.addEventListener('mousemove', resizeFunc);\r\n    const mouseup = () => {\r\n      this.commandService_.dispatch(\r\n        new CanvasAddStackElementCommand());\r\n      window.removeEventListener('mousemove', resizeFunc);\r\n      window.removeEventListener('mouseup', mouseup);\r\n    }\r\n    window.addEventListener('mouseup', mouseup);\r\n  }\r\n\r\n  private updateResize(\r\n      multiplier: [number, number, number, number],\r\n      e: MouseEvent) {\r\n    e.stopPropagation();\r\n    const movable = this.movable;\r\n    const src = this.srcMovableState_;\r\n    const currentMosuePosition = new vec2([e.screenX, e.screenY]);\r\n    const dp = currentMosuePosition.subtract(this.srcMousePosition_);\r\n    const local_dp = new vec2([dp.x, dp.y]);\r\n    local_dp.multiplyMat2(this.srcRrotationMat_);\r\n    const zoom = 1 / this.canvasComponentService_.canvasComponent.cameraZoom;\r\n    local_dp.multiply(new vec2([zoom, zoom]));\r\n\r\n    if (movable.aspect) { \r\n      const projection = new vec2([\r\n        -src.z * multiplier[0] + src.z * multiplier[2],\r\n        -src.w * multiplier[1] + src.w * multiplier[3]]).normalize();\r\n      projection.scale(vec2.dot(projection, local_dp), local_dp);\r\n    }\r\n\r\n    const newLocalUL = new vec2([\r\n      - src.z / 2 + local_dp.x * multiplier[0],\r\n      - src.w / 2 + local_dp.y * multiplier[1]])\r\n    const newLocalBR = new vec2([\r\n      src.z / 2 + local_dp.x * multiplier[2],\r\n      src.w / 2 + local_dp.y * multiplier[3]]);\r\n    const newLocalCenter =  newLocalUL.copy();\r\n    newLocalCenter.add(newLocalBR).multiply(new vec2([0.5, 0.5]));\r\n    const newCenter = newLocalCenter.copy();\r\n    newCenter.multiplyMat2(this.srcRotationMat_);\r\n    newCenter.add(new vec2([src.x, src.y]));\r\n    const newUL = newLocalUL.copy();\r\n    const newBR = newLocalBR.copy();\r\n    newUL.multiplyMat2(this.srcRotationMat_).add(newCenter);\r\n    newBR.multiplyMat2(this.srcRotationMat_).add(newCenter);\r\n    const newSize = newLocalBR.subtract(newLocalUL);\r\n\r\n    const nx = newCenter.x;\r\n    const ny = newCenter.y;\r\n    const nw = Math.abs(newSize.x);\r\n    const nh = Math.abs(newSize.y);\r\n    const nr = (newSize.x >= 0 && newSize.y >= 0) ? \r\n      this.srcMovableRotate_ :\r\n      (this.srcMovableRotate_ + 180 + 360) % 360;\r\n\r\n    this.commandService_.dispatch(\r\n        new MovableTranslateCommand(movable, nx, ny));\r\n    this.commandService_.dispatch(\r\n        new MovableResizeCommand(movable, nw, nh));\r\n    this.commandService_.dispatch(\r\n        new MovableRotateCommand(movable, nr));\r\n  }\r\n\r\n  startRotate(e: MouseEvent) {\r\n    if (e.button != 0) return;\r\n    e.stopPropagation();\r\n    const movable = this.movable;\r\n    this.srcMousePosition_ = new vec2([e.pageX, e.pageY]);\r\n    this.srcMovableState_ = new vec4([\r\n      movable.x, movable.y, movable.w, movable.h])\r\n    this.srcMovableRotate_ = movable.r;\r\n    this.saveSrcRotation();\r\n    window.addEventListener('mousemove', this.updateRotate);\r\n    const mouseup = () => {\r\n      this.commandService_.dispatch(\r\n        new CanvasAddStackElementCommand());\r\n      window.removeEventListener('mousemove', this.updateRotate);\r\n      window.removeEventListener('mouseup', mouseup);\r\n    }\r\n    window.addEventListener('mouseup', mouseup);\r\n  }\r\n\r\n  private updateRotate(e: MouseEvent) {\r\n    e.stopPropagation();\r\n    const movable = this.movable;\r\n    const currentMosuePosition = new vec2([e.pageX, e.pageY]);\r\n    const dp = this.canvasComponentService_.\r\n        canvasComponent.fromPageToCanvasScreen(currentMosuePosition)\r\n    dp.subtract(this.centerVec);\r\n    const rad = Math.atan2(dp.y, dp.x);\r\n    const deg = ((rad / Math.PI * 180 - 90) + 360) % 360\r\n\r\n    this.commandService_.dispatch(\r\n        new MovableRotateCommand(movable, deg));\r\n  }\r\n\r\n  public focus() {\r\n    this.focused = true;\r\n    this.update();\r\n    this.changeRef.markForCheck();\r\n  }\r\n\r\n  public blur() {\r\n    this.focused = false;\r\n    this.update();\r\n    this.changeRef.markForCheck();\r\n  }\r\n\r\n  public getCenterStyle() {\r\n    return {\r\n      'z-index': this.movable.z,\r\n      transform: `\r\n        translateX(${this.movable.x}px)\r\n        translateY(${this.movable.y}px)`\r\n    }\r\n  }\r\n\r\n  public getThumbCenterStyle() {\r\n    return {\r\n      transform: `\r\n        translateX(${this.centerVec.x}px)\r\n        translateY(${this.centerVec.y}px)\r\n        rotate(${this.movable.r}deg)`\r\n    }\r\n  }\r\n\r\n  public getThumbContentStyle() {\r\n    return {\r\n      width: `${this.sizeVec.x}px`,\r\n      height: `${this.sizeVec.y}px`,\r\n      transform: `\r\n        translateX(${-this.sizeVec.x / 2}px)\r\n        translateY(${-this.sizeVec.y / 2}px)`\r\n    }\r\n  }\r\n\r\n  public getBoxStyle() {\r\n    return {\r\n      width: `${Math.abs(this.movable.w)}px`,\r\n      height: `${Math.abs(this.movable.h)}px`,\r\n      transform: `\r\n        translateX(${-Math.abs(this.movable.w) / 2}px)\r\n        translateY(${-Math.abs(this.movable.h) / 2}px)\r\n        rotate(${this.movable.r}deg)`\r\n    }\r\n  }\r\n\r\n  public getGUIStyle() {\r\n    return {\r\n      transform: `\r\n        translateX(${this.movable.x}px)\r\n        translateY(${this.movable.y}px)`\r\n    }\r\n  }\r\n\r\n  public getThumbStyle(thumb: vec2) {\r\n    return {\r\n      transform: `translateX(${thumb.x}px) translateY(${thumb.y}px)`\r\n    }\r\n  }\r\n\r\n  public getLineStyle(from: vec2, to: vec2) {\r\n    const sub = new vec2([to.x, to.y]);\r\n    sub.subtract(from);\r\n    const angle = Math.atan2(sub.y, sub.x) / Math.PI * 180;\r\n    return {\r\n      width: `${sub.length()}px`,\r\n      transform: `translateX(${from.x + 0.5}px) translateY(${from.y}px) rotate(${angle}deg)`\r\n    }\r\n  }\r\n\r\n}","<div class=\"movable\" [ngStyle]=\"getCenterStyle()\">\r\n  <ng-template #gui>\r\n    <div class=\"thumbs\" [ngStyle]=\"getThumbCenterStyle()\">\r\n      <div class=\"thumb tl\"\r\n        (mousedown)=\"startResize($event, updateResizeUL)\"\r\n        [ngStyle]=\"getThumbStyle(thumbTL)\"></div>\r\n      <div class=\"thumb tr\"\r\n        (mousedown)=\"startResize($event, updateResizeUR)\"\r\n        [ngStyle]=\"getThumbStyle(thumbTR)\"></div>\r\n      <div class=\"thumb bl\"\r\n        (mousedown)=\"startResize($event, updateResizeBL)\"\r\n        [ngStyle]=\"getThumbStyle(thumbBL)\"></div>\r\n      <div class=\"thumb br\"\r\n        (mousedown)=\"startResize($event, updateResizeBR)\"\r\n        [ngStyle]=\"getThumbStyle(thumbBR)\"></div>\r\n      <div class=\"line top\" [ngStyle]=\"getLineStyle(thumbTL, thumbTR)\"></div>\r\n      <div class=\"line right\" [ngStyle]=\"getLineStyle(thumbTR, thumbBR)\"></div>\r\n      <div class=\"line bottom\" [ngStyle]=\"getLineStyle(thumbBR, thumbBL)\"></div>\r\n      <div class=\"line left\" [ngStyle]=\"getLineStyle(thumbBL, thumbTL)\"></div>\r\n      <div class=\"line rotate\" [ngStyle]=\"getLineStyle(thumbBC, thumbCR)\">\r\n        <div class=\"thumb\"\r\n          (mousedown)=\"startRotate($event)\"></div>\r\n      </div>\r\n      <!-- <div class=\"content\" (mousedown)=\"startTranslate($event, true)\"\r\n        [ngStyle]=\"getThumbContentStyle()\"\r\n        [attr.movable-id]=\"movable.id\"\r\n        ></div> -->\r\n    </div>\r\n  </ng-template>\r\n  <div class=\"content\" [ngStyle]=\"getBoxStyle()\"\r\n    (mousedown)=\"startTranslate($event)\">\r\n    <ng-content></ng-content>\r\n  </div>\r\n</div>","import { Component, Input, ChangeDetectionStrategy, ViewChild, ElementRef, AfterViewInit, OnInit, OnDestroy, ComponentRef } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { throttleTime } from 'rxjs/operators';\r\nimport { TextDrawing } from 'src/app/model/text-drawing';\r\nimport { IDrawingComponent } from 'src/app/components/drawing/drawing.component';\r\nimport { MovableComponent } from 'src/app/components/movable/movable.component';\r\nimport { ImageFilter } from 'src/app/util/image-filter';\r\n\r\n@Component({\r\n  selector: 'text-drawing',\r\n  template: `\r\n    <movable #movable [movable]=\"drawing.movable\">\r\n      <canvas #canvas></canvas>\r\n    </movable>`,\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class TextDrawingComponent implements IDrawingComponent, AfterViewInit, OnDestroy {\r\n\r\n  @ViewChild('canvas') canvasRef_: ElementRef<HTMLCanvasElement>;\r\n  @ViewChild('movable') movableComponent: MovableComponent;\r\n  private cvs_: HTMLCanvasElement;\r\n  private ctx_: CanvasRenderingContext2D;\r\n\r\n  @Input() drawing: TextDrawing;\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.cvs_ = this.canvasRef_.nativeElement;\r\n    this.ctx_ = this.canvasRef_.nativeElement.getContext('2d');\r\n    this.subs_.push(this.movableComponent.onDidUpdate.subscribe(() => {\r\n      this.localRender();\r\n    }));\r\n    this.subs_.push(this.drawing.onDidDirty.pipe(\r\n      throttleTime(16, undefined, {trailing: true})\r\n    ).subscribe(() => { this.localRender() }));\r\n    this.subs_.push(this.drawing.onDidChangeText.pipe(\r\n      throttleTime(16, undefined, {trailing: true})\r\n    ).subscribe(() => { this.localRender() }));\r\n    this.localRender();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subs_.forEach(sub => sub.unsubscribe());\r\n  }\r\n\r\n  private localRender() {\r\n    const movable = this.drawing.movable;\r\n    this.cvs_.width = Math.abs(movable.w);\r\n    this.cvs_.height = Math.abs(movable.h);\r\n    this.render(this.ctx_);\r\n  }\r\n\r\n  public render(ctx: CanvasRenderingContext2D) {\r\n    const drawing = this.drawing;\r\n    const movable = this.drawing.movable;\r\n    ctx.font = `${Math.abs(drawing.size)}px ${drawing.font}`;\r\n    ctx.fillStyle = this.drawing.color;\r\n    ctx.textBaseline = 'middle';\r\n    ctx.fillText(drawing.text, 0, movable.h / 2);\r\n    const filter = this.drawing.filter;\r\n    filter && filter.apply(ctx);\r\n  }\r\n\r\n}","import { Drawing } from 'src/app/model/drawing';\r\nimport { ICommand } from 'src/app/model/command';\r\nimport { EditStack } from 'src/app/model/edit-stack';\r\nimport { EventEmitter } from '@angular/core';\r\n\r\nexport abstract class CanvasCommand implements ICommand {\r\n  canvas: Canvas;\r\n  public abstract execute(): ICommand;\r\n}\r\n\r\nexport class CanvasAddStackElementCommand extends CanvasCommand {\r\n  public execute(): ICommand {\r\n    this.canvas.editStack.pushStackElement();\r\n    return null;\r\n  }\r\n}\r\n\r\nexport class CanvasAddDrawingCommand implements ICommand {\r\n  constructor(public readonly canvas: Canvas,\r\n    public readonly drawing: Drawing, public readonly index?: number) {}\r\n\r\n  public execute(): ICommand {\r\n    this.canvas.addDrawing(this.drawing);\r\n    return new CanvasRemoveDrawingCommand(this.canvas, this.drawing);\r\n  }\r\n\r\n}\r\n\r\nexport class CanvasResizeCommand implements ICommand {\r\n  constructor(public readonly canvas: Canvas,\r\n    public readonly w: number, public readonly h: number) {}\r\n\r\n  public execute(): ICommand {\r\n    const canvas = this.canvas;\r\n    const inverse = new CanvasResizeCommand(\r\n      canvas, canvas.width, canvas.height);\r\n    canvas.width = this.w;\r\n    canvas.height = this.h;\r\n    return inverse;\r\n  }\r\n\r\n}\r\n\r\nexport class CanvasRemoveDrawingCommand implements ICommand {\r\n  constructor(public readonly canvas: Canvas,\r\n    public readonly drawing: Drawing) {}\r\n\r\n  public execute(): ICommand {\r\n    if (!this.canvas.hasDrawing(this.drawing)) return;\r\n    const index = this.canvas.getDrawingIndex(this.drawing);\r\n    const inverse = new CanvasAddDrawingCommand(\r\n      this.canvas, this.drawing, index);\r\n    this.canvas.removeDrawing(this.drawing);\r\n    return inverse;\r\n  }\r\n}\r\n\r\nexport class CanvasReorderCommand implements ICommand {\r\n  constructor(public readonly canvas: Canvas,\r\n    public readonly i: number, public readonly j: number) {}\r\n\r\n  public execute(): ICommand {\r\n    const canvas = this.canvas;\r\n    const ii = canvas.drawings[this.i];\r\n    const jj = canvas.drawings[this.j];\r\n    if (!ii || !jj) return;\r\n    const inverse = new CanvasReorderCommand(\r\n      canvas, this.i, this.j);\r\n    canvas.swapDrawing(this.i, this.j);\r\n    return inverse;\r\n  }\r\n\r\n}\r\n\r\nexport interface CanvasDrawingAddRemoveEvent {\r\n  readonly drawing: Drawing;\r\n  readonly index: number;\r\n}\r\n\r\nexport class Canvas {\r\n\r\n  public readonly onDidAddDrawing = new EventEmitter<CanvasDrawingAddRemoveEvent>();\r\n  public readonly onWillRemoveDrawing = new EventEmitter<CanvasDrawingAddRemoveEvent>();\r\n  public readonly onDidChangeSize = new EventEmitter<void>();\r\n  public readonly onDidReorderDrawing = new EventEmitter<[number, number]>();\r\n\r\n  private editStack_: EditStack = new EditStack();\r\n  public get editStack() { return this.editStack_; }\r\n\r\n  private drawings_: Array<Drawing> = [];\r\n  public get drawings(): ReadonlyArray<Drawing> {\r\n    return this.drawings_; }\r\n\r\n  private width_: number = 500;\r\n  public get width() { return this.width_;}\r\n  public set width(v: number) {\r\n    if (isNaN(v)) {\r\n      this.onDidChangeSize.emit();\r\n      return;\r\n    }\r\n    this.width_ = v;\r\n    this.onDidChangeSize.emit();\r\n  }\r\n  private height_: number = 500;\r\n  public get height() { return this.height_; }\r\n  public set height(v: number) {\r\n    if (isNaN(v)) {\r\n      this.onDidChangeSize.emit();\r\n      return;\r\n    }\r\n    this.height_ = v;\r\n    this.onDidChangeSize.emit();\r\n  }\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  public getDrawingIndex(drawing: Drawing) {\r\n    return this.drawings_.indexOf(drawing);\r\n  }\r\n\r\n  public swapDrawing(i: number, j: number) {\r\n    const tmp = this.drawings_[i];\r\n    this.drawings_[i] = this.drawings_[j];\r\n    this.drawings_[j] = tmp;\r\n    this.reorder();\r\n    this.onDidReorderDrawing.emit([i, j]);\r\n  }\r\n\r\n  public hasDrawing(drawing: Drawing) {\r\n    return this.drawings.indexOf(drawing) != -1;\r\n  }\r\n\r\n  public addDrawing(drawing: Drawing, index?: number) {\r\n    index = index || 0;\r\n    this.drawings_.splice(index || 0, 0, drawing);\r\n    this.reorder();\r\n    this.onDidAddDrawing.emit({\r\n      drawing: drawing,\r\n      index: index\r\n    });\r\n  }\r\n\r\n  public removeDrawing(drawing: Drawing) {\r\n    this.onWillRemoveDrawing.emit({\r\n      drawing: drawing,\r\n      index: this.getDrawingIndex(drawing)\r\n    });\r\n    this.reorder();\r\n    this.drawings_.splice(this.drawings_.indexOf(drawing), 1);\r\n  }\r\n\r\n  public pushCommand(command: ICommand) {\r\n    this.editStack_.pushEditCommand(command);\r\n  }\r\n\r\n  private reorder() {\r\n    let z = this.drawings_.length - 1;\r\n    for (let i = 0; i < this.drawings_.length; i ++) {\r\n      const drawing = this.drawings_[i];\r\n      drawing.movable.z = z--;\r\n    }\r\n  }\r\n\r\n}","import { ImageFilter } from 'src/app/util/image-filter';\r\nimport { EventEmitter } from '@angular/core';\r\nimport { ICommand } from 'src/app/model/command';\r\nimport { ICommandService } from 'src/app/service/command.service';\r\n\r\nexport interface IDrawingFilter {\r\n\r\n  readonly type: string;\r\n\r\n  readonly onUpdate: EventEmitter<void>;\r\n  apply(ctx: CanvasRenderingContext2D): void;\r\n\r\n}\r\n\r\nexport abstract class AbstractDrawingFilter implements IDrawingFilter {\r\n\r\n  public abstract get type(): string;\r\n  public readonly onUpdate = new EventEmitter<void>();\r\n\r\n  public abstract apply(ctx: CanvasRenderingContext2D): void;\r\n\r\n}\r\n\r\nexport class BlurDrawingFilter extends AbstractDrawingFilter {\r\n\r\n  public static readonly type = \"Blur\";\r\n  readonly type = BlurDrawingFilter.type;\r\n\r\n  public apply(ctx: CanvasRenderingContext2D) {\r\n    const g = 1 / 9;\r\n    ImageFilter.boxFilter(ctx, [g,g,g,g,g,g,g,g,g]);\r\n  }\r\n\r\n}\r\n\r\nexport class ColorDrawingFilter extends AbstractDrawingFilter {\r\n\r\n  public static readonly type = \"Color\";\r\n  readonly type = ColorDrawingFilter.type;\r\n\r\n  private r_: number = 100;\r\n  public get r() { return this.r_; }\r\n  public set r(v: number) {\r\n    this.r_ = v;\r\n    this.onUpdate.emit();\r\n  }\r\n  private g_: number = 70;\r\n  public get g() { return this.g_; }\r\n  public set g(v: number) {\r\n    this.g_ = v;\r\n    this.onUpdate.emit();\r\n  }\r\n  private b_: number = 30;\r\n  public get b() { return this.b_; }\r\n  public set b(v: number) {\r\n    this.b_ = v;\r\n    this.onUpdate.emit();\r\n  }\r\n  private o_: number = 0.3;\r\n  public get o() { return this.o_; }\r\n  public set o(v: number) {\r\n    this.o_ = v;\r\n    this.onUpdate.emit();\r\n  }\r\n\r\n  public apply(ctx: CanvasRenderingContext2D) {\r\n    ImageFilter.mixWithColor(ctx, this.r, this.g, this.b, this.o);\r\n  }\r\n\r\n}\r\n\r\nexport class ColorDawingFilterChangeCommand implements ICommand {\r\n  constructor(public readonly filter: ColorDrawingFilter,\r\n    public readonly r, public readonly g, public readonly b,\r\n    public readonly o) {}\r\n\r\n  public execute(): ICommand {\r\n    const inverse = new ColorDawingFilterChangeCommand(\r\n      this.filter, this.filter.r, this.filter.g, this.filter.b,\r\n      this.filter.o);\r\n    this.filter.r = this.r;\r\n    this.filter.g = this.g;\r\n    this.filter.b = this.b;\r\n    this.filter.o = this.o;\r\n    return inverse;\r\n  }\r\n}\r\n\r\nexport class GrayscaleDrawingFilter extends AbstractDrawingFilter {\r\n\r\n  public static readonly type = \"Grayscale\";\r\n  readonly type = GrayscaleDrawingFilter.type;\r\n\r\n  public apply(ctx: CanvasRenderingContext2D) {\r\n    ImageFilter.grayScale(ctx);\r\n  }\r\n\r\n}\r\n\r\nclass _FilterFactory {\r\n\r\n  public create(type: string) {\r\n    switch (type) {\r\n      case BlurDrawingFilter.type:\r\n        return new BlurDrawingFilter();\r\n      case ColorDrawingFilter.type:\r\n        return new ColorDrawingFilter();\r\n      case GrayscaleDrawingFilter.type:\r\n        return new GrayscaleDrawingFilter();\r\n    }\r\n    return null;\r\n  }\r\n\r\n}\r\nexport const FilterFactory = new _FilterFactory();","import { Movable } from 'src/app/model/movable';\r\nimport { IDrawingFilter } from 'src/app/model/drawing-filter';\r\nimport { EventEmitter } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { ICommand } from 'src/app/model/command';\r\n\r\nlet __next_id = 0;\r\n\r\nexport interface IDrawing {\r\n\r\n  readonly id: number;\r\n  readonly type: string;\r\n  name: string;\r\n  readonly movable: Movable;\r\n  filter: IDrawingFilter;\r\n\r\n}\r\n\r\nexport class DrawingChangeFilterCommand implements ICommand {\r\n  constructor(public readonly drawing: Drawing,\r\n      public readonly filter: IDrawingFilter) {}\r\n\r\n  public execute(): ICommand {\r\n    const prev = this.drawing.filter;\r\n    const inverse = new DrawingChangeFilterCommand(this.drawing,\r\n        prev);\r\n    this.drawing.filter = this.filter;\r\n    return inverse;\r\n  }\r\n}\r\n\r\nexport abstract class Drawing implements IDrawing {\r\n\r\n  public readonly id: number;\r\n\r\n  public readonly onDidDirty = new EventEmitter<void>();\r\n  public readonly onDidChangeFilter = new EventEmitter<void>();\r\n\r\n  private filterSub_: Subscription;\r\n\r\n  public abstract get movable(): Movable;\r\n\r\n  private filter_: IDrawingFilter;\r\n  public get filter() { return this.filter_; }\r\n  public set filter(filter: IDrawingFilter) {\r\n    this.filterSub_ && this.filterSub_.unsubscribe();\r\n    this.filter_ = filter;\r\n    if (filter) {\r\n      this.filterSub_ = this.filter_.onUpdate.subscribe(() => {\r\n        this.onDidDirty.emit(); })\r\n    }\r\n    this.onDidChangeFilter.emit();\r\n    this.onDidDirty.emit();\r\n  }\r\n\r\n  constructor(\r\n    public readonly type: string,\r\n    public name: string) {\r\n    this.id = ++__next_id;\r\n  }\r\n\r\n  public dispose() {\r\n    this.filterSub_ && this.filterSub_.unsubscribe();\r\n  }\r\n\r\n}","import { ICommand } from 'src/app/model/command';\r\n\r\ninterface IStackElement {\r\n  commands: ICommand[];\r\n}\r\n\r\nclass StackElement implements IStackElement {\r\n\r\n  public commands: ICommand[] = [];\r\n\r\n  push(command: ICommand): void {\r\n    this.commands.push(command);\r\n  }\r\n\r\n}\r\n\r\nexport class EditStack {\r\n\r\n  private past_: StackElement[] = [];\r\n  private future_: StackElement[] = [];\r\n  private currentStackElement_: StackElement | null = null;\r\n\r\n  public pushEditCommand(command: ICommand) {\r\n    const inverse = command.execute();\r\n    if (!inverse) return;\r\n    if (!this.currentStackElement_) {\r\n      this.currentStackElement_ = new StackElement();\r\n    }\r\n    this.currentStackElement_.push(inverse);\r\n    this.future_ = [];\r\n  }\r\n\r\n  public pushStackElement(): void {\r\n    if (this.currentStackElement_ !== null) {\r\n      this.past_.push(this.currentStackElement_);\r\n      this.currentStackElement_ = null;\r\n    }\r\n  }\r\n\r\n  public get canUndo() {\r\n    return this.past_.length > 0 || this.currentStackElement_ != null;\r\n  }\r\n\r\n  public get canRedo() {\r\n    return this.future_.length > 0;\r\n  }\r\n\r\n  public undo() {\r\n    this.pushStackElement();\r\n    const pastStackElement = this.past_.pop();\r\n    if (!pastStackElement) return;\r\n    const futureStackElemnet = new StackElement();\r\n    for (let i = pastStackElement.commands.length - 1; i >= 0 ; i --) {\r\n      const command = pastStackElement.commands[i];\r\n      const inverse = command.execute();\r\n      if (!inverse) continue;\r\n      futureStackElemnet.push(inverse);\r\n    }\r\n    this.future_.push(futureStackElemnet);\r\n\r\n  }\r\n\r\n  public redo() {\r\n    const futureStackElement = this.future_.pop();\r\n    if (!futureStackElement) return;\r\n    const pastStackElemnet = new StackElement();\r\n    for (let i = futureStackElement.commands.length - 1; i >= 0 ; i --) {\r\n      const command = futureStackElement.commands[i];\r\n      const inverse = command.execute();\r\n      if (!inverse) continue;\r\n      pastStackElemnet.push(inverse);\r\n    }\r\n    this.past_.push(pastStackElemnet);\r\n  }\r\n\r\n}","import { Movable } from 'src/app/model/movable';\r\nimport { Drawing } from 'src/app/model/drawing';\r\nimport { ColorDrawingFilter } from 'src/app/model/drawing-filter';\r\nimport { ICommand } from 'src/app/model/command';\r\n\r\nexport class ImageDrawingChangeInvertCommand implements ICommand {\r\n  constructor(public readonly drawing: ImageDrawing,\r\n    public readonly invertX: boolean, public readonly invertY: boolean) {}\r\n\r\n  public execute(): ICommand {\r\n    const inverse = new ImageDrawingChangeInvertCommand(\r\n      this.drawing, this.invertX, this.invertY);\r\n    const invertX = this.invertX || this.invertX;\r\n    const invertY = this.invertY || this.invertY;\r\n    this.drawing.invertX = invertX;\r\n    this.drawing.invertY = invertY;\r\n    return inverse;\r\n  }\r\n}\r\n\r\nexport class ImageDrawing extends Drawing {\r\n\r\n  static readonly type = 'ImageDrawing';\r\n\r\n  public readonly movable = new Movable();\r\n\r\n  private invertX_: boolean = false;\r\n  public get invertX() { return this.invertX_; }\r\n  public set invertX(v: boolean) {\r\n    this.invertX_ = !!v;\r\n    this.onDidDirty.emit();\r\n  }\r\n  private invertY_: boolean = false;\r\n  public get invertY() { return this.invertY_; }\r\n  public set invertY(v: boolean) {\r\n    this.invertY_ = !!v;\r\n    this.onDidDirty.emit();\r\n  }\r\n\r\n  constructor(\r\n    public readonly img: HTMLImageElement) {\r\n    super(ImageDrawing.type, `Image`);\r\n    this.name = `Image ${this.id}`;\r\n    this.movable.w = img.width;\r\n    this.movable.h = img.height;\r\n    this.movable.onDidChangeSize.subscribe(() => this.onDidDirty.emit());\r\n  }\r\n\r\n}","import { EventEmitter } from '@angular/core';\r\nimport { ICommand } from 'src/app/model/command';\r\n\r\nexport class MovableResizeCommand implements ICommand {\r\n  constructor(public readonly movable: Movable,\r\n    public readonly w: number, public readonly h: number) {}\r\n\r\n  execute(): ICommand {\r\n    const movable = this.movable;\r\n    const inverse = new MovableResizeCommand(\r\n      movable, movable.w, movable.h);\r\n    movable.w = this.w;\r\n    movable.h = this.h;\r\n    return inverse;\r\n  }\r\n\r\n}\r\n\r\nexport class MovableTranslateCommand implements ICommand {\r\nconstructor(public readonly movable: Movable,\r\n    public readonly x: number, public readonly y: number) {}\r\n\r\n  execute(): ICommand {\r\n    const movable = this.movable;\r\n    const inverse = new MovableTranslateCommand(\r\n      movable, movable.x, movable.y);\r\n    movable.x = this.x;\r\n    movable.y = this.y;\r\n    return inverse;\r\n  }\r\n\r\n}\r\n\r\nexport class MovableRotateCommand implements ICommand {\r\n  constructor(public readonly movable: Movable,\r\n    public readonly r: number) {}\r\n\r\n  execute(): ICommand {\r\n    const movable = this.movable;\r\n    const inverse = new MovableRotateCommand(\r\n      movable, movable.r);\r\n    movable.r = this.r;\r\n    return inverse;\r\n  }\r\n\r\n}\r\n\r\nlet __next_movable_id = 0;\r\n\r\nexport class Movable {\r\n\r\n  public readonly id = ++__next_movable_id;\r\n\r\n  public readonly onDidChange = new EventEmitter<void>();\r\n  public readonly onDidChangePosition = new EventEmitter<void>();\r\n  public readonly onDidChangeSize = new EventEmitter<void>();\r\n  public readonly onDidChangeRotation = new EventEmitter<void>();\r\n\r\n  private x_: number = 0;\r\n  private y_: number = 0;\r\n  private z_: number = 0;\r\n  private w_: number = 100;\r\n  private h_: number = 50;\r\n  private r_: number = 0;\r\n  private rad_: number = 0;\r\n\r\n  private aspect_: boolean = true;\r\n  public get aspect() { return this.aspect_; }\r\n  public set aspect(v: boolean) {\r\n    this.aspect_ = v;\r\n    this.onDidChange.emit();\r\n  }\r\n  private aspectRatio_: number = 1;\r\n\r\n\r\n  public get x() { return this.x_; }\r\n  public set x(v: number) {\r\n    if (isNaN(v)) {\r\n      this.onDidChangePosition.emit();\r\n      this.onDidChange.emit();\r\n      return;\r\n    }\r\n    v = Math.round(v);\r\n    this.x_ = v;\r\n    this.onDidChangePosition.emit();\r\n    this.onDidChange.emit();\r\n  }\r\n  public get z() { return this.z_; }\r\n  public set z(v: number) {\r\n    if (isNaN(v)) {\r\n      this.onDidChangePosition.emit();\r\n      this.onDidChange.emit();\r\n      return;\r\n    }\r\n    this.z_ = v;\r\n    this.onDidChangePosition.emit();\r\n    this.onDidChange.emit();\r\n  }\r\n  public get y() { return this.y_; }\r\n  public set y(v: number) {\r\n    if (isNaN(v)) {\r\n      this.onDidChangePosition.emit();\r\n      this.onDidChange.emit();\r\n      return;\r\n    }\r\n    v = Math.round(v);\r\n    this.y_ = v;\r\n    this.onDidChangePosition.emit();\r\n    this.onDidChange.emit();\r\n  }\r\n  public get w() { return this.w_; }\r\n  public set w(v: number) {\r\n    if (isNaN(v)) {\r\n      this.onDidChangeSize.emit();\r\n      this.onDidChange.emit();\r\n      return;\r\n    }\r\n    v = Math.round(v);\r\n    this.w_ = v;\r\n    this.onDidChangeSize.emit();\r\n    this.onDidChange.emit();\r\n  }\r\n  public get h() { return this.h_; }\r\n  public set h(v: number) {\r\n    if (isNaN(v)) {\r\n      this.onDidChangeSize.emit();\r\n      this.onDidChange.emit();\r\n      return;\r\n    }\r\n    v = Math.round(v);\r\n    this.h_ = v;\r\n    this.onDidChangeSize.emit();\r\n    this.onDidChange.emit();\r\n  }\r\n  public get r() { return this.r_; }\r\n  public set r(v: number) {\r\n    if (isNaN(v)) {\r\n      this.onDidChangeRotation.emit();\r\n      this.onDidChange.emit();\r\n      return;\r\n    }\r\n    v = Math.round(v);\r\n    this.r_ = v;\r\n    this.rad_ = v / 180 * Math.PI;\r\n    this.onDidChangeRotation.emit();\r\n    this.onDidChange.emit();\r\n  }\r\n  public get rad() { return this.rad_; }\r\n\r\n  constructor() {\r\n  }\r\n\r\n}","import { Drawing } from 'src/app/model/drawing';\r\nimport { Movable } from 'src/app/model/movable';\r\nimport { Subscription } from 'rxjs';\r\nimport { ICommand } from 'src/app/model/command';\r\nimport { EventEmitter } from '@angular/core';\r\n\r\nexport class TextDrawingChangeTextCommand implements ICommand {\r\n  constructor(public readonly drawing: TextDrawing,\r\n    public readonly text: string) {}\r\n\r\n  public execute(): ICommand {\r\n    if (this.text === this.drawing.text) return;\r\n    const inverse = new TextDrawingChangeTextCommand(\r\n        this.drawing, this.drawing.text);\r\n    this.drawing.text = this.text;\r\n    return inverse;\r\n  }\r\n\r\n}\r\n\r\nexport class TextDrawingChangeSizeCommand implements ICommand {\r\n  constructor(public readonly drawing: TextDrawing,\r\n    public readonly size: number) {}\r\n\r\n  public execute(): ICommand {\r\n    if (this.size === this.drawing.size) return;\r\n    const inverse = new TextDrawingChangeSizeCommand(\r\n        this.drawing, this.drawing.size);\r\n    this.drawing.size = this.size;\r\n    return inverse;\r\n  }\r\n\r\n}\r\n\r\nexport class TextDrawingChangeColorCommand implements ICommand {\r\n  constructor(public readonly drawing: TextDrawing,\r\n    public readonly color: string) {}\r\n\r\n  public execute(): ICommand {\r\n    if (this.color === this.drawing.color) return;\r\n    const inverse = new TextDrawingChangeColorCommand(\r\n        this.drawing, this.drawing.color);\r\n    this.drawing.color = this.color;\r\n    return inverse;\r\n  }\r\n\r\n}\r\n\r\nexport class TextDrawingChangeFontCommand implements ICommand {\r\n  constructor(public readonly drawing: TextDrawing,\r\n    public readonly font: string) {}\r\n\r\n  public execute(): ICommand {\r\n    if (this.font === this.drawing.font) return;\r\n    const inverse = new TextDrawingChangeFontCommand(\r\n        this.drawing, this.drawing.font);\r\n    this.drawing.font = this.font;\r\n    return inverse;\r\n  }\r\n\r\n}\r\n\r\nclass TextMeasure {\r\n  private readonly cvs_ = document.createElement('canvas');\r\n  private readonly ctx_ = this.cvs_.getContext('2d');\r\n\r\n  public measure(font: string, size: number, text: string): TextMetrics {\r\n    this.ctx_.font = `${size}px ${font}`;\r\n    return this.ctx_.measureText(text);\r\n  }\r\n}\r\nconst Measure = new TextMeasure();\r\n\r\nexport class TextDrawing extends Drawing {\r\n\r\n  static readonly type = 'TextDrawing';\r\n\r\n  public readonly onDidChangeText = new EventEmitter<void>();\r\n\r\n  public readonly movable = new Movable();\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  private disableDetectMovableChange_ = false;\r\n\r\n  private font_: string = 'Nanum Gothic';\r\n  public get font() { return this.font_; }\r\n  private size_: number;\r\n  public get size() { return this.size_; }\r\n  private text_: string;\r\n  public get text() { return this.text_; }\r\n  private color_: string = \"#000000\";\r\n  public get color() { return this.color_; }\r\n  public set color(v: string) {\r\n    this.color_ = v;\r\n    this.onDidChangeText.emit();\r\n  }\r\n  private scaleX_: number = 1;\r\n  public get scaleX() { return this.scaleX_; }\r\n  private scaleY_: number = 1;\r\n  public get scaleY() { return this.scaleY_; }\r\n\r\n  constructor(\r\n    font: string, size: number, text: string) {\r\n    super(TextDrawing.type, 'Text');\r\n    this.name = `Text ${this.id}`;\r\n    this.font_ = font;\r\n    this.size_ = size;\r\n    this.text = text;\r\n    this.subs_.push(this.movable.onDidChangeSize.subscribe(() => {\r\n      this.fitFontSizeToMovable();\r\n    }));\r\n  }\r\n\r\n  private fitFontSizeToMovable() {\r\n    if (this.disableDetectMovableChange_) return;\r\n    this.size_ = Math.round(this.movable.h / 1.5);\r\n    this.onDidChangeText.emit();\r\n  }\r\n  \r\n  public set font(v: string) {\r\n    this.font_ = v;\r\n    this.disableDetectMovableChange_ = true;\r\n    const metrics = Measure.measure(this.font, this.size, this.text);\r\n    this.movable.w = metrics.width * this.scaleX;\r\n    this.movable.h = this.size * this.scaleY * 1.5;\r\n    this.disableDetectMovableChange_ = false;\r\n    this.onDidChangeText.emit();\r\n  }\r\n\r\n  public set text(v: string) {\r\n    this.text_ = v;\r\n    const metrics = Measure.measure(this.font, this.size, this.text);\r\n    this.movable.w = metrics.width * this.scaleX;\r\n    this.movable.h = this.size * this.scaleY * 1.5;\r\n    this.onDidChangeText.emit();\r\n  }\r\n\r\n  public set size(v: number) {\r\n    if (isNaN(v)) {\r\n      this.onDidChangeText.emit();\r\n      return;\r\n    }\r\n    this.size_ = v;\r\n    this.disableDetectMovableChange_ = true;\r\n    const metrics = Measure.measure(this.font, this.size, this.text);\r\n    this.movable.w = metrics.width * this.scaleX;\r\n    this.movable.h = this.size * this.scaleY * 1.5;\r\n    this.disableDetectMovableChange_ = false;\r\n    this.onDidChangeText.emit();\r\n  }\r\n\r\n\r\n  // TODO : dispose\r\n\r\n}","import { Injectable } from '@angular/core';\r\nimport { Canvas } from 'src/app/model/canvas';\r\nimport { Subscription } from 'rxjs';\r\nimport { Drawing } from 'src/app/model/drawing';\r\n\r\n@Injectable()\r\nexport class CanvasService {\r\n\r\n  public readonly canvas: Canvas;\r\n\r\n  private subs_: Subscription[] = [];\r\n\r\n  private focusedDrawing_: Drawing;\r\n  public focusedDrawing() { return this.focusedDrawing_; }\r\n\r\n  constructor() {\r\n    this.canvas = new Canvas();\r\n  }\r\n\r\n}","import { ICommand } from 'src/app/model/command';\r\nimport { Canvas } from 'src/app/model/canvas';\r\nimport { InjectionToken, Injectable, OnDestroy } from '@angular/core';\r\n\r\nimport hotkeys from 'hotkeys-js';\r\nimport { KeybindingService, IKeybindingDisposer } from 'src/app/service/keybinding.service';\r\n\r\n// const hotkeys: any = require('hotkeys-js');\r\n\r\nexport interface ICommandService {\r\n\r\n  dispatch(command: ICommand): void;\r\n\r\n}\r\n\r\n@Injectable()\r\nexport class CanvasCommandService implements ICommandService {\r\n\r\n  public canvas: Canvas;\r\n\r\n  public dispatch(command: ICommand) {\r\n    (command as any).canvas = this.canvas;\r\n    this.canvas.pushCommand(command);\r\n  }\r\n\r\n}\r\n\r\nexport const ICommandService =\r\n    new InjectionToken<ICommandService>('CommandService');","import { Injectable } from '@angular/core';\r\nimport hotkeys from 'hotkeys-js';\r\nimport { isMacintosh } from 'src/app/util/platform';\r\n\r\nexport interface IKeybinding {\r\n  keychord: string;\r\n  mac?: string;\r\n}\r\n\r\nexport interface IKeybindingDisposer {\r\n  (): void;\r\n}\r\n\r\n@Injectable()\r\nexport class KeybindingService {\r\n\r\n  public bind(binding: IKeybinding, func: ()=>void): IKeybindingDisposer {\r\n    let keychord = binding.keychord;\r\n    if (isMacintosh) {\r\n      keychord = binding.mac || keychord;\r\n    }\r\n    const disposer = () => {\r\n      hotkeys.unbind(keychord, func);\r\n    }\r\n    hotkeys(keychord, func);\r\n    return disposer;\r\n  }\r\n\r\n}","export const epsilon = 0.00001\n","declare const _grayScale: any;\r\ndeclare const _boxFilter: any;\r\ndeclare const _mixWithColor: any;\r\ndeclare const _malloc: any;\r\ndeclare const _free: any;\r\ndeclare const HEAPU8: any;\r\n\r\nexport class ImageFilter {\r\n\r\n  public static enabled = false;\r\n\r\n  public static init() {\r\n    if (!(\"WebAssembly\" in window)) {\r\n      ImageFilter.enabled = false;\r\n      alert('Your browser does not support Webassembly!\\nImage filter will not work.')\r\n    }\r\n    else {\r\n      ImageFilter.enabled = true;\r\n    }\r\n  }\r\n\r\n  public static grayScale(ctx: CanvasRenderingContext2D) {\r\n    if (!ImageFilter.enabled) return;\r\n    const cvs = ctx.canvas;\r\n    const pixels = ctx.getImageData(0, 0, cvs.width, cvs.height).data;\r\n    const length = pixels.length;\r\n    const memory = _malloc(length);\r\n    HEAPU8.set(pixels, memory);\r\n    _grayScale(memory, cvs.width, cvs.height);\r\n    const result = HEAPU8.subarray(memory, memory + length);\r\n    ctx.putImageData(new ImageData(new Uint8ClampedArray(result), cvs.width, cvs.height), 0, 0);\r\n    _free(memory);\r\n  }\r\n\r\n  public static boxFilter(ctx: CanvasRenderingContext2D,\r\n    filter: [number,number,number,number,number,number,number,number,number]) {\r\n    if (!ImageFilter.enabled) return;\r\n    const cvs = ctx.canvas;\r\n    const pixels = ctx.getImageData(0, 0, cvs.width, cvs.height).data;\r\n    const length = pixels.length;\r\n    const memory = _malloc(length);\r\n    HEAPU8.set(pixels, memory);\r\n    _boxFilter(memory, cvs.width, cvs.height, ...filter);\r\n    const result = HEAPU8.subarray(memory, memory + length);\r\n    ctx.putImageData(new ImageData(new Uint8ClampedArray(result), cvs.width, cvs.height), 0, 0);\r\n    _free(memory);\r\n  }\r\n\r\n  public static mixWithColor(ctx: CanvasRenderingContext2D,\r\n    r: number, g: number, b: number, opacity: number) {\r\n    if (!ImageFilter.enabled) return;\r\n    const cvs = ctx.canvas;\r\n    const pixels = ctx.getImageData(0, 0, cvs.width, cvs.height).data;\r\n    const length = pixels.length;\r\n    const memory = _malloc(length);\r\n    HEAPU8.set(pixels, memory);\r\n    _mixWithColor(memory, cvs.width, cvs.height, r, g, b, opacity);\r\n    const result = HEAPU8.subarray(memory, memory + length);\r\n    ctx.putImageData(new ImageData(new Uint8ClampedArray(result), cvs.width, cvs.height), 0, 0);\r\n    _free(memory);\r\n  }\r\n\r\n}","import vec2 from './vec2'\n\nimport { epsilon } from './constants'\nimport { single } from 'rxjs/operators'\n\nexport default class mat2 {\n\n    constructor(values?: number[]) {\n        if (values !== undefined) {\n            this.init(values)\n        }\n    }\n\n    private values = new Float32Array(4)\n\n    static readonly identity = new mat2().setIdentity()\n\n    static rotation(angle: number): mat2 {\n        const cos = Math.cos(angle);\n        const sin = Math.sin(angle);\n        return new mat2([cos, -sin, sin, cos]);\n    }\n\n    at(index: number): number {\n        return this.values[index]\n    }\n\n    init(values: number[]): mat2 {\n        for (let i = 0; i < 4; i++) {\n            this.values[i] = values[i]\n        }\n\n        return this\n    }\n\n    reset(): void {\n        for (let i = 0; i < 4; i++) {\n            this.values[i] = 0\n        }\n    }\n\n    copy(dest?: mat2): mat2 {\n        if (!dest) { dest = new mat2() }\n\n        for (let i = 0; i < 4; i++) {\n            dest.values[i] = this.values[i]\n        }\n\n        return dest\n    }\n\n    all(): number[] {\n        const data: number[] = []\n        for (let i = 0; i < 4; i++) {\n            data[i] = this.values[i]\n        }\n\n        return data\n    }\n\n    row(index: number): number[] {\n        return [\n            this.values[index * 2 + 0],\n            this.values[index * 2 + 1],\n        ]\n    }\n\n    col(index: number): number[] {\n        return [\n            this.values[index],\n            this.values[index + 2],\n        ]\n    }\n\n    equals(matrix: mat2, threshold = epsilon): boolean {\n        for (let i = 0; i < 4; i++) {\n            if (Math.abs(this.values[i] - matrix.at(i)) > threshold) {\n                return false\n            }\n        }\n\n        return true\n    }\n\n    determinant(): number {\n        return this.values[0] * this.values[3] - this.values[2] * this.values[1]\n    }\n\n    setIdentity(): mat2 {\n        this.values[0] = 1\n        this.values[1] = 0\n        this.values[2] = 0\n        this.values[3] = 1\n\n        return this\n    }\n\n    transpose(): mat2 {\n        const temp = this.values[1]\n\n        this.values[1] = this.values[2]\n        this.values[2] = temp\n\n        return this\n    }\n\n    inverse(): mat2 {\n        let det = this.determinant()\n\n        if (!det) { return null }\n\n        det = 1.0 / det\n\n        const a11 = this.values[0]\n\n        this.values[0] = det * (this.values[3])\n        this.values[1] = det * (-this.values[1])\n        this.values[2] = det * (-this.values[2])\n        this.values[3] = det * a11\n\n        return this\n    }\n\n    multiply(matrix: mat2): mat2 {\n        const a11 = this.values[0]\n        const a12 = this.values[1]\n        const a21 = this.values[2]\n        const a22 = this.values[3]\n\n        this.values[0] = a11 * matrix.at(0) + a12 * matrix.at(2)\n        this.values[1] = a11 * matrix.at(1) + a12 * matrix.at(3)\n        this.values[2] = a21 * matrix.at(0) + a22 * matrix.at(2)\n        this.values[3] = a21 * matrix.at(1) + a22 * matrix.at(3)\n\n        return this\n    }\n\n    multiplyVec2(vector: vec2, result: vec2): vec2 {\n        const x = vector.x\n        const y = vector.y\n\n        if (result) {\n            result.xy = [\n                x * this.values[0] + y * this.values[1],\n                x * this.values[2] + y * this.values[3],\n            ]\n\n            return result\n        } else {\n            return new vec2([\n                x * this.values[0] + y * this.values[1],\n                x * this.values[2] + y * this.values[3],\n            ])\n        }\n    }\n\n    scale(vector: vec2): mat2 {\n        const a11 = this.values[0]\n        const a12 = this.values[1]\n        const a21 = this.values[2]\n        const a22 = this.values[3]\n\n        const x = vector.x\n        const y = vector.y\n\n        this.values[0] = a11 * x\n        this.values[1] = a12 * y\n        this.values[2] = a21 * x\n        this.values[3] = a22 * y\n\n        return this\n    }\n\n    static product(m1: mat2, m2: mat2, result: mat2): mat2 {\n        const a11 = m1.at(0)\n        const a12 = m1.at(1)\n        const a21 = m1.at(2)\n        const a22 = m1.at(3)\n\n        if (result) {\n            result.init([\n                a11 * m2.at(0) + a12 * m2.at(2),\n                a11 * m2.at(1) + a12 * m2.at(3),\n                a21 * m2.at(0) + a22 * m2.at(2),\n                a21 * m2.at(1) + a22 * m2.at(3),\n            ])\n\n            return result\n        } else {\n            return new mat2([\n                a11 * m2.at(0) + a12 * m2.at(2),\n                a11 * m2.at(1) + a12 * m2.at(3),\n                a21 * m2.at(0) + a22 * m2.at(2),\n                a21 * m2.at(1) + a22 * m2.at(3),\n            ])\n        }\n    }\n\n}\n","import mat4 from './mat4'\nimport quat from './quat'\nimport vec2 from './vec2'\nimport vec3 from './vec3'\n\nimport { epsilon } from './constants'\n\nexport default class mat3 {\n\n    constructor(values?: number[]) {\n        if (values !== undefined) {\n            this.init(values)\n        }\n    }\n\n    private values = new Float32Array(9)\n\n    static readonly identity = new mat3().setIdentity()\n\n    at(index: number): number {\n        return this.values[index]\n    }\n\n    init(values: number[]): mat3 {\n        for (let i = 0; i < 9; i++) {\n            this.values[i] = values[i]\n        }\n\n        return this\n    }\n\n    reset(): void {\n        for (let i = 0; i < 9; i++) {\n            this.values[i] = 0\n        }\n    }\n\n    copy(dest?: mat3): mat3 {\n        if (!dest) { dest = new mat3() }\n\n        for (let i = 0; i < 9; i++) {\n            dest.values[i] = this.values[i]\n        }\n\n        return dest\n    }\n\n    all(): number[] {\n        const data: number[] = []\n        for (let i = 0; i < 9; i++) {\n            data[i] = this.values[i]\n        }\n\n        return data\n    }\n\n    row(index: number): number[] {\n        return [\n            this.values[index * 3 + 0],\n            this.values[index * 3 + 1],\n            this.values[index * 3 + 2],\n        ]\n    }\n\n    col(index: number): number[] {\n        return [\n            this.values[index],\n            this.values[index + 3],\n            this.values[index + 6],\n        ]\n    }\n\n    equals(matrix: mat3, threshold = epsilon): boolean {\n        for (let i = 0; i < 9; i++) {\n            if (Math.abs(this.values[i] - matrix.at(i)) > threshold) {\n                return false\n            }\n        }\n\n        return true\n    }\n\n    determinant(): number {\n        const a00 = this.values[0]\n        const a01 = this.values[1]\n        const a02 = this.values[2]\n        const a10 = this.values[3]\n        const a11 = this.values[4]\n        const a12 = this.values[5]\n        const a20 = this.values[6]\n        const a21 = this.values[7]\n        const a22 = this.values[8]\n\n        const det01 = a22 * a11 - a12 * a21\n        const det11 = -a22 * a10 + a12 * a20\n        const det21 = a21 * a10 - a11 * a20\n\n        return a00 * det01 + a01 * det11 + a02 * det21\n    }\n\n    setIdentity(): mat3 {\n        this.values[0] = 1\n        this.values[1] = 0\n        this.values[2] = 0\n        this.values[3] = 0\n        this.values[4] = 1\n        this.values[5] = 0\n        this.values[6] = 0\n        this.values[7] = 0\n        this.values[8] = 1\n\n        return this\n    }\n\n    transpose(): mat3 {\n        const temp01 = this.values[1]\n        const temp02 = this.values[2]\n        const temp12 = this.values[5]\n\n        this.values[1] = this.values[3]\n        this.values[2] = this.values[6]\n        this.values[3] = temp01\n        this.values[5] = this.values[7]\n        this.values[6] = temp02\n        this.values[7] = temp12\n\n        return this\n    }\n\n    inverse(): mat3 {\n        const a00 = this.values[0]\n        const a01 = this.values[1]\n        const a02 = this.values[2]\n        const a10 = this.values[3]\n        const a11 = this.values[4]\n        const a12 = this.values[5]\n        const a20 = this.values[6]\n        const a21 = this.values[7]\n        const a22 = this.values[8]\n\n        const det01 = a22 * a11 - a12 * a21\n        const det11 = -a22 * a10 + a12 * a20\n        const det21 = a21 * a10 - a11 * a20\n\n        let det = a00 * det01 + a01 * det11 + a02 * det21\n\n        if (!det) {\n            return null\n        }\n\n        det = 1.0 / det\n\n        this.values[0] = det01 * det\n        this.values[1] = (-a22 * a01 + a02 * a21) * det\n        this.values[2] = (a12 * a01 - a02 * a11) * det\n        this.values[3] = det11 * det\n        this.values[4] = (a22 * a00 - a02 * a20) * det\n        this.values[5] = (-a12 * a00 + a02 * a10) * det\n        this.values[6] = det21 * det\n        this.values[7] = (-a21 * a00 + a01 * a20) * det\n        this.values[8] = (a11 * a00 - a01 * a10) * det\n\n        return this\n    }\n\n    multiply(matrix: mat3): mat3 {\n        const a00 = this.values[0]\n        const a01 = this.values[1]\n        const a02 = this.values[2]\n        const a10 = this.values[3]\n        const a11 = this.values[4]\n        const a12 = this.values[5]\n        const a20 = this.values[6]\n        const a21 = this.values[7]\n        const a22 = this.values[8]\n\n        const b00 = matrix.at(0)\n        const b01 = matrix.at(1)\n        const b02 = matrix.at(2)\n        const b10 = matrix.at(3)\n        const b11 = matrix.at(4)\n        const b12 = matrix.at(5)\n        const b20 = matrix.at(6)\n        const b21 = matrix.at(7)\n        const b22 = matrix.at(8)\n\n        this.values[0] = b00 * a00 + b01 * a10 + b02 * a20\n        this.values[1] = b00 * a01 + b01 * a11 + b02 * a21\n        this.values[2] = b00 * a02 + b01 * a12 + b02 * a22\n\n        this.values[3] = b10 * a00 + b11 * a10 + b12 * a20\n        this.values[4] = b10 * a01 + b11 * a11 + b12 * a21\n        this.values[5] = b10 * a02 + b11 * a12 + b12 * a22\n\n        this.values[6] = b20 * a00 + b21 * a10 + b22 * a20\n        this.values[7] = b20 * a01 + b21 * a11 + b22 * a21\n        this.values[8] = b20 * a02 + b21 * a12 + b22 * a22\n\n        return this\n    }\n\n    multiplyVec2(vector: vec2, result: vec2): vec2 {\n        const x = vector.x\n        const y = vector.y\n\n        if (result) {\n            result.xy = [\n                x * this.values[0] + y * this.values[3] + this.values[6],\n                x * this.values[1] + y * this.values[4] + this.values[7],\n            ]\n\n            return result\n        } else {\n            return new vec2([\n                x * this.values[0] + y * this.values[3] + this.values[6],\n                x * this.values[1] + y * this.values[4] + this.values[7],\n            ])\n        }\n    }\n\n    multiplyVec3(vector: vec3, result: vec3): vec3 {\n        const x = vector.x\n        const y = vector.y\n        const z = vector.z\n\n        if (result) {\n            result.xyz = [\n                x * this.values[0] + y * this.values[3] + z * this.values[6],\n                x * this.values[1] + y * this.values[4] + z * this.values[7],\n                x * this.values[2] + y * this.values[5] + z * this.values[8],\n            ]\n\n            return result\n        } else {\n            return new vec3([\n                x * this.values[0] + y * this.values[3] + z * this.values[6],\n                x * this.values[1] + y * this.values[4] + z * this.values[7],\n                x * this.values[2] + y * this.values[5] + z * this.values[8],\n            ])\n        }\n    }\n\n    toMat4(result: mat4): mat4 {\n        if (result) {\n            result.init([\n                this.values[0],\n                this.values[1],\n                this.values[2],\n                0,\n\n                this.values[3],\n                this.values[4],\n                this.values[5],\n                0,\n\n                this.values[6],\n                this.values[7],\n                this.values[8],\n                0,\n\n                0,\n                0,\n                0,\n                1,\n            ])\n\n            return result\n        } else {\n            return new mat4([\n                this.values[0],\n                this.values[1],\n                this.values[2],\n                0,\n\n                this.values[3],\n                this.values[4],\n                this.values[5],\n                0,\n\n                this.values[6],\n                this.values[7],\n                this.values[8],\n                0,\n\n                0,\n                0,\n                0,\n                1,\n            ])\n        }\n    }\n\n    toQuat(): quat {\n        const m00 = this.values[0]\n        const m01 = this.values[1]\n        const m02 = this.values[2]\n        const m10 = this.values[3]\n        const m11 = this.values[4]\n        const m12 = this.values[5]\n        const m20 = this.values[6]\n        const m21 = this.values[7]\n        const m22 = this.values[8]\n\n        const fourXSquaredMinus1 = m00 - m11 - m22\n        const fourYSquaredMinus1 = m11 - m00 - m22\n        const fourZSquaredMinus1 = m22 - m00 - m11\n        const fourWSquaredMinus1 = m00 + m11 + m22\n\n        let biggestIndex = 0\n\n        let fourBiggestSquaredMinus1 = fourWSquaredMinus1\n\n        if (fourXSquaredMinus1 > fourBiggestSquaredMinus1) {\n            fourBiggestSquaredMinus1 = fourXSquaredMinus1\n            biggestIndex = 1\n        }\n\n        if (fourYSquaredMinus1 > fourBiggestSquaredMinus1) {\n            fourBiggestSquaredMinus1 = fourYSquaredMinus1\n            biggestIndex = 2\n        }\n\n        if (fourZSquaredMinus1 > fourBiggestSquaredMinus1) {\n            fourBiggestSquaredMinus1 = fourZSquaredMinus1\n            biggestIndex = 3\n        }\n\n        const biggestVal = Math.sqrt(fourBiggestSquaredMinus1 + 1) * 0.5\n        const mult = 0.25 / biggestVal\n\n        const result = new quat()\n\n        switch (biggestIndex) {\n            case 0:\n\n                result.w = biggestVal\n                result.x = (m12 - m21) * mult\n                result.y = (m20 - m02) * mult\n                result.z = (m01 - m10) * mult\n\n                break\n\n            case 1:\n\n                result.w = (m12 - m21) * mult\n                result.x = biggestVal\n                result.y = (m01 + m10) * mult\n                result.z = (m20 + m02) * mult\n\n                break\n\n            case 2:\n\n                result.w = (m20 - m02) * mult\n                result.x = (m01 + m10) * mult\n                result.y = biggestVal\n                result.z = (m12 + m21) * mult\n\n                break\n\n            case 3:\n\n                result.w = (m01 - m10) * mult\n                result.x = (m20 + m02) * mult\n                result.y = (m12 + m21) * mult\n                result.z = biggestVal\n\n                break\n        }\n\n        return result\n    }\n\n    rotate(angle: number, axis: vec3): mat3 {\n        let x = axis.x\n        let y = axis.y\n        let z = axis.z\n\n        let length = Math.sqrt(x * x + y * y + z * z)\n\n        if (!length) {\n            return null\n        }\n\n        if (length !== 1) {\n            length = 1 / length\n            x *= length\n            y *= length\n            z *= length\n        }\n\n        const s = Math.sin(angle)\n        const c = Math.cos(angle)\n\n        const t = 1.0 - c\n\n        const a00 = this.values[0]\n        const a01 = this.values[1]\n        const a02 = this.values[2]\n        const a10 = this.values[4]\n        const a11 = this.values[5]\n        const a12 = this.values[6]\n        const a20 = this.values[8]\n        const a21 = this.values[9]\n        const a22 = this.values[10]\n\n        const b00 = x * x * t + c\n        const b01 = y * x * t + z * s\n        const b02 = z * x * t - y * s\n        const b10 = x * y * t - z * s\n        const b11 = y * y * t + c\n        const b12 = z * y * t + x * s\n        const b20 = x * z * t + y * s\n        const b21 = y * z * t - x * s\n        const b22 = z * z * t + c\n\n        this.values[0] = a00 * b00 + a10 * b01 + a20 * b02\n        this.values[1] = a01 * b00 + a11 * b01 + a21 * b02\n        this.values[2] = a02 * b00 + a12 * b01 + a22 * b02\n\n        this.values[3] = a00 * b10 + a10 * b11 + a20 * b12\n        this.values[4] = a01 * b10 + a11 * b11 + a21 * b12\n        this.values[5] = a02 * b10 + a12 * b11 + a22 * b12\n\n        this.values[6] = a00 * b20 + a10 * b21 + a20 * b22\n        this.values[7] = a01 * b20 + a11 * b21 + a21 * b22\n        this.values[8] = a02 * b20 + a12 * b21 + a22 * b22\n\n        return this\n    }\n\n    static product(m1: mat3, m2: mat3, result: mat3): mat3 {\n        const a00 = m1.at(0)\n        const a01 = m1.at(1)\n        const a02 = m1.at(2)\n        const a10 = m1.at(3)\n        const a11 = m1.at(4)\n        const a12 = m1.at(5)\n        const a20 = m1.at(6)\n        const a21 = m1.at(7)\n        const a22 = m1.at(8)\n\n        const b00 = m2.at(0)\n        const b01 = m2.at(1)\n        const b02 = m2.at(2)\n        const b10 = m2.at(3)\n        const b11 = m2.at(4)\n        const b12 = m2.at(5)\n        const b20 = m2.at(6)\n        const b21 = m2.at(7)\n        const b22 = m2.at(8)\n\n        if (result) {\n            result.init([\n                b00 * a00 + b01 * a10 + b02 * a20,\n                b00 * a01 + b01 * a11 + b02 * a21,\n                b00 * a02 + b01 * a12 + b02 * a22,\n\n                b10 * a00 + b11 * a10 + b12 * a20,\n                b10 * a01 + b11 * a11 + b12 * a21,\n                b10 * a02 + b11 * a12 + b12 * a22,\n\n                b20 * a00 + b21 * a10 + b22 * a20,\n                b20 * a01 + b21 * a11 + b22 * a21,\n                b20 * a02 + b21 * a12 + b22 * a22,\n            ])\n\n            return result\n        } else {\n            return new mat3([\n                b00 * a00 + b01 * a10 + b02 * a20,\n                b00 * a01 + b01 * a11 + b02 * a21,\n                b00 * a02 + b01 * a12 + b02 * a22,\n\n                b10 * a00 + b11 * a10 + b12 * a20,\n                b10 * a01 + b11 * a11 + b12 * a21,\n                b10 * a02 + b11 * a12 + b12 * a22,\n\n                b20 * a00 + b21 * a10 + b22 * a20,\n                b20 * a01 + b21 * a11 + b22 * a21,\n                b20 * a02 + b21 * a12 + b22 * a22,\n            ])\n        }\n    }\n\n}\n","import mat3 from './mat3'\nimport vec3 from './vec3'\nimport vec4 from './vec4'\n\nimport { epsilon } from './constants'\n\nexport default class mat4 {\n\n    constructor(values?: number[]) {\n        if (values !== undefined) {\n            this.init(values)\n        }\n    }\n\n    private values = new Float32Array(16)\n\n    static readonly identity = new mat4().setIdentity()\n\n    at(index: number): number {\n        return this.values[index]\n    }\n\n    init(values: number[]): mat4 {\n        for (let i = 0; i < 16; i++) {\n            this.values[i] = values[i]\n        }\n\n        return this\n    }\n\n    reset(): void {\n        for (let i = 0; i < 16; i++) {\n            this.values[i] = 0\n        }\n    }\n\n    copy(dest?: mat4): mat4 {\n        if (!dest) { dest = new mat4() }\n\n        for (let i = 0; i < 16; i++) {\n            dest.values[i] = this.values[i]\n        }\n\n        return dest\n    }\n\n    all(): number[] {\n        const data: number[] = []\n        for (let i = 0; i < 16; i++) {\n            data[i] = this.values[i]\n        }\n\n        return data\n    }\n\n    row(index: number): number[] {\n        return [\n            this.values[index * 4 + 0],\n            this.values[index * 4 + 1],\n            this.values[index * 4 + 2],\n            this.values[index * 4 + 3],\n        ]\n    }\n\n    col(index: number): number[] {\n        return [\n            this.values[index],\n            this.values[index + 4],\n            this.values[index + 8],\n            this.values[index + 12],\n        ]\n    }\n\n    equals(matrix: mat4, threshold = epsilon): boolean {\n        for (let i = 0; i < 16; i++) {\n            if (Math.abs(this.values[i] - matrix.at(i)) > threshold) {\n                return false\n            }\n        }\n\n        return true\n    }\n\n    determinant(): number {\n        const a00 = this.values[0]\n        const a01 = this.values[1]\n        const a02 = this.values[2]\n        const a03 = this.values[3]\n        const a10 = this.values[4]\n        const a11 = this.values[5]\n        const a12 = this.values[6]\n        const a13 = this.values[7]\n        const a20 = this.values[8]\n        const a21 = this.values[9]\n        const a22 = this.values[10]\n        const a23 = this.values[11]\n        const a30 = this.values[12]\n        const a31 = this.values[13]\n        const a32 = this.values[14]\n        const a33 = this.values[15]\n\n        const det00 = a00 * a11 - a01 * a10\n        const det01 = a00 * a12 - a02 * a10\n        const det02 = a00 * a13 - a03 * a10\n        const det03 = a01 * a12 - a02 * a11\n        const det04 = a01 * a13 - a03 * a11\n        const det05 = a02 * a13 - a03 * a12\n        const det06 = a20 * a31 - a21 * a30\n        const det07 = a20 * a32 - a22 * a30\n        const det08 = a20 * a33 - a23 * a30\n        const det09 = a21 * a32 - a22 * a31\n        const det10 = a21 * a33 - a23 * a31\n        const det11 = a22 * a33 - a23 * a32\n\n        return (det00 * det11 - det01 * det10 + det02 * det09 + det03 * det08 - det04 * det07 + det05 * det06)\n    }\n\n    setIdentity(): mat4 {\n        this.values[0] = 1\n        this.values[1] = 0\n        this.values[2] = 0\n        this.values[3] = 0\n        this.values[4] = 0\n        this.values[5] = 1\n        this.values[6] = 0\n        this.values[7] = 0\n        this.values[8] = 0\n        this.values[9] = 0\n        this.values[10] = 1\n        this.values[11] = 0\n        this.values[12] = 0\n        this.values[13] = 0\n        this.values[14] = 0\n        this.values[15] = 1\n\n        return this\n    }\n\n    transpose(): mat4 {\n        const temp01 = this.values[1]\n        const temp02 = this.values[2]\n        const temp03 = this.values[3]\n        const temp12 = this.values[6]\n        const temp13 = this.values[7]\n        const temp23 = this.values[11]\n\n        this.values[1] = this.values[4]\n        this.values[2] = this.values[8]\n        this.values[3] = this.values[12]\n        this.values[4] = temp01\n        this.values[6] = this.values[9]\n        this.values[7] = this.values[13]\n        this.values[8] = temp02\n        this.values[9] = temp12\n        this.values[11] = this.values[14]\n        this.values[12] = temp03\n        this.values[13] = temp13\n        this.values[14] = temp23\n\n        return this\n    }\n\n    inverse(): mat4 {\n        const a00 = this.values[0]\n        const a01 = this.values[1]\n        const a02 = this.values[2]\n        const a03 = this.values[3]\n        const a10 = this.values[4]\n        const a11 = this.values[5]\n        const a12 = this.values[6]\n        const a13 = this.values[7]\n        const a20 = this.values[8]\n        const a21 = this.values[9]\n        const a22 = this.values[10]\n        const a23 = this.values[11]\n        const a30 = this.values[12]\n        const a31 = this.values[13]\n        const a32 = this.values[14]\n        const a33 = this.values[15]\n\n        const det00 = a00 * a11 - a01 * a10\n        const det01 = a00 * a12 - a02 * a10\n        const det02 = a00 * a13 - a03 * a10\n        const det03 = a01 * a12 - a02 * a11\n        const det04 = a01 * a13 - a03 * a11\n        const det05 = a02 * a13 - a03 * a12\n        const det06 = a20 * a31 - a21 * a30\n        const det07 = a20 * a32 - a22 * a30\n        const det08 = a20 * a33 - a23 * a30\n        const det09 = a21 * a32 - a22 * a31\n        const det10 = a21 * a33 - a23 * a31\n        const det11 = a22 * a33 - a23 * a32\n\n        let det = (det00 * det11 - det01 * det10 + det02 * det09 + det03 * det08 - det04 * det07 + det05 * det06)\n\n        if (!det) {\n            return null\n        }\n\n        det = 1.0 / det\n\n        this.values[0] = (a11 * det11 - a12 * det10 + a13 * det09) * det\n        this.values[1] = (-a01 * det11 + a02 * det10 - a03 * det09) * det\n        this.values[2] = (a31 * det05 - a32 * det04 + a33 * det03) * det\n        this.values[3] = (-a21 * det05 + a22 * det04 - a23 * det03) * det\n        this.values[4] = (-a10 * det11 + a12 * det08 - a13 * det07) * det\n        this.values[5] = (a00 * det11 - a02 * det08 + a03 * det07) * det\n        this.values[6] = (-a30 * det05 + a32 * det02 - a33 * det01) * det\n        this.values[7] = (a20 * det05 - a22 * det02 + a23 * det01) * det\n        this.values[8] = (a10 * det10 - a11 * det08 + a13 * det06) * det\n        this.values[9] = (-a00 * det10 + a01 * det08 - a03 * det06) * det\n        this.values[10] = (a30 * det04 - a31 * det02 + a33 * det00) * det\n        this.values[11] = (-a20 * det04 + a21 * det02 - a23 * det00) * det\n        this.values[12] = (-a10 * det09 + a11 * det07 - a12 * det06) * det\n        this.values[13] = (a00 * det09 - a01 * det07 + a02 * det06) * det\n        this.values[14] = (-a30 * det03 + a31 * det01 - a32 * det00) * det\n        this.values[15] = (a20 * det03 - a21 * det01 + a22 * det00) * det\n\n        return this\n    }\n\n    multiply(matrix: mat4): mat4 {\n        const a00 = this.values[0]\n        const a01 = this.values[1]\n        const a02 = this.values[2]\n        const a03 = this.values[3]\n        const a10 = this.values[4]\n        const a11 = this.values[5]\n        const a12 = this.values[6]\n        const a13 = this.values[7]\n        const a20 = this.values[8]\n        const a21 = this.values[9]\n        const a22 = this.values[10]\n        const a23 = this.values[11]\n        const a30 = this.values[12]\n        const a31 = this.values[13]\n        const a32 = this.values[14]\n        const a33 = this.values[15]\n\n        let b0 = matrix.at(0)\n        let b1 = matrix.at(1)\n        let b2 = matrix.at(2)\n        let b3 = matrix.at(3)\n\n        this.values[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30\n        this.values[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31\n        this.values[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32\n        this.values[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33\n\n        b0 = matrix.at(4)\n        b1 = matrix.at(5)\n        b2 = matrix.at(6)\n        b3 = matrix.at(7)\n\n        this.values[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30\n        this.values[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31\n        this.values[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32\n        this.values[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33\n\n        b0 = matrix.at(8)\n        b1 = matrix.at(9)\n        b2 = matrix.at(10)\n        b3 = matrix.at(11)\n\n        this.values[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30\n        this.values[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31\n        this.values[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32\n        this.values[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33\n\n        b0 = matrix.at(12)\n        b1 = matrix.at(13)\n        b2 = matrix.at(14)\n        b3 = matrix.at(15)\n\n        this.values[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30\n        this.values[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31\n        this.values[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32\n        this.values[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33\n\n        return this\n    }\n\n    multiplyVec3(vector: vec3): vec3 {\n        const x = vector.x\n        const y = vector.y\n        const z = vector.z\n\n        return new vec3([\n            this.values[0] * x + this.values[4] * y + this.values[8] * z + this.values[12],\n            this.values[1] * x + this.values[5] * y + this.values[9] * z + this.values[13],\n            this.values[2] * x + this.values[6] * y + this.values[10] * z + this.values[14],\n        ])\n    }\n\n    multiplyVec4(vector: vec4, dest?: vec4): vec4 {\n        if (!dest) { dest = new vec4() }\n\n        const x = vector.x\n        const y = vector.y\n        const z = vector.z\n        const w = vector.w\n\n        dest.x = this.values[0] * x + this.values[4] * y + this.values[8] * z + this.values[12] * w\n        dest.y = this.values[1] * x + this.values[5] * y + this.values[9] * z + this.values[13] * w\n        dest.z = this.values[2] * x + this.values[6] * y + this.values[10] * z + this.values[14] * w\n        dest.w = this.values[3] * x + this.values[7] * y + this.values[11] * z + this.values[15] * w\n\n        return dest\n    }\n\n    toMat3(): mat3 {\n        return new mat3([\n            this.values[0],\n            this.values[1],\n            this.values[2],\n            this.values[4],\n            this.values[5],\n            this.values[6],\n            this.values[8],\n            this.values[9],\n            this.values[10],\n        ])\n    }\n\n    toInverseMat3(): mat3 {\n        const a00 = this.values[0]\n        const a01 = this.values[1]\n        const a02 = this.values[2]\n        const a10 = this.values[4]\n        const a11 = this.values[5]\n        const a12 = this.values[6]\n        const a20 = this.values[8]\n        const a21 = this.values[9]\n        const a22 = this.values[10]\n\n        const det01 = a22 * a11 - a12 * a21\n        const det11 = -a22 * a10 + a12 * a20\n        const det21 = a21 * a10 - a11 * a20\n\n        let det = a00 * det01 + a01 * det11 + a02 * det21\n\n        if (!det) {\n            return null\n        }\n\n        det = 1.0 / det\n\n        return new mat3([\n            det01 * det,\n            (-a22 * a01 + a02 * a21) * det,\n            (a12 * a01 - a02 * a11) * det,\n            det11 * det,\n            (a22 * a00 - a02 * a20) * det,\n            (-a12 * a00 + a02 * a10) * det,\n            det21 * det,\n            (-a21 * a00 + a01 * a20) * det,\n            (a11 * a00 - a01 * a10) * det,\n        ])\n    }\n\n    translate(vector: vec3): mat4 {\n        const x = vector.x\n        const y = vector.y\n        const z = vector.z\n\n        this.values[12] += this.values[0] * x + this.values[4] * y + this.values[8] * z\n        this.values[13] += this.values[1] * x + this.values[5] * y + this.values[9] * z\n        this.values[14] += this.values[2] * x + this.values[6] * y + this.values[10] * z\n        this.values[15] += this.values[3] * x + this.values[7] * y + this.values[11] * z\n\n        return this\n    }\n\n    scale(vector: vec3): mat4 {\n        const x = vector.x\n        const y = vector.y\n        const z = vector.z\n\n        this.values[0] *= x\n        this.values[1] *= x\n        this.values[2] *= x\n        this.values[3] *= x\n\n        this.values[4] *= y\n        this.values[5] *= y\n        this.values[6] *= y\n        this.values[7] *= y\n\n        this.values[8] *= z\n        this.values[9] *= z\n        this.values[10] *= z\n        this.values[11] *= z\n\n        return this\n    }\n\n    rotate(angle: number, axis: vec3): mat4 {\n        let x = axis.x\n        let y = axis.y\n        let z = axis.z\n\n        let length = Math.sqrt(x * x + y * y + z * z)\n\n        if (!length) {\n            return null\n        }\n\n        if (length !== 1) {\n            length = 1 / length\n            x *= length\n            y *= length\n            z *= length\n        }\n\n        const s = Math.sin(angle)\n        const c = Math.cos(angle)\n\n        const t = 1.0 - c\n\n        const a00 = this.values[0]\n        const a01 = this.values[1]\n        const a02 = this.values[2]\n        const a03 = this.values[3]\n\n        const a10 = this.values[4]\n        const a11 = this.values[5]\n        const a12 = this.values[6]\n        const a13 = this.values[7]\n\n        const a20 = this.values[8]\n        const a21 = this.values[9]\n        const a22 = this.values[10]\n        const a23 = this.values[11]\n\n        const b00 = x * x * t + c\n        const b01 = y * x * t + z * s\n        const b02 = z * x * t - y * s\n\n        const b10 = x * y * t - z * s\n        const b11 = y * y * t + c\n        const b12 = z * y * t + x * s\n\n        const b20 = x * z * t + y * s\n        const b21 = y * z * t - x * s\n        const b22 = z * z * t + c\n\n        this.values[0] = a00 * b00 + a10 * b01 + a20 * b02\n        this.values[1] = a01 * b00 + a11 * b01 + a21 * b02\n        this.values[2] = a02 * b00 + a12 * b01 + a22 * b02\n        this.values[3] = a03 * b00 + a13 * b01 + a23 * b02\n\n        this.values[4] = a00 * b10 + a10 * b11 + a20 * b12\n        this.values[5] = a01 * b10 + a11 * b11 + a21 * b12\n        this.values[6] = a02 * b10 + a12 * b11 + a22 * b12\n        this.values[7] = a03 * b10 + a13 * b11 + a23 * b12\n\n        this.values[8] = a00 * b20 + a10 * b21 + a20 * b22\n        this.values[9] = a01 * b20 + a11 * b21 + a21 * b22\n        this.values[10] = a02 * b20 + a12 * b21 + a22 * b22\n        this.values[11] = a03 * b20 + a13 * b21 + a23 * b22\n\n        return this\n    }\n\n    static frustum(left: number, right: number, bottom: number, top: number, near: number, far: number): mat4 {\n        const rl = (right - left)\n        const tb = (top - bottom)\n        const fn = (far - near)\n\n        return new mat4([\n            (near * 2) / rl,\n            0,\n            0,\n            0,\n\n            0,\n            (near * 2) / tb,\n            0,\n            0,\n\n            (right + left) / rl,\n            (top + bottom) / tb,\n            -(far + near) / fn,\n            -1,\n\n            0,\n            0,\n            -(far * near * 2) / fn,\n            0,\n        ])\n    }\n\n    static perspective(fov: number, aspect: number, near: number, far: number): mat4 {\n        const top = near * Math.tan(fov * Math.PI / 360.0)\n        const right = top * aspect\n\n        return mat4.frustum(-right, right, -top, top, near, far)\n    }\n\n    static orthographic(left: number, right: number, bottom: number, top: number, near: number, far: number): mat4 {\n        const rl = (right - left)\n        const tb = (top - bottom)\n        const fn = (far - near)\n\n        return new mat4([\n            2 / rl,\n            0,\n            0,\n            0,\n\n            0,\n            2 / tb,\n            0,\n            0,\n\n            0,\n            0,\n            -2 / fn,\n            0,\n\n            -(left + right) / rl,\n            -(top + bottom) / tb,\n            -(far + near) / fn,\n            1,\n        ])\n    }\n\n    static lookAt(position: vec3, target: vec3, up: vec3 = vec3.up): mat4 {\n        if (position.equals(target)) {\n            return this.identity\n        }\n\n        const z = vec3.difference(position, target).normalize()\n\n        const x = vec3.cross(up, z).normalize()\n        const y = vec3.cross(z, x).normalize()\n\n        return new mat4([\n            x.x,\n            y.x,\n            z.x,\n            0,\n\n            x.y,\n            y.y,\n            z.y,\n            0,\n\n            x.z,\n            y.z,\n            z.z,\n            0,\n\n            -vec3.dot(x, position),\n            -vec3.dot(y, position),\n            -vec3.dot(z, position),\n            1,\n        ])\n    }\n\n    static product(m1: mat4, m2: mat4, result: mat4): mat4 {\n        const a00 = m1.at(0)\n        const a01 = m1.at(1)\n        const a02 = m1.at(2)\n        const a03 = m1.at(3)\n        const a10 = m1.at(4)\n        const a11 = m1.at(5)\n        const a12 = m1.at(6)\n        const a13 = m1.at(7)\n        const a20 = m1.at(8)\n        const a21 = m1.at(9)\n        const a22 = m1.at(10)\n        const a23 = m1.at(11)\n        const a30 = m1.at(12)\n        const a31 = m1.at(13)\n        const a32 = m1.at(14)\n        const a33 = m1.at(15)\n\n        const b00 = m2.at(0)\n        const b01 = m2.at(1)\n        const b02 = m2.at(2)\n        const b03 = m2.at(3)\n        const b10 = m2.at(4)\n        const b11 = m2.at(5)\n        const b12 = m2.at(6)\n        const b13 = m2.at(7)\n        const b20 = m2.at(8)\n        const b21 = m2.at(9)\n        const b22 = m2.at(10)\n        const b23 = m2.at(11)\n        const b30 = m2.at(12)\n        const b31 = m2.at(13)\n        const b32 = m2.at(14)\n        const b33 = m2.at(15)\n\n        if (result) {\n            result.init([\n                b00 * a00 + b01 * a10 + b02 * a20 + b03 * a30,\n                b00 * a01 + b01 * a11 + b02 * a21 + b03 * a31,\n                b00 * a02 + b01 * a12 + b02 * a22 + b03 * a32,\n                b00 * a03 + b01 * a13 + b02 * a23 + b03 * a33,\n\n                b10 * a00 + b11 * a10 + b12 * a20 + b13 * a30,\n                b10 * a01 + b11 * a11 + b12 * a21 + b13 * a31,\n                b10 * a02 + b11 * a12 + b12 * a22 + b13 * a32,\n                b10 * a03 + b11 * a13 + b12 * a23 + b13 * a33,\n\n                b20 * a00 + b21 * a10 + b22 * a20 + b23 * a30,\n                b20 * a01 + b21 * a11 + b22 * a21 + b23 * a31,\n                b20 * a02 + b21 * a12 + b22 * a22 + b23 * a32,\n                b20 * a03 + b21 * a13 + b22 * a23 + b23 * a33,\n\n                b30 * a00 + b31 * a10 + b32 * a20 + b33 * a30,\n                b30 * a01 + b31 * a11 + b32 * a21 + b33 * a31,\n                b30 * a02 + b31 * a12 + b32 * a22 + b33 * a32,\n                b30 * a03 + b31 * a13 + b32 * a23 + b33 * a33,\n            ])\n\n            return result\n        } else {\n            return new mat4([\n                b00 * a00 + b01 * a10 + b02 * a20 + b03 * a30,\n                b00 * a01 + b01 * a11 + b02 * a21 + b03 * a31,\n                b00 * a02 + b01 * a12 + b02 * a22 + b03 * a32,\n                b00 * a03 + b01 * a13 + b02 * a23 + b03 * a33,\n\n                b10 * a00 + b11 * a10 + b12 * a20 + b13 * a30,\n                b10 * a01 + b11 * a11 + b12 * a21 + b13 * a31,\n                b10 * a02 + b11 * a12 + b12 * a22 + b13 * a32,\n                b10 * a03 + b11 * a13 + b12 * a23 + b13 * a33,\n\n                b20 * a00 + b21 * a10 + b22 * a20 + b23 * a30,\n                b20 * a01 + b21 * a11 + b22 * a21 + b23 * a31,\n                b20 * a02 + b21 * a12 + b22 * a22 + b23 * a32,\n                b20 * a03 + b21 * a13 + b22 * a23 + b23 * a33,\n\n                b30 * a00 + b31 * a10 + b32 * a20 + b33 * a30,\n                b30 * a01 + b31 * a11 + b32 * a21 + b33 * a31,\n                b30 * a02 + b31 * a12 + b32 * a22 + b33 * a32,\n                b30 * a03 + b31 * a13 + b32 * a23 + b33 * a33,\n            ])\n        }\n    }\n\n}\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n\r\nconst LANGUAGE_DEFAULT = 'en';\r\n\r\nlet _isWindows = false;\r\nlet _isMacintosh = false;\r\nlet _isLinux = false;\r\nlet _isNative = false;\r\nlet _isWeb = false;\r\nlet _isIOS = false;\r\nlet _locale: string | undefined = undefined;\r\nlet _language: string = LANGUAGE_DEFAULT;\r\nlet _translationsConfigFile: string | undefined = undefined;\r\nlet _userAgent: string | undefined = undefined;\r\n\r\ninterface NLSConfig {\r\n\tlocale: string;\r\n\tavailableLanguages: { [key: string]: string; };\r\n\t_translationsConfigFile: string;\r\n}\r\n\r\nexport interface IProcessEnvironment {\r\n\t[key: string]: string;\r\n}\r\n\r\ninterface INodeProcess {\r\n\tplatform: string;\r\n\tenv: IProcessEnvironment;\r\n\tgetuid(): number;\r\n\tnextTick: Function;\r\n\tversions?: {\r\n\t\telectron?: string;\r\n\t};\r\n\ttype?: string;\r\n}\r\ndeclare const process: INodeProcess;\r\ndeclare const global: any;\r\n\r\ninterface INavigator {\r\n\tuserAgent: string;\r\n\tlanguage: string;\r\n\tmaxTouchPoints?: number;\r\n}\r\ndeclare const navigator: INavigator;\r\ndeclare const self: any;\r\n\r\nconst isElectronRenderer = (typeof process !== 'undefined' && typeof process.versions !== 'undefined' && typeof process.versions.electron !== 'undefined' && process.type === 'renderer');\r\n\r\n// OS detection\r\nif (typeof navigator === 'object' && !isElectronRenderer) {\r\n\t_userAgent = navigator.userAgent;\r\n\t_isWindows = _userAgent.indexOf('Windows') >= 0;\r\n\t_isMacintosh = _userAgent.indexOf('Macintosh') >= 0;\r\n\t_isIOS = _userAgent.indexOf('Macintosh') >= 0 && !!navigator.maxTouchPoints && navigator.maxTouchPoints > 0;\r\n\t_isLinux = _userAgent.indexOf('Linux') >= 0;\r\n\t_isWeb = true;\r\n\t_locale = navigator.language;\r\n\t_language = _locale;\r\n} else if (typeof process === 'object') {\r\n\t_isWindows = (process.platform === 'win32');\r\n\t_isMacintosh = (process.platform === 'darwin');\r\n\t_isLinux = (process.platform === 'linux');\r\n\t_locale = LANGUAGE_DEFAULT;\r\n\t_language = LANGUAGE_DEFAULT;\r\n\tconst rawNlsConfig = process.env['VSCODE_NLS_CONFIG'];\r\n\tif (rawNlsConfig) {\r\n\t\ttry {\r\n\t\t\tconst nlsConfig: NLSConfig = JSON.parse(rawNlsConfig);\r\n\t\t\tconst resolved = nlsConfig.availableLanguages['*'];\r\n\t\t\t_locale = nlsConfig.locale;\r\n\t\t\t// VSCode's default language is 'en'\r\n\t\t\t_language = resolved ? resolved : LANGUAGE_DEFAULT;\r\n\t\t\t_translationsConfigFile = nlsConfig._translationsConfigFile;\r\n\t\t} catch (e) {\r\n\t\t}\r\n\t}\r\n\t_isNative = true;\r\n}\r\n\r\nexport const enum Platform {\r\n\tWeb,\r\n\tMac,\r\n\tLinux,\r\n\tWindows\r\n}\r\nexport function PlatformToString(platform: Platform) {\r\n\tswitch (platform) {\r\n\t\tcase Platform.Web: return 'Web';\r\n\t\tcase Platform.Mac: return 'Mac';\r\n\t\tcase Platform.Linux: return 'Linux';\r\n\t\tcase Platform.Windows: return 'Windows';\r\n\t}\r\n}\r\n\r\nlet _platform: Platform = Platform.Web;\r\nif (_isMacintosh) {\r\n\t_platform = Platform.Mac;\r\n} else if (_isWindows) {\r\n\t_platform = Platform.Windows;\r\n} else if (_isLinux) {\r\n\t_platform = Platform.Linux;\r\n}\r\n\r\nexport const isWindows = _isWindows;\r\nexport const isMacintosh = _isMacintosh;\r\nexport const isLinux = _isLinux;\r\nexport const isNative = _isNative;\r\nexport const isWeb = _isWeb;\r\nexport const isIOS = _isIOS;\r\nexport const platform = _platform;\r\nexport const userAgent = _userAgent;\r\n\r\nexport function isRootUser(): boolean {\r\n\treturn _isNative && !_isWindows && (process.getuid() === 0);\r\n}\r\n\r\n/**\r\n * The language used for the user interface. The format of\r\n * the string is all lower case (e.g. zh-tw for Traditional\r\n * Chinese)\r\n */\r\nexport const language = _language;\r\n\r\nexport namespace Language {\r\n\r\n\texport function value(): string {\r\n\t\treturn language;\r\n\t}\r\n\r\n\texport function isDefaultVariant(): boolean {\r\n\t\tif (language.length === 2) {\r\n\t\t\treturn language === 'en';\r\n\t\t} else if (language.length >= 3) {\r\n\t\t\treturn language[0] === 'e' && language[1] === 'n' && language[2] === '-';\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\texport function isDefault(): boolean {\r\n\t\treturn language === 'en';\r\n\t}\r\n}\r\n\r\n/**\r\n * The OS locale or the locale specified by --locale. The format of\r\n * the string is all lower case (e.g. zh-tw for Traditional\r\n * Chinese). The UI is not necessarily shown in the provided locale.\r\n */\r\nexport const locale = _locale;\r\n\r\n/**\r\n * The translatios that are available through language packs.\r\n */\r\nexport const translationsConfigFile = _translationsConfigFile;\r\n\r\nconst _globals = (typeof self === 'object' ? self : typeof global === 'object' ? global : {} as any);\r\nexport const globals: any = _globals;\r\n\r\ninterface ISetImmediate {\r\n\t(callback: (...args: any[]) => void): void;\r\n}\r\n\r\nexport const setImmediate: ISetImmediate = (function defineSetImmediate() {\r\n\tif (globals.setImmediate) {\r\n\t\treturn globals.setImmediate.bind(globals);\r\n\t}\r\n\tif (typeof globals.postMessage === 'function' && !globals.importScripts) {\r\n\t\tinterface IQueueElement {\r\n\t\t\tid: number;\r\n\t\t\tcallback: () => void;\r\n\t\t}\r\n\t\tlet pending: IQueueElement[] = [];\r\n\t\tglobals.addEventListener('message', (e: MessageEvent) => {\r\n\t\t\tif (e.data && e.data.vscodeSetImmediateId) {\r\n\t\t\t\tfor (let i = 0, len = pending.length; i < len; i++) {\r\n\t\t\t\t\tconst candidate = pending[i];\r\n\t\t\t\t\tif (candidate.id === e.data.vscodeSetImmediateId) {\r\n\t\t\t\t\t\tpending.splice(i, 1);\r\n\t\t\t\t\t\tcandidate.callback();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet lastId = 0;\r\n\t\treturn (callback: () => void) => {\r\n\t\t\tconst myId = ++lastId;\r\n\t\t\tpending.push({\r\n\t\t\t\tid: myId,\r\n\t\t\t\tcallback: callback\r\n\t\t\t});\r\n\t\t\tglobals.postMessage({ vscodeSetImmediateId: myId }, '*');\r\n\t\t};\r\n\t}\r\n\tif (typeof process !== 'undefined' && typeof process.nextTick === 'function') {\r\n\t\treturn process.nextTick.bind(process);\r\n\t}\r\n\tconst _promise = Promise.resolve();\r\n\treturn (callback: (...args: any[]) => void) => _promise.then(callback);\r\n})();\r\n\r\nexport const enum OperatingSystem {\r\n\tWindows = 1,\r\n\tMacintosh = 2,\r\n\tLinux = 3\r\n}\r\nexport const OS = (_isMacintosh ? OperatingSystem.Macintosh : (_isWindows ? OperatingSystem.Windows : OperatingSystem.Linux));\r\n","import mat3 from './mat3'\nimport mat4 from './mat4'\nimport vec3 from './vec3'\n\nimport { epsilon } from './constants'\n\nexport default class quat {\n\n    get x(): number {\n        return this.values[0]\n    }\n\n    get y(): number {\n        return this.values[1]\n    }\n\n    get z(): number {\n        return this.values[2]\n    }\n\n    get w(): number {\n        return this.values[3]\n    }\n\n    get xy(): [number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n        ]\n    }\n\n    get xyz(): [number, number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n            this.values[2],\n        ]\n    }\n\n    get xyzw(): [number, number, number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n            this.values[2],\n            this.values[3],\n        ]\n    }\n\n    set x(value: number) {\n        this.values[0] = value\n    }\n\n    set y(value: number) {\n        this.values[1] = value\n    }\n\n    set z(value: number) {\n        this.values[2] = value\n    }\n\n    set w(value: number) {\n        this.values[3] = value\n    }\n\n    set xy(values: [number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n    }\n\n    set xyz(values: [number, number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n        this.values[2] = values[2]\n    }\n\n    set xyzw(values: [number, number, number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n        this.values[2] = values[2]\n        this.values[3] = values[3]\n    }\n\n    constructor(values?: [number, number, number, number]) {\n        if (values !== undefined) {\n            this.xyzw = values\n        }\n    }\n\n    private values = new Float32Array(4)\n\n    static readonly identity = new quat().setIdentity()\n\n    at(index: number): number {\n        return this.values[index]\n    }\n\n    reset(): void {\n        for (let i = 0; i < 4; i++) {\n            this.values[i] = 0\n        }\n    }\n\n    copy(dest?: quat): quat {\n        if (!dest) { dest = new quat() }\n\n        for (let i = 0; i < 4; i++) {\n            dest.values[i] = this.values[i]\n        }\n\n        return dest\n    }\n\n    roll(): number {\n        const x = this.x\n        const y = this.y\n        const z = this.z\n        const w = this.w\n\n        return Math.atan2(2.0 * (x * y + w * z), w * w + x * x - y * y - z * z)\n    }\n\n    pitch(): number {\n        const x = this.x\n        const y = this.y\n        const z = this.z\n        const w = this.w\n\n        return Math.atan2(2.0 * (y * z + w * x), w * w - x * x - y * y + z * z)\n    }\n\n    yaw(): number {\n        return Math.asin(2.0 * (this.x * this.z - this.w * this.y))\n    }\n\n    equals(vector: quat, threshold = epsilon): boolean {\n        for (let i = 0; i < 4; i++) {\n            if (Math.abs(this.values[i] - vector.at(i)) > threshold) {\n                return false\n            }\n        }\n\n        return true\n    }\n\n    setIdentity(): quat {\n        this.x = 0\n        this.y = 0\n        this.z = 0\n        this.w = 1\n\n        return this\n    }\n\n    calculateW(): quat {\n        const x = this.x\n        const y = this.y\n        const z = this.z\n\n        this.w = -(Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z)))\n\n        return this\n    }\n\n    inverse(): quat {\n        const dot = quat.dot(this, this)\n\n        if (!dot) {\n            this.xyzw = [0, 0, 0, 0]\n\n            return this\n        }\n\n        const invDot = dot ? 1.0 / dot : 0\n\n        this.x *= -invDot\n        this.y *= -invDot\n        this.z *= -invDot\n        this.w *= invDot\n\n        return this\n    }\n\n    conjugate(): quat {\n        this.values[0] *= -1\n        this.values[1] *= -1\n        this.values[2] *= -1\n\n        return this\n    }\n\n    length(): number {\n        const x = this.x\n        const y = this.y\n        const z = this.z\n        const w = this.w\n\n        return Math.sqrt(x * x + y * y + z * z + w * w)\n    }\n\n    normalize(dest?: quat): quat {\n        if (!dest) { dest = this }\n\n        const x = this.x\n        const y = this.y\n        const z = this.z\n        const w = this.w\n\n        let length = Math.sqrt(x * x + y * y + z * z + w * w)\n\n        if (!length) {\n            dest.x = 0\n            dest.y = 0\n            dest.z = 0\n            dest.w = 0\n\n            return dest\n        }\n\n        length = 1 / length\n\n        dest.x = x * length\n        dest.y = y * length\n        dest.z = z * length\n        dest.w = w * length\n\n        return dest\n    }\n\n    add(other: quat): quat {\n        for (let i = 0; i < 4; i++) {\n            this.values[i] += other.at(i)\n        }\n\n        return this\n    }\n\n    multiply(other: quat): quat {\n        const q1x = this.values[0]\n        const q1y = this.values[1]\n        const q1z = this.values[2]\n        const q1w = this.values[3]\n\n        const q2x = other.x\n        const q2y = other.y\n        const q2z = other.z\n        const q2w = other.w\n\n        this.x = q1x * q2w + q1w * q2x + q1y * q2z - q1z * q2y\n        this.y = q1y * q2w + q1w * q2y + q1z * q2x - q1x * q2z\n        this.z = q1z * q2w + q1w * q2z + q1x * q2y - q1y * q2x\n        this.w = q1w * q2w - q1x * q2x - q1y * q2y - q1z * q2z\n\n        return this\n    }\n\n    multiplyVec3(vector: vec3, dest?: vec3): vec3 {\n        if (!dest) { dest = new vec3() }\n\n        const x = vector.x\n        const y = vector.y\n        const z = vector.z\n\n        const qx = this.x\n        const qy = this.y\n        const qz = this.z\n        const qw = this.w\n\n        const ix = qw * x + qy * z - qz * y\n        const iy = qw * y + qz * x - qx * z\n        const iz = qw * z + qx * y - qy * x\n        const iw = -qx * x - qy * y - qz * z\n\n        dest.x = ix * qw + iw * -qx + iy * -qz - iz * -qy\n        dest.y = iy * qw + iw * -qy + iz * -qx - ix * -qz\n        dest.z = iz * qw + iw * -qz + ix * -qy - iy * -qx\n\n        return dest\n    }\n\n    toMat3(dest?: mat3): mat3 {\n        if (!dest) { dest = new mat3() }\n\n        const x = this.x\n        const y = this.y\n        const z = this.z\n        const w = this.w\n\n        const x2 = x + x\n        const y2 = y + y\n        const z2 = z + z\n\n        const xx = x * x2\n        const xy = x * y2\n        const xz = x * z2\n        const yy = y * y2\n        const yz = y * z2\n        const zz = z * z2\n        const wx = w * x2\n        const wy = w * y2\n        const wz = w * z2\n\n        dest.init([\n            1 - (yy + zz),\n            xy + wz,\n            xz - wy,\n\n            xy - wz,\n            1 - (xx + zz),\n            yz + wx,\n\n            xz + wy,\n            yz - wx,\n            1 - (xx + yy),\n        ])\n\n        return dest\n    }\n\n    toMat4(dest?: mat4): mat4 {\n        if (!dest) { dest = new mat4() }\n\n        const x = this.x\n        const y = this.y\n        const z = this.z\n        const w = this.w\n\n        const x2 = x + x\n        const y2 = y + y\n        const z2 = z + z\n\n        const xx = x * x2\n        const xy = x * y2\n        const xz = x * z2\n        const yy = y * y2\n        const yz = y * z2\n        const zz = z * z2\n        const wx = w * x2\n        const wy = w * y2\n        const wz = w * z2\n\n        dest.init([\n            1 - (yy + zz),\n            xy + wz,\n            xz - wy,\n            0,\n\n            xy - wz,\n            1 - (xx + zz),\n            yz + wx,\n            0,\n\n            xz + wy,\n            yz - wx,\n            1 - (xx + yy),\n            0,\n\n            0,\n            0,\n            0,\n            1,\n        ])\n\n        return dest\n    }\n\n    static dot(q1: quat, q2: quat): number {\n        return q1.x * q2.x + q1.y * q2.y + q1.z * q2.z + q1.w * q2.w\n    }\n\n    static sum(q1: quat, q2: quat, dest?: quat): quat {\n        if (!dest) { dest = new quat() }\n\n        dest.x = q1.x + q2.x\n        dest.y = q1.y + q2.y\n        dest.z = q1.z + q2.z\n        dest.w = q1.w + q2.w\n\n        return dest\n    }\n\n    static product(q1: quat, q2: quat, dest?: quat): quat {\n        if (!dest) { dest = new quat() }\n\n        const q1x = q1.x\n        const q1y = q1.y\n        const q1z = q1.z\n        const q1w = q1.w\n\n        const q2x = q2.x\n        const q2y = q2.y\n        const q2z = q2.z\n        const q2w = q2.w\n\n        dest.x = q1x * q2w + q1w * q2x + q1y * q2z - q1z * q2y\n        dest.y = q1y * q2w + q1w * q2y + q1z * q2x - q1x * q2z\n        dest.z = q1z * q2w + q1w * q2z + q1x * q2y - q1y * q2x\n        dest.w = q1w * q2w - q1x * q2x - q1y * q2y - q1z * q2z\n\n        return dest\n    }\n\n    static cross(q1: quat, q2: quat, dest?: quat): quat {\n        if (!dest) { dest = new quat() }\n\n        const q1x = q1.x\n        const q1y = q1.y\n        const q1z = q1.z\n        const q1w = q1.w\n\n        const q2x = q2.x\n        const q2y = q2.y\n        const q2z = q2.z\n        const q2w = q2.w\n\n        dest.x = q1w * q2z + q1z * q2w + q1x * q2y - q1y * q2x\n        dest.y = q1w * q2w - q1x * q2x - q1y * q2y - q1z * q2z\n        dest.z = q1w * q2x + q1x * q2w + q1y * q2z - q1z * q2y\n        dest.w = q1w * q2y + q1y * q2w + q1z * q2x - q1x * q2z\n\n        return dest\n    }\n\n    static shortMix(q1: quat, q2: quat, time: number, dest?: quat): quat {\n        if (!dest) { dest = new quat() }\n\n        if (time <= 0.0) {\n            dest.xyzw = q1.xyzw\n\n            return dest\n        } else if (time >= 1.0) {\n            dest.xyzw = q2.xyzw\n\n            return dest\n        }\n\n        let cos = quat.dot(q1, q2)\n        const q2a = q2.copy()\n\n        if (cos < 0.0) {\n            q2a.inverse()\n            cos = -cos\n        }\n\n        let k0: number\n        let k1: number\n\n        if (cos > 0.9999) {\n            k0 = 1 - time\n            k1 = 0 + time\n        } else {\n            const sin: number = Math.sqrt(1 - cos * cos)\n            const angle: number = Math.atan2(sin, cos)\n\n            const oneOverSin: number = 1 / sin\n\n            k0 = Math.sin((1 - time) * angle) * oneOverSin\n            k1 = Math.sin((0 + time) * angle) * oneOverSin\n        }\n\n        dest.x = k0 * q1.x + k1 * q2a.x\n        dest.y = k0 * q1.y + k1 * q2a.y\n        dest.z = k0 * q1.z + k1 * q2a.z\n        dest.w = k0 * q1.w + k1 * q2a.w\n\n        return dest\n    }\n\n    static mix(q1: quat, q2: quat, time: number, dest?: quat): quat {\n        if (!dest) { dest = new quat() }\n\n        const cosHalfTheta = q1.x * q2.x + q1.y * q2.y + q1.z * q2.z + q1.w * q2.w\n\n        if (Math.abs(cosHalfTheta) >= 1.0) {\n            dest.xyzw = q1.xyzw\n\n            return dest\n        }\n\n        const halfTheta = Math.acos(cosHalfTheta)\n        const sinHalfTheta = Math.sqrt(1.0 - cosHalfTheta * cosHalfTheta)\n\n        if (Math.abs(sinHalfTheta) < 0.001) {\n            dest.x = q1.x * 0.5 + q2.x * 0.5\n            dest.y = q1.y * 0.5 + q2.y * 0.5\n            dest.z = q1.z * 0.5 + q2.z * 0.5\n            dest.w = q1.w * 0.5 + q2.w * 0.5\n\n            return dest\n        }\n\n        const ratioA = Math.sin((1 - time) * halfTheta) / sinHalfTheta\n        const ratioB = Math.sin(time * halfTheta) / sinHalfTheta\n\n        dest.x = q1.x * ratioA + q2.x * ratioB\n        dest.y = q1.y * ratioA + q2.y * ratioB\n        dest.z = q1.z * ratioA + q2.z * ratioB\n        dest.w = q1.w * ratioA + q2.w * ratioB\n\n        return dest\n    }\n\n    static fromAxisAngle(axis: vec3, angle: number, dest?: quat): quat {\n        if (!dest) { dest = new quat() }\n\n        angle *= 0.5\n        const sin = Math.sin(angle)\n\n        dest.x = axis.x * sin\n        dest.y = axis.y * sin\n        dest.z = axis.z * sin\n        dest.w = Math.cos(angle)\n\n        return dest\n    }\n\n}\n","import mat2 from './mat2'\nimport mat3 from './mat3'\nimport vec3 from './vec3'\n\nimport { epsilon } from './constants'\n\nexport default class vec2 {\n\n    get x(): number {\n        return this.values[0]\n    }\n\n    get y(): number {\n        return this.values[1]\n    }\n\n    get xy(): [number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n        ]\n    }\n\n    set x(value: number) {\n        this.values[0] = value\n    }\n\n    set y(value: number) {\n        this.values[1] = value\n    }\n\n    set xy(values: [number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n    }\n\n    constructor(values?: [number, number]) {\n        if (values !== undefined) {\n            this.xy = values\n        }\n    }\n\n    private values = new Float32Array(2)\n\n    static readonly zero = new vec2([0, 0])\n    static readonly one = new vec2([1, 1])\n\n    at(index: number): number {\n        return this.values[index]\n    }\n\n    reset(): void {\n        this.x = 0\n        this.y = 0\n    }\n\n    copy(dest?: vec2): vec2 {\n        if (!dest) { dest = new vec2() }\n\n        dest.x = this.x\n        dest.y = this.y\n\n        return dest\n    }\n\n    negate(dest?: vec2): vec2 {\n        if (!dest) { dest = this }\n\n        dest.x = -this.x\n        dest.y = -this.y\n\n        return dest\n    }\n\n    equals(vector: vec2, threshold = epsilon): boolean {\n        if (Math.abs(this.x - vector.x) > threshold) {\n            return false\n        }\n\n        if (Math.abs(this.y - vector.y) > threshold) {\n            return false\n        }\n\n        return true\n    }\n\n    length(): number {\n        return Math.sqrt(this.squaredLength())\n    }\n\n    squaredLength(): number {\n        const x = this.x\n        const y = this.y\n\n        return (x * x + y * y)\n    }\n\n    add(vector: vec2): vec2 {\n        this.x += vector.x\n        this.y += vector.y\n\n        return this\n    }\n\n    subtract(vector: vec2): vec2 {\n        this.x -= vector.x\n        this.y -= vector.y\n\n        return this\n    }\n\n    multiply(vector: vec2): vec2 {\n        this.x *= vector.x\n        this.y *= vector.y\n\n        return this\n    }\n\n    divide(vector: vec2): vec2 {\n        this.x /= vector.x\n        this.y /= vector.y\n\n        return this\n    }\n\n    scale(value: number, dest?: vec2): vec2 {\n        if (!dest) { dest = this }\n\n        dest.x = this.x * value\n        dest.y = this.y * value\n\n        return dest\n    }\n\n    normalize(dest?: vec2): vec2 {\n        if (!dest) { dest = this }\n\n        let length = this.length()\n\n        if (length === 1) {\n            return this\n        }\n\n        if (length === 0) {\n            dest.x = 0\n            dest.y = 0\n\n            return dest\n        }\n\n        length = 1.0 / length\n\n        dest.x *= length\n        dest.y *= length\n\n        return dest\n    }\n\n    multiplyMat2(matrix: mat2, dest?: vec2): vec2 {\n        if (!dest) { dest = this }\n\n        return matrix.multiplyVec2(this, dest)\n    }\n\n    multiplyMat3(matrix: mat3, dest?: vec2): vec2 {\n        if (!dest) { dest = this }\n\n        return matrix.multiplyVec2(this, dest)\n    }\n\n    static cross(vector: vec2, vector2: vec2, dest?: vec3): vec3 {\n        if (!dest) { dest = new vec3() }\n\n        const x = vector.x\n        const y = vector.y\n\n        const x2 = vector2.x\n        const y2 = vector2.y\n\n        const z = x * y2 - y * x2\n\n        dest.x = 0\n        dest.y = 0\n        dest.z = z\n\n        return dest\n    }\n\n    static dot(vector: vec2, vector2: vec2): number {\n        return (vector.x * vector2.x + vector.y * vector2.y)\n    }\n\n    static distance(vector: vec2, vector2: vec2): number {\n        return Math.sqrt(this.squaredDistance(vector, vector2))\n    }\n\n    static squaredDistance(vector: vec2, vector2: vec2): number {\n        const x = vector2.x - vector.x\n        const y = vector2.y - vector.y\n\n        return (x * x + y * y)\n    }\n\n    static direction(vector: vec2, vector2: vec2, dest?: vec2): vec2 {\n        if (!dest) { dest = new vec2() }\n\n        const x = vector.x - vector2.x\n        const y = vector.y - vector2.y\n\n        let length = Math.sqrt(x * x + y * y)\n\n        if (length === 0) {\n            dest.x = 0\n            dest.y = 0\n\n            return dest\n        }\n\n        length = 1 / length\n\n        dest.x = x * length\n        dest.y = y * length\n\n        return dest\n    }\n\n    static mix(vector: vec2, vector2: vec2, time: number, dest?: vec2): vec2 {\n        if (!dest) { dest = new vec2() }\n\n        const x = vector.x\n        const y = vector.y\n\n        const x2 = vector2.x\n        const y2 = vector2.y\n\n        dest.x = x + time * (x2 - x)\n        dest.y = y + time * (y2 - y)\n\n        return dest\n    }\n\n    static sum(vector: vec2, vector2: vec2, dest?: vec2): vec2 {\n        if (!dest) { dest = new vec2() }\n\n        dest.x = vector.x + vector2.x\n        dest.y = vector.y + vector2.y\n\n        return dest\n    }\n\n    static difference(vector: vec2, vector2: vec2, dest?: vec2): vec2 {\n        if (!dest) { dest = new vec2() }\n\n        dest.x = vector.x - vector2.x\n        dest.y = vector.y - vector2.y\n\n        return dest\n    }\n\n    static product(vector: vec2, vector2: vec2, dest?: vec2): vec2 {\n        if (!dest) { dest = new vec2() }\n\n        dest.x = vector.x * vector2.x\n        dest.y = vector.y * vector2.y\n\n        return dest\n    }\n\n    static quotient(vector: vec2, vector2: vec2, dest?: vec2): vec2 {\n        if (!dest) { dest = new vec2() }\n\n        dest.x = vector.x / vector2.x\n        dest.y = vector.y / vector2.y\n\n        return dest\n    }\n\n}\n","import mat3 from './mat3'\nimport quat from './quat'\n\nimport { epsilon } from './constants'\n\nexport default class vec3 {\n\n    get x(): number {\n        return this.values[0]\n    }\n\n    get y(): number {\n        return this.values[1]\n    }\n\n    get z(): number {\n        return this.values[2]\n    }\n\n    get xy(): [number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n        ]\n    }\n\n    get xyz(): [number, number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n            this.values[2],\n        ]\n    }\n\n    set x(value: number) {\n        this.values[0] = value\n    }\n\n    set y(value: number) {\n        this.values[1] = value\n    }\n\n    set z(value: number) {\n        this.values[2] = value\n    }\n\n    set xy(values: [number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n    }\n\n    set xyz(values: [number, number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n        this.values[2] = values[2]\n    }\n\n    constructor(values?: [number, number, number]) {\n        if (values !== undefined) {\n            this.xyz = values\n        }\n    }\n\n    private values = new Float32Array(3)\n\n    static readonly zero = new vec3([0, 0, 0])\n    static readonly one = new vec3([1, 1, 1])\n\n    static readonly up = new vec3([0, 1, 0])\n    static readonly right = new vec3([1, 0, 0])\n    static readonly forward = new vec3([0, 0, 1])\n\n    at(index: number): number {\n        return this.values[index]\n    }\n\n    reset(): void {\n        this.x = 0\n        this.y = 0\n        this.z = 0\n    }\n\n    copy(dest?: vec3): vec3 {\n        if (!dest) { dest = new vec3() }\n\n        dest.x = this.x\n        dest.y = this.y\n        dest.z = this.z\n\n        return dest\n    }\n\n    negate(dest?: vec3): vec3 {\n        if (!dest) { dest = this }\n\n        dest.x = -this.x\n        dest.y = -this.y\n        dest.z = -this.z\n\n        return dest\n    }\n\n    equals(vector: vec3, threshold = epsilon): boolean {\n        if (Math.abs(this.x - vector.x) > threshold) {\n            return false\n        }\n\n        if (Math.abs(this.y - vector.y) > threshold) {\n            return false\n        }\n\n        if (Math.abs(this.z - vector.z) > threshold) {\n            return false\n        }\n\n        return true\n    }\n\n    length(): number {\n        return Math.sqrt(this.squaredLength())\n    }\n\n    squaredLength(): number {\n        const x = this.x\n        const y = this.y\n        const z = this.z\n\n        return (x * x + y * y + z * z)\n    }\n\n    add(vector: vec3): vec3 {\n        this.x += vector.x\n        this.y += vector.y\n        this.z += vector.z\n\n        return this\n    }\n\n    subtract(vector: vec3): vec3 {\n        this.x -= vector.x\n        this.y -= vector.y\n        this.z -= vector.z\n\n        return this\n    }\n\n    multiply(vector: vec3): vec3 {\n        this.x *= vector.x\n        this.y *= vector.y\n        this.z *= vector.z\n\n        return this\n    }\n\n    divide(vector: vec3): vec3 {\n        this.x /= vector.x\n        this.y /= vector.y\n        this.z /= vector.z\n\n        return this\n    }\n\n    scale(value: number, dest?: vec3): vec3 {\n        if (!dest) { dest = this }\n\n        dest.x *= value\n        dest.y *= value\n        dest.z *= value\n\n        return dest\n    }\n\n    normalize(dest?: vec3): vec3 {\n        if (!dest) { dest = this }\n\n        let length = this.length()\n\n        if (length === 1) {\n            return this\n        }\n\n        if (length === 0) {\n            dest.x = 0\n            dest.y = 0\n            dest.z = 0\n\n            return dest\n        }\n\n        length = 1.0 / length\n\n        dest.x *= length\n        dest.y *= length\n        dest.z *= length\n\n        return dest\n    }\n\n    multiplyByMat3(matrix: mat3, dest?: vec3): vec3 {\n        if (!dest) { dest = this }\n\n        return matrix.multiplyVec3(this, dest)\n    }\n\n    multiplyByQuat(quaternion: quat, dest?: vec3): vec3 {\n        if (!dest) { dest = this }\n\n        return quaternion.multiplyVec3(this, dest)\n    }\n\n    toQuat(dest?: quat): quat {\n        if (!dest) { dest = new quat() }\n\n        const c = new vec3()\n        const s = new vec3()\n\n        c.x = Math.cos(this.x * 0.5)\n        s.x = Math.sin(this.x * 0.5)\n\n        c.y = Math.cos(this.y * 0.5)\n        s.y = Math.sin(this.y * 0.5)\n\n        c.z = Math.cos(this.z * 0.5)\n        s.z = Math.sin(this.z * 0.5)\n\n        dest.x = s.x * c.y * c.z - c.x * s.y * s.z\n        dest.y = c.x * s.y * c.z + s.x * c.y * s.z\n        dest.z = c.x * c.y * s.z - s.x * s.y * c.z\n        dest.w = c.x * c.y * c.z + s.x * s.y * s.z\n\n        return dest\n    }\n\n    static cross(vector: vec3, vector2: vec3, dest?: vec3): vec3 {\n        if (!dest) { dest = new vec3() }\n\n        const x = vector.x\n        const y = vector.y\n        const z = vector.z\n\n        const x2 = vector2.x\n        const y2 = vector2.y\n        const z2 = vector2.z\n\n        dest.x = y * z2 - z * y2\n        dest.y = z * x2 - x * z2\n        dest.z = x * y2 - y * x2\n\n        return dest\n    }\n\n    static dot(vector: vec3, vector2: vec3): number {\n        const x = vector.x\n        const y = vector.y\n        const z = vector.z\n\n        const x2 = vector2.x\n        const y2 = vector2.y\n        const z2 = vector2.z\n\n        return (x * x2 + y * y2 + z * z2)\n    }\n\n    static distance(vector: vec3, vector2: vec3): number {\n        const x = vector2.x - vector.x\n        const y = vector2.y - vector.y\n        const z = vector2.z - vector.z\n\n        return Math.sqrt(this.squaredDistance(vector, vector2))\n    }\n\n    static squaredDistance(vector: vec3, vector2: vec3): number {\n        const x = vector2.x - vector.x\n        const y = vector2.y - vector.y\n        const z = vector2.z - vector.z\n\n        return (x * x + y * y + z * z)\n    }\n\n    static direction(vector: vec3, vector2: vec3, dest?: vec3): vec3 {\n        if (!dest) { dest = new vec3() }\n\n        const x = vector.x - vector2.x\n        const y = vector.y - vector2.y\n        const z = vector.z - vector2.z\n\n        let length = Math.sqrt(x * x + y * y + z * z)\n\n        if (length === 0) {\n            dest.x = 0\n            dest.y = 0\n            dest.z = 0\n\n            return dest\n        }\n\n        length = 1 / length\n\n        dest.x = x * length\n        dest.y = y * length\n        dest.z = z * length\n\n        return dest\n    }\n\n    static mix(vector: vec3, vector2: vec3, time: number, dest?: vec3): vec3 {\n        if (!dest) { dest = new vec3() }\n\n        dest.x = vector.x + time * (vector2.x - vector.x)\n        dest.y = vector.y + time * (vector2.y - vector.y)\n        dest.z = vector.z + time * (vector2.z - vector.z)\n\n        return dest\n    }\n\n    static sum(vector: vec3, vector2: vec3, dest?: vec3): vec3 {\n        if (!dest) { dest = new vec3() }\n\n        dest.x = vector.x + vector2.x\n        dest.y = vector.y + vector2.y\n        dest.z = vector.z + vector2.z\n\n        return dest\n    }\n\n    static difference(vector: vec3, vector2: vec3, dest?: vec3): vec3 {\n        if (!dest) { dest = new vec3() }\n\n        dest.x = vector.x - vector2.x\n        dest.y = vector.y - vector2.y\n        dest.z = vector.z - vector2.z\n\n        return dest\n    }\n\n    static product(vector: vec3, vector2: vec3, dest?: vec3): vec3 {\n        if (!dest) { dest = new vec3() }\n\n        dest.x = vector.x * vector2.x\n        dest.y = vector.y * vector2.y\n        dest.z = vector.z * vector2.z\n\n        return dest\n    }\n\n    static quotient(vector: vec3, vector2: vec3, dest?: vec3): vec3 {\n        if (!dest) { dest = new vec3() }\n\n        dest.x = vector.x / vector2.x\n        dest.y = vector.y / vector2.y\n        dest.z = vector.z / vector2.z\n\n        return dest\n    }\n}\n","import mat4 from './mat4'\n\nimport { epsilon } from './constants'\n\nexport default class vec4 {\n\n    get x(): number {\n        return this.values[0]\n    }\n\n    get y(): number {\n        return this.values[1]\n    }\n\n    get z(): number {\n        return this.values[2]\n    }\n\n    get w(): number {\n        return this.values[3]\n    }\n\n    get xy(): [number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n        ]\n    }\n\n    get xyz(): [number, number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n            this.values[2],\n        ]\n    }\n\n    get xyzw(): [number, number, number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n            this.values[2],\n            this.values[3],\n        ]\n    }\n\n    set x(value: number) {\n        this.values[0] = value\n    }\n\n    set y(value: number) {\n        this.values[1] = value\n    }\n\n    set z(value: number) {\n        this.values[2] = value\n    }\n\n    set w(value: number) {\n        this.values[3] = value\n    }\n\n    set xy(values: [number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n    }\n\n    set xyz(values: [number, number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n        this.values[2] = values[2]\n    }\n\n    set xyzw(values: [number, number, number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n        this.values[2] = values[2]\n        this.values[3] = values[3]\n    }\n\n    get r(): number {\n        return this.values[0]\n    }\n\n    get g(): number {\n        return this.values[1]\n    }\n\n    get b(): number {\n        return this.values[2]\n    }\n\n    get a(): number {\n        return this.values[3]\n    }\n\n    get rg(): [number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n        ]\n    }\n\n    get rgb(): [number, number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n            this.values[2],\n        ]\n    }\n\n    get rgba(): [number, number, number, number] {\n        return [\n            this.values[0],\n            this.values[1],\n            this.values[2],\n            this.values[3],\n        ]\n    }\n\n    set r(value: number) {\n        this.values[0] = value\n    }\n\n    set g(value: number) {\n        this.values[1] = value\n    }\n\n    set b(value: number) {\n        this.values[2] = value\n    }\n\n    set a(value: number) {\n        this.values[3] = value\n    }\n\n    set rg(values: [number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n    }\n\n    set rgb(values: [number, number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n        this.values[2] = values[2]\n    }\n\n    set rgba(values: [number, number, number, number]) {\n        this.values[0] = values[0]\n        this.values[1] = values[1]\n        this.values[2] = values[2]\n        this.values[3] = values[3]\n    }\n\n    constructor(values?: [number, number, number, number]) {\n        if (values !== undefined) {\n            this.xyzw = values\n        }\n    }\n\n    private values = new Float32Array(4)\n\n    static readonly zero = new vec4([0, 0, 0, 1])\n    static readonly one = new vec4([1, 1, 1, 1])\n\n    at(index: number): number {\n        return this.values[index]\n    }\n\n    reset(): void {\n        this.x = 0\n        this.y = 0\n        this.z = 0\n        this.w = 0\n    }\n\n    copy(dest?: vec4): vec4 {\n        if (!dest) { dest = new vec4() }\n\n        dest.x = this.x\n        dest.y = this.y\n        dest.z = this.z\n        dest.w = this.w\n\n        return dest\n    }\n\n    negate(dest?: vec4): vec4 {\n        if (!dest) { dest = this }\n\n        dest.x = -this.x\n        dest.y = -this.y\n        dest.z = -this.z\n        dest.w = -this.w\n\n        return dest\n    }\n\n    equals(vector: vec4, threshold = epsilon): boolean {\n        if (Math.abs(this.x - vector.x) > threshold) {\n            return false\n        }\n\n        if (Math.abs(this.y - vector.y) > threshold) {\n            return false\n        }\n\n        if (Math.abs(this.z - vector.z) > threshold) {\n            return false\n        }\n\n        if (Math.abs(this.w - vector.w) > threshold) {\n            return false\n        }\n\n        return true\n    }\n\n    length(): number {\n        return Math.sqrt(this.squaredLength())\n    }\n\n    squaredLength(): number {\n        const x = this.x\n        const y = this.y\n        const z = this.z\n        const w = this.w\n\n        return (x * x + y * y + z * z + w * w)\n    }\n\n    add(vector: vec4): vec4 {\n        this.x += vector.x\n        this.y += vector.y\n        this.z += vector.z\n        this.w += vector.w\n\n        return this\n    }\n\n    subtract(vector: vec4): vec4 {\n        this.x -= vector.x\n        this.y -= vector.y\n        this.z -= vector.z\n        this.w -= vector.w\n\n        return this\n    }\n\n    multiply(vector: vec4): vec4 {\n        this.x *= vector.x\n        this.y *= vector.y\n        this.z *= vector.z\n        this.w *= vector.w\n\n        return this\n    }\n\n    divide(vector: vec4): vec4 {\n        this.x /= vector.x\n        this.y /= vector.y\n        this.z /= vector.z\n        this.w /= vector.w\n\n        return this\n    }\n\n    scale(value: number, dest?: vec4): vec4 {\n        if (!dest) { dest = this }\n\n        dest.x *= value\n        dest.y *= value\n        dest.z *= value\n        dest.w *= value\n\n        return dest\n    }\n\n    normalize(dest?: vec4): vec4 {\n        if (!dest) { dest = this }\n\n        let length = this.length()\n\n        if (length === 1) {\n            return this\n        }\n\n        if (length === 0) {\n            dest.x *= 0\n            dest.y *= 0\n            dest.z *= 0\n            dest.w *= 0\n\n            return dest\n        }\n\n        length = 1.0 / length\n\n        dest.x *= length\n        dest.y *= length\n        dest.z *= length\n        dest.w *= length\n\n        return dest\n    }\n\n    multiplyMat4(matrix: mat4, dest?: vec4): vec4 {\n        if (!dest) { dest = this }\n\n        return matrix.multiplyVec4(this, dest)\n    }\n\n    static mix(vector: vec4, vector2: vec4, time: number, dest?: vec4): vec4 {\n        if (!dest) { dest = new vec4() }\n\n        dest.x = vector.x + time * (vector2.x - vector.x)\n        dest.y = vector.y + time * (vector2.y - vector.y)\n        dest.z = vector.z + time * (vector2.z - vector.z)\n        dest.w = vector.w + time * (vector2.w - vector.w)\n\n        return dest\n    }\n\n    static sum(vector: vec4, vector2: vec4, dest?: vec4): vec4 {\n        if (!dest) { dest = new vec4() }\n\n        dest.x = vector.x + vector2.x\n        dest.y = vector.y + vector2.y\n        dest.z = vector.z + vector2.z\n        dest.w = vector.w + vector2.w\n\n        return dest\n    }\n\n    static difference(vector: vec4, vector2: vec4, dest?: vec4): vec4 {\n        if (!dest) { dest = new vec4() }\n\n        dest.x = vector.x - vector2.x\n        dest.y = vector.y - vector2.y\n        dest.z = vector.z - vector2.z\n        dest.w = vector.w - vector2.w\n\n        return dest\n    }\n\n    static product(vector: vec4, vector2: vec4, dest?: vec4): vec4 {\n        if (!dest) { dest = new vec4() }\n\n        dest.x = vector.x * vector2.x\n        dest.y = vector.y * vector2.y\n        dest.z = vector.z * vector2.z\n        dest.w = vector.w * vector2.w\n\n        return dest\n    }\n\n    static quotient(vector: vec4, vector2: vec4, dest?: vec4): vec4 {\n        if (!dest) { dest = new vec4() }\n\n        dest.x = vector.x / vector2.x\n        dest.y = vector.y / vector2.y\n        dest.z = vector.z / vector2.z\n        dest.w = vector.w / vector2.w\n\n        return dest\n    }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\nimport { ImageFilter } from 'src/app/util/image-filter';\n\nImageFilter.init();\n\nwindow.addEventListener('contextmenu', e => e.preventDefault());\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));"]}